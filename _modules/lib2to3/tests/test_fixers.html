

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>lib2to3.tests.test_fixers &mdash; ArcherBashPYDocs 1.0.0. documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ArcherBashPYDocs 1.0.0. documentation" href="../../../index.html"/>
        <link rel="up" title="Module code" href="../../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../../index.html" class="fa fa-home"> ArcherBashPYDocs</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="simple">
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">ArcherBashPYDocs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Module code</a> &raquo;</li>
      
    <li>lib2to3.tests.test_fixers</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for lib2to3.tests.test_fixers</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot; Test suite for the fixer modules &quot;&quot;&quot;</span>

<span class="c"># Python imports</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>
<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>

<span class="c"># Local imports</span>
<span class="kn">from</span> <span class="nn">lib2to3</span> <span class="kn">import</span> <span class="n">pygram</span><span class="p">,</span> <span class="n">pytree</span><span class="p">,</span> <span class="n">refactor</span><span class="p">,</span> <span class="n">fixer_util</span>
<span class="kn">from</span> <span class="nn">lib2to3.tests</span> <span class="kn">import</span> <span class="n">support</span>


<div class="viewcode-block" id="FixerTestCase"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.FixerTestCase">[docs]</a><span class="k">class</span> <span class="nc">FixerTestCase</span><span class="p">(</span><span class="n">support</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="c"># Other test cases can subclass this class and replace &quot;fixer_pkg&quot; with</span>
    <span class="c"># their own.</span>
<div class="viewcode-block" id="FixerTestCase.setUp"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.FixerTestCase.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fix_list</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fixer_pkg</span><span class="o">=</span><span class="s">&quot;lib2to3&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fix_list</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">fix_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fixer</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refactor</span> <span class="o">=</span> <span class="n">support</span><span class="o">.</span><span class="n">get_refactorer</span><span class="p">(</span><span class="n">fixer_pkg</span><span class="p">,</span> <span class="n">fix_list</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fixer_log</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="s">&quot;&lt;string&gt;&quot;</span>

        <span class="k">for</span> <span class="n">fixer</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refactor</span><span class="o">.</span><span class="n">pre_order</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">refactor</span><span class="o">.</span><span class="n">post_order</span><span class="p">):</span>
            <span class="n">fixer</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixer_log</span>
</div>
    <span class="k">def</span> <span class="nf">_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">before</span><span class="p">,</span> <span class="n">after</span><span class="p">):</span>
        <span class="n">before</span> <span class="o">=</span> <span class="n">support</span><span class="o">.</span><span class="n">reformat</span><span class="p">(</span><span class="n">before</span><span class="p">)</span>
        <span class="n">after</span> <span class="o">=</span> <span class="n">support</span><span class="o">.</span><span class="n">reformat</span><span class="p">(</span><span class="n">after</span><span class="p">)</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">refactor</span><span class="o">.</span><span class="n">refactor_string</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">after</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">tree</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">tree</span>

<div class="viewcode-block" id="FixerTestCase.check"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.FixerTestCase.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">before</span><span class="p">,</span> <span class="n">after</span><span class="p">,</span> <span class="n">ignore_warnings</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">after</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">was_changed</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ignore_warnings</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fixer_log</span><span class="p">,</span> <span class="p">[])</span>
</div>
<div class="viewcode-block" id="FixerTestCase.warns"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.FixerTestCase.warns">[docs]</a>    <span class="k">def</span> <span class="nf">warns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">before</span><span class="p">,</span> <span class="n">after</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">unchanged</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">after</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fixer_log</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">unchanged</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">was_changed</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="FixerTestCase.warns_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.FixerTestCase.warns_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">warns_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">before</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">before</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">unchanged</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="FixerTestCase.unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.FixerTestCase.unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">before</span><span class="p">,</span> <span class="n">ignore_warnings</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">before</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ignore_warnings</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fixer_log</span><span class="p">,</span> <span class="p">[])</span>
</div>
<div class="viewcode-block" id="FixerTestCase.assert_runs_after"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.FixerTestCase.assert_runs_after">[docs]</a>    <span class="k">def</span> <span class="nf">assert_runs_after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">names</span><span class="p">):</span>
        <span class="n">fixes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fixer</span><span class="p">]</span>
        <span class="n">fixes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">support</span><span class="o">.</span><span class="n">get_refactorer</span><span class="p">(</span><span class="s">&quot;lib2to3&quot;</span><span class="p">,</span> <span class="n">fixes</span><span class="p">)</span>
        <span class="p">(</span><span class="n">pre</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">get_fixers</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="s">&quot;fix_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixer</span>
        <span class="k">if</span> <span class="n">post</span> <span class="ow">and</span> <span class="n">post</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__module__</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="c"># We&#39;re the last fixer to run</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">pre</span> <span class="ow">and</span> <span class="n">pre</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__module__</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">post</span><span class="p">:</span>
            <span class="c"># We&#39;re the last in pre and post is empty</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Fixer run order (</span><span class="si">%s</span><span class="s">) is incorrect; </span><span class="si">%s</span><span class="s"> should be last.&quot;</span>\
               <span class="o">%</span><span class="p">(</span><span class="s">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__module__</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">pre</span><span class="o">+</span><span class="n">post</span><span class="p">)]),</span> <span class="n">n</span><span class="p">))</span>
</div></div>
<div class="viewcode-block" id="Test_ne"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_ne">[docs]</a><span class="k">class</span> <span class="nc">Test_ne</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;ne&quot;</span>

<div class="viewcode-block" id="Test_ne.test_basic"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_ne.test_basic">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if x &lt;&gt; y:</span>
<span class="s">            pass&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if x != y:</span>
<span class="s">            pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_ne.test_no_spaces"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_ne.test_no_spaces">[docs]</a>    <span class="k">def</span> <span class="nf">test_no_spaces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if x&lt;&gt;y:</span>
<span class="s">            pass&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if x!=y:</span>
<span class="s">            pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_ne.test_chained"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_ne.test_chained">[docs]</a>    <span class="k">def</span> <span class="nf">test_chained</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if x&lt;&gt;y&lt;&gt;z:</span>
<span class="s">            pass&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if x!=y!=z:</span>
<span class="s">            pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_has_key"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_has_key">[docs]</a><span class="k">class</span> <span class="nc">Test_has_key</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;has_key&quot;</span>

<div class="viewcode-block" id="Test_has_key.test_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_has_key.test_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = d.has_key(&quot;x&quot;) or d.has_key(&quot;y&quot;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = &quot;x&quot; in d or &quot;y&quot; in d&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_has_key.test_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_has_key.test_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = a.b.c.d.has_key(&quot;x&quot;) ** 3&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = (&quot;x&quot; in a.b.c.d) ** 3&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_has_key.test_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_has_key.test_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = a.b.has_key(1 + 2).__repr__()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = (1 + 2 in a.b).__repr__()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_has_key.test_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_has_key.test_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = a.b.has_key(1 + 2).__repr__() ** -3 ** 4&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = (1 + 2 in a.b).__repr__() ** -3 ** 4&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_has_key.test_5"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_has_key.test_5">[docs]</a>    <span class="k">def</span> <span class="nf">test_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = a.has_key(f or g)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = (f or g) in a&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_has_key.test_6"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_has_key.test_6">[docs]</a>    <span class="k">def</span> <span class="nf">test_6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = a + b.has_key(c)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = a + (c in b)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_has_key.test_7"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_has_key.test_7">[docs]</a>    <span class="k">def</span> <span class="nf">test_7</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = a.has_key(lambda: 12)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = (lambda: 12) in a&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_has_key.test_8"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_has_key.test_8">[docs]</a>    <span class="k">def</span> <span class="nf">test_8</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = a.has_key(a for a in b)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = (a for a in b) in a&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_has_key.test_9"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_has_key.test_9">[docs]</a>    <span class="k">def</span> <span class="nf">test_9</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if not a.has_key(b): pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if b not in a: pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_has_key.test_10"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_has_key.test_10">[docs]</a>    <span class="k">def</span> <span class="nf">test_10</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if not a.has_key(b).__repr__(): pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if not (b in a).__repr__(): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_has_key.test_11"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_has_key.test_11">[docs]</a>    <span class="k">def</span> <span class="nf">test_11</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if not a.has_key(b) ** 2: pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if not (b in a) ** 2: pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_apply"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply">[docs]</a><span class="k">class</span> <span class="nc">Test_apply</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;apply&quot;</span>

<div class="viewcode-block" id="Test_apply.test_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = apply(f, g + h)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = f(*g + h)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;y = apply(f, g, h)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;y = f(*g, **h)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;z = apply(fs[0], g or h, h or g)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;z = fs[0](*g or h, **h or g)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(f, (x, y) + t)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;f(*(x, y) + t)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_5"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_5">[docs]</a>    <span class="k">def</span> <span class="nf">test_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(f, args,)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;f(*args)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_6"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_6">[docs]</a>    <span class="k">def</span> <span class="nf">test_6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(f, args, kwds,)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;f(*args, **kwds)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

    <span class="c"># Test that complex functions are parenthesized</span>
</div>
<div class="viewcode-block" id="Test_apply.test_complex_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_complex_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_complex_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = apply(f+g, args)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = (f+g)(*args)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_complex_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_complex_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_complex_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = apply(f*g, args)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = (f*g)(*args)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_complex_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_complex_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_complex_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = apply(f**g, args)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = (f**g)(*args)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

    <span class="c"># But dotted names etc. not</span>
</div>
<div class="viewcode-block" id="Test_apply.test_dotted_name"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_dotted_name">[docs]</a>    <span class="k">def</span> <span class="nf">test_dotted_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = apply(f.g, args)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = f.g(*args)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_subscript"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_subscript">[docs]</a>    <span class="k">def</span> <span class="nf">test_subscript</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = apply(f[x], args)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = f[x](*args)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_call"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_call">[docs]</a>    <span class="k">def</span> <span class="nf">test_call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = apply(f(), args)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = f()(*args)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

    <span class="c"># Extreme case</span></div>
<div class="viewcode-block" id="Test_apply.test_extreme"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_extreme">[docs]</a>    <span class="k">def</span> <span class="nf">test_extreme</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = apply(a.b.c.d.e.f, args, kwds)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = a.b.c.d.e.f(*args, **kwds)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

    <span class="c"># XXX Comments in weird places still get lost</span></div>
<div class="viewcode-block" id="Test_apply.test_weird_comments"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_weird_comments">[docs]</a>    <span class="k">def</span> <span class="nf">test_weird_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(   # foo</span>
<span class="s">          f, # bar</span>
<span class="s">          args)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;f(*args)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

    <span class="c"># These should *not* be touched</span>
</div>
<div class="viewcode-block" id="Test_apply.test_unchanged_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_unchanged_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_unchanged_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_unchanged_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(f)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_unchanged_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_unchanged_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(f,)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_unchanged_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_unchanged_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(f, args, kwds, extras)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_unchanged_5"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_unchanged_5">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(f, *args, **kwds)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_unchanged_6"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_unchanged_6">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(f, *args)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_unchanged_7"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_unchanged_7">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_7</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(func=f, args=args, kwds=kwds)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_unchanged_8"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_unchanged_8">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_8</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(f, args=args, kwds=kwds)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_unchanged_9"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_unchanged_9">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_9</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(f, args, kwds=kwds)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_space_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_space_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_space_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(  f,  args,   kwds)&quot;&quot;&quot;</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;f(*args, **kwds)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_apply.test_space_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_apply.test_space_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_space_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;apply(  f  ,args,kwds   )&quot;&quot;&quot;</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;f(*args, **kwds)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_reload"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_reload">[docs]</a><span class="k">class</span> <span class="nc">Test_reload</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;reload&quot;</span>

<div class="viewcode-block" id="Test_reload.test"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_reload.test">[docs]</a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload(a)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import imp</span><span class="se">\n</span><span class="s">imp.reload(a)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_reload.test_comment"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_reload.test_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload( a ) # comment&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import imp</span><span class="se">\n</span><span class="s">imp.reload( a ) # comment&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="c"># PEP 8 comments</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload( a )  # comment&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import imp</span><span class="se">\n</span><span class="s">imp.reload( a )  # comment&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_reload.test_space"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_reload.test_space">[docs]</a>    <span class="k">def</span> <span class="nf">test_space</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload( a )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import imp</span><span class="se">\n</span><span class="s">imp.reload( a )&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload( a)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import imp</span><span class="se">\n</span><span class="s">imp.reload( a)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload(a )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import imp</span><span class="se">\n</span><span class="s">imp.reload(a )&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_reload.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_reload.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload(a=1)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload(f, g)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload(f, *h)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload(f, *h, **i)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload(f, **i)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload(*h, **i)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload(*h)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload(**i)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reload()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_intern"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_intern">[docs]</a><span class="k">class</span> <span class="nc">Test_intern</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;intern&quot;</span>

<div class="viewcode-block" id="Test_intern.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_intern.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =   intern(  a  )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import sys</span><span class="se">\n</span><span class="s">x =   sys.intern(  a  )&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;y = intern(&quot;b&quot; # test</span>
<span class="s">              )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import sys</span><span class="se">\n</span><span class="s">y = sys.intern(&quot;b&quot; # test</span>
<span class="s">              )&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;z = intern(a+b+c.d,   )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import sys</span><span class="se">\n</span><span class="s">z = sys.intern(a+b+c.d,   )&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_intern.test"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_intern.test">[docs]</a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = intern(a)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import sys</span><span class="se">\n</span><span class="s">x = sys.intern(a)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;z = intern(a+b+c.d,)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import sys</span><span class="se">\n</span><span class="s">z = sys.intern(a+b+c.d,)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;intern(&quot;y</span><span class="si">%s</span><span class="s">&quot; % 5).replace(&quot;y&quot;, &quot;&quot;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import sys</span><span class="se">\n</span><span class="s">sys.intern(&quot;y</span><span class="si">%s</span><span class="s">&quot; % 5).replace(&quot;y&quot;, &quot;&quot;)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

    <span class="c"># These should not be refactored</span>
</div>
<div class="viewcode-block" id="Test_intern.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_intern.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;intern(a=1)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;intern(f, g)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;intern(*h)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;intern(**i)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;intern()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_reduce"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_reduce">[docs]</a><span class="k">class</span> <span class="nc">Test_reduce</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;reduce&quot;</span>

<div class="viewcode-block" id="Test_reduce.test_simple_call"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_reduce.test_simple_call">[docs]</a>    <span class="k">def</span> <span class="nf">test_simple_call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;reduce(a, b, c)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from functools import reduce</span><span class="se">\n</span><span class="s">reduce(a, b, c)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_reduce.test_bug_7253"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_reduce.test_bug_7253">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_7253</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># fix_tuple_params was being bad and orphaning nodes in the tree.</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;def x(arg): reduce(sum, [])&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from functools import reduce</span><span class="se">\n</span><span class="s">def x(arg): reduce(sum, [])&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_reduce.test_call_with_lambda"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_reduce.test_call_with_lambda">[docs]</a>    <span class="k">def</span> <span class="nf">test_call_with_lambda</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;reduce(lambda x, y: x + y, seq)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from functools import reduce</span><span class="se">\n</span><span class="s">reduce(lambda x, y: x + y, seq)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_reduce.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_reduce.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;reduce(a)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;reduce(a, b=42)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;reduce(a, b, c, d)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;reduce(**c)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;reduce()&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_print"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print">[docs]</a><span class="k">class</span> <span class="nc">Test_print</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;print&quot;</span>

<div class="viewcode-block" id="Test_print.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print 1,   1+1,   1+1+1&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(1,   1+1,   1+1+1)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_idempotency"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_idempotency">[docs]</a>    <span class="k">def</span> <span class="nf">test_idempotency</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(&#39;&#39;)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_idempotency_print_as_function"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_idempotency_print_as_function">[docs]</a>    <span class="k">def</span> <span class="nf">test_idempotency_print_as_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refactor</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">grammar</span> <span class="o">=</span> <span class="n">pygram</span><span class="o">.</span><span class="n">python_grammar_no_print_statement</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(1, 1+1, 1+1+1)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(&#39;&#39;)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print 1, 1+1, 1+1+1&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(1, 1+1, 1+1+1)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print 1, 2&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(1, 2)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># from bug 3000</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print whatever; print&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(whatever); print()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_5"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_5">[docs]</a>    <span class="k">def</span> <span class="nf">test_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print; print whatever;&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(); print(whatever);&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_tuple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_tuple">[docs]</a>    <span class="k">def</span> <span class="nf">test_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print (a, b, c)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print((a, b, c))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

    <span class="c"># trailing commas</span>
</div>
<div class="viewcode-block" id="Test_print.test_trailing_comma_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_trailing_comma_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_trailing_comma_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print 1, 2, 3,&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(1, 2, 3, end=&#39; &#39;)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_trailing_comma_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_trailing_comma_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_trailing_comma_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print 1, 2,&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(1, 2, end=&#39; &#39;)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_trailing_comma_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_trailing_comma_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_trailing_comma_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print 1,&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(1, end=&#39; &#39;)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

    <span class="c"># &gt;&gt; stuff</span>
</div>
<div class="viewcode-block" id="Test_print.test_vargs_without_trailing_comma"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_vargs_without_trailing_comma">[docs]</a>    <span class="k">def</span> <span class="nf">test_vargs_without_trailing_comma</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print &gt;&gt;sys.stderr, 1, 2, 3&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(1, 2, 3, file=sys.stderr)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_with_trailing_comma"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_with_trailing_comma">[docs]</a>    <span class="k">def</span> <span class="nf">test_with_trailing_comma</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print &gt;&gt;sys.stderr, 1, 2,&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(1, 2, end=&#39; &#39;, file=sys.stderr)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_no_trailing_comma"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_no_trailing_comma">[docs]</a>    <span class="k">def</span> <span class="nf">test_no_trailing_comma</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print &gt;&gt;sys.stderr, 1+1&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(1+1, file=sys.stderr)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_spaces_before_file"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_spaces_before_file">[docs]</a>    <span class="k">def</span> <span class="nf">test_spaces_before_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print &gt;&gt;  sys.stderr&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;print(file=sys.stderr)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_print.test_with_future_print_function"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_print.test_with_future_print_function">[docs]</a>    <span class="k">def</span> <span class="nf">test_with_future_print_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;from __future__ import print_function</span><span class="se">\n</span><span class="s">&quot;</span> \
            <span class="s">&quot;print(&#39;Hai!&#39;, end=&#39; &#39;)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;print &#39;Hello, world!&#39;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;print(&#39;Hello, world!&#39;)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_exec"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exec">[docs]</a><span class="k">class</span> <span class="nc">Test_exec</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;exec&quot;</span>

<div class="viewcode-block" id="Test_exec.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exec.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;  exec code in ns1,   ns2&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;  exec(code, ns1,   ns2)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_exec.test_basic"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exec.test_basic">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec code&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(code)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_exec.test_with_globals"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exec.test_with_globals">[docs]</a>    <span class="k">def</span> <span class="nf">test_with_globals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec code in ns&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(code, ns)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_exec.test_with_globals_locals"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exec.test_with_globals_locals">[docs]</a>    <span class="k">def</span> <span class="nf">test_with_globals_locals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec code in ns1, ns2&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(code, ns1, ns2)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_exec.test_complex_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exec.test_complex_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_complex_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec (a.b()) in ns&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec((a.b()), ns)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_exec.test_complex_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exec.test_complex_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_complex_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec a.b() + c in ns&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(a.b() + c, ns)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

    <span class="c"># These should not be touched</span>
</div>
<div class="viewcode-block" id="Test_exec.test_unchanged_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exec.test_unchanged_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(code)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_exec.test_unchanged_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exec.test_unchanged_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec (code)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_exec.test_unchanged_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exec.test_unchanged_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(code, ns)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_exec.test_unchanged_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exec.test_unchanged_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(code, ns1, ns2)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_repr"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_repr">[docs]</a><span class="k">class</span> <span class="nc">Test_repr</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;repr&quot;</span>

<div class="viewcode-block" id="Test_repr.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_repr.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =   `1 + 2`&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =   repr(1 + 2)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_repr.test_simple_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_repr.test_simple_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_simple_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = `1 + 2`&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = repr(1 + 2)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_repr.test_simple_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_repr.test_simple_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_simple_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;y = `x`&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;y = repr(x)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_repr.test_complex"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_repr.test_complex">[docs]</a>    <span class="k">def</span> <span class="nf">test_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;z = `y`.__repr__()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;z = repr(y).__repr__()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_repr.test_tuple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_repr.test_tuple">[docs]</a>    <span class="k">def</span> <span class="nf">test_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = `1, 2, 3`&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = repr((1, 2, 3))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_repr.test_nested"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_repr.test_nested">[docs]</a>    <span class="k">def</span> <span class="nf">test_nested</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = `1 + `2``&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = repr(1 + repr(2))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_repr.test_nested_tuples"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_repr.test_nested_tuples">[docs]</a>    <span class="k">def</span> <span class="nf">test_nested_tuples</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = `1, 2 + `3, 4``&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = repr((1, 2 + repr((3, 4))))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_except"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except">[docs]</a><span class="k">class</span> <span class="nc">Test_except</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;except&quot;</span>

<div class="viewcode-block" id="Test_except.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except (RuntimeError, ImportError),    e:</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except (RuntimeError, ImportError) as    e:</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_simple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Foo, e:</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Foo as e:</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_simple_no_space_before_target"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_simple_no_space_before_target">[docs]</a>    <span class="k">def</span> <span class="nf">test_simple_no_space_before_target</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Foo,e:</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Foo as e:</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_tuple_unpack"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_tuple_unpack">[docs]</a>    <span class="k">def</span> <span class="nf">test_tuple_unpack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo():</span>
<span class="s">                try:</span>
<span class="s">                    pass</span>
<span class="s">                except Exception, (f, e):</span>
<span class="s">                    pass</span>
<span class="s">                except ImportError, e:</span>
<span class="s">                    pass&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo():</span>
<span class="s">                try:</span>
<span class="s">                    pass</span>
<span class="s">                except Exception as xxx_todo_changeme:</span>
<span class="s">                    (f, e) = xxx_todo_changeme.args</span>
<span class="s">                    pass</span>
<span class="s">                except ImportError as e:</span>
<span class="s">                    pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_multi_class"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_multi_class">[docs]</a>    <span class="k">def</span> <span class="nf">test_multi_class</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except (RuntimeError, ImportError), e:</span>
<span class="s">                pass&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except (RuntimeError, ImportError) as e:</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_list_unpack"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_list_unpack">[docs]</a>    <span class="k">def</span> <span class="nf">test_list_unpack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Exception, [a, b]:</span>
<span class="s">                pass&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Exception as xxx_todo_changeme:</span>
<span class="s">                [a, b] = xxx_todo_changeme.args</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_weird_target_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_weird_target_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_weird_target_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Exception, d[5]:</span>
<span class="s">                pass&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Exception as xxx_todo_changeme:</span>
<span class="s">                d[5] = xxx_todo_changeme</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_weird_target_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_weird_target_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_weird_target_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Exception, a.foo:</span>
<span class="s">                pass&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Exception as xxx_todo_changeme:</span>
<span class="s">                a.foo = xxx_todo_changeme</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_weird_target_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_weird_target_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_weird_target_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Exception, a().foo:</span>
<span class="s">                pass&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Exception as xxx_todo_changeme:</span>
<span class="s">                a().foo = xxx_todo_changeme</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_bare_except"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_bare_except">[docs]</a>    <span class="k">def</span> <span class="nf">test_bare_except</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Exception, a:</span>
<span class="s">                pass</span>
<span class="s">            except:</span>
<span class="s">                pass&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Exception as a:</span>
<span class="s">                pass</span>
<span class="s">            except:</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_bare_except_and_else_finally"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_bare_except_and_else_finally">[docs]</a>    <span class="k">def</span> <span class="nf">test_bare_except_and_else_finally</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Exception, a:</span>
<span class="s">                pass</span>
<span class="s">            except:</span>
<span class="s">                pass</span>
<span class="s">            else:</span>
<span class="s">                pass</span>
<span class="s">            finally:</span>
<span class="s">                pass&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Exception as a:</span>
<span class="s">                pass</span>
<span class="s">            except:</span>
<span class="s">                pass</span>
<span class="s">            else:</span>
<span class="s">                pass</span>
<span class="s">            finally:</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_multi_fixed_excepts_before_bare_except"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_multi_fixed_excepts_before_bare_except">[docs]</a>    <span class="k">def</span> <span class="nf">test_multi_fixed_excepts_before_bare_except</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except TypeError, b:</span>
<span class="s">                pass</span>
<span class="s">            except Exception, a:</span>
<span class="s">                pass</span>
<span class="s">            except:</span>
<span class="s">                pass&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except TypeError as b:</span>
<span class="s">                pass</span>
<span class="s">            except Exception as a:</span>
<span class="s">                pass</span>
<span class="s">            except:</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_one_line_suites"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_one_line_suites">[docs]</a>    <span class="k">def</span> <span class="nf">test_one_line_suites</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try: raise TypeError</span>
<span class="s">            except TypeError, e:</span>
<span class="s">                pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try: raise TypeError</span>
<span class="s">            except TypeError as e:</span>
<span class="s">                pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                raise TypeError</span>
<span class="s">            except TypeError, e: pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                raise TypeError</span>
<span class="s">            except TypeError as e: pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try: raise TypeError</span>
<span class="s">            except TypeError, e: pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try: raise TypeError</span>
<span class="s">            except TypeError as e: pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try: raise TypeError</span>
<span class="s">            except TypeError, e: pass</span>
<span class="s">            else: function()</span>
<span class="s">            finally: done()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try: raise TypeError</span>
<span class="s">            except TypeError as e: pass</span>
<span class="s">            else: function()</span>
<span class="s">            finally: done()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

    <span class="c"># These should not be touched:</span>
</div>
<div class="viewcode-block" id="Test_except.test_unchanged_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_unchanged_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except:</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_unchanged_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_unchanged_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except Exception:</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_except.test_unchanged_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_except.test_unchanged_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                pass</span>
<span class="s">            except (Exception, SystemExit):</span>
<span class="s">                pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_raise"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise">[docs]</a><span class="k">class</span> <span class="nc">Test_raise</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;raise&quot;</span>

<div class="viewcode-block" id="Test_raise.test_basic"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_basic">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise Exception, 5&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise Exception(5)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise Exception,5&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise Exception(5)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise   Exception,    5&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise   Exception(5)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_with_comments"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_with_comments">[docs]</a>    <span class="k">def</span> <span class="nf">test_with_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise Exception, 5 # foo&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise Exception(5) # foo&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise E, (5, 6) % (a, b) # foo&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise E((5, 6) % (a, b)) # foo&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    raise Exception, 5, 6 # foo&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    raise Exception(5).with_traceback(6) # foo&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_None_value"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_None_value">[docs]</a>    <span class="k">def</span> <span class="nf">test_None_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise Exception(5), None, tb&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise Exception(5).with_traceback(tb)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_tuple_value"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_tuple_value">[docs]</a>    <span class="k">def</span> <span class="nf">test_tuple_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise Exception, (5, 6, 7)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise Exception(5, 6, 7)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_tuple_detection"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_tuple_detection">[docs]</a>    <span class="k">def</span> <span class="nf">test_tuple_detection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise E, (5, 6) % (a, b)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise E((5, 6) % (a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_tuple_exc_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_tuple_exc_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_tuple_exc_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise (((E1, E2), E3), E4), V&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise E1(V)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_tuple_exc_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_tuple_exc_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_tuple_exc_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise (E1, (E2, E3), E4), V&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise E1(V)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

    <span class="c"># These should produce a warning</span>
</div>
<div class="viewcode-block" id="Test_raise.test_string_exc"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_string_exc">[docs]</a>    <span class="k">def</span> <span class="nf">test_string_exc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise &#39;foo&#39;&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Python 3 does not support string exceptions&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_string_exc_val"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_string_exc_val">[docs]</a>    <span class="k">def</span> <span class="nf">test_string_exc_val</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise &quot;foo&quot;, 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Python 3 does not support string exceptions&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_string_exc_val_tb"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_string_exc_val_tb">[docs]</a>    <span class="k">def</span> <span class="nf">test_string_exc_val_tb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;raise &quot;foo&quot;, 5, 6&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Python 3 does not support string exceptions&quot;</span><span class="p">)</span>

    <span class="c"># These should result in traceback-assignment</span>
</div>
<div class="viewcode-block" id="Test_raise.test_tb_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_tb_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    raise Exception, 5, 6&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    raise Exception(5).with_traceback(6)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_tb_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_tb_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    raise Exception, 5, 6</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    raise Exception(5).with_traceback(6)</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_tb_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_tb_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    raise Exception,5,6&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    raise Exception(5).with_traceback(6)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_tb_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_tb_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    raise Exception,5,6</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    raise Exception(5).with_traceback(6)</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_tb_5"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_tb_5">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    raise Exception, (5, 6, 7), 6&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    raise Exception(5, 6, 7).with_traceback(6)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raise.test_tb_6"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raise.test_tb_6">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    raise Exception, (5, 6, 7), 6</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    raise Exception(5, 6, 7).with_traceback(6)</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_throw"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw">[docs]</a><span class="k">class</span> <span class="nc">Test_throw</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;throw&quot;</span>

<div class="viewcode-block" id="Test_throw.test_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;g.throw(Exception, 5)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;g.throw(Exception(5))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;g.throw(Exception,5)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;g.throw(Exception(5))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;g.throw(Exception, (5, 6, 7))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;g.throw(Exception(5, 6, 7))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;5 + g.throw(Exception, 5)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;5 + g.throw(Exception(5))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

    <span class="c"># These should produce warnings</span>
</div>
<div class="viewcode-block" id="Test_throw.test_warn_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_warn_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_warn_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;g.throw(&quot;foo&quot;)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Python 3 does not support string exceptions&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_warn_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_warn_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_warn_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;g.throw(&quot;foo&quot;, 5)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Python 3 does not support string exceptions&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_warn_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_warn_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_warn_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;g.throw(&quot;foo&quot;, 5, 6)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Python 3 does not support string exceptions&quot;</span><span class="p">)</span>

    <span class="c"># These should not be touched</span>
</div>
<div class="viewcode-block" id="Test_throw.test_untouched_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_untouched_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_untouched_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;g.throw(Exception)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_untouched_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_untouched_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_untouched_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;g.throw(Exception(5, 6))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_untouched_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_untouched_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_untouched_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;5 + g.throw(Exception(5, 6))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

    <span class="c"># These should result in traceback-assignment</span>
</div>
<div class="viewcode-block" id="Test_throw.test_tb_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_tb_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    g.throw(Exception, 5, 6)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    g.throw(Exception(5).with_traceback(6))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_tb_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_tb_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    g.throw(Exception, 5, 6)</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    g.throw(Exception(5).with_traceback(6))</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_tb_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_tb_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    g.throw(Exception,5,6)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    g.throw(Exception(5).with_traceback(6))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_tb_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_tb_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    g.throw(Exception,5,6)</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    g.throw(Exception(5).with_traceback(6))</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_tb_5"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_tb_5">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    g.throw(Exception, (5, 6, 7), 6)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    g.throw(Exception(5, 6, 7).with_traceback(6))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_tb_6"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_tb_6">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    g.throw(Exception, (5, 6, 7), 6)</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    g.throw(Exception(5, 6, 7).with_traceback(6))</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_tb_7"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_tb_7">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_7</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a + g.throw(Exception, 5, 6)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a + g.throw(Exception(5).with_traceback(6))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_throw.test_tb_8"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_throw.test_tb_8">[docs]</a>    <span class="k">def</span> <span class="nf">test_tb_8</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    a + g.throw(Exception, 5, 6)</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo():</span>
<span class="s">                    a = 5</span>
<span class="s">                    a + g.throw(Exception(5).with_traceback(6))</span>
<span class="s">                    b = 6&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_long"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_long">[docs]</a><span class="k">class</span> <span class="nc">Test_long</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;long&quot;</span>

<div class="viewcode-block" id="Test_long.test_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_long.test_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = long(x)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = int(x)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_long.test_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_long.test_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;y = isinstance(x, long)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;y = isinstance(x, int)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_long.test_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_long.test_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;z = type(x) in (int, long)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;z = type(x) in (int, int)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_long.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_long.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;long = True&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;s.long = True&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def long(): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;class long(): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def f(long): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def f(g, long): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def f(x, long=True): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_long.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_long.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =   long(  x  )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =   int(  x  )&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_execfile"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_execfile">[docs]</a><span class="k">class</span> <span class="nc">Test_execfile</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;execfile&quot;</span>

<div class="viewcode-block" id="Test_execfile.test_conversion"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_execfile.test_conversion">[docs]</a>    <span class="k">def</span> <span class="nf">test_conversion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;execfile(&quot;fn&quot;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(compile(open(&quot;fn&quot;).read(), &quot;fn&quot;, &#39;exec&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;execfile(&quot;fn&quot;, glob)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(compile(open(&quot;fn&quot;).read(), &quot;fn&quot;, &#39;exec&#39;), glob)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;execfile(&quot;fn&quot;, glob, loc)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(compile(open(&quot;fn&quot;).read(), &quot;fn&quot;, &#39;exec&#39;), glob, loc)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;execfile(&quot;fn&quot;, globals=glob)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(compile(open(&quot;fn&quot;).read(), &quot;fn&quot;, &#39;exec&#39;), globals=glob)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;execfile(&quot;fn&quot;, locals=loc)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(compile(open(&quot;fn&quot;).read(), &quot;fn&quot;, &#39;exec&#39;), locals=loc)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;execfile(&quot;fn&quot;, globals=glob, locals=loc)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(compile(open(&quot;fn&quot;).read(), &quot;fn&quot;, &#39;exec&#39;), globals=glob, locals=loc)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_execfile.test_spacing"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_execfile.test_spacing">[docs]</a>    <span class="k">def</span> <span class="nf">test_spacing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;execfile( &quot;fn&quot; )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(compile(open( &quot;fn&quot; ).read(), &quot;fn&quot;, &#39;exec&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;execfile(&quot;fn&quot;,  globals = glob)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;exec(compile(open(&quot;fn&quot;).read(), &quot;fn&quot;, &#39;exec&#39;),  globals = glob)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_isinstance"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_isinstance">[docs]</a><span class="k">class</span> <span class="nc">Test_isinstance</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;isinstance&quot;</span>

<div class="viewcode-block" id="Test_isinstance.test_remove_multiple_items"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_isinstance.test_remove_multiple_items">[docs]</a>    <span class="k">def</span> <span class="nf">test_remove_multiple_items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x, (int, int, int))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x, int)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x, (int, float, int, int, float))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x, (int, float))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x, (int, float, int, int, float, str))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x, (int, float, str))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(foo() + bar(), (x(), y(), x(), int, int))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(foo() + bar(), (x(), y(), x(), int))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_isinstance.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_isinstance.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if    isinstance(  foo(), (  bar, bar, baz )) : pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if    isinstance(  foo(), (  bar, baz )) : pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_isinstance.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_isinstance.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;isinstance(x, (str, int))&quot;</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_dict"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict">[docs]</a><span class="k">class</span> <span class="nc">Test_dict</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;dict&quot;</span>

<div class="viewcode-block" id="Test_dict.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;if   d. keys  (  )  : pass&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;if   list(d. keys  (  ))  : pass&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;if   d. items  (  )  : pass&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;if   list(d. items  (  ))  : pass&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;if   d. iterkeys  ( )  : pass&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;if   iter(d. keys  ( ))  : pass&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;[i for i in    d.  iterkeys(  )  ]&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;[i for i in    d.  keys(  )  ]&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;if   d. viewkeys  ( )  : pass&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;if   d. keys  ( )  : pass&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;[i for i in    d.  viewkeys(  )  ]&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;[i for i in    d.  keys(  )  ]&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_trailing_comment"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_trailing_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_trailing_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;d.keys() # foo&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;list(d.keys()) # foo&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;d.items()  # foo&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;list(d.items())  # foo&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;d.iterkeys()  # foo&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;iter(d.keys())  # foo&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in d.iterkeys() # foo</span>
<span class="s">               ]&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in d.keys() # foo</span>
<span class="s">               ]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in d.iterkeys() # foo</span>
<span class="s">               ]&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in d.keys() # foo</span>
<span class="s">               ]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;d.viewitems()  # foo&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;d.items()  # foo&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">wrapper</span> <span class="ow">in</span> <span class="n">fixer_util</span><span class="o">.</span><span class="n">consuming_calls</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;s = </span><span class="si">%s</span><span class="s">(d.keys())&quot;</span> <span class="o">%</span> <span class="n">wrapper</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;s = </span><span class="si">%s</span><span class="s">(d.values())&quot;</span> <span class="o">%</span> <span class="n">wrapper</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;s = </span><span class="si">%s</span><span class="s">(d.items())&quot;</span> <span class="o">%</span> <span class="n">wrapper</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_01"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_01">[docs]</a>    <span class="k">def</span> <span class="nf">test_01</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;d.keys()&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;list(d.keys())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;a[0].foo().keys()&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;list(a[0].foo().keys())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_02"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_02">[docs]</a>    <span class="k">def</span> <span class="nf">test_02</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;d.items()&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;list(d.items())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_03"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_03">[docs]</a>    <span class="k">def</span> <span class="nf">test_03</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;d.values()&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;list(d.values())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_04"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_04">[docs]</a>    <span class="k">def</span> <span class="nf">test_04</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;d.iterkeys()&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;iter(d.keys())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_05"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_05">[docs]</a>    <span class="k">def</span> <span class="nf">test_05</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;d.iteritems()&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;iter(d.items())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_06"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_06">[docs]</a>    <span class="k">def</span> <span class="nf">test_06</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;d.itervalues()&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;iter(d.values())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_07"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_07">[docs]</a>    <span class="k">def</span> <span class="nf">test_07</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;list(d.keys())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_08"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_08">[docs]</a>    <span class="k">def</span> <span class="nf">test_08</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;sorted(d.keys())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_09"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_09">[docs]</a>    <span class="k">def</span> <span class="nf">test_09</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;iter(d.keys())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;iter(list(d.keys()))&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_10"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_10">[docs]</a>    <span class="k">def</span> <span class="nf">test_10</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;foo(d.keys())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;foo(list(d.keys()))&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_11"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_11">[docs]</a>    <span class="k">def</span> <span class="nf">test_11</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;for i in d.keys(): print i&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;for i in list(d.keys()): print i&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_12"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_12">[docs]</a>    <span class="k">def</span> <span class="nf">test_12</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;for i in d.iterkeys(): print i&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;for i in d.keys(): print i&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_13"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_13">[docs]</a>    <span class="k">def</span> <span class="nf">test_13</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;[i for i in d.keys()]&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;[i for i in list(d.keys())]&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_14"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_14">[docs]</a>    <span class="k">def</span> <span class="nf">test_14</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;[i for i in d.iterkeys()]&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;[i for i in d.keys()]&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_15"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_15">[docs]</a>    <span class="k">def</span> <span class="nf">test_15</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;(i for i in d.keys())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;(i for i in list(d.keys()))&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_16"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_16">[docs]</a>    <span class="k">def</span> <span class="nf">test_16</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;(i for i in d.iterkeys())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;(i for i in d.keys())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_17"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_17">[docs]</a>    <span class="k">def</span> <span class="nf">test_17</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;iter(d.iterkeys())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;iter(d.keys())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_18"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_18">[docs]</a>    <span class="k">def</span> <span class="nf">test_18</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;list(d.iterkeys())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;list(d.keys())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_19"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_19">[docs]</a>    <span class="k">def</span> <span class="nf">test_19</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;sorted(d.iterkeys())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;sorted(d.keys())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_20"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_20">[docs]</a>    <span class="k">def</span> <span class="nf">test_20</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;foo(d.iterkeys())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;foo(iter(d.keys()))&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_21"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_21">[docs]</a>    <span class="k">def</span> <span class="nf">test_21</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;print h.iterkeys().next()&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;print iter(h.keys()).next()&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_22"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_22">[docs]</a>    <span class="k">def</span> <span class="nf">test_22</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;print h.keys()[0]&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;print list(h.keys())[0]&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_23"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_23">[docs]</a>    <span class="k">def</span> <span class="nf">test_23</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;print list(h.iterkeys().next())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;print list(iter(h.keys()).next())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_24"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_24">[docs]</a>    <span class="k">def</span> <span class="nf">test_24</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;for x in h.keys()[0]: print x&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;for x in list(h.keys())[0]: print x&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_25"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_25">[docs]</a>    <span class="k">def</span> <span class="nf">test_25</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;d.viewkeys()&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;d.keys()&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_26"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_26">[docs]</a>    <span class="k">def</span> <span class="nf">test_26</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;d.viewitems()&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;d.items()&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_27"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_27">[docs]</a>    <span class="k">def</span> <span class="nf">test_27</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;d.viewvalues()&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;d.values()&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_28"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_28">[docs]</a>    <span class="k">def</span> <span class="nf">test_28</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;[i for i in d.viewkeys()]&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;[i for i in d.keys()]&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_29"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_29">[docs]</a>    <span class="k">def</span> <span class="nf">test_29</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;(i for i in d.viewkeys())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;(i for i in d.keys())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_30"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_30">[docs]</a>    <span class="k">def</span> <span class="nf">test_30</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;iter(d.viewkeys())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;iter(d.keys())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_31"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_31">[docs]</a>    <span class="k">def</span> <span class="nf">test_31</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;list(d.viewkeys())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;list(d.keys())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_dict.test_32"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_dict.test_32">[docs]</a>    <span class="k">def</span> <span class="nf">test_32</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;sorted(d.viewkeys())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;sorted(d.keys())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_xrange"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xrange">[docs]</a><span class="k">class</span> <span class="nc">Test_xrange</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;xrange&quot;</span>

<div class="viewcode-block" id="Test_xrange.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xrange.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =    xrange(  10  )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =    range(  10  )&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = xrange(  1  ,  10   )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = range(  1  ,  10   )&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = xrange(  0  ,  10 ,  2 )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = range(  0  ,  10 ,  2 )&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_xrange.test_single_arg"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xrange.test_single_arg">[docs]</a>    <span class="k">def</span> <span class="nf">test_single_arg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = xrange(10)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = range(10)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_xrange.test_two_args"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xrange.test_two_args">[docs]</a>    <span class="k">def</span> <span class="nf">test_two_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = xrange(1, 10)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = range(1, 10)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_xrange.test_three_args"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xrange.test_three_args">[docs]</a>    <span class="k">def</span> <span class="nf">test_three_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = xrange(0, 10, 2)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = range(0, 10, 2)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_xrange.test_wrap_in_list"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xrange.test_wrap_in_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_wrap_in_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = range(10, 3, 9)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = list(range(10, 3, 9))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = foo(range(10, 3, 9))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = foo(list(range(10, 3, 9)))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = range(10, 3, 9) + [4]&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = list(range(10, 3, 9)) + [4]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = range(10)[::-1]&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = list(range(10))[::-1]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = range(10)  [3]&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = list(range(10))  [3]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_xrange.test_xrange_in_for"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xrange.test_xrange_in_for">[docs]</a>    <span class="k">def</span> <span class="nf">test_xrange_in_for</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;for i in xrange(10):</span><span class="se">\n</span><span class="s">    j=i&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;for i in range(10):</span><span class="se">\n</span><span class="s">    j=i&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in xrange(10)]&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in range(10)]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_xrange.test_range_in_for"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xrange.test_range_in_for">[docs]</a>    <span class="k">def</span> <span class="nf">test_range_in_for</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;for i in range(10): pass&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;[i for i in range(10)]&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_xrange.test_in_contains_test"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xrange.test_in_contains_test">[docs]</a>    <span class="k">def</span> <span class="nf">test_in_contains_test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;x in range(10, 3, 9)&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_xrange.test_in_consuming_context"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xrange.test_in_consuming_context">[docs]</a>    <span class="k">def</span> <span class="nf">test_in_consuming_context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">call</span> <span class="ow">in</span> <span class="n">fixer_util</span><span class="o">.</span><span class="n">consuming_calls</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;a = </span><span class="si">%s</span><span class="s">(range(10))&quot;</span> <span class="o">%</span> <span class="n">call</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_xrange_with_reduce"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xrange_with_reduce">[docs]</a><span class="k">class</span> <span class="nc">Test_xrange_with_reduce</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>

<div class="viewcode-block" id="Test_xrange_with_reduce.setUp"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xrange_with_reduce.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Test_xrange_with_reduce</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">([</span><span class="s">&quot;xrange&quot;</span><span class="p">,</span> <span class="s">&quot;reduce&quot;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Test_xrange_with_reduce.test_double_transform"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xrange_with_reduce.test_double_transform">[docs]</a>    <span class="k">def</span> <span class="nf">test_double_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;reduce(x, xrange(5))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;from functools import reduce</span>
<span class="s">reduce(x, range(5))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_raw_input"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raw_input">[docs]</a><span class="k">class</span> <span class="nc">Test_raw_input</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;raw_input&quot;</span>

<div class="viewcode-block" id="Test_raw_input.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raw_input.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =    raw_input(   )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =    input(   )&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = raw_input(   &#39;&#39;   )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = input(   &#39;&#39;   )&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raw_input.test_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raw_input.test_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = raw_input()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = input()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raw_input.test_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raw_input.test_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = raw_input(&#39;&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = input(&#39;&#39;)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raw_input.test_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raw_input.test_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = raw_input(&#39;prompt&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = input(&#39;prompt&#39;)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raw_input.test_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raw_input.test_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = raw_input(foo(a) + 6)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = input(foo(a) + 6)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raw_input.test_5"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raw_input.test_5">[docs]</a>    <span class="k">def</span> <span class="nf">test_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = raw_input(invite).split()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = input(invite).split()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raw_input.test_6"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raw_input.test_6">[docs]</a>    <span class="k">def</span> <span class="nf">test_6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = raw_input(invite) . split ()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = input(invite) . split ()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_raw_input.test_8"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_raw_input.test_8">[docs]</a>    <span class="k">def</span> <span class="nf">test_8</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;x = int(raw_input())&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;x = int(input())&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_funcattrs"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_funcattrs">[docs]</a><span class="k">class</span> <span class="nc">Test_funcattrs</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;funcattrs&quot;</span>

    <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;closure&quot;</span><span class="p">,</span> <span class="s">&quot;doc&quot;</span><span class="p">,</span> <span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="s">&quot;defaults&quot;</span><span class="p">,</span> <span class="s">&quot;code&quot;</span><span class="p">,</span> <span class="s">&quot;globals&quot;</span><span class="p">,</span> <span class="s">&quot;dict&quot;</span><span class="p">]</span>

<div class="viewcode-block" id="Test_funcattrs.test"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_funcattrs.test">[docs]</a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;a.func_</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;a.__</span><span class="si">%s</span><span class="s">__&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;self.foo.func_</span><span class="si">%s</span><span class="s">.foo_bar&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;self.foo.__</span><span class="si">%s</span><span class="s">__.foo_bar&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_funcattrs.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_funcattrs.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;foo(func_</span><span class="si">%s</span><span class="s"> + 5)&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;f(foo.__</span><span class="si">%s</span><span class="s">__)&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;f(foo.__</span><span class="si">%s</span><span class="s">__.foo)&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_xreadlines"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xreadlines">[docs]</a><span class="k">class</span> <span class="nc">Test_xreadlines</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;xreadlines&quot;</span>

<div class="viewcode-block" id="Test_xreadlines.test_call"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xreadlines.test_call">[docs]</a>    <span class="k">def</span> <span class="nf">test_call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;for x in f.xreadlines(): pass&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;for x in f: pass&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;for x in foo().xreadlines(): pass&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;for x in foo(): pass&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;for x in (5 + foo()).xreadlines(): pass&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;for x in (5 + foo()): pass&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_xreadlines.test_attr_ref"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xreadlines.test_attr_ref">[docs]</a>    <span class="k">def</span> <span class="nf">test_attr_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;foo(f.xreadlines + 5)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;foo(f.__iter__ + 5)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;foo(f().xreadlines + 5)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;foo(f().__iter__ + 5)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;foo((5 + f()).xreadlines + 5)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;foo((5 + f()).__iter__ + 5)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_xreadlines.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_xreadlines.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;for x in f.xreadlines(5): pass&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;for x in f.xreadlines(k=5): pass&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;for x in f.xreadlines(*k, **v): pass&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;foo(xreadlines)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="ImportsFixerTests"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.ImportsFixerTests">[docs]</a><span class="k">class</span> <span class="nc">ImportsFixerTests</span><span class="p">:</span>

<div class="viewcode-block" id="ImportsFixerTests.test_import_module"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.ImportsFixerTests.test_import_module">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_module</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">old</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">new</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import foo, </span><span class="si">%s</span><span class="s">, bar&quot;</span> <span class="o">%</span> <span class="n">old</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;import foo, </span><span class="si">%s</span><span class="s">, bar&quot;</span> <span class="o">%</span> <span class="n">new</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ImportsFixerTests.test_import_from"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.ImportsFixerTests.test_import_from">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_from</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import foo&quot;</span> <span class="o">%</span> <span class="n">old</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import foo&quot;</span> <span class="o">%</span> <span class="n">new</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import foo, bar&quot;</span> <span class="o">%</span> <span class="n">old</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import foo, bar&quot;</span> <span class="o">%</span> <span class="n">new</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import (yes, no)&quot;</span> <span class="o">%</span> <span class="n">old</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import (yes, no)&quot;</span> <span class="o">%</span> <span class="n">new</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ImportsFixerTests.test_import_module_as"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.ImportsFixerTests.test_import_module_as">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_module_as</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import </span><span class="si">%s</span><span class="s"> as foo_bar&quot;</span> <span class="o">%</span> <span class="n">old</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;import </span><span class="si">%s</span><span class="s"> as foo_bar&quot;</span> <span class="o">%</span> <span class="n">new</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import </span><span class="si">%s</span><span class="s"> as foo_bar&quot;</span> <span class="o">%</span> <span class="n">old</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;import </span><span class="si">%s</span><span class="s"> as foo_bar&quot;</span> <span class="o">%</span> <span class="n">new</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ImportsFixerTests.test_import_from_as"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.ImportsFixerTests.test_import_from_as">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_from_as</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import foo as bar&quot;</span> <span class="o">%</span> <span class="n">old</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import foo as bar&quot;</span> <span class="o">%</span> <span class="n">new</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ImportsFixerTests.test_star"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.ImportsFixerTests.test_star">[docs]</a>    <span class="k">def</span> <span class="nf">test_star</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import *&quot;</span> <span class="o">%</span> <span class="n">old</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import *&quot;</span> <span class="o">%</span> <span class="n">new</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ImportsFixerTests.test_import_module_usage"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.ImportsFixerTests.test_import_module_usage">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_module_usage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                foo(</span><span class="si">%s</span><span class="s">.bar)</span>
<span class="s">                &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">old</span><span class="p">)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                foo(</span><span class="si">%s</span><span class="s">.bar)</span>
<span class="s">                &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                from </span><span class="si">%s</span><span class="s"> import x</span>
<span class="s">                </span><span class="si">%s</span><span class="s"> = 23</span>
<span class="s">                &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">old</span><span class="p">)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                from </span><span class="si">%s</span><span class="s"> import x</span>
<span class="s">                </span><span class="si">%s</span><span class="s"> = 23</span>
<span class="s">                &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">old</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                def f():</span>
<span class="s">                    </span><span class="si">%s</span><span class="s">.method()</span>
<span class="s">                &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old</span><span class="p">,)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

            <span class="c"># test nested usage</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                </span><span class="si">%s</span><span class="s">.bar(</span><span class="si">%s</span><span class="s">.foo)</span>
<span class="s">                &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">old</span><span class="p">)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                </span><span class="si">%s</span><span class="s">.bar(</span><span class="si">%s</span><span class="s">.foo)</span>
<span class="s">                &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                x.</span><span class="si">%s</span><span class="s"></span>
<span class="s">                &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">old</span><span class="p">)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                x.</span><span class="si">%s</span><span class="s"></span>
<span class="s">                &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">old</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_imports"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_imports">[docs]</a><span class="k">class</span> <span class="nc">Test_imports</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">,</span> <span class="n">ImportsFixerTests</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;imports&quot;</span>
    <span class="kn">from</span> <span class="nn">..fixes.fix_imports</span> <span class="kn">import</span> <span class="n">MAPPING</span> <span class="k">as</span> <span class="n">modules</span>

<div class="viewcode-block" id="Test_imports.test_multiple_imports"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_imports.test_multiple_imports">[docs]</a>    <span class="k">def</span> <span class="nf">test_multiple_imports</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import urlparse, cStringIO&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import urllib.parse, io&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_imports.test_multiple_imports_as"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_imports.test_multiple_imports_as">[docs]</a>    <span class="k">def</span> <span class="nf">test_multiple_imports_as</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import copy_reg as bar, HTMLParser as foo, urlparse</span>
<span class="s">            s = urlparse.spam(bar.foo())</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import copyreg as bar, html.parser as foo, urllib.parse</span>
<span class="s">            s = urllib.parse.spam(bar.foo())</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_imports2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_imports2">[docs]</a><span class="k">class</span> <span class="nc">Test_imports2</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">,</span> <span class="n">ImportsFixerTests</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;imports2&quot;</span>
    <span class="kn">from</span> <span class="nn">..fixes.fix_imports2</span> <span class="kn">import</span> <span class="n">MAPPING</span> <span class="k">as</span> <span class="n">modules</span>

</div>
<div class="viewcode-block" id="Test_imports_fixer_order"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_imports_fixer_order">[docs]</a><span class="k">class</span> <span class="nc">Test_imports_fixer_order</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">,</span> <span class="n">ImportsFixerTests</span><span class="p">):</span>

<div class="viewcode-block" id="Test_imports_fixer_order.setUp"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_imports_fixer_order.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Test_imports_fixer_order</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">([</span><span class="s">&#39;imports&#39;</span><span class="p">,</span> <span class="s">&#39;imports2&#39;</span><span class="p">])</span>
        <span class="kn">from</span> <span class="nn">..fixes.fix_imports2</span> <span class="kn">import</span> <span class="n">MAPPING</span> <span class="k">as</span> <span class="n">mapping2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modules</span> <span class="o">=</span> <span class="n">mapping2</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="kn">from</span> <span class="nn">..fixes.fix_imports</span> <span class="kn">import</span> <span class="n">MAPPING</span> <span class="k">as</span> <span class="n">mapping1</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;dbhash&#39;</span><span class="p">,</span> <span class="s">&#39;dumbdbm&#39;</span><span class="p">,</span> <span class="s">&#39;dbm&#39;</span><span class="p">,</span> <span class="s">&#39;gdbm&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapping1</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Test_imports_fixer_order.test_after_local_imports_refactoring"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_imports_fixer_order.test_after_local_imports_refactoring">[docs]</a>    <span class="k">def</span> <span class="nf">test_after_local_imports_refactoring</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">fix</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;imports&quot;</span><span class="p">,</span> <span class="s">&quot;imports2&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fixer</span> <span class="o">=</span> <span class="n">fix</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assert_runs_after</span><span class="p">(</span><span class="s">&quot;import&quot;</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_urllib"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_urllib">[docs]</a><span class="k">class</span> <span class="nc">Test_urllib</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;urllib&quot;</span>
    <span class="kn">from</span> <span class="nn">..fixes.fix_urllib</span> <span class="kn">import</span> <span class="n">MAPPING</span> <span class="k">as</span> <span class="n">modules</span>

<div class="viewcode-block" id="Test_urllib.test_import_module"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_urllib.test_import_module">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_module</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">changes</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">old</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="s">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">changes</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_urllib.test_import_from"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_urllib.test_import_from">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_from</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">changes</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">all_members</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">new</span><span class="p">,</span> <span class="n">members</span> <span class="ow">in</span> <span class="n">changes</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">members</span><span class="p">:</span>
                    <span class="n">all_members</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">member</span><span class="p">)</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span>
                    <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

                    <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;from foo import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">member</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

                <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="s">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">members</span><span class="p">))</span>
                <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="s">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">members</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

                <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;from foo import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="s">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">members</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

            <span class="c"># test the breaking of a module into multiple replacements</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="s">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">all_members</span><span class="p">))</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="s">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">members</span><span class="p">))</span>
                            <span class="k">for</span> <span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">members</span><span class="p">)</span> <span class="ow">in</span> <span class="n">changes</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_urllib.test_import_module_as"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_urllib.test_import_module_as">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_module_as</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">old</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;import </span><span class="si">%s</span><span class="s"> as foo&quot;</span> <span class="o">%</span> <span class="n">old</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;This module is now multiple modules&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_urllib.test_import_from_as"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_urllib.test_import_from_as">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_from_as</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">changes</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">new</span><span class="p">,</span> <span class="n">members</span> <span class="ow">in</span> <span class="n">changes</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">members</span><span class="p">:</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s"> as foo_bar&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span>
                    <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s"> as foo_bar&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s"> as blah, </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span>
                    <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s"> as blah, </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_urllib.test_star"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_urllib.test_star">[docs]</a>    <span class="k">def</span> <span class="nf">test_star</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">old</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import *&quot;</span> <span class="o">%</span> <span class="n">old</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Cannot handle star imports&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_urllib.test_indented"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_urllib.test_indented">[docs]</a>    <span class="k">def</span> <span class="nf">test_indented</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">def foo():</span>
<span class="s">    from urllib import urlencode, urlopen</span>
<span class="s">&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">def foo():</span>
<span class="s">    from urllib.parse import urlencode</span>
<span class="s">    from urllib.request import urlopen</span>
<span class="s">&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">def foo():</span>
<span class="s">    other()</span>
<span class="s">    from urllib import urlencode, urlopen</span>
<span class="s">&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">def foo():</span>
<span class="s">    other()</span>
<span class="s">    from urllib.parse import urlencode</span>
<span class="s">    from urllib.request import urlopen</span>
<span class="s">&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>


</div>
<div class="viewcode-block" id="Test_urllib.test_import_module_usage"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_urllib.test_import_module_usage">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_module_usage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">changes</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">new</span><span class="p">,</span> <span class="n">members</span> <span class="ow">in</span> <span class="n">changes</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">members</span><span class="p">:</span>
                    <span class="n">new_import</span> <span class="o">=</span> <span class="s">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">n</span> <span class="k">for</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">mems</span><span class="p">)</span>
                                            <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">old</span><span class="p">]])</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                        import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                        foo(</span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s">)</span>
<span class="s">                        &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span>
                    <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                        import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                        foo(</span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s">)</span>
<span class="s">                        &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">new_import</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                        import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                        </span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s">(</span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s">)</span>
<span class="s">                        &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span>
                    <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                        import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                        </span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s">(</span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s">)</span>
<span class="s">                        &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">new_import</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_input"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_input">[docs]</a><span class="k">class</span> <span class="nc">Test_input</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;input&quot;</span>

<div class="viewcode-block" id="Test_input.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_input.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =   input(   )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =   eval(input(   ))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = input(   &#39;&#39;   )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = eval(input(   &#39;&#39;   ))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_input.test_trailing_comment"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_input.test_trailing_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_trailing_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = input()  #  foo&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = eval(input())  #  foo&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_input.test_idempotency"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_input.test_idempotency">[docs]</a>    <span class="k">def</span> <span class="nf">test_idempotency</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = eval(input())&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = eval(input(&#39;&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = eval(input(foo(5) + 9))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_input.test_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_input.test_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = input()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = eval(input())&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_input.test_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_input.test_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = input(&#39;&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = eval(input(&#39;&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_input.test_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_input.test_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = input(&#39;prompt&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = eval(input(&#39;prompt&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_input.test_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_input.test_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = input(foo(5) + 9)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = eval(input(foo(5) + 9))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_tuple_params"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params">[docs]</a><span class="k">class</span> <span class="nc">Test_tuple_params</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;tuple_params&quot;</span>

<div class="viewcode-block" id="Test_tuple_params.test_unchanged_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_unchanged_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo(): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_unchanged_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_unchanged_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo(a, b, c): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_unchanged_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_unchanged_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;def foo(a=3, b=4, c=5): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(((a, b), c)):</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(xxx_todo_changeme):</span>
<span class="s">                ((a, b), c) = xxx_todo_changeme</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(((a, b), c), d):</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(xxx_todo_changeme, d):</span>
<span class="s">                ((a, b), c) = xxx_todo_changeme</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(((a, b), c), d) -&gt; e:</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(xxx_todo_changeme, d) -&gt; e:</span>
<span class="s">                ((a, b), c) = xxx_todo_changeme</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_semicolon"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_semicolon">[docs]</a>    <span class="k">def</span> <span class="nf">test_semicolon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(((a, b), c)): x = 5; y = 7&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(xxx_todo_changeme): ((a, b), c) = xxx_todo_changeme; x = 5; y = 7&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_keywords"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_keywords">[docs]</a>    <span class="k">def</span> <span class="nf">test_keywords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(((a, b), c), d, e=5) -&gt; z:</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(xxx_todo_changeme, d, e=5) -&gt; z:</span>
<span class="s">                ((a, b), c) = xxx_todo_changeme</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_varargs"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_varargs">[docs]</a>    <span class="k">def</span> <span class="nf">test_varargs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(((a, b), c), d, *vargs, **kwargs) -&gt; z:</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(xxx_todo_changeme, d, *vargs, **kwargs) -&gt; z:</span>
<span class="s">                ((a, b), c) = xxx_todo_changeme</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_multi_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_multi_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_multi_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(((a, b), c), (d, e, f)) -&gt; z:</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(xxx_todo_changeme, xxx_todo_changeme1) -&gt; z:</span>
<span class="s">                ((a, b), c) = xxx_todo_changeme</span>
<span class="s">                (d, e, f) = xxx_todo_changeme1</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_multi_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_multi_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_multi_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(x, ((a, b), c), d, (e, f, g), y) -&gt; z:</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(x, xxx_todo_changeme, d, xxx_todo_changeme1, y) -&gt; z:</span>
<span class="s">                ((a, b), c) = xxx_todo_changeme</span>
<span class="s">                (e, f, g) = xxx_todo_changeme1</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_docstring"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_docstring">[docs]</a>    <span class="k">def</span> <span class="nf">test_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(((a, b), c), (d, e, f)) -&gt; z:</span>
<span class="s">                &quot;foo foo foo foo&quot;</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo(xxx_todo_changeme, xxx_todo_changeme1) -&gt; z:</span>
<span class="s">                &quot;foo foo foo foo&quot;</span>
<span class="s">                ((a, b), c) = xxx_todo_changeme</span>
<span class="s">                (d, e, f) = xxx_todo_changeme1</span>
<span class="s">                x = 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_lambda_no_change"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_lambda_no_change">[docs]</a>    <span class="k">def</span> <span class="nf">test_lambda_no_change</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x: x + 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_lambda_parens_single_arg"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_lambda_parens_single_arg">[docs]</a>    <span class="k">def</span> <span class="nf">test_lambda_parens_single_arg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda (x): x + 5&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x: x + 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda(x): x + 5&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x: x + 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda ((((x)))): x + 5&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x: x + 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda((((x)))): x + 5&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x: x + 5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_lambda_simple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_lambda_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_lambda_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda (x, y): x + f(y)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x_y: x_y[0] + f(x_y[1])&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda(x, y): x + f(y)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x_y: x_y[0] + f(x_y[1])&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda (((x, y))): x + f(y)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x_y: x_y[0] + f(x_y[1])&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda(((x, y))): x + f(y)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x_y: x_y[0] + f(x_y[1])&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_lambda_one_tuple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_lambda_one_tuple">[docs]</a>    <span class="k">def</span> <span class="nf">test_lambda_one_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda (x,): x + f(x)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x1: x1[0] + f(x1[0])&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda (((x,))): x + f(x)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x1: x1[0] + f(x1[0])&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_lambda_simple_multi_use"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_lambda_simple_multi_use">[docs]</a>    <span class="k">def</span> <span class="nf">test_lambda_simple_multi_use</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda (x, y): x + x + f(x) + x&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x_y: x_y[0] + x_y[0] + f(x_y[0]) + x_y[0]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_lambda_simple_reverse"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_lambda_simple_reverse">[docs]</a>    <span class="k">def</span> <span class="nf">test_lambda_simple_reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda (x, y): y + x&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x_y: x_y[1] + x_y[0]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_lambda_nested"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_lambda_nested">[docs]</a>    <span class="k">def</span> <span class="nf">test_lambda_nested</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda (x, (y, z)): x + y + z&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x_y_z: x_y_z[0] + x_y_z[1][0] + x_y_z[1][1]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda (((x, (y, z)))): x + y + z&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x_y_z: x_y_z[0] + x_y_z[1][0] + x_y_z[1][1]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_tuple_params.test_lambda_nested_multi_use"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_tuple_params.test_lambda_nested_multi_use">[docs]</a>    <span class="k">def</span> <span class="nf">test_lambda_nested_multi_use</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda (x, (y, z)): x + y + f(y)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;lambda x_y_z: x_y_z[0] + x_y_z[1][0] + f(x_y_z[1][0])&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_methodattrs"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_methodattrs">[docs]</a><span class="k">class</span> <span class="nc">Test_methodattrs</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;methodattrs&quot;</span>

    <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;func&quot;</span><span class="p">,</span> <span class="s">&quot;self&quot;</span><span class="p">,</span> <span class="s">&quot;class&quot;</span><span class="p">]</span>

<div class="viewcode-block" id="Test_methodattrs.test"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_methodattrs.test">[docs]</a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;a.im_</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="k">if</span> <span class="n">attr</span> <span class="o">==</span> <span class="s">&quot;class&quot;</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;a.__self__.__class__&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;a.__</span><span class="si">%s</span><span class="s">__&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;self.foo.im_</span><span class="si">%s</span><span class="s">.foo_bar&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="k">if</span> <span class="n">attr</span> <span class="o">==</span> <span class="s">&quot;class&quot;</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;self.foo.__self__.__class__.foo_bar&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;self.foo.__</span><span class="si">%s</span><span class="s">__.foo_bar&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_methodattrs.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_methodattrs.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;foo(im_</span><span class="si">%s</span><span class="s"> + 5)&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;f(foo.__</span><span class="si">%s</span><span class="s">__)&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;f(foo.__</span><span class="si">%s</span><span class="s">__.foo)&quot;</span> <span class="o">%</span> <span class="n">attr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_next"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next">[docs]</a><span class="k">class</span> <span class="nc">Test_next</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;next&quot;</span>

<div class="viewcode-block" id="Test_next.test_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;it.next()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;next(it)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;a.b.c.d.next()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;next(a.b.c.d)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;(a + b).next()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;next((a + b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;a().next()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;next(a())&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_5"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_5">[docs]</a>    <span class="k">def</span> <span class="nf">test_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;a().next() + b&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;next(a()) + b&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_6"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_6">[docs]</a>    <span class="k">def</span> <span class="nf">test_6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;c(      a().next() + b)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;c(      next(a()) + b)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_prefix_preservation_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_prefix_preservation_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            for a in b:</span>
<span class="s">                foo(a)</span>
<span class="s">                a.next()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            for a in b:</span>
<span class="s">                foo(a)</span>
<span class="s">                next(a)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_prefix_preservation_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_prefix_preservation_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            for a in b:</span>
<span class="s">                foo(a) # abc</span>
<span class="s">                # def</span>
<span class="s">                a.next()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            for a in b:</span>
<span class="s">                foo(a) # abc</span>
<span class="s">                # def</span>
<span class="s">                next(a)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_prefix_preservation_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_prefix_preservation_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            next = 5</span>
<span class="s">            for a in b:</span>
<span class="s">                foo(a)</span>
<span class="s">                a.next()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            next = 5</span>
<span class="s">            for a in b:</span>
<span class="s">                foo(a)</span>
<span class="s">                a.__next__()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">ignore_warnings</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_prefix_preservation_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_prefix_preservation_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            next = 5</span>
<span class="s">            for a in b:</span>
<span class="s">                foo(a) # abc</span>
<span class="s">                # def</span>
<span class="s">                a.next()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            next = 5</span>
<span class="s">            for a in b:</span>
<span class="s">                foo(a) # abc</span>
<span class="s">                # def</span>
<span class="s">                a.__next__()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">ignore_warnings</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_prefix_preservation_5"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_prefix_preservation_5">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            next = 5</span>
<span class="s">            for a in b:</span>
<span class="s">                foo(foo(a), # abc</span>
<span class="s">                    a.next())</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            next = 5</span>
<span class="s">            for a in b:</span>
<span class="s">                foo(foo(a), # abc</span>
<span class="s">                    a.__next__())</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">ignore_warnings</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_prefix_preservation_6"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_prefix_preservation_6">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation_6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            for a in b:</span>
<span class="s">                foo(foo(a), # abc</span>
<span class="s">                    a.next())</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            for a in b:</span>
<span class="s">                foo(foo(a), # abc</span>
<span class="s">                    next(a))</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_method_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_method_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_method_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A:</span>
<span class="s">                def next(self):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A:</span>
<span class="s">                def __next__(self):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_method_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_method_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_method_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A(object):</span>
<span class="s">                def next(self):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A(object):</span>
<span class="s">                def __next__(self):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_method_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_method_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_method_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A:</span>
<span class="s">                def next(x):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A:</span>
<span class="s">                def __next__(x):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_method_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_method_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_method_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A:</span>
<span class="s">                def __init__(self, foo):</span>
<span class="s">                    self.foo = foo</span>

<span class="s">                def next(self):</span>
<span class="s">                    pass</span>

<span class="s">                def __iter__(self):</span>
<span class="s">                    return self</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A:</span>
<span class="s">                def __init__(self, foo):</span>
<span class="s">                    self.foo = foo</span>

<span class="s">                def __next__(self):</span>
<span class="s">                    pass</span>

<span class="s">                def __iter__(self):</span>
<span class="s">                    return self</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_method_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_method_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_method_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_assign_simple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_assign_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_assign_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            next = foo</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_assign_tuple_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_assign_tuple_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_assign_tuple_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            (next, a) = foo</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_assign_tuple_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_assign_tuple_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_assign_tuple_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            (a, (b, (next, c)), a) = foo</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_assign_list_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_assign_list_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_assign_list_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            [next, a] = foo</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_assign_list_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_assign_list_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_assign_list_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            [a, [b, [next, c]], a] = foo</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_builtin_assign"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_builtin_assign">[docs]</a>    <span class="k">def</span> <span class="nf">test_builtin_assign</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo():</span>
<span class="s">                __builtin__.next = foo</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_builtin_assign_in_tuple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_builtin_assign_in_tuple">[docs]</a>    <span class="k">def</span> <span class="nf">test_builtin_assign_in_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo():</span>
<span class="s">                (a, __builtin__.next) = foo</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_builtin_assign_in_list"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_builtin_assign_in_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_builtin_assign_in_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo():</span>
<span class="s">                [a, __builtin__.next] = foo</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_assign_to_next"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_assign_to_next">[docs]</a>    <span class="k">def</span> <span class="nf">test_assign_to_next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo():</span>
<span class="s">                A.next = foo</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_assign_to_next_in_tuple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_assign_to_next_in_tuple">[docs]</a>    <span class="k">def</span> <span class="nf">test_assign_to_next_in_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo():</span>
<span class="s">                (a, A.next) = foo</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_assign_to_next_in_list"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_assign_to_next_in_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_assign_to_next_in_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def foo():</span>
<span class="s">                [a, A.next] = foo</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_import_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_import_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_import_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import foo.bar as next</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_import_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_import_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_import_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import bar, bar.foo as next</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_import_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_import_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_import_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import bar, bar.foo as next, baz</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_import_from_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_import_from_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_import_from_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            from x import next</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_import_from_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_import_from_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_import_from_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            from x.a import next</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_import_from_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_import_from_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_import_from_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            from x import a, next, b</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_import_from_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_import_from_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_import_from_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            from x.a import a, next, b</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_funcdef_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_funcdef_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_funcdef_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def next(a):</span>
<span class="s">                pass</span>

<span class="s">            class A:</span>
<span class="s">                def next(self, a, b):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_funcdef_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_funcdef_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_funcdef_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def next(a):</span>
<span class="s">                pass</span>

<span class="s">            class A:</span>
<span class="s">                def next(self):</span>
<span class="s">                    pass</span>

<span class="s">            it.next()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def next(a):</span>
<span class="s">                pass</span>

<span class="s">            class A:</span>
<span class="s">                def __next__(self):</span>
<span class="s">                    pass</span>

<span class="s">            it.__next__()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_global_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_global_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_global_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def f():</span>
<span class="s">                global next</span>
<span class="s">                next = 5</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_global_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_global_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_global_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def f():</span>
<span class="s">                global a, next, b</span>
<span class="s">                next = 5</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_for_simple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_for_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_for_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            for next in it():</span>
<span class="s">                pass</span>

<span class="s">            b = 5</span>
<span class="s">            c = 6</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_for_tuple_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_for_tuple_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_for_tuple_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            for next, b in it():</span>
<span class="s">                pass</span>

<span class="s">            b = 5</span>
<span class="s">            c = 6</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_shadowing_for_tuple_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_shadowing_for_tuple_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_shadowing_for_tuple_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            for a, (next, c), b in it():</span>
<span class="s">                pass</span>

<span class="s">            b = 5</span>
<span class="s">            c = 6</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;Calls to builtin next() possibly shadowed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_noncall_access_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_noncall_access_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_noncall_access_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;gnext = g.next&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;gnext = g.__next__&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_noncall_access_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_noncall_access_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_noncall_access_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;f(g.next + 5)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;f(g.__next__ + 5)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_next.test_noncall_access_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_next.test_noncall_access_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_noncall_access_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;f(g().next + 5)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;f(g().__next__ + 5)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_nonzero"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_nonzero">[docs]</a><span class="k">class</span> <span class="nc">Test_nonzero</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;nonzero&quot;</span>

<div class="viewcode-block" id="Test_nonzero.test_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_nonzero.test_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A:</span>
<span class="s">                def __nonzero__(self):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A:</span>
<span class="s">                def __bool__(self):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_nonzero.test_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_nonzero.test_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A(object):</span>
<span class="s">                def __nonzero__(self):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A(object):</span>
<span class="s">                def __bool__(self):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_nonzero.test_unchanged_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_nonzero.test_unchanged_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A(object):</span>
<span class="s">                def __bool__(self):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_nonzero.test_unchanged_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_nonzero.test_unchanged_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            class A(object):</span>
<span class="s">                def __nonzero__(self, a):</span>
<span class="s">                    pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_nonzero.test_unchanged_func"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_nonzero.test_unchanged_func">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_func</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            def __nonzero__(self):</span>
<span class="s">                pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_numliterals"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals">[docs]</a><span class="k">class</span> <span class="nc">Test_numliterals</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;numliterals&quot;</span>

<div class="viewcode-block" id="Test_numliterals.test_octal_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals.test_octal_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_octal_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;0755&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;0o755&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_numliterals.test_long_int_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals.test_long_int_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_long_int_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;a = 12L&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;a = 12&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_numliterals.test_long_int_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals.test_long_int_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_long_int_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;a = 12l&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;a = 12&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_numliterals.test_long_hex"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals.test_long_hex">[docs]</a>    <span class="k">def</span> <span class="nf">test_long_hex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;b = 0x12l&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;b = 0x12&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_numliterals.test_comments_and_spacing"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals.test_comments_and_spacing">[docs]</a>    <span class="k">def</span> <span class="nf">test_comments_and_spacing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;b =   0x12L&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;b =   0x12&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;b = 0755 # spam&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;b = 0o755 # spam&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_numliterals.test_unchanged_int"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals.test_unchanged_int">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_int</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;5&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_numliterals.test_unchanged_float"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals.test_unchanged_float">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_float</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;5.0&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_numliterals.test_unchanged_octal"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals.test_unchanged_octal">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_octal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;0o755&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_numliterals.test_unchanged_hex"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals.test_unchanged_hex">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_hex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;0xABC&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_numliterals.test_unchanged_exp"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals.test_unchanged_exp">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_exp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;5.0e10&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_numliterals.test_unchanged_complex_int"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals.test_unchanged_complex_int">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_complex_int</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;5 + 4j&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_numliterals.test_unchanged_complex_float"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals.test_unchanged_complex_float">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_complex_float</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;5.4 + 4.9j&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_numliterals.test_unchanged_complex_bare"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_numliterals.test_unchanged_complex_bare">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_complex_bare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;4j&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;4.4j&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_renames"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_renames">[docs]</a><span class="k">class</span> <span class="nc">Test_renames</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;renames&quot;</span>

    <span class="n">modules</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;sys&quot;</span><span class="p">:</span>  <span class="p">(</span><span class="s">&quot;maxint&quot;</span><span class="p">,</span> <span class="s">&quot;maxsize&quot;</span><span class="p">),</span>
              <span class="p">}</span>

<div class="viewcode-block" id="Test_renames.test_import_from"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_renames.test_import_from">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_from</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">mod</span><span class="p">,</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">old</span><span class="p">)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;from foo import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">old</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_renames.test_import_from_as"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_renames.test_import_from_as">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_from_as</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">mod</span><span class="p">,</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s"> as foo_bar&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">old</span><span class="p">)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s"> as foo_bar&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_renames.test_import_module_usage"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_renames.test_import_module_usage">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_module_usage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">mod</span><span class="p">,</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                foo(</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s">)</span>
<span class="s">                &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="n">old</span><span class="p">)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                foo(</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s">)</span>
<span class="s">                &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_renames.XXX_test_from_import_usage"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_renames.XXX_test_from_import_usage">[docs]</a>    <span class="k">def</span> <span class="nf">XXX_test_from_import_usage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># not implemented yet</span>
        <span class="k">for</span> <span class="n">mod</span><span class="p">,</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                foo(</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">)</span>
<span class="s">                &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="n">old</span><span class="p">)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                from </span><span class="si">%s</span><span class="s"> import </span><span class="si">%s</span><span class="s"></span>
<span class="s">                foo(</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">)</span>
<span class="s">                &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_unicode"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_unicode">[docs]</a><span class="k">class</span> <span class="nc">Test_unicode</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;unicode&quot;</span>

<div class="viewcode-block" id="Test_unicode.test_whitespace"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_unicode.test_whitespace">[docs]</a>    <span class="k">def</span> <span class="nf">test_whitespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;unicode( x)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;str( x)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot; unicode(x )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot; str(x )&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot; u&#39;h&#39;&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot; &#39;h&#39;&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_unicode.test_unicode_call"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_unicode.test_unicode_call">[docs]</a>    <span class="k">def</span> <span class="nf">test_unicode_call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;unicode(x, y, z)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;str(x, y, z)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_unicode.test_unichr"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_unicode.test_unichr">[docs]</a>    <span class="k">def</span> <span class="nf">test_unichr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;unichr(u&#39;h&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;chr(&#39;h&#39;)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_unicode.test_unicode_literal_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_unicode.test_unicode_literal_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_unicode_literal_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;u&quot;x&quot;&#39;&#39;&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;&quot;x&quot;&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_unicode.test_unicode_literal_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_unicode.test_unicode_literal_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_unicode_literal_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;ur&#39;x&#39;&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;r&#39;x&#39;&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_unicode.test_unicode_literal_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_unicode.test_unicode_literal_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_unicode_literal_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;UR&#39;&#39;&#39;x&#39;&#39;&#39; &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;R&#39;&#39;&#39;x&#39;&#39;&#39; &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_unicode.test_native_literal_escape_u"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_unicode.test_native_literal_escape_u">[docs]</a>    <span class="k">def</span> <span class="nf">test_native_literal_escape_u</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;&#39;\\\\u20ac\\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;r&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;r&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_unicode.test_bytes_literal_escape_u"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_unicode.test_bytes_literal_escape_u">[docs]</a>    <span class="k">def</span> <span class="nf">test_bytes_literal_escape_u</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;b&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;b&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;br&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;br&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_unicode.test_unicode_literal_escape_u"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_unicode.test_unicode_literal_escape_u">[docs]</a>    <span class="k">def</span> <span class="nf">test_unicode_literal_escape_u</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;u&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;ur&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;r&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_unicode.test_native_unicode_literal_escape_u"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_unicode.test_native_unicode_literal_escape_u">[docs]</a>    <span class="k">def</span> <span class="nf">test_native_unicode_literal_escape_u</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="s">&#39;from __future__ import unicode_literals</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">f</span> <span class="o">+</span> <span class="s">r&quot;&quot;&quot;&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">f</span> <span class="o">+</span> <span class="s">r&quot;&quot;&quot;&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="n">f</span> <span class="o">+</span> <span class="s">r&quot;&quot;&quot;r&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">f</span> <span class="o">+</span> <span class="s">r&quot;&quot;&quot;r&#39;\\\u20ac\U0001d121\\u20ac&#39;&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_callable"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_callable">[docs]</a><span class="k">class</span> <span class="nc">Test_callable</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;callable&quot;</span>

<div class="viewcode-block" id="Test_callable.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_callable.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;callable(    x)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import collections</span><span class="se">\n</span><span class="s">isinstance(    x, collections.Callable)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if     callable(x): pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import collections</span>
<span class="s">if     isinstance(x, collections.Callable): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_callable.test_callable_call"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_callable.test_callable_call">[docs]</a>    <span class="k">def</span> <span class="nf">test_callable_call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;callable(x)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import collections</span><span class="se">\n</span><span class="s">isinstance(x, collections.Callable)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_callable.test_global_import"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_callable.test_global_import">[docs]</a>    <span class="k">def</span> <span class="nf">test_global_import</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">def spam(foo):</span>
<span class="s">    callable(foo)&quot;&quot;&quot;</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">import collections</span>
<span class="s">def spam(foo):</span>
<span class="s">    isinstance(foo, collections.Callable)&quot;&quot;&quot;</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">import collections</span>
<span class="s">def spam(foo):</span>
<span class="s">    callable(foo)&quot;&quot;&quot;</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="c"># same output if it was already imported</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">from collections import *</span>
<span class="s">def spam(foo):</span>
<span class="s">    callable(foo)&quot;&quot;&quot;</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">from collections import *</span>
<span class="s">import collections</span>
<span class="s">def spam(foo):</span>
<span class="s">    isinstance(foo, collections.Callable)&quot;&quot;&quot;</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">do_stuff()</span>
<span class="s">do_some_other_stuff()</span>
<span class="s">assert callable(do_stuff)&quot;&quot;&quot;</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">import collections</span>
<span class="s">do_stuff()</span>
<span class="s">do_some_other_stuff()</span>
<span class="s">assert isinstance(do_stuff, collections.Callable)&quot;&quot;&quot;</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">if isinstance(do_stuff, Callable):</span>
<span class="s">    assert callable(do_stuff)</span>
<span class="s">    do_stuff(do_stuff)</span>
<span class="s">    if not callable(do_stuff):</span>
<span class="s">        exit(1)</span>
<span class="s">    else:</span>
<span class="s">        assert callable(do_stuff)</span>
<span class="s">else:</span>
<span class="s">    assert not callable(do_stuff)&quot;&quot;&quot;</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">import collections</span>
<span class="s">if isinstance(do_stuff, Callable):</span>
<span class="s">    assert isinstance(do_stuff, collections.Callable)</span>
<span class="s">    do_stuff(do_stuff)</span>
<span class="s">    if not isinstance(do_stuff, collections.Callable):</span>
<span class="s">        exit(1)</span>
<span class="s">    else:</span>
<span class="s">        assert isinstance(do_stuff, collections.Callable)</span>
<span class="s">else:</span>
<span class="s">    assert not isinstance(do_stuff, collections.Callable)&quot;&quot;&quot;</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_callable.test_callable_should_not_change"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_callable.test_callable_should_not_change">[docs]</a>    <span class="k">def</span> <span class="nf">test_callable_should_not_change</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;callable(*x)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;callable(x, y)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;callable(x, kw=y)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;callable()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_filter"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_filter">[docs]</a><span class="k">class</span> <span class="nc">Test_filter</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;filter&quot;</span>

<div class="viewcode-block" id="Test_filter.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_filter.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =   filter(    foo,     &#39;abc&#39;   )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =   list(filter(    foo,     &#39;abc&#39;   ))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =   filter(  None , &#39;abc&#39;  )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =   [_f for _f in &#39;abc&#39; if _f]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_filter.test_filter_basic"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_filter.test_filter_basic">[docs]</a>    <span class="k">def</span> <span class="nf">test_filter_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = filter(None, &#39;abc&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = [_f for _f in &#39;abc&#39; if _f]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = len(filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = len(list(filter(f, &#39;abc&#39;)))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = filter(lambda x: x%2 == 0, range(10))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = [x for x in range(10) if x%2 == 0]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="c"># Note the parens around x</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = filter(lambda (x): x%2 == 0, range(10))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = [x for x in range(10) if x%2 == 0]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="c"># XXX This (rare) case is not supported</span>
<span class="c">##         b = &quot;&quot;&quot;x = filter(f, &#39;abc&#39;)[0]&quot;&quot;&quot;</span>
<span class="c">##         a = &quot;&quot;&quot;x = list(filter(f, &#39;abc&#39;))[0]&quot;&quot;&quot;</span>
<span class="c">##         self.check(b, a)</span>
</div>
<div class="viewcode-block" id="Test_filter.test_filter_nochange"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_filter.test_filter_nochange">[docs]</a>    <span class="k">def</span> <span class="nf">test_filter_nochange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;b.join(filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;(a + foo(5)).join(filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;iter(filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;list(filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;list(filter(f, &#39;abc&#39;))[0]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set(filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set(filter(f, &#39;abc&#39;)).pop()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;tuple(filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;any(filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;all(filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;sum(filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;sorted(filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;sorted(filter(f, &#39;abc&#39;), key=blah)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;sorted(filter(f, &#39;abc&#39;), key=blah)[0]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;enumerate(filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;enumerate(filter(f, &#39;abc&#39;), start=1)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;for i in filter(f, &#39;abc&#39;): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[x for x in filter(f, &#39;abc&#39;)]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;(x for x in filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_filter.test_future_builtins"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_filter.test_future_builtins">[docs]</a>    <span class="k">def</span> <span class="nf">test_future_builtins</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from future_builtins import spam, filter; filter(f, &#39;ham&#39;)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;from future_builtins import spam; x = filter(f, &#39;abc&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;from future_builtins import spam; x = list(filter(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from future_builtins import *; filter(f, &#39;ham&#39;)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_map"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_map">[docs]</a><span class="k">class</span> <span class="nc">Test_map</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;map&quot;</span>

<div class="viewcode-block" id="Test_map.check"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_map.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;from future_builtins import map; &quot;</span> <span class="o">+</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Test_map</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_map.test_prefix_preservation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_map.test_prefix_preservation">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix_preservation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =    map(   f,    &#39;abc&#39;   )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =    list(map(   f,    &#39;abc&#39;   ))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_map.test_trailing_comment"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_map.test_trailing_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_trailing_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = map(f, &#39;abc&#39;)   #   foo&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = list(map(f, &#39;abc&#39;))   #   foo&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_map.test_None_with_multiple_arguments"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_map.test_None_with_multiple_arguments">[docs]</a>    <span class="k">def</span> <span class="nf">test_None_with_multiple_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = map(None, a, b, c)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;cannot convert map(None, ...) with &quot;</span>
                             <span class="s">&quot;multiple arguments&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_map.test_map_basic"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_map.test_map_basic">[docs]</a>    <span class="k">def</span> <span class="nf">test_map_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = map(f, &#39;abc&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = list(map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = len(map(f, &#39;abc&#39;, &#39;def&#39;))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = len(list(map(f, &#39;abc&#39;, &#39;def&#39;)))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = map(None, &#39;abc&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = list(&#39;abc&#39;)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = map(lambda x: x+1, range(4))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = [x+1 for x in range(4)]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="c"># Note the parens around x</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = map(lambda (x): x+1, range(4))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = [x+1 for x in range(4)]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            foo()</span>
<span class="s">            # foo</span>
<span class="s">            map(f, x)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            foo()</span>
<span class="s">            # foo</span>
<span class="s">            list(map(f, x))</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="s">&quot;You should use a for loop here&quot;</span><span class="p">)</span>

        <span class="c"># XXX This (rare) case is not supported</span>
<span class="c">##         b = &quot;&quot;&quot;x = map(f, &#39;abc&#39;)[0]&quot;&quot;&quot;</span>
<span class="c">##         a = &quot;&quot;&quot;x = list(map(f, &#39;abc&#39;))[0]&quot;&quot;&quot;</span>
<span class="c">##         self.check(b, a)</span>
</div>
<div class="viewcode-block" id="Test_map.test_map_nochange"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_map.test_map_nochange">[docs]</a>    <span class="k">def</span> <span class="nf">test_map_nochange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;b.join(map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;(a + foo(5)).join(map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;iter(map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;list(map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;list(map(f, &#39;abc&#39;))[0]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set(map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set(map(f, &#39;abc&#39;)).pop()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;tuple(map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;any(map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;all(map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;sum(map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;sorted(map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;sorted(map(f, &#39;abc&#39;), key=blah)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;sorted(map(f, &#39;abc&#39;), key=blah)[0]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;enumerate(map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;enumerate(map(f, &#39;abc&#39;), start=1)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;for i in map(f, &#39;abc&#39;): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[x for x in map(f, &#39;abc&#39;)]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;(x for x in map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_map.test_future_builtins"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_map.test_future_builtins">[docs]</a>    <span class="k">def</span> <span class="nf">test_future_builtins</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from future_builtins import spam, map, eggs; map(f, &#39;ham&#39;)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;from future_builtins import spam, eggs; x = map(f, &#39;abc&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;from future_builtins import spam, eggs; x = list(map(f, &#39;abc&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from future_builtins import *; map(f, &#39;ham&#39;)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_zip"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_zip">[docs]</a><span class="k">class</span> <span class="nc">Test_zip</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;zip&quot;</span>

<div class="viewcode-block" id="Test_zip.check"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_zip.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;from future_builtins import zip; &quot;</span> <span class="o">+</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Test_zip</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_zip.test_zip_basic"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_zip.test_zip_basic">[docs]</a>    <span class="k">def</span> <span class="nf">test_zip_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = zip(a, b, c)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = list(zip(a, b, c))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = len(zip(a, b))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = len(list(zip(a, b)))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_zip.test_zip_nochange"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_zip.test_zip_nochange">[docs]</a>    <span class="k">def</span> <span class="nf">test_zip_nochange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;b.join(zip(a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;(a + foo(5)).join(zip(a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;iter(zip(a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;list(zip(a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;list(zip(a, b))[0]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set(zip(a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set(zip(a, b)).pop()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;tuple(zip(a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;any(zip(a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;all(zip(a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;sum(zip(a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;sorted(zip(a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;sorted(zip(a, b), key=blah)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;sorted(zip(a, b), key=blah)[0]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;enumerate(zip(a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;enumerate(zip(a, b), start=1)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;for i in zip(a, b): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[x for x in zip(a, b)]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;(x for x in zip(a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_zip.test_future_builtins"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_zip.test_future_builtins">[docs]</a>    <span class="k">def</span> <span class="nf">test_future_builtins</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from future_builtins import spam, zip, eggs; zip(a, b)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;from future_builtins import spam, eggs; x = zip(a, b)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;from future_builtins import spam, eggs; x = list(zip(a, b))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from future_builtins import *; zip(a, b)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_standarderror"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_standarderror">[docs]</a><span class="k">class</span> <span class="nc">Test_standarderror</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;standarderror&quot;</span>

<div class="viewcode-block" id="Test_standarderror.test"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_standarderror.test">[docs]</a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =    StandardError()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x =    Exception()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = StandardError(a, b, c)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = Exception(a, b, c)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;f(2 + StandardError(a, b, c))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;f(2 + Exception(a, b, c))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_types"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_types">[docs]</a><span class="k">class</span> <span class="nc">Test_types</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;types&quot;</span>

<div class="viewcode-block" id="Test_types.test_basic_types_convert"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_types.test_basic_types_convert">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic_types_convert</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;types.StringType&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;bytes&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;types.DictType&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;dict&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;types . IntType&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;int&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;types.ListType&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;list&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;types.LongType&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;int&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;types.NoneType&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(None)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_idioms"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms">[docs]</a><span class="k">class</span> <span class="nc">Test_idioms</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;idioms&quot;</span>

<div class="viewcode-block" id="Test_idioms.test_while"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_while">[docs]</a>    <span class="k">def</span> <span class="nf">test_while</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;while 1: foo()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;while True: foo()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;while   1: foo()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;while   True: foo()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            while 1:</span>
<span class="s">                foo()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            while True:</span>
<span class="s">                foo()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_while_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_while_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_while_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;while 11: foo()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;while 0: foo()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;while foo(): foo()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;while []: foo()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_eq_simple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_eq_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_eq_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(x) == T&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x, T)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   type(x) == T: pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   isinstance(x, T): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_eq_reverse"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_eq_reverse">[docs]</a>    <span class="k">def</span> <span class="nf">test_eq_reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;T == type(x)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x, T)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   T == type(x): pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   isinstance(x, T): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_eq_expression"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_eq_expression">[docs]</a>    <span class="k">def</span> <span class="nf">test_eq_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(x+y) == d.get(&#39;T&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x+y, d.get(&#39;T&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(   x  +  y) == d.get(&#39;T&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x  +  y, d.get(&#39;T&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_is_simple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_is_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(x) is T&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x, T)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   type(x) is T: pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   isinstance(x, T): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_is_reverse"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_is_reverse">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;T is type(x)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x, T)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   T is type(x): pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   isinstance(x, T): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_is_expression"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_is_expression">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(x+y) is d.get(&#39;T&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x+y, d.get(&#39;T&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(   x  +  y) is d.get(&#39;T&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x  +  y, d.get(&#39;T&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_is_not_simple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_is_not_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_not_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(x) is not T&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;not isinstance(x, T)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   type(x) is not T: pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   not isinstance(x, T): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_is_not_reverse"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_is_not_reverse">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_not_reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;T is not type(x)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;not isinstance(x, T)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   T is not type(x): pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   not isinstance(x, T): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_is_not_expression"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_is_not_expression">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_not_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(x+y) is not d.get(&#39;T&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;not isinstance(x+y, d.get(&#39;T&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(   x  +  y) is not d.get(&#39;T&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;not isinstance(x  +  y, d.get(&#39;T&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_ne_simple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_ne_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_ne_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(x) != T&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;not isinstance(x, T)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   type(x) != T: pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   not isinstance(x, T): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_ne_reverse"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_ne_reverse">[docs]</a>    <span class="k">def</span> <span class="nf">test_ne_reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;T != type(x)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;not isinstance(x, T)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   T != type(x): pass&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if   not isinstance(x, T): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_ne_expression"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_ne_expression">[docs]</a>    <span class="k">def</span> <span class="nf">test_ne_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(x+y) != d.get(&#39;T&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;not isinstance(x+y, d.get(&#39;T&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(   x  +  y) != d.get(&#39;T&#39;)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;not isinstance(x  +  y, d.get(&#39;T&#39;))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_type_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_type_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_type_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;type(x).__name__&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_sort_list_call"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_sort_list_call">[docs]</a>    <span class="k">def</span> <span class="nf">test_sort_list_call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = list(t)</span>
<span class="s">            v.sort()</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = sorted(t)</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = list(foo(b) + d)</span>
<span class="s">            v.sort()</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = sorted(foo(b) + d)</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            while x:</span>
<span class="s">                v = list(t)</span>
<span class="s">                v.sort()</span>
<span class="s">                foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            while x:</span>
<span class="s">                v = sorted(t)</span>
<span class="s">                foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = list(t)</span>
<span class="s">            # foo</span>
<span class="s">            v.sort()</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = sorted(t)</span>
<span class="s">            # foo</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;</span>
<span class="s">            v = list(   t)</span>
<span class="s">            v.sort()</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;</span>
<span class="s">            v = sorted(   t)</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                m = list(s)</span>
<span class="s">                m.sort()</span>
<span class="s">            except: pass</span>
<span class="s">            &quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                m = sorted(s)</span>
<span class="s">            except: pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                m = list(s)</span>
<span class="s">                # foo</span>
<span class="s">                m.sort()</span>
<span class="s">            except: pass</span>
<span class="s">            &quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;</span>
<span class="s">            try:</span>
<span class="s">                m = sorted(s)</span>
<span class="s">                # foo</span>
<span class="s">            except: pass</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;</span>
<span class="s">            m = list(s)</span>
<span class="s">            # more comments</span>
<span class="s">            m.sort()&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;</span>
<span class="s">            m = sorted(s)</span>
<span class="s">            # more comments&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_sort_simple_expr"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_sort_simple_expr">[docs]</a>    <span class="k">def</span> <span class="nf">test_sort_simple_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = t</span>
<span class="s">            v.sort()</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = sorted(t)</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = foo(b)</span>
<span class="s">            v.sort()</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = sorted(foo(b))</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = b.keys()</span>
<span class="s">            v.sort()</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = sorted(b.keys())</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = foo(b) + d</span>
<span class="s">            v.sort()</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = sorted(foo(b) + d)</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            while x:</span>
<span class="s">                v = t</span>
<span class="s">                v.sort()</span>
<span class="s">                foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            while x:</span>
<span class="s">                v = sorted(t)</span>
<span class="s">                foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = t</span>
<span class="s">            # foo</span>
<span class="s">            v.sort()</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = sorted(t)</span>
<span class="s">            # foo</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;</span>
<span class="s">            v =   t</span>
<span class="s">            v.sort()</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;</span>
<span class="s">            v =   sorted(t)</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_idioms.test_sort_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_idioms.test_sort_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_sort_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = list(t)</span>
<span class="s">            w.sort()</span>
<span class="s">            foo(w)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            v = list(t)</span>
<span class="s">            v.sort(u)</span>
<span class="s">            foo(v)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_basestring"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_basestring">[docs]</a><span class="k">class</span> <span class="nc">Test_basestring</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;basestring&quot;</span>

<div class="viewcode-block" id="Test_basestring.test_basestring"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_basestring.test_basestring">[docs]</a>    <span class="k">def</span> <span class="nf">test_basestring</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x, basestring)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;isinstance(x, str)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_buffer"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_buffer">[docs]</a><span class="k">class</span> <span class="nc">Test_buffer</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;buffer&quot;</span>

<div class="viewcode-block" id="Test_buffer.test_buffer"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_buffer.test_buffer">[docs]</a>    <span class="k">def</span> <span class="nf">test_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = buffer(y)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;x = memoryview(y)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_buffer.test_slicing"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_buffer.test_slicing">[docs]</a>    <span class="k">def</span> <span class="nf">test_slicing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;buffer(y)[4:5]&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;memoryview(y)[4:5]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_future"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_future">[docs]</a><span class="k">class</span> <span class="nc">Test_future</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;future&quot;</span>

<div class="viewcode-block" id="Test_future.test_future"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_future.test_future">[docs]</a>    <span class="k">def</span> <span class="nf">test_future</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;from __future__ import braces&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;# comment</span><span class="se">\n</span><span class="s">from __future__ import braces&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;# comment</span><span class="se">\n</span><span class="s">&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;from __future__ import braces</span><span class="se">\n</span><span class="s"># comment&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span><span class="se">\n</span><span class="s"># comment&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_future.test_run_order"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_future.test_run_order">[docs]</a>    <span class="k">def</span> <span class="nf">test_run_order</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assert_runs_after</span><span class="p">(</span><span class="s">&#39;print&#39;</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_itertools"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools">[docs]</a><span class="k">class</span> <span class="nc">Test_itertools</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;itertools&quot;</span>

<div class="viewcode-block" id="Test_itertools.checkall"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools.checkall">[docs]</a>    <span class="k">def</span> <span class="nf">checkall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">before</span><span class="p">,</span> <span class="n">after</span><span class="p">):</span>
        <span class="c"># Because we need to check with and without the itertools prefix</span>
        <span class="c"># and on each of the three functions, these loops make it all</span>
        <span class="c"># much easier</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;itertools.&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;map&#39;</span><span class="p">,</span> <span class="s">&#39;filter&#39;</span><span class="p">,</span> <span class="s">&#39;zip&#39;</span><span class="p">):</span>
                <span class="n">b</span> <span class="o">=</span> <span class="n">before</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="s">&#39;i&#39;</span><span class="o">+</span><span class="n">f</span><span class="p">)</span>
                <span class="n">a</span> <span class="o">=</span> <span class="n">after</span> <span class="o">%</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_itertools.test_0"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools.test_0">[docs]</a>    <span class="k">def</span> <span class="nf">test_0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># A simple example -- test_1 covers exactly the same thing,</span>
        <span class="c"># but it&#39;s not quite as clear.</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;itertools.izip(a, b)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;zip(a, b)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_itertools.test_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools.test_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span><span class="si">%s</span><span class="s">(f, a)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span><span class="si">%s</span><span class="s">(f, a)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkall</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_itertools.test_qualified"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools.test_qualified">[docs]</a>    <span class="k">def</span> <span class="nf">test_qualified</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;itertools.ifilterfalse(a, b)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;itertools.filterfalse(a, b)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;itertools.izip_longest(a, b)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;itertools.zip_longest(a, b)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_itertools.test_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools.test_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;ifilterfalse(a, b)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;filterfalse(a, b)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;izip_longest(a, b)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;zip_longest(a, b)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_itertools.test_space_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools.test_space_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_space_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;    </span><span class="si">%s</span><span class="s">(f, a)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;    </span><span class="si">%s</span><span class="s">(f, a)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkall</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_itertools.test_space_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools.test_space_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_space_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;    itertools.ifilterfalse(a, b)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;    itertools.filterfalse(a, b)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;    itertools.izip_longest(a, b)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;    itertools.zip_longest(a, b)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_itertools.test_run_order"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools.test_run_order">[docs]</a>    <span class="k">def</span> <span class="nf">test_run_order</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assert_runs_after</span><span class="p">(</span><span class="s">&#39;map&#39;</span><span class="p">,</span> <span class="s">&#39;zip&#39;</span><span class="p">,</span> <span class="s">&#39;filter&#39;</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_itertools_imports"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools_imports">[docs]</a><span class="k">class</span> <span class="nc">Test_itertools_imports</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&#39;itertools_imports&#39;</span>

<div class="viewcode-block" id="Test_itertools_imports.test_reduced"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools_imports.test_reduced">[docs]</a>    <span class="k">def</span> <span class="nf">test_reduced</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from itertools import imap, izip, foo&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from itertools import foo&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from itertools import bar, imap, izip, foo&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from itertools import bar, foo&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from itertools import chain, imap, izip&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from itertools import chain&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_itertools_imports.test_comments"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools_imports.test_comments">[docs]</a>    <span class="k">def</span> <span class="nf">test_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;#foo</span><span class="se">\n</span><span class="s">from itertools import imap, izip&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;#foo</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_itertools_imports.test_none"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools_imports.test_none">[docs]</a>    <span class="k">def</span> <span class="nf">test_none</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from itertools import imap, izip&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from itertools import izip&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_itertools_imports.test_import_as"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools_imports.test_import_as">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_as</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from itertools import izip, bar as bang, imap&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from itertools import bar as bang&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from itertools import izip as _zip, imap, bar&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from itertools import bar&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from itertools import imap as _map&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from itertools import imap as _map, izip as _zip&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;from itertools import bar as bang&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_itertools_imports.test_ifilter_and_zip_longest"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools_imports.test_ifilter_and_zip_longest">[docs]</a>    <span class="k">def</span> <span class="nf">test_ifilter_and_zip_longest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="s">&quot;filterfalse&quot;</span><span class="p">,</span> <span class="s">&quot;zip_longest&quot;</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from itertools import i</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from itertools import </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from itertools import imap, i</span><span class="si">%s</span><span class="s">, foo&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from itertools import </span><span class="si">%s</span><span class="s">, foo&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

            <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from itertools import bar, i</span><span class="si">%s</span><span class="s">, foo&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from itertools import bar, </span><span class="si">%s</span><span class="s">, foo&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_itertools_imports.test_import_star"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools_imports.test_import_star">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_star</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;from itertools import *&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="Test_itertools_imports.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_itertools_imports.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;from itertools import foo&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_import"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import">[docs]</a><span class="k">class</span> <span class="nc">Test_import</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;import&quot;</span>

<div class="viewcode-block" id="Test_import.setUp"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Test_import</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="c"># Need to replace fix_import&#39;s exists method</span>
        <span class="c"># so we can check that it&#39;s doing the right thing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files_checked</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">present_files</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">always_exists</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">def</span> <span class="nf">fake_exists</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">files_checked</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">always_exists</span> <span class="ow">or</span> <span class="p">(</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">present_files</span><span class="p">)</span>

        <span class="kn">from</span> <span class="nn">lib2to3.fixes</span> <span class="kn">import</span> <span class="n">fix_import</span>
        <span class="n">fix_import</span><span class="o">.</span><span class="n">exists</span> <span class="o">=</span> <span class="n">fake_exists</span>
</div>
<div class="viewcode-block" id="Test_import.tearDown"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">lib2to3.fixes</span> <span class="kn">import</span> <span class="n">fix_import</span>
        <span class="n">fix_import</span><span class="o">.</span><span class="n">exists</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span>
</div>
<div class="viewcode-block" id="Test_import.check_both"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.check_both">[docs]</a>    <span class="k">def</span> <span class="nf">check_both</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">always_exists</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Test_import</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">always_exists</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Test_import</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_files_checked"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_files_checked">[docs]</a>    <span class="k">def</span> <span class="nf">test_files_checked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">p</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="c"># Takes a unix path and returns a path with correct separators</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">pathsep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">always_exists</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">present_files</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s">&#39;__init__.py&#39;</span><span class="p">])</span>
        <span class="n">expected_extensions</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;.py&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">,</span> <span class="s">&#39;.pyc&#39;</span><span class="p">,</span> <span class="s">&#39;.so&#39;</span><span class="p">,</span> <span class="s">&#39;.sl&#39;</span><span class="p">,</span> <span class="s">&#39;.pyd&#39;</span><span class="p">)</span>
        <span class="n">names_to_test</span> <span class="o">=</span> <span class="p">(</span><span class="n">p</span><span class="p">(</span><span class="s">&quot;/spam/eggs.py&quot;</span><span class="p">),</span> <span class="s">&quot;ni.py&quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">(</span><span class="s">&quot;../../shrubbery.py&quot;</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names_to_test</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">files_checked</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;import jam&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/jam&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;jam&#39;</span>
            <span class="n">expected_checks</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="n">ext</span> <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">expected_extensions</span><span class="p">)</span>
            <span class="n">expected_checks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;__init__.py&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">files_checked</span><span class="p">),</span> <span class="n">expected_checks</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_not_in_package"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_not_in_package">[docs]</a>    <span class="k">def</span> <span class="nf">test_not_in_package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;import bar&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">always_exists</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">present_files</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s">&quot;bar.py&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_with_absolute_import_enabled"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_with_absolute_import_enabled">[docs]</a>    <span class="k">def</span> <span class="nf">test_with_absolute_import_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;from __future__ import absolute_import</span><span class="se">\n</span><span class="s">import bar&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">always_exists</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">present_files</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s">&quot;__init__.py&quot;</span><span class="p">,</span> <span class="s">&quot;bar.py&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_in_package"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_in_package">[docs]</a>    <span class="k">def</span> <span class="nf">test_in_package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import bar&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from . import bar&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">always_exists</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">present_files</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s">&quot;__init__.py&quot;</span><span class="p">,</span> <span class="s">&quot;bar.py&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_import_from_package"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_import_from_package">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_from_package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import bar&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from . import bar&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">always_exists</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">present_files</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s">&quot;__init__.py&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_already_relative_import"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_already_relative_import">[docs]</a>    <span class="k">def</span> <span class="nf">test_already_relative_import</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;from . import bar&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_comments_and_indent"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_comments_and_indent">[docs]</a>    <span class="k">def</span> <span class="nf">test_comments_and_indent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import bar # Foo&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from . import bar # Foo&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_from"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_from">[docs]</a>    <span class="k">def</span> <span class="nf">test_from</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from foo import bar, baz&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from .foo import bar, baz&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from foo import bar&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from .foo import bar&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from foo import (bar, baz)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from .foo import (bar, baz)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_dotted_from"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_dotted_from">[docs]</a>    <span class="k">def</span> <span class="nf">test_dotted_from</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from green.eggs import ham&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from .green.eggs import ham&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_from_as"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_from_as">[docs]</a>    <span class="k">def</span> <span class="nf">test_from_as</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;from green.eggs import ham as spam&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from .green.eggs import ham as spam&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_import"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_import">[docs]</a>    <span class="k">def</span> <span class="nf">test_import</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import foo&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from . import foo&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import foo, bar&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from . import foo, bar&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import foo, bar, x&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from . import foo, bar, x&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import x, y, z&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from . import x, y, z&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_import_as"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_import_as">[docs]</a>    <span class="k">def</span> <span class="nf">test_import_as</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import foo as x&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from . import foo as x&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import a as b, b as c, c as d&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from . import a as b, b as c, c as d&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_local_and_absolute"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_local_and_absolute">[docs]</a>    <span class="k">def</span> <span class="nf">test_local_and_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">always_exists</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">present_files</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s">&quot;foo.py&quot;</span><span class="p">,</span> <span class="s">&quot;__init__.py&quot;</span><span class="p">])</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;import foo, bar&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;absolute and local imports together&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_dotted_import"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_dotted_import">[docs]</a>    <span class="k">def</span> <span class="nf">test_dotted_import</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import foo.bar&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from . import foo.bar&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_dotted_import_as"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_dotted_import_as">[docs]</a>    <span class="k">def</span> <span class="nf">test_dotted_import_as</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;import foo.bar as bang&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;from . import foo.bar as bang&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_import.test_prefix"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_import.test_prefix">[docs]</a>    <span class="k">def</span> <span class="nf">test_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        # prefix</span>
<span class="s">        import foo.bar</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        # prefix</span>
<span class="s">        from . import foo.bar</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_both</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_set_literal"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_set_literal">[docs]</a><span class="k">class</span> <span class="nc">Test_set_literal</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>

    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;set_literal&quot;</span>

<div class="viewcode-block" id="Test_set_literal.test_basic"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_set_literal.test_basic">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set([1, 2, 3])&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{1, 2, 3}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set((1, 2, 3))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{1, 2, 3}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set((1,))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{1}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set([1])&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set((a, b))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{a, b}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set([a, b])&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set((a*234, f(args=23)))&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{a*234, f(args=23)}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set([a*23, f(23)])&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{a*23, f(23)}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set([a-234**23])&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{a-234**23}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_set_literal.test_listcomps"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_set_literal.test_listcomps">[docs]</a>    <span class="k">def</span> <span class="nf">test_listcomps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set([x for x in y])&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{x for x in y}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set([x for x in y if x == m])&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{x for x in y if x == m}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set([x for x in y for a in b])&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{x for x in y for a in b}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set([f(x) - 23 for x in y])&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{f(x) - 23 for x in y}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_set_literal.test_whitespace"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_set_literal.test_whitespace">[docs]</a>    <span class="k">def</span> <span class="nf">test_whitespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set( [1, 2])&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{1, 2}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set([1 ,  2])&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{1 ,  2}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set([ 1 ])&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{ 1 }&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set( [1] )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{1}&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set([  1,  2  ])&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{  1,  2  }&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set([x  for x in y ])&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{x  for x in y }&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set(</span>
<span class="s">                   [1, 2]</span>
<span class="s">               )</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{1, 2}</span><span class="se">\n</span><span class="s">&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_set_literal.test_comments"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_set_literal.test_comments">[docs]</a>    <span class="k">def</span> <span class="nf">test_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set((1, 2)) # Hi&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{1, 2} # Hi&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="c"># This isn&#39;t optimal behavior, but the fixer is optional.</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            # Foo</span>
<span class="s">            set( # Bar</span>
<span class="s">               (1, 2)</span>
<span class="s">            )</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            # Foo</span>
<span class="s">            {1, 2}</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_set_literal.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_set_literal.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set(a)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set(a, b, c)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="c"># Don&#39;t transform generators because they might have to be lazy.</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set(x for x in y)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set(x for x in y if z)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;set(a*823-23**2 + f(23))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_sys_exc"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_sys_exc">[docs]</a><span class="k">class</span> <span class="nc">Test_sys_exc</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;sys_exc&quot;</span>

<div class="viewcode-block" id="Test_sys_exc.test_0"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_sys_exc.test_0">[docs]</a>    <span class="k">def</span> <span class="nf">test_0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;sys.exc_type&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;sys.exc_info()[0]&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_sys_exc.test_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_sys_exc.test_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;sys.exc_value&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;sys.exc_info()[1]&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_sys_exc.test_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_sys_exc.test_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;sys.exc_traceback&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;sys.exc_info()[2]&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_sys_exc.test_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_sys_exc.test_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;sys.exc_type # Foo&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;sys.exc_info()[0] # Foo&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_sys_exc.test_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_sys_exc.test_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;sys.  exc_type&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;sys.  exc_info()[0]&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_sys_exc.test_5"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_sys_exc.test_5">[docs]</a>    <span class="k">def</span> <span class="nf">test_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;sys  .exc_type&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;sys  .exc_info()[0]&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_paren"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_paren">[docs]</a><span class="k">class</span> <span class="nc">Test_paren</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>
    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;paren&quot;</span>

<div class="viewcode-block" id="Test_paren.test_0"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_paren.test_0">[docs]</a>    <span class="k">def</span> <span class="nf">test_0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in 1, 2 ]&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in (1, 2) ]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_paren.test_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_paren.test_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in 1, 2, ]&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in (1, 2,) ]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_paren.test_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_paren.test_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i  in     1, 2 ]&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i  in     (1, 2) ]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_paren.test_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_paren.test_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in 1, 2 if i]&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in (1, 2) if i]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_paren.test_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_paren.test_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in 1,    2    ]&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in (1,    2)    ]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_paren.test_5"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_paren.test_5">[docs]</a>    <span class="k">def</span> <span class="nf">test_5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;(i for i in 1, 2)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;(i for i in (1, 2))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_paren.test_6"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_paren.test_6">[docs]</a>    <span class="k">def</span> <span class="nf">test_6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;(i for i in 1   ,2   if i)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;(i for i in (1   ,2)   if i)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_paren.test_unchanged_0"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_paren.test_unchanged_0">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in (1, 2)]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_paren.test_unchanged_1"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_paren.test_unchanged_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in foo()]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_paren.test_unchanged_2"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_paren.test_unchanged_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in (1, 2) if nothing]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_paren.test_unchanged_3"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_paren.test_unchanged_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;(i for i in (1, 2))&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_paren.test_unchanged_4"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_paren.test_unchanged_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;[i for i in m]&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Test_metaclass"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_metaclass">[docs]</a><span class="k">class</span> <span class="nc">Test_metaclass</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>

    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&#39;metaclass&#39;</span>

<div class="viewcode-block" id="Test_metaclass.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_metaclass.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;class X(): pass&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;class X(object): pass&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;class X(object1, object2): pass&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;class X(object1, object2, object3): pass&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;class X(metaclass=Meta): pass&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;class X(b, arg=23, metclass=Meta): pass&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&quot;class X(b, arg=23, metaclass=Meta, other=42): pass&quot;</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X:</span>
<span class="s">            def __metaclass__(self): pass</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X:</span>
<span class="s">            a[23] = 74</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_metaclass.test_comments"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_metaclass.test_comments">[docs]</a>    <span class="k">def</span> <span class="nf">test_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X:</span>
<span class="s">            # hi</span>
<span class="s">            __metaclass__ = AppleMeta</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(metaclass=AppleMeta):</span>
<span class="s">            # hi</span>
<span class="s">            pass</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X:</span>
<span class="s">            __metaclass__ = Meta</span>
<span class="s">            # Bedtime!</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(metaclass=Meta):</span>
<span class="s">            pass</span>
<span class="s">            # Bedtime!</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_metaclass.test_meta"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_metaclass.test_meta">[docs]</a>    <span class="k">def</span> <span class="nf">test_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># no-parent class, odd body</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X():</span>
<span class="s">            __metaclass__ = Q</span>
<span class="s">            pass</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(metaclass=Q):</span>
<span class="s">            pass</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="c"># one parent class, no body</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;class X(object): __metaclass__ = Q&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;class X(object, metaclass=Q): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>


        <span class="c"># one parent, simple body</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(object):</span>
<span class="s">            __metaclass__ = Meta</span>
<span class="s">            bar = 7</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(object, metaclass=Meta):</span>
<span class="s">            bar = 7</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X:</span>
<span class="s">            __metaclass__ = Meta; x = 4; g = 23</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(metaclass=Meta):</span>
<span class="s">            x = 4; g = 23</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="c"># one parent, simple body, __metaclass__ last</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(object):</span>
<span class="s">            bar = 7</span>
<span class="s">            __metaclass__ = Meta</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(object, metaclass=Meta):</span>
<span class="s">            bar = 7</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="c"># redefining __metaclass__</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X():</span>
<span class="s">            __metaclass__ = A</span>
<span class="s">            __metaclass__ = B</span>
<span class="s">            bar = 7</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(metaclass=B):</span>
<span class="s">            bar = 7</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="c"># multiple inheritance, simple body</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(clsA, clsB):</span>
<span class="s">            __metaclass__ = Meta</span>
<span class="s">            bar = 7</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(clsA, clsB, metaclass=Meta):</span>
<span class="s">            bar = 7</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="c"># keywords in the class statement</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;class m(a, arg=23): __metaclass__ = Meta&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;class m(a, arg=23, metaclass=Meta): pass&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(expression(2 + 4)):</span>
<span class="s">            __metaclass__ = Meta</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(expression(2 + 4), metaclass=Meta):</span>
<span class="s">            pass</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(expression(2 + 4), x**4):</span>
<span class="s">            __metaclass__ = Meta</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(expression(2 + 4), x**4, metaclass=Meta):</span>
<span class="s">            pass</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X:</span>
<span class="s">            __metaclass__ = Meta</span>
<span class="s">            save.py = 23</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        class X(metaclass=Meta):</span>
<span class="s">            save.py = 23</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_getcwdu"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_getcwdu">[docs]</a><span class="k">class</span> <span class="nc">Test_getcwdu</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>

    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&#39;getcwdu&#39;</span>

<div class="viewcode-block" id="Test_getcwdu.test_basic"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_getcwdu.test_basic">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.getcwdu&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.getcwd&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.getcwdu()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.getcwd()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;meth = os.getcwdu&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;meth = os.getcwd&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.getcwdu(args)&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.getcwd(args)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_getcwdu.test_comment"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_getcwdu.test_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.getcwdu() # Foo&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.getcwd() # Foo&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_getcwdu.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_getcwdu.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.getcwd()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;getcwdu()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.getcwdb()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_getcwdu.test_indentation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_getcwdu.test_indentation">[docs]</a>    <span class="k">def</span> <span class="nf">test_indentation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            if 1:</span>
<span class="s">                os.getcwdu()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            if 1:</span>
<span class="s">                os.getcwd()</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_getcwdu.test_multilation"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_getcwdu.test_multilation">[docs]</a>    <span class="k">def</span> <span class="nf">test_multilation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os .getcwdu()&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os .getcwd()&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.  getcwdu&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.  getcwd&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.getcwdu (  )&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;os.getcwd (  )&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_operator"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator">[docs]</a><span class="k">class</span> <span class="nc">Test_operator</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>

    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;operator&quot;</span>

<div class="viewcode-block" id="Test_operator.test_operator_isCallable"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_operator_isCallable">[docs]</a>    <span class="k">def</span> <span class="nf">test_operator_isCallable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;operator.isCallable(x)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;hasattr(x, &#39;__call__&#39;)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_operator.test_operator_sequenceIncludes"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_operator_sequenceIncludes">[docs]</a>    <span class="k">def</span> <span class="nf">test_operator_sequenceIncludes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;operator.sequenceIncludes(x, y)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;operator.contains(x, y)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;operator .sequenceIncludes(x, y)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;operator .contains(x, y)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;operator.  sequenceIncludes(x, y)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;operator.  contains(x, y)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_operator.test_operator_isSequenceType"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_operator_isSequenceType">[docs]</a>    <span class="k">def</span> <span class="nf">test_operator_isSequenceType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;operator.isSequenceType(x)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;import collections</span><span class="se">\n</span><span class="s">isinstance(x, collections.Sequence)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_operator.test_operator_isMappingType"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_operator_isMappingType">[docs]</a>    <span class="k">def</span> <span class="nf">test_operator_isMappingType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;operator.isMappingType(x)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;import collections</span><span class="se">\n</span><span class="s">isinstance(x, collections.Mapping)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_operator.test_operator_isNumberType"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_operator_isNumberType">[docs]</a>    <span class="k">def</span> <span class="nf">test_operator_isNumberType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;operator.isNumberType(x)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;import numbers</span><span class="se">\n</span><span class="s">isinstance(x, numbers.Number)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_operator.test_operator_repeat"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_operator_repeat">[docs]</a>    <span class="k">def</span> <span class="nf">test_operator_repeat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;operator.repeat(x, n)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;operator.mul(x, n)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;operator .repeat(x, n)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;operator .mul(x, n)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;operator.  repeat(x, n)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;operator.  mul(x, n)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_operator.test_operator_irepeat"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_operator_irepeat">[docs]</a>    <span class="k">def</span> <span class="nf">test_operator_irepeat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;operator.irepeat(x, n)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;operator.imul(x, n)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;operator .irepeat(x, n)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;operator .imul(x, n)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;operator.  irepeat(x, n)&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;operator.  imul(x, n)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_operator.test_bare_isCallable"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_bare_isCallable">[docs]</a>    <span class="k">def</span> <span class="nf">test_bare_isCallable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;isCallable(x)&quot;</span>
        <span class="n">t</span> <span class="o">=</span> <span class="s">&quot;You should use &#39;hasattr(x, &#39;__call__&#39;)&#39; here.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_operator.test_bare_sequenceIncludes"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_bare_sequenceIncludes">[docs]</a>    <span class="k">def</span> <span class="nf">test_bare_sequenceIncludes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;sequenceIncludes(x, y)&quot;</span>
        <span class="n">t</span> <span class="o">=</span> <span class="s">&quot;You should use &#39;operator.contains(x, y)&#39; here.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_operator.test_bare_operator_isSequenceType"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_bare_operator_isSequenceType">[docs]</a>    <span class="k">def</span> <span class="nf">test_bare_operator_isSequenceType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;isSequenceType(z)&quot;</span>
        <span class="n">t</span> <span class="o">=</span> <span class="s">&quot;You should use &#39;isinstance(z, collections.Sequence)&#39; here.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_operator.test_bare_operator_isMappingType"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_bare_operator_isMappingType">[docs]</a>    <span class="k">def</span> <span class="nf">test_bare_operator_isMappingType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;isMappingType(x)&quot;</span>
        <span class="n">t</span> <span class="o">=</span> <span class="s">&quot;You should use &#39;isinstance(x, collections.Mapping)&#39; here.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_operator.test_bare_operator_isNumberType"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_bare_operator_isNumberType">[docs]</a>    <span class="k">def</span> <span class="nf">test_bare_operator_isNumberType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;isNumberType(y)&quot;</span>
        <span class="n">t</span> <span class="o">=</span> <span class="s">&quot;You should use &#39;isinstance(y, numbers.Number)&#39; here.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_operator.test_bare_operator_repeat"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_bare_operator_repeat">[docs]</a>    <span class="k">def</span> <span class="nf">test_bare_operator_repeat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;repeat(x, n)&quot;</span>
        <span class="n">t</span> <span class="o">=</span> <span class="s">&quot;You should use &#39;operator.mul(x, n)&#39; here.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_operator.test_bare_operator_irepeat"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_operator.test_bare_operator_irepeat">[docs]</a>    <span class="k">def</span> <span class="nf">test_bare_operator_irepeat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;irepeat(y, 187)&quot;</span>
        <span class="n">t</span> <span class="o">=</span> <span class="s">&quot;You should use &#39;operator.imul(y, 187)&#39; here.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns_unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_exitfunc"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exitfunc">[docs]</a><span class="k">class</span> <span class="nc">Test_exitfunc</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>

    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;exitfunc&quot;</span>

<div class="viewcode-block" id="Test_exitfunc.test_simple"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exitfunc.test_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import sys</span>
<span class="s">            sys.exitfunc = my_atexit</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import sys</span>
<span class="s">            import atexit</span>
<span class="s">            atexit.register(my_atexit)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_exitfunc.test_names_import"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exitfunc.test_names_import">[docs]</a>    <span class="k">def</span> <span class="nf">test_names_import</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import sys, crumbs</span>
<span class="s">            sys.exitfunc = my_func</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import sys, crumbs, atexit</span>
<span class="s">            atexit.register(my_func)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_exitfunc.test_complex_expression"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exitfunc.test_complex_expression">[docs]</a>    <span class="k">def</span> <span class="nf">test_complex_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import sys</span>
<span class="s">            sys.exitfunc = do(d)/a()+complex(f=23, g=23)*expression</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import sys</span>
<span class="s">            import atexit</span>
<span class="s">            atexit.register(do(d)/a()+complex(f=23, g=23)*expression)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_exitfunc.test_comments"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exitfunc.test_comments">[docs]</a>    <span class="k">def</span> <span class="nf">test_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import sys # Foo</span>
<span class="s">            sys.exitfunc = f # Blah</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import sys</span>
<span class="s">            import atexit # Foo</span>
<span class="s">            atexit.register(f) # Blah</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import apples, sys, crumbs, larry # Pleasant comments</span>
<span class="s">            sys.exitfunc = func</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import apples, sys, crumbs, larry, atexit # Pleasant comments</span>
<span class="s">            atexit.register(func)</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_exitfunc.test_in_a_function"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exitfunc.test_in_a_function">[docs]</a>    <span class="k">def</span> <span class="nf">test_in_a_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import sys</span>
<span class="s">            def f():</span>
<span class="s">                sys.exitfunc = func</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            import sys</span>
<span class="s">            import atexit</span>
<span class="s">            def f():</span>
<span class="s">                atexit.register(func)</span>
<span class="s">             &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_exitfunc.test_no_sys_import"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exitfunc.test_no_sys_import">[docs]</a>    <span class="k">def</span> <span class="nf">test_no_sys_import</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;sys.exitfunc = f&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;atexit.register(f)&quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;Can&#39;t find sys import; Please add an atexit import at the &quot;</span>
            <span class="s">&quot;top of your file.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="Test_exitfunc.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_exitfunc.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;f(sys.exitfunc)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Test_asserts"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_asserts">[docs]</a><span class="k">class</span> <span class="nc">Test_asserts</span><span class="p">(</span><span class="n">FixerTestCase</span><span class="p">):</span>

    <span class="n">fixer</span> <span class="o">=</span> <span class="s">&quot;asserts&quot;</span>

<div class="viewcode-block" id="Test_asserts.test_deprecated_names"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_asserts.test_deprecated_names">[docs]</a>    <span class="k">def</span> <span class="nf">test_deprecated_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tests</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;self.assert_(True)&#39;</span><span class="p">,</span> <span class="s">&#39;self.assertTrue(True)&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;self.assertEquals(2, 2)&#39;</span><span class="p">,</span> <span class="s">&#39;self.assertEqual(2, 2)&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;self.assertNotEquals(2, 3)&#39;</span><span class="p">,</span> <span class="s">&#39;self.assertNotEqual(2, 3)&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;self.assertAlmostEquals(2, 3)&#39;</span><span class="p">,</span> <span class="s">&#39;self.assertAlmostEqual(2, 3)&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;self.assertNotAlmostEquals(2, 8)&#39;</span><span class="p">,</span> <span class="s">&#39;self.assertNotAlmostEqual(2, 8)&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;self.failUnlessEqual(2, 2)&#39;</span><span class="p">,</span> <span class="s">&#39;self.assertEqual(2, 2)&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;self.failIfEqual(2, 3)&#39;</span><span class="p">,</span> <span class="s">&#39;self.assertNotEqual(2, 3)&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;self.failUnlessAlmostEqual(2, 3)&#39;</span><span class="p">,</span> <span class="s">&#39;self.assertAlmostEqual(2, 3)&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;self.failIfAlmostEqual(2, 8)&#39;</span><span class="p">,</span> <span class="s">&#39;self.assertNotAlmostEqual(2, 8)&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;self.failUnless(True)&#39;</span><span class="p">,</span> <span class="s">&#39;self.assertTrue(True)&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;self.failUnlessRaises(foo)&#39;</span><span class="p">,</span> <span class="s">&#39;self.assertRaises(foo)&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;self.failIf(False)&#39;</span><span class="p">,</span> <span class="s">&#39;self.assertFalse(False)&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">tests</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_asserts.test_variants"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_asserts.test_variants">[docs]</a>    <span class="k">def</span> <span class="nf">test_variants</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&#39;eq = self.assertEquals&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;eq = self.assertEqual&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&#39;self.assertEquals(2, 3, msg=&quot;fail&quot;)&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;self.assertEqual(2, 3, msg=&quot;fail&quot;)&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&#39;self.assertEquals(2, 3, msg=&quot;fail&quot;) # foo&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;self.assertEqual(2, 3, msg=&quot;fail&quot;) # foo&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&#39;self.assertEquals (2, 3)&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;self.assertEqual (2, 3)&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&#39;  self.assertEquals (2, 3)&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;  self.assertEqual (2, 3)&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&#39;with self.failUnlessRaises(Explosion): explode()&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;with self.assertRaises(Explosion): explode()&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&#39;with self.failUnlessRaises(Explosion) as cm: explode()&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;with self.assertRaises(Explosion) as cm: explode()&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Test_asserts.test_unchanged"><a class="viewcode-back" href="../../../lib2to3.tests.html#lib2to3.tests.test_fixers.Test_asserts.test_unchanged">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&#39;self.assertEqualsOnSaturday&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unchanged</span><span class="p">(</span><span class="s">&#39;self.assertEqualsOnSaturday(3, 5)&#39;</span><span class="p">)</span></div></div>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Weldon Henson.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>