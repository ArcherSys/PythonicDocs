

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>sqlite3.test.dbapi &mdash; ArcherBashPYDocs 1.0.0. documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ArcherBashPYDocs 1.0.0. documentation" href="../../../index.html"/>
        <link rel="up" title="sqlite3" href="../../sqlite3.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../../index.html" class="fa fa-home"> ArcherBashPYDocs</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="simple">
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">ArcherBashPYDocs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Module code</a> &raquo;</li>
      
          <li><a href="../../sqlite3.html">sqlite3</a> &raquo;</li>
      
    <li>sqlite3.test.dbapi</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for sqlite3.test.dbapi</h1><div class="highlight"><pre>
<span class="c">#-*- coding: iso-8859-1 -*-</span>
<span class="c"># pysqlite2/test/dbapi.py: tests for DB-API compliance</span>
<span class="c">#</span>
<span class="c"># Copyright (C) 2004-2010 Gerhard HÃ¤ring &lt;gh@ghaering.de&gt;</span>
<span class="c">#</span>
<span class="c"># This file is part of pysqlite.</span>
<span class="c">#</span>
<span class="c"># This software is provided &#39;as-is&#39;, without any express or implied</span>
<span class="c"># warranty.  In no event will the authors be held liable for any damages</span>
<span class="c"># arising from the use of this software.</span>
<span class="c">#</span>
<span class="c"># Permission is granted to anyone to use this software for any purpose,</span>
<span class="c"># including commercial applications, and to alter it and redistribute it</span>
<span class="c"># freely, subject to the following restrictions:</span>
<span class="c">#</span>
<span class="c"># 1. The origin of this software must not be misrepresented; you must not</span>
<span class="c">#    claim that you wrote the original software. If you use this software</span>
<span class="c">#    in a product, an acknowledgment in the product documentation would be</span>
<span class="c">#    appreciated but is not required.</span>
<span class="c"># 2. Altered source versions must be plainly marked as such, and must not be</span>
<span class="c">#    misrepresented as being the original software.</span>
<span class="c"># 3. This notice may not be removed or altered from any source distribution.</span>

<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">sqlite3</span> <span class="kn">as</span> <span class="nn">sqlite</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">threading</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">threading</span> <span class="o">=</span> <span class="bp">None</span>

<span class="kn">from</span> <span class="nn">test.support</span> <span class="kn">import</span> <span class="n">TESTFN</span><span class="p">,</span> <span class="n">unlink</span>


<div class="viewcode-block" id="ModuleTests"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests">[docs]</a><span class="k">class</span> <span class="nc">ModuleTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="ModuleTests.CheckAPILevel"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests.CheckAPILevel">[docs]</a>    <span class="k">def</span> <span class="nf">CheckAPILevel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">apilevel</span><span class="p">,</span> <span class="s">&quot;2.0&quot;</span><span class="p">,</span>
                         <span class="s">&quot;apilevel is </span><span class="si">%s</span><span class="s">, should be 2.0&quot;</span> <span class="o">%</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">apilevel</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ModuleTests.CheckThreadSafety"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests.CheckThreadSafety">[docs]</a>    <span class="k">def</span> <span class="nf">CheckThreadSafety</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">threadsafety</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                         <span class="s">&quot;threadsafety is </span><span class="si">%d</span><span class="s">, should be 1&quot;</span> <span class="o">%</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">threadsafety</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ModuleTests.CheckParamStyle"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests.CheckParamStyle">[docs]</a>    <span class="k">def</span> <span class="nf">CheckParamStyle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">paramstyle</span><span class="p">,</span> <span class="s">&quot;qmark&quot;</span><span class="p">,</span>
                         <span class="s">&quot;paramstyle is &#39;</span><span class="si">%s</span><span class="s">&#39;, should be &#39;qmark&#39;&quot;</span> <span class="o">%</span>
                         <span class="n">sqlite</span><span class="o">.</span><span class="n">paramstyle</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ModuleTests.CheckWarning"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests.CheckWarning">[docs]</a>    <span class="k">def</span> <span class="nf">CheckWarning</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">Warning</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">),</span>
                     <span class="s">&quot;Warning is not a subclass of Exception&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ModuleTests.CheckError"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests.CheckError">[docs]</a>    <span class="k">def</span> <span class="nf">CheckError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">Error</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">),</span>
                        <span class="s">&quot;Error is not a subclass of Exception&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ModuleTests.CheckInterfaceError"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests.CheckInterfaceError">[docs]</a>    <span class="k">def</span> <span class="nf">CheckInterfaceError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">InterfaceError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">Error</span><span class="p">),</span>
                        <span class="s">&quot;InterfaceError is not a subclass of Error&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ModuleTests.CheckDatabaseError"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests.CheckDatabaseError">[docs]</a>    <span class="k">def</span> <span class="nf">CheckDatabaseError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">DatabaseError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">Error</span><span class="p">),</span>
                        <span class="s">&quot;DatabaseError is not a subclass of Error&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ModuleTests.CheckDataError"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests.CheckDataError">[docs]</a>    <span class="k">def</span> <span class="nf">CheckDataError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">DataError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">DatabaseError</span><span class="p">),</span>
                        <span class="s">&quot;DataError is not a subclass of DatabaseError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ModuleTests.CheckOperationalError"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests.CheckOperationalError">[docs]</a>    <span class="k">def</span> <span class="nf">CheckOperationalError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">OperationalError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">DatabaseError</span><span class="p">),</span>
                        <span class="s">&quot;OperationalError is not a subclass of DatabaseError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ModuleTests.CheckIntegrityError"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests.CheckIntegrityError">[docs]</a>    <span class="k">def</span> <span class="nf">CheckIntegrityError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">DatabaseError</span><span class="p">),</span>
                        <span class="s">&quot;IntegrityError is not a subclass of DatabaseError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ModuleTests.CheckInternalError"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests.CheckInternalError">[docs]</a>    <span class="k">def</span> <span class="nf">CheckInternalError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">InternalError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">DatabaseError</span><span class="p">),</span>
                        <span class="s">&quot;InternalError is not a subclass of DatabaseError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ModuleTests.CheckProgrammingError"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests.CheckProgrammingError">[docs]</a>    <span class="k">def</span> <span class="nf">CheckProgrammingError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">DatabaseError</span><span class="p">),</span>
                        <span class="s">&quot;ProgrammingError is not a subclass of DatabaseError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ModuleTests.CheckNotSupportedError"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ModuleTests.CheckNotSupportedError">[docs]</a>    <span class="k">def</span> <span class="nf">CheckNotSupportedError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">NotSupportedError</span><span class="p">,</span>
                                   <span class="n">sqlite</span><span class="o">.</span><span class="n">DatabaseError</span><span class="p">),</span>
                        <span class="s">&quot;NotSupportedError is not a subclass of DatabaseError&quot;</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="ConnectionTests"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests">[docs]</a><span class="k">class</span> <span class="nc">ConnectionTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="ConnectionTests.setUp"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">cu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;create table test(id integer primary key, name text)&quot;</span><span class="p">)</span>
        <span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (?)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,))</span>
</div>
<div class="viewcode-block" id="ConnectionTests.tearDown"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ConnectionTests.CheckCommit"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests.CheckCommit">[docs]</a>    <span class="k">def</span> <span class="nf">CheckCommit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ConnectionTests.CheckCommitAfterNoChanges"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests.CheckCommitAfterNoChanges">[docs]</a>    <span class="k">def</span> <span class="nf">CheckCommitAfterNoChanges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A commit should also work when no changes were made to the database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ConnectionTests.CheckRollback"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests.CheckRollback">[docs]</a>    <span class="k">def</span> <span class="nf">CheckRollback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ConnectionTests.CheckRollbackAfterNoChanges"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests.CheckRollbackAfterNoChanges">[docs]</a>    <span class="k">def</span> <span class="nf">CheckRollbackAfterNoChanges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A rollback should also work when no changes were made to the database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ConnectionTests.CheckCursor"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests.CheckCursor">[docs]</a>    <span class="k">def</span> <span class="nf">CheckCursor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ConnectionTests.CheckFailedOpen"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests.CheckFailedOpen">[docs]</a>    <span class="k">def</span> <span class="nf">CheckFailedOpen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">YOU_CANNOT_OPEN_THIS</span> <span class="o">=</span> <span class="s">&quot;/foo/bar/bla/23534/mydb.db&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">YOU_CANNOT_OPEN_THIS</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">OperationalError</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised an OperationalError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ConnectionTests.CheckClose"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests.CheckClose">[docs]</a>    <span class="k">def</span> <span class="nf">CheckClose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ConnectionTests.CheckExceptions"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests.CheckExceptions">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExceptions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Optional DB-API extension.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">Warning</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">Error</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">InterfaceError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">InterfaceError</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">DatabaseError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">DatabaseError</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">DataError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">DataError</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">OperationalError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">OperationalError</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">InternalError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">InternalError</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">NotSupportedError</span><span class="p">,</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">NotSupportedError</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ConnectionTests.CheckInTransaction"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests.CheckInTransaction">[docs]</a>    <span class="k">def</span> <span class="nf">CheckInTransaction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Can&#39;t use db from setUp because we want to test initial state.</span>
        <span class="n">cx</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">cu</span> <span class="o">=</span> <span class="n">cx</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cx</span><span class="o">.</span><span class="n">in_transaction</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;create table transactiontest(id integer primary key, name text)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cx</span><span class="o">.</span><span class="n">in_transaction</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into transactiontest(name) values (?)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cx</span><span class="o">.</span><span class="n">in_transaction</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from transactiontest where name=?&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;foo&quot;</span><span class="p">])</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">cu</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cx</span><span class="o">.</span><span class="n">in_transaction</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="n">cx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cx</span><span class="o">.</span><span class="n">in_transaction</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from transactiontest where name=?&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;foo&quot;</span><span class="p">])</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">cu</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cx</span><span class="o">.</span><span class="n">in_transaction</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ConnectionTests.CheckInTransactionRO"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests.CheckInTransactionRO">[docs]</a>    <span class="k">def</span> <span class="nf">CheckInTransactionRO</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">in_transaction</span> <span class="o">=</span> <span class="bp">True</span>
</div>
<div class="viewcode-block" id="ConnectionTests.CheckOpenUri"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConnectionTests.CheckOpenUri">[docs]</a>    <span class="k">def</span> <span class="nf">CheckOpenUri</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">sqlite_version_info</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">NotSupportedError</span><span class="p">):</span>
                <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;:memory:&#39;</span><span class="p">,</span> <span class="n">uri</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addCleanup</span><span class="p">(</span><span class="n">unlink</span><span class="p">,</span> <span class="n">TESTFN</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">TESTFN</span><span class="p">)</span> <span class="k">as</span> <span class="n">cx</span><span class="p">:</span>
            <span class="n">cx</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;create table test(id integer)&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;file:&#39;</span> <span class="o">+</span> <span class="n">TESTFN</span><span class="p">,</span> <span class="n">uri</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">cx</span><span class="p">:</span>
            <span class="n">cx</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;insert into test(id) values(0)&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;file:&#39;</span> <span class="o">+</span> <span class="n">TESTFN</span> <span class="o">+</span> <span class="s">&#39;?mode=ro&#39;</span><span class="p">,</span> <span class="n">uri</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">cx</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">sqlite</span><span class="o">.</span><span class="n">OperationalError</span><span class="p">):</span>
                <span class="n">cx</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;insert into test(id) values(1)&#39;</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="CursorTests"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests">[docs]</a><span class="k">class</span> <span class="nc">CursorTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="CursorTests.setUp"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;create table test(id integer primary key, name text, income number)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (?)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,))</span>
</div>
<div class="viewcode-block" id="CursorTests.tearDown"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteNoArgs"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteNoArgs">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteNoArgs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;delete from test&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteIllegalSql"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteIllegalSql">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteIllegalSql</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select asdf&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised an OperationalError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">OperationalError</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;raised wrong exception&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteTooMuchSql"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteTooMuchSql">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteTooMuchSql</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select 5+4; select 4+5&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised a Warning&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">Warning</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;raised wrong exception&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteTooMuchSql2"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteTooMuchSql2">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteTooMuchSql2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select 5+4; -- foo bar&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteTooMuchSql3"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteTooMuchSql3">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteTooMuchSql3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            select 5+4;</span>

<span class="s">            /*</span>
<span class="s">            foo</span>
<span class="s">            */</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteWrongSqlArg"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteWrongSqlArg">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteWrongSqlArg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised a ValueError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;raised wrong exception.&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteArgInt"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteArgInt">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteArgInt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(id) values (?)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">42</span><span class="p">,))</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteArgFloat"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteArgFloat">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteArgFloat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(income) values (?)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mf">2500.32</span><span class="p">,))</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteArgString"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteArgString">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteArgString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (?)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s">&quot;Hugo&quot;</span><span class="p">,))</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteArgStringWithZeroByte"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteArgStringWithZeroByte">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteArgStringWithZeroByte</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (?)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s">&quot;Hu</span><span class="se">\x00</span><span class="s">go&quot;</span><span class="p">,))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test where id=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">lastrowid</span><span class="p">,))</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&quot;Hu</span><span class="se">\x00</span><span class="s">go&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteWrongNoOfArgs1"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteWrongNoOfArgs1">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteWrongNoOfArgs1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># too many parameters</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(id) values (?)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="s">&quot;Egon&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteWrongNoOfArgs2"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteWrongNoOfArgs2">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteWrongNoOfArgs2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># too little parameters</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(id) values (?)&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteWrongNoOfArgs3"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteWrongNoOfArgs3">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteWrongNoOfArgs3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># no parameters, parameters are needed</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(id) values (?)&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteParamList"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteParamList">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteParamList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;foo&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test where name=?&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;foo&quot;</span><span class="p">])</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&quot;foo&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteParamSequence"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteParamSequence">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteParamSequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">L</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="mi">1</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
                <span class="k">assert</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="k">return</span> <span class="s">&quot;foo&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;foo&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test where name=?&quot;</span><span class="p">,</span> <span class="n">L</span><span class="p">())</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&quot;foo&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteDictMapping"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteDictMapping">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteDictMapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;foo&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test where name=:name&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;foo&quot;</span><span class="p">})</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&quot;foo&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteDictMapping_Mapping"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteDictMapping_Mapping">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteDictMapping_Mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__missing__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
                <span class="k">return</span> <span class="s">&quot;foo&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;foo&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test where name=:name&quot;</span><span class="p">,</span> <span class="n">D</span><span class="p">())</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&quot;foo&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteDictMappingTooLittleArgs"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteDictMappingTooLittleArgs">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteDictMappingTooLittleArgs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;foo&#39;)&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test where name=:name and id=:id&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;foo&quot;</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteDictMappingNoArgs"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteDictMappingNoArgs">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteDictMappingNoArgs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;foo&#39;)&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test where name=:name&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteDictMappingUnnamed"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteDictMappingUnnamed">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteDictMappingUnnamed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;foo&#39;)&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test where name=?&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;foo&quot;</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckClose"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckClose">[docs]</a>    <span class="k">def</span> <span class="nf">CheckClose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckRowcountExecute"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckRowcountExecute">[docs]</a>    <span class="k">def</span> <span class="nf">CheckRowcountExecute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;delete from test&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;foo&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;foo&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;update test set name=&#39;bar&#39;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">rowcount</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckRowcountSelect"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckRowcountSelect">[docs]</a>    <span class="k">def</span> <span class="nf">CheckRowcountSelect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        pysqlite does not know the rowcount of SELECT statements, because we</span>
<span class="sd">        don&#39;t fetch all rows after executing the select statement. The rowcount</span>
<span class="sd">        has thus to be -1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select 5 union select 6&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">rowcount</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckRowcountExecutemany"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckRowcountExecutemany">[docs]</a>    <span class="k">def</span> <span class="nf">CheckRowcountExecutemany</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;delete from test&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (?)&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">rowcount</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckTotalChanges"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckTotalChanges">[docs]</a>    <span class="k">def</span> <span class="nf">CheckTotalChanges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;foo&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;foo&#39;)&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">total_changes</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;total changes reported wrong value&quot;</span><span class="p">)</span>

    <span class="c"># Checks for executemany:</span>
    <span class="c"># Sequences are required by the DB-API, iterators</span>
    <span class="c"># enhancements in pysqlite.</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteManySequence"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteManySequence">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteManySequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="s">&quot;insert into test(income) values (?)&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="n">x</span><span class="p">,)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">110</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteManyIterator"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteManyIterator">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteManyIterator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">MyIter</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">5</span>

            <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">StopIteration</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="s">&quot;insert into test(income) values (?)&quot;</span><span class="p">,</span> <span class="n">MyIter</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteManyGenerator"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteManyGenerator">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteManyGenerator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">mygen</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
                <span class="k">yield</span> <span class="p">(</span><span class="n">i</span><span class="p">,)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="s">&quot;insert into test(income) values (?)&quot;</span><span class="p">,</span> <span class="n">mygen</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteManyWrongSqlArg"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteManyWrongSqlArg">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteManyWrongSqlArg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="p">[(</span><span class="mi">3</span><span class="p">,)])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised a ValueError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;raised wrong exception.&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteManySelect"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteManySelect">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteManySelect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="s">&quot;select ?&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">3</span><span class="p">,)])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised a ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;raised wrong exception.&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckExecuteManyNotIterable"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckExecuteManyNotIterable">[docs]</a>    <span class="k">def</span> <span class="nf">CheckExecuteManyNotIterable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="s">&quot;insert into test(income) values (?)&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised a TypeError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&quot;raised&quot;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">__class__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;raised wrong exception.&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckFetchIter"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckFetchIter">[docs]</a>    <span class="k">def</span> <span class="nf">CheckFetchIter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Optional DB-API extension.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;delete from test&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(id) values (?)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(id) values (?)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">6</span><span class="p">,))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select id from test order by id&quot;</span><span class="p">)</span>
        <span class="n">lst</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="p">:</span>
            <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckFetchone"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckFetchone">[docs]</a>    <span class="k">def</span> <span class="nf">CheckFetchone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test&quot;</span><span class="p">)</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&quot;foo&quot;</span><span class="p">)</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckFetchoneNoStatement"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckFetchoneNoStatement">[docs]</a>    <span class="k">def</span> <span class="nf">CheckFetchoneNoStatement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckArraySize"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckArraySize">[docs]</a>    <span class="k">def</span> <span class="nf">CheckArraySize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># must default ot 1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">arraysize</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># now set to 2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">arraysize</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="c"># now make the query return 3 rows</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;delete from test&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;A&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;B&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;C&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test&quot;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">fetchmany</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckFetchmany"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckFetchmany">[docs]</a>    <span class="k">def</span> <span class="nf">CheckFetchmany</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test&quot;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">fetchmany</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">fetchmany</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="p">[])</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckFetchmanyKwArg"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckFetchmanyKwArg">[docs]</a>    <span class="k">def</span> <span class="nf">CheckFetchmanyKwArg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if fetchmany works with keyword arguments&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test&quot;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">fetchmany</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckFetchall"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckFetchall">[docs]</a>    <span class="k">def</span> <span class="nf">CheckFetchall</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test&quot;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="p">[])</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckSetinputsizes"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckSetinputsizes">[docs]</a>    <span class="k">def</span> <span class="nf">CheckSetinputsizes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">setinputsizes</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckSetoutputsize"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckSetoutputsize">[docs]</a>    <span class="k">def</span> <span class="nf">CheckSetoutputsize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">setoutputsize</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckSetoutputsizeNoColumn"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckSetoutputsizeNoColumn">[docs]</a>    <span class="k">def</span> <span class="nf">CheckSetoutputsizeNoColumn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">setoutputsize</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckCursorConnection"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckCursorConnection">[docs]</a>    <span class="k">def</span> <span class="nf">CheckCursorConnection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Optional DB-API extension.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cu</span><span class="o">.</span><span class="n">connection</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckWrongCursorCallable"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckWrongCursorCallable">[docs]</a>    <span class="k">def</span> <span class="nf">CheckWrongCursorCallable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">f</span><span class="p">():</span> <span class="k">pass</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised a TypeError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised a ValueError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CursorTests.CheckCursorWrongClass"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.CursorTests.CheckCursorWrongClass">[docs]</a>    <span class="k">def</span> <span class="nf">CheckCursorWrongClass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span> <span class="k">pass</span>
        <span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">Cursor</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should have raised a ValueError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">pass</span>
</div></div>
<span class="nd">@unittest.skipUnless</span><span class="p">(</span><span class="n">threading</span><span class="p">,</span> <span class="s">&#39;This test requires threading.&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="ThreadTests"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ThreadTests">[docs]</a><span class="k">class</span> <span class="nc">ThreadTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="ThreadTests.setUp"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ThreadTests.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;create table test(id integer primary key, name text, bin binary, ratio number, ts timestamp)&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ThreadTests.tearDown"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ThreadTests.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ThreadTests.CheckConCursor"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ThreadTests.CheckConCursor">[docs]</a>    <span class="k">def</span> <span class="nf">CheckConCursor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">errors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cur</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;did not raise ProgrammingError&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;raised wrong exception&quot;</span><span class="p">)</span>

        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;con&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">con</span><span class="p">,</span> <span class="s">&quot;errors&quot;</span><span class="p">:</span> <span class="n">errors</span><span class="p">})</span>
        <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">errors</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ThreadTests.CheckConCommit"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ThreadTests.CheckConCommit">[docs]</a>    <span class="k">def</span> <span class="nf">CheckConCommit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">errors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;did not raise ProgrammingError&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;raised wrong exception&quot;</span><span class="p">)</span>

        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;con&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">con</span><span class="p">,</span> <span class="s">&quot;errors&quot;</span><span class="p">:</span> <span class="n">errors</span><span class="p">})</span>
        <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">errors</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ThreadTests.CheckConRollback"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ThreadTests.CheckConRollback">[docs]</a>    <span class="k">def</span> <span class="nf">CheckConRollback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">errors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">con</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;did not raise ProgrammingError&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;raised wrong exception&quot;</span><span class="p">)</span>

        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;con&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">con</span><span class="p">,</span> <span class="s">&quot;errors&quot;</span><span class="p">:</span> <span class="n">errors</span><span class="p">})</span>
        <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">errors</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ThreadTests.CheckConClose"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ThreadTests.CheckConClose">[docs]</a>    <span class="k">def</span> <span class="nf">CheckConClose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">errors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;did not raise ProgrammingError&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;raised wrong exception&quot;</span><span class="p">)</span>

        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;con&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">con</span><span class="p">,</span> <span class="s">&quot;errors&quot;</span><span class="p">:</span> <span class="n">errors</span><span class="p">})</span>
        <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">errors</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ThreadTests.CheckCurImplicitBegin"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ThreadTests.CheckCurImplicitBegin">[docs]</a>    <span class="k">def</span> <span class="nf">CheckCurImplicitBegin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">errors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;a&#39;)&quot;</span><span class="p">)</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;did not raise ProgrammingError&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;raised wrong exception&quot;</span><span class="p">)</span>

        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;cur&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="p">,</span> <span class="s">&quot;errors&quot;</span><span class="p">:</span> <span class="n">errors</span><span class="p">})</span>
        <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">errors</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ThreadTests.CheckCurClose"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ThreadTests.CheckCurClose">[docs]</a>    <span class="k">def</span> <span class="nf">CheckCurClose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">errors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;did not raise ProgrammingError&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;raised wrong exception&quot;</span><span class="p">)</span>

        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;cur&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="p">,</span> <span class="s">&quot;errors&quot;</span><span class="p">:</span> <span class="n">errors</span><span class="p">})</span>
        <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">errors</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ThreadTests.CheckCurExecute"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ThreadTests.CheckCurExecute">[docs]</a>    <span class="k">def</span> <span class="nf">CheckCurExecute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">errors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test&quot;</span><span class="p">)</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;did not raise ProgrammingError&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;raised wrong exception&quot;</span><span class="p">)</span>

        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;a&#39;)&quot;</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;cur&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="p">,</span> <span class="s">&quot;errors&quot;</span><span class="p">:</span> <span class="n">errors</span><span class="p">})</span>
        <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">errors</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ThreadTests.CheckCurIterNext"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ThreadTests.CheckCurIterNext">[docs]</a>    <span class="k">def</span> <span class="nf">CheckCurIterNext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">errors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">row</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;did not raise ProgrammingError&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;raised wrong exception&quot;</span><span class="p">)</span>

        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;insert into test(name) values (&#39;a&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select name from test&quot;</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;cur&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="p">,</span> <span class="s">&quot;errors&quot;</span><span class="p">:</span> <span class="n">errors</span><span class="p">})</span>
        <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">errors</span><span class="p">))</span>
</div></div>
<div class="viewcode-block" id="ConstructorTests"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConstructorTests">[docs]</a><span class="k">class</span> <span class="nc">ConstructorTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="ConstructorTests.CheckDate"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConstructorTests.CheckDate">[docs]</a>    <span class="k">def</span> <span class="nf">CheckDate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">28</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ConstructorTests.CheckTime"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConstructorTests.CheckTime">[docs]</a>    <span class="k">def</span> <span class="nf">CheckTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ConstructorTests.CheckTimestamp"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConstructorTests.CheckTimestamp">[docs]</a>    <span class="k">def</span> <span class="nf">CheckTimestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ConstructorTests.CheckDateFromTicks"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConstructorTests.CheckDateFromTicks">[docs]</a>    <span class="k">def</span> <span class="nf">CheckDateFromTicks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">DateFromTicks</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ConstructorTests.CheckTimeFromTicks"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConstructorTests.CheckTimeFromTicks">[docs]</a>    <span class="k">def</span> <span class="nf">CheckTimeFromTicks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">TimeFromTicks</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ConstructorTests.CheckTimestampFromTicks"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConstructorTests.CheckTimestampFromTicks">[docs]</a>    <span class="k">def</span> <span class="nf">CheckTimestampFromTicks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">TimestampFromTicks</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ConstructorTests.CheckBinary"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ConstructorTests.CheckBinary">[docs]</a>    <span class="k">def</span> <span class="nf">CheckBinary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">Binary</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;</span><span class="se">\0</span><span class="s">&#39;&quot;</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="ExtensionTests"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ExtensionTests">[docs]</a><span class="k">class</span> <span class="nc">ExtensionTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="ExtensionTests.CheckScriptStringSql"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ExtensionTests.CheckScriptStringSql">[docs]</a>    <span class="k">def</span> <span class="nf">CheckScriptStringSql</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">executescript</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            -- bla bla</span>
<span class="s">            /* a stupid comment */</span>
<span class="s">            create table a(i);</span>
<span class="s">            insert into a(i) values (5);</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select i from a&quot;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ExtensionTests.CheckScriptSyntaxError"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ExtensionTests.CheckScriptSyntaxError">[docs]</a>    <span class="k">def</span> <span class="nf">CheckScriptSyntaxError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">raised</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cur</span><span class="o">.</span><span class="n">executescript</span><span class="p">(</span><span class="s">&quot;create table test(x); asdf; create table test2(x)&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">OperationalError</span><span class="p">:</span>
            <span class="n">raised</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">raised</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="s">&quot;should have raised an exception&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ExtensionTests.CheckScriptErrorNormal"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ExtensionTests.CheckScriptErrorNormal">[docs]</a>    <span class="k">def</span> <span class="nf">CheckScriptErrorNormal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">raised</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cur</span><span class="o">.</span><span class="n">executescript</span><span class="p">(</span><span class="s">&quot;create table test(sadfsadfdsa); select foo from hurz;&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">OperationalError</span><span class="p">:</span>
            <span class="n">raised</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">raised</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="s">&quot;should have raised an exception&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ExtensionTests.CheckConnectionExecute"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ExtensionTests.CheckConnectionExecute">[docs]</a>    <span class="k">def</span> <span class="nf">CheckConnectionExecute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select 5&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s">&quot;Basic test of Connection.execute&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ExtensionTests.CheckConnectionExecutemany"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ExtensionTests.CheckConnectionExecutemany">[docs]</a>    <span class="k">def</span> <span class="nf">CheckConnectionExecutemany</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;create table test(foo)&quot;</span><span class="p">)</span>
        <span class="n">con</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="s">&quot;insert into test(foo) values (?)&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">3</span><span class="p">,),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,)])</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select foo from test order by foo&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&quot;Basic test of Connection.executemany&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&quot;Basic test of Connection.executemany&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ExtensionTests.CheckConnectionExecutescript"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ExtensionTests.CheckConnectionExecutescript">[docs]</a>    <span class="k">def</span> <span class="nf">CheckConnectionExecutescript</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">con</span><span class="o">.</span><span class="n">executescript</span><span class="p">(</span><span class="s">&quot;create table test(foo); insert into test(foo) values (5);&quot;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select foo from test&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s">&quot;Basic test of Connection.executescript&quot;</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="ClosedConTests"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedConTests">[docs]</a><span class="k">class</span> <span class="nc">ClosedConTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="ClosedConTests.setUp"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedConTests.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="ClosedConTests.tearDown"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedConTests.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="ClosedConTests.CheckClosedConCursor"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedConTests.CheckClosedConCursor">[docs]</a>    <span class="k">def</span> <span class="nf">CheckClosedConCursor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ClosedConTests.CheckClosedConCommit"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedConTests.CheckClosedConCommit">[docs]</a>    <span class="k">def</span> <span class="nf">CheckClosedConCommit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ClosedConTests.CheckClosedConRollback"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedConTests.CheckClosedConRollback">[docs]</a>    <span class="k">def</span> <span class="nf">CheckClosedConRollback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">con</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ClosedConTests.CheckClosedCurExecute"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedConTests.CheckClosedCurExecute">[docs]</a>    <span class="k">def</span> <span class="nf">CheckClosedCurExecute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;select 4&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ClosedConTests.CheckClosedCreateFunction"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedConTests.CheckClosedCreateFunction">[docs]</a>    <span class="k">def</span> <span class="nf">CheckClosedCreateFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="mi">17</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">con</span><span class="o">.</span><span class="n">create_function</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ClosedConTests.CheckClosedCreateAggregate"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedConTests.CheckClosedCreateAggregate">[docs]</a>    <span class="k">def</span> <span class="nf">CheckClosedCreateAggregate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">class</span> <span class="nc">Agg</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="mi">17</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">con</span><span class="o">.</span><span class="n">create_aggregate</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Agg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ClosedConTests.CheckClosedSetAuthorizer"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedConTests.CheckClosedSetAuthorizer">[docs]</a>    <span class="k">def</span> <span class="nf">CheckClosedSetAuthorizer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">def</span> <span class="nf">authorizer</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">DENY</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">con</span><span class="o">.</span><span class="n">set_authorizer</span><span class="p">(</span><span class="n">authorizer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ClosedConTests.CheckClosedSetProgressCallback"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedConTests.CheckClosedSetProgressCallback">[docs]</a>    <span class="k">def</span> <span class="nf">CheckClosedSetProgressCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">def</span> <span class="nf">progress</span><span class="p">():</span> <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">con</span><span class="o">.</span><span class="n">set_progress_handler</span><span class="p">(</span><span class="n">progress</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ClosedConTests.CheckClosedCall"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedConTests.CheckClosedCall">[docs]</a>    <span class="k">def</span> <span class="nf">CheckClosedCall</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">con</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError&quot;</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="ClosedCurTests"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedCurTests">[docs]</a><span class="k">class</span> <span class="nc">ClosedCurTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="ClosedCurTests.setUp"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedCurTests.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="ClosedCurTests.tearDown"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedCurTests.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="ClosedCurTests.CheckClosed"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.ClosedCurTests.CheckClosed">[docs]</a>    <span class="k">def</span> <span class="nf">CheckClosed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">method_name</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;execute&quot;</span><span class="p">,</span> <span class="s">&quot;executemany&quot;</span><span class="p">,</span> <span class="s">&quot;executescript&quot;</span><span class="p">,</span> <span class="s">&quot;fetchall&quot;</span><span class="p">,</span> <span class="s">&quot;fetchmany&quot;</span><span class="p">,</span> <span class="s">&quot;fetchone&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">method_name</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;execute&quot;</span><span class="p">,</span> <span class="s">&quot;executescript&quot;</span><span class="p">):</span>
                <span class="n">params</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;select 4 union select 5&quot;</span><span class="p">,)</span>
            <span class="k">elif</span> <span class="n">method_name</span> <span class="o">==</span> <span class="s">&quot;executemany&quot;</span><span class="p">:</span>
                <span class="n">params</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;insert into foo(bar) values (?)&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">3</span><span class="p">,),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,)])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">params</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">method_name</span><span class="p">)</span>

                <span class="n">method</span><span class="p">(</span><span class="o">*</span><span class="n">params</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError: method &quot;</span> <span class="o">+</span> <span class="n">method_name</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Should have raised a ProgrammingError: &quot;</span> <span class="o">+</span> <span class="n">method_name</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="suite"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.suite">[docs]</a><span class="k">def</span> <span class="nf">suite</span><span class="p">():</span>
    <span class="n">module_suite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">makeSuite</span><span class="p">(</span><span class="n">ModuleTests</span><span class="p">,</span> <span class="s">&quot;Check&quot;</span><span class="p">)</span>
    <span class="n">connection_suite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">makeSuite</span><span class="p">(</span><span class="n">ConnectionTests</span><span class="p">,</span> <span class="s">&quot;Check&quot;</span><span class="p">)</span>
    <span class="n">cursor_suite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">makeSuite</span><span class="p">(</span><span class="n">CursorTests</span><span class="p">,</span> <span class="s">&quot;Check&quot;</span><span class="p">)</span>
    <span class="n">thread_suite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">makeSuite</span><span class="p">(</span><span class="n">ThreadTests</span><span class="p">,</span> <span class="s">&quot;Check&quot;</span><span class="p">)</span>
    <span class="n">constructor_suite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">makeSuite</span><span class="p">(</span><span class="n">ConstructorTests</span><span class="p">,</span> <span class="s">&quot;Check&quot;</span><span class="p">)</span>
    <span class="n">ext_suite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">makeSuite</span><span class="p">(</span><span class="n">ExtensionTests</span><span class="p">,</span> <span class="s">&quot;Check&quot;</span><span class="p">)</span>
    <span class="n">closed_con_suite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">makeSuite</span><span class="p">(</span><span class="n">ClosedConTests</span><span class="p">,</span> <span class="s">&quot;Check&quot;</span><span class="p">)</span>
    <span class="n">closed_cur_suite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">makeSuite</span><span class="p">(</span><span class="n">ClosedCurTests</span><span class="p">,</span> <span class="s">&quot;Check&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestSuite</span><span class="p">((</span><span class="n">module_suite</span><span class="p">,</span> <span class="n">connection_suite</span><span class="p">,</span> <span class="n">cursor_suite</span><span class="p">,</span> <span class="n">thread_suite</span><span class="p">,</span> <span class="n">constructor_suite</span><span class="p">,</span> <span class="n">ext_suite</span><span class="p">,</span> <span class="n">closed_con_suite</span><span class="p">,</span> <span class="n">closed_cur_suite</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="test"><a class="viewcode-back" href="../../../sqlite3.test.html#sqlite3.test.dbapi.test">[docs]</a><span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
    <span class="n">runner</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TextTestRunner</span><span class="p">()</span>
    <span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">suite</span><span class="p">())</span>
</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">test</span><span class="p">()</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Weldon Henson.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>