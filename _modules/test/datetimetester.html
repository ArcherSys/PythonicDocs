

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>test.datetimetester &mdash; ArcherBashPYDocs 1.0.0. documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ArcherBashPYDocs 1.0.0. documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> ArcherBashPYDocs</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="simple">
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ArcherBashPYDocs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>test.datetimetester</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for test.datetimetester</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;Test date/time type.</span>

<span class="sd">See http://www.zope.org/Members/fdrake/DateTimeWiki/TestCases</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">lt</span><span class="p">,</span> <span class="n">le</span><span class="p">,</span> <span class="n">gt</span><span class="p">,</span> <span class="n">ge</span><span class="p">,</span> <span class="n">eq</span><span class="p">,</span> <span class="n">ne</span><span class="p">,</span> <span class="n">truediv</span><span class="p">,</span> <span class="n">floordiv</span><span class="p">,</span> <span class="n">mod</span>

<span class="kn">from</span> <span class="nn">test</span> <span class="kn">import</span> <span class="n">support</span>

<span class="kn">import</span> <span class="nn">datetime</span> <span class="kn">as</span> <span class="nn">datetime_module</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">MINYEAR</span><span class="p">,</span> <span class="n">MAXYEAR</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">tzinfo</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timezone</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">time</span> <span class="kn">as</span> <span class="nn">_time</span>

<span class="c"># Needed by test_datetime</span>
<span class="kn">import</span> <span class="nn">_strptime</span>
<span class="c">#</span>


<span class="n">pickle_choices</span> <span class="o">=</span> <span class="p">[(</span><span class="n">pickle</span><span class="p">,</span> <span class="n">pickle</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
                  <span class="k">for</span> <span class="n">proto</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">HIGHEST_PROTOCOL</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">pickle_choices</span><span class="p">)</span> <span class="o">==</span> <span class="n">pickle</span><span class="o">.</span><span class="n">HIGHEST_PROTOCOL</span> <span class="o">+</span> <span class="mi">1</span>

<span class="c"># An arbitrary collection of objects of non-datetime types, for testing</span>
<span class="c"># mixed-type comparisons.</span>
<span class="n">OTHERSTUFF</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">34.5</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="p">{},</span> <span class="p">[],</span> <span class="p">())</span>


<span class="c"># XXX Copied from test_float.</span>
<span class="n">INF</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s">&quot;inf&quot;</span><span class="p">)</span>
<span class="n">NAN</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s">&quot;nan&quot;</span><span class="p">)</span>


<span class="c">#############################################################################</span>
<span class="c"># module tests</span>

<div class="viewcode-block" id="TestModule"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestModule">[docs]</a><span class="k">class</span> <span class="nc">TestModule</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestModule.test_constants"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestModule.test_constants">[docs]</a>    <span class="k">def</span> <span class="nf">test_constants</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">datetime</span> <span class="o">=</span> <span class="n">datetime_module</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">MINYEAR</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">MAXYEAR</span><span class="p">,</span> <span class="mi">9999</span><span class="p">)</span>

<span class="c">#############################################################################</span>
<span class="c"># tzinfo tests</span>
</div></div>
<div class="viewcode-block" id="FixedOffset"><a class="viewcode-back" href="../../test.html#test.datetimetester.FixedOffset">[docs]</a><span class="k">class</span> <span class="nc">FixedOffset</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dstoffset</span><span class="o">=</span><span class="mi">42</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dstoffset</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">dstoffset</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">dstoffset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__offset</span> <span class="o">=</span> <span class="n">offset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dstoffset</span> <span class="o">=</span> <span class="n">dstoffset</span>
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<div class="viewcode-block" id="FixedOffset.utcoffset"><a class="viewcode-back" href="../../test.html#test.datetimetester.FixedOffset.utcoffset">[docs]</a>    <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__offset</span></div>
<div class="viewcode-block" id="FixedOffset.tzname"><a class="viewcode-back" href="../../test.html#test.datetimetester.FixedOffset.tzname">[docs]</a>    <span class="k">def</span> <span class="nf">tzname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name</span></div>
<div class="viewcode-block" id="FixedOffset.dst"><a class="viewcode-back" href="../../test.html#test.datetimetester.FixedOffset.dst">[docs]</a>    <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dstoffset</span>
</div></div>
<div class="viewcode-block" id="PicklableFixedOffset"><a class="viewcode-back" href="../../test.html#test.datetimetester.PicklableFixedOffset">[docs]</a><span class="k">class</span> <span class="nc">PicklableFixedOffset</span><span class="p">(</span><span class="n">FixedOffset</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">dstoffset</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">FixedOffset</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dstoffset</span><span class="p">)</span>
</div>
<span class="k">class</span> <span class="nc">_TZInfo</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datetime_module</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>

<div class="viewcode-block" id="TestTZInfo"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTZInfo">[docs]</a><span class="k">class</span> <span class="nc">TestTZInfo</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestTZInfo.test_refcnt_crash_bug_22044"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTZInfo.test_refcnt_crash_bug_22044">[docs]</a>    <span class="k">def</span> <span class="nf">test_refcnt_crash_bug_22044</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tz1</span> <span class="o">=</span> <span class="n">_TZInfo</span><span class="p">()</span>
        <span class="n">dt1</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tz1</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
            <span class="n">dt1</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="TestTZInfo.test_non_abstractness"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTZInfo.test_non_abstractness">[docs]</a>    <span class="k">def</span> <span class="nf">test_non_abstractness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># In order to allow subclasses to get pickled, the C implementation</span>
        <span class="c"># wasn&#39;t able to get away with having __init__ raise</span>
        <span class="c"># NotImplementedError.</span>
        <span class="n">useless</span> <span class="o">=</span> <span class="n">tzinfo</span><span class="p">()</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">NotImplementedError</span><span class="p">,</span> <span class="n">useless</span><span class="o">.</span><span class="n">tzname</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">NotImplementedError</span><span class="p">,</span> <span class="n">useless</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">NotImplementedError</span><span class="p">,</span> <span class="n">useless</span><span class="o">.</span><span class="n">dst</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTZInfo.test_subclass_must_override"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTZInfo.test_subclass_must_override">[docs]</a>    <span class="k">def</span> <span class="nf">test_subclass_must_override</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">NotEnough</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__offset</span> <span class="o">=</span> <span class="n">offset</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">NotEnough</span><span class="p">,</span> <span class="n">tzinfo</span><span class="p">))</span>
        <span class="n">ne</span> <span class="o">=</span> <span class="n">NotEnough</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&quot;NotByALongShot&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">ne</span><span class="p">,</span> <span class="n">tzinfo</span><span class="p">)</span>

        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">NotImplementedError</span><span class="p">,</span> <span class="n">ne</span><span class="o">.</span><span class="n">tzname</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">NotImplementedError</span><span class="p">,</span> <span class="n">ne</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">NotImplementedError</span><span class="p">,</span> <span class="n">ne</span><span class="o">.</span><span class="n">dst</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTZInfo.test_normal"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTZInfo.test_normal">[docs]</a>    <span class="k">def</span> <span class="nf">test_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&quot;Three&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">fo</span><span class="p">,</span> <span class="n">tzinfo</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">dt</span> <span class="ow">in</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fo</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">dt</span><span class="p">),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fo</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="n">dt</span><span class="p">),</span> <span class="s">&quot;Three&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fo</span><span class="o">.</span><span class="n">dst</span><span class="p">(</span><span class="n">dt</span><span class="p">),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">42</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestTZInfo.test_pickling_base"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTZInfo.test_pickling_base">[docs]</a>    <span class="k">def</span> <span class="nf">test_pickling_base</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># There&#39;s no point to pickling tzinfo objects on their own (they</span>
        <span class="c"># carry no data), but they need to be picklable anyway else</span>
        <span class="c"># concrete subclasses can&#39;t be pickled.</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="n">tzinfo</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">orig</span><span class="p">),</span> <span class="n">tzinfo</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">pickler</span><span class="p">,</span> <span class="n">unpickler</span><span class="p">,</span> <span class="n">proto</span> <span class="ow">in</span> <span class="n">pickle_choices</span><span class="p">:</span>
            <span class="n">green</span> <span class="o">=</span> <span class="n">pickler</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
            <span class="n">derived</span> <span class="o">=</span> <span class="n">unpickler</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">derived</span><span class="p">),</span> <span class="n">tzinfo</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTZInfo.test_pickling_subclass"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTZInfo.test_pickling_subclass">[docs]</a>    <span class="k">def</span> <span class="nf">test_pickling_subclass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Make sure we can pickle/unpickle an instance of a subclass.</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">300</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">otype</span><span class="p">,</span> <span class="n">args</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">PicklableFixedOffset</span><span class="p">,</span> <span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="s">&#39;cookie&#39;</span><span class="p">)),</span>
            <span class="p">(</span><span class="n">timezone</span><span class="p">,</span> <span class="p">(</span><span class="n">offset</span><span class="p">,)),</span>
            <span class="p">(</span><span class="n">timezone</span><span class="p">,</span> <span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="s">&quot;EST&quot;</span><span class="p">))]:</span>
            <span class="n">orig</span> <span class="o">=</span> <span class="n">otype</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
            <span class="n">oname</span> <span class="o">=</span> <span class="n">orig</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">tzinfo</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">orig</span><span class="p">),</span> <span class="n">otype</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">orig</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="n">offset</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">orig</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="n">oname</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">pickler</span><span class="p">,</span> <span class="n">unpickler</span><span class="p">,</span> <span class="n">proto</span> <span class="ow">in</span> <span class="n">pickle_choices</span><span class="p">:</span>
                <span class="n">green</span> <span class="o">=</span> <span class="n">pickler</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
                <span class="n">derived</span> <span class="o">=</span> <span class="n">unpickler</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">derived</span><span class="p">,</span> <span class="n">tzinfo</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">derived</span><span class="p">),</span> <span class="n">otype</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="n">offset</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="n">oname</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="TestTimeZone"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeZone">[docs]</a><span class="k">class</span> <span class="nc">TestTimeZone</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestTimeZone.setUp"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeZone.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ACDT</span> <span class="o">=</span> <span class="n">timezone</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mf">9.5</span><span class="p">),</span> <span class="s">&#39;ACDT&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EST</span> <span class="o">=</span> <span class="n">timezone</span><span class="p">(</span><span class="o">-</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span> <span class="s">&#39;EST&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DT</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeZone.test_str"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeZone.test_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">tz</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ACDT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EST</span><span class="p">,</span> <span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">,</span>
                   <span class="n">timezone</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">timezone</span><span class="o">.</span><span class="n">max</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tz</span><span class="p">),</span> <span class="n">tz</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestTimeZone.test_repr"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeZone.test_repr">[docs]</a>    <span class="k">def</span> <span class="nf">test_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">datetime</span> <span class="o">=</span> <span class="n">datetime_module</span>
        <span class="k">for</span> <span class="n">tz</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ACDT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EST</span><span class="p">,</span> <span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">,</span>
                   <span class="n">timezone</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">timezone</span><span class="o">.</span><span class="n">max</span><span class="p">]:</span>
            <span class="c"># test round-trip</span>
            <span class="n">tzrep</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">tz</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tz</span><span class="p">,</span> <span class="nb">eval</span><span class="p">(</span><span class="n">tzrep</span><span class="p">))</span>

</div>
<div class="viewcode-block" id="TestTimeZone.test_class_members"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeZone.test_class_members">[docs]</a>    <span class="k">def</span> <span class="nf">test_class_members</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">59</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="n">ZERO</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="o">-</span><span class="n">limit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="n">limit</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="TestTimeZone.test_constructor"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeZone.test_constructor">[docs]</a>    <span class="k">def</span> <span class="nf">test_constructor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">,</span> <span class="n">timezone</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNot</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">,</span> <span class="n">timezone</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&#39;UTC&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">,</span> <span class="n">timezone</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&#39;UTC&#39;</span><span class="p">))</span>
        <span class="c"># invalid offsets</span>
        <span class="k">for</span> <span class="n">invalid</span> <span class="ow">in</span> <span class="p">[</span><span class="n">timedelta</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                        <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="o">-</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">timezone</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">timezone</span><span class="p">,</span> <span class="o">-</span><span class="n">invalid</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span> <span class="n">timezone</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span> <span class="n">timezone</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span> <span class="n">timezone</span><span class="p">(</span><span class="n">ZERO</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span> <span class="n">timezone</span><span class="p">(</span><span class="n">ZERO</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span> <span class="n">timezone</span><span class="p">(</span><span class="n">ZERO</span><span class="p">,</span> <span class="s">&#39;ABC&#39;</span><span class="p">,</span> <span class="s">&#39;extra&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeZone.test_inheritance"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeZone.test_inheritance">[docs]</a>    <span class="k">def</span> <span class="nf">test_inheritance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">,</span> <span class="n">tzinfo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">EST</span><span class="p">,</span> <span class="n">tzinfo</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeZone.test_utcoffset"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeZone.test_utcoffset">[docs]</a>    <span class="k">def</span> <span class="nf">test_utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dummy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DT</span>
        <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">12</span><span class="p">]:</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="n">h</span> <span class="o">*</span> <span class="n">HOUR</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">timezone</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">dummy</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="o">-</span><span class="n">offset</span><span class="p">,</span> <span class="n">timezone</span><span class="p">(</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">dummy</span><span class="p">))</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">EST</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">EST</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="TestTimeZone.test_dst"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeZone.test_dst">[docs]</a>    <span class="k">def</span> <span class="nf">test_dst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="o">.</span><span class="n">dst</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DT</span><span class="p">))</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">EST</span><span class="o">.</span><span class="n">dst</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">EST</span><span class="o">.</span><span class="n">dst</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeZone.test_tzname"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeZone.test_tzname">[docs]</a>    <span class="k">def</span> <span class="nf">test_tzname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;UTC+00:00&#39;</span><span class="p">,</span> <span class="n">timezone</span><span class="p">(</span><span class="n">ZERO</span><span class="p">)</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;UTC-05:00&#39;</span><span class="p">,</span> <span class="n">timezone</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span> <span class="o">*</span> <span class="n">HOUR</span><span class="p">)</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;UTC+09:30&#39;</span><span class="p">,</span> <span class="n">timezone</span><span class="p">(</span><span class="mf">9.5</span> <span class="o">*</span> <span class="n">HOUR</span><span class="p">)</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;UTC-00:01&#39;</span><span class="p">,</span> <span class="n">timezone</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;XYZ&#39;</span><span class="p">,</span> <span class="n">timezone</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span> <span class="o">*</span> <span class="n">HOUR</span><span class="p">,</span> <span class="s">&#39;XYZ&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">EST</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">EST</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeZone.test_fromutc"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeZone.test_fromutc">[docs]</a>    <span class="k">def</span> <span class="nf">test_fromutc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
            <span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="o">.</span><span class="n">fromutc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DT</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
            <span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="o">.</span><span class="n">fromutc</span><span class="p">(</span><span class="s">&#39;not datetime&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">tz</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">EST</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ACDT</span><span class="p">,</span> <span class="n">Eastern</span><span class="p">]:</span>
            <span class="n">utctime</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DT</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
            <span class="n">local</span> <span class="o">=</span> <span class="n">tz</span><span class="o">.</span><span class="n">fromutc</span><span class="p">(</span><span class="n">utctime</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local</span> <span class="o">-</span> <span class="n">utctime</span><span class="p">,</span> <span class="n">tz</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">local</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">DT</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestTimeZone.test_comparison"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeZone.test_comparison">[docs]</a>    <span class="k">def</span> <span class="nf">test_comparison</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">timezone</span><span class="p">(</span><span class="n">ZERO</span><span class="p">),</span> <span class="n">timezone</span><span class="p">(</span><span class="n">HOUR</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">timezone</span><span class="p">(</span><span class="n">HOUR</span><span class="p">),</span> <span class="n">timezone</span><span class="p">(</span><span class="n">HOUR</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">timezone</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span> <span class="o">*</span> <span class="n">HOUR</span><span class="p">),</span> <span class="n">timezone</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span> <span class="o">*</span> <span class="n">HOUR</span><span class="p">,</span> <span class="s">&#39;EST&#39;</span><span class="p">))</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span> <span class="n">timezone</span><span class="p">(</span><span class="n">ZERO</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">timezone</span><span class="p">(</span><span class="n">ZERO</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">timezone</span><span class="p">(</span><span class="n">ZERO</span><span class="p">),</span> <span class="p">{</span><span class="n">timezone</span><span class="p">(</span><span class="n">ZERO</span><span class="p">)})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">timezone</span><span class="p">(</span><span class="n">ZERO</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">timezone</span><span class="p">(</span><span class="n">ZERO</span><span class="p">)</span> <span class="o">==</span>  <span class="bp">None</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeZone.test_aware_datetime"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeZone.test_aware_datetime">[docs]</a>    <span class="k">def</span> <span class="nf">test_aware_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># test that timezone instances can be used by datetime</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">tz</span> <span class="ow">in</span> <span class="p">[</span><span class="n">timezone</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">timezone</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tz</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="n">t</span><span class="p">),</span>
                             <span class="n">t</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span><span class="o">.</span><span class="n">tzname</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tz</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">t</span><span class="p">),</span>
                             <span class="n">t</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tz</span><span class="o">.</span><span class="n">dst</span><span class="p">(</span><span class="n">t</span><span class="p">),</span>
                             <span class="n">t</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span><span class="o">.</span><span class="n">dst</span><span class="p">())</span>

<span class="c">#############################################################################</span>
<span class="c"># Base class for testing a particular aspect of timedelta, time, date and</span>
<span class="c"># datetime comparisons.</span>
</div></div>
<div class="viewcode-block" id="HarmlessMixedComparison"><a class="viewcode-back" href="../../test.html#test.datetimetester.HarmlessMixedComparison">[docs]</a><span class="k">class</span> <span class="nc">HarmlessMixedComparison</span><span class="p">:</span>
    <span class="c"># Test that __eq__ and __ne__ don&#39;t complain for mixed-type comparisons.</span>

    <span class="c"># Subclasses must define &#39;theclass&#39;, and theclass(1, 1, 1) must be a</span>
    <span class="c"># legit constructor.</span>

<div class="viewcode-block" id="HarmlessMixedComparison.test_harmless_mixed_comparison"><a class="viewcode-back" href="../../test.html#test.datetimetester.HarmlessMixedComparison.test_harmless_mixed_comparison">[docs]</a>    <span class="k">def</span> <span class="nf">test_harmless_mixed_comparison</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">me</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">me</span> <span class="o">==</span> <span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">me</span> <span class="o">!=</span> <span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(()</span> <span class="o">==</span> <span class="n">me</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(()</span> <span class="o">!=</span> <span class="n">me</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">me</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="p">[],</span> <span class="n">me</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">([],</span> <span class="p">[</span><span class="n">me</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="p">[]])</span>
</div>
<div class="viewcode-block" id="HarmlessMixedComparison.test_harmful_mixed_comparison"><a class="viewcode-back" href="../../test.html#test.datetimetester.HarmlessMixedComparison.test_harmful_mixed_comparison">[docs]</a>    <span class="k">def</span> <span class="nf">test_harmful_mixed_comparison</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">me</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">me</span> <span class="o">&lt;</span> <span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">me</span> <span class="o">&lt;=</span> <span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">me</span> <span class="o">&gt;</span> <span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">me</span> <span class="o">&gt;=</span> <span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">()</span> <span class="o">&lt;</span> <span class="n">me</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">()</span> <span class="o">&lt;=</span> <span class="n">me</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">()</span> <span class="o">&gt;</span> <span class="n">me</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">()</span> <span class="o">&gt;=</span> <span class="n">me</span><span class="p">)</span>

<span class="c">#############################################################################</span>
<span class="c"># timedelta tests</span>
</div></div>
<div class="viewcode-block" id="TestTimeDelta"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta">[docs]</a><span class="k">class</span> <span class="nc">TestTimeDelta</span><span class="p">(</span><span class="n">HarmlessMixedComparison</span><span class="p">,</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="n">theclass</span> <span class="o">=</span> <span class="n">timedelta</span>

<div class="viewcode-block" id="TestTimeDelta.test_constructor"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_constructor">[docs]</a>    <span class="k">def</span> <span class="nf">test_constructor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">eq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span>
        <span class="n">td</span> <span class="o">=</span> <span class="n">timedelta</span>

        <span class="c"># Check keyword args to constructor</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(),</span> <span class="n">td</span><span class="p">(</span><span class="n">weeks</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="n">milliseconds</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microseconds</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">weeks</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">24</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">60</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">60</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">milliseconds</span><span class="o">=</span><span class="mi">1000</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">milliseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mi">1000</span><span class="p">))</span>

        <span class="c"># Check float args to constructor</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">weeks</span><span class="o">=</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">24</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">60</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">60</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mf">0.001</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">milliseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">milliseconds</span><span class="o">=</span><span class="mf">0.001</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_computations"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_computations">[docs]</a>    <span class="k">def</span> <span class="nf">test_computations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">eq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span>
        <span class="n">td</span> <span class="o">=</span> <span class="n">timedelta</span>

        <span class="n">a</span> <span class="o">=</span> <span class="n">td</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="c"># One week</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span> <span class="c"># One minute</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="c"># One millisecond</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="n">c</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">1000</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">24</span><span class="o">*</span><span class="mi">3600</span> <span class="o">-</span> <span class="mi">60</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">__rsub__</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">24</span><span class="o">*</span><span class="mi">3600</span> <span class="o">-</span> <span class="mi">60</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="o">+</span><span class="n">a</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="o">-</span><span class="n">b</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">24</span><span class="o">*</span><span class="mi">3600</span> <span class="o">-</span> <span class="mi">60</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="o">-</span><span class="n">c</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">24</span><span class="o">*</span><span class="mi">3600</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">999000</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="o">-</span><span class="n">a</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">24</span><span class="o">*</span><span class="mi">3600</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="o">*</span><span class="mi">1000000</span><span class="p">),</span> <span class="n">b</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">70</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="o">*</span><span class="n">a</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="o">*</span><span class="n">a</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">b</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">600</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="n">b</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">600</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">b</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">600</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10000</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="n">c</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10000</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10000</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">*-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">b</span><span class="o">*-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">b</span><span class="o">-</span><span class="n">b</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">c</span><span class="o">*-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">c</span><span class="o">+-</span><span class="n">c</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">b</span><span class="o">*</span><span class="p">(</span><span class="mi">60</span><span class="o">*</span><span class="mi">24</span><span class="p">),</span> <span class="p">(</span><span class="n">b</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span><span class="o">*</span><span class="mi">24</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">b</span><span class="o">*</span><span class="p">(</span><span class="mi">60</span><span class="o">*</span><span class="mi">24</span><span class="p">),</span> <span class="p">(</span><span class="mi">60</span><span class="o">*</span><span class="n">b</span><span class="p">)</span><span class="o">*</span><span class="mi">24</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="mi">1000</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="mi">1000</span><span class="o">*</span><span class="n">c</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">//</span><span class="mi">7</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">b</span><span class="o">//</span><span class="mi">10</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">c</span><span class="o">//</span><span class="mi">1000</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">//</span><span class="mi">10</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">360</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">//</span><span class="mi">3600000</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">1000</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">/</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">14</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">b</span><span class="o">/</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">120</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">/</span><span class="mi">7</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">b</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">c</span><span class="o">/</span><span class="mi">1000</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">360</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">/</span><span class="mi">3600000</span><span class="p">,</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">1000</span><span class="p">))</span>

        <span class="c"># Multiplication by float</span>
        <span class="n">us</span> <span class="o">=</span> <span class="n">td</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">((</span><span class="mi">3</span><span class="o">*</span><span class="n">us</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">((</span><span class="mi">5</span><span class="o">*</span><span class="n">us</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">us</span><span class="p">),</span> <span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">us</span><span class="p">),</span> <span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">((</span><span class="o">-</span><span class="mi">3</span><span class="o">*</span><span class="n">us</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">((</span><span class="o">-</span><span class="mi">5</span><span class="o">*</span><span class="n">us</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>

        <span class="c"># Division by int and float</span>
        <span class="n">eq</span><span class="p">((</span><span class="mi">3</span><span class="o">*</span><span class="n">us</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">((</span><span class="mi">5</span><span class="o">*</span><span class="n">us</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">((</span><span class="o">-</span><span class="mi">3</span><span class="o">*</span><span class="n">us</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">((</span><span class="o">-</span><span class="mi">5</span><span class="o">*</span><span class="n">us</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">((</span><span class="mi">3</span><span class="o">*</span><span class="n">us</span><span class="p">)</span> <span class="o">/</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">((</span><span class="mi">5</span><span class="o">*</span><span class="n">us</span><span class="p">)</span> <span class="o">/</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">((</span><span class="mi">3</span><span class="o">*</span><span class="n">us</span><span class="p">)</span> <span class="o">/</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">((</span><span class="mi">5</span><span class="o">*</span><span class="n">us</span><span class="p">)</span> <span class="o">/</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">us</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
            <span class="n">eq</span><span class="p">((</span><span class="n">i</span><span class="o">*</span><span class="n">us</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span><span class="o">//</span><span class="n">us</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="mi">3</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
            <span class="n">eq</span><span class="p">((</span><span class="n">i</span><span class="o">*</span><span class="n">us</span><span class="o">/-</span><span class="mi">3</span><span class="p">)</span><span class="o">//</span><span class="n">us</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">i</span><span class="o">/-</span><span class="mi">3</span><span class="p">))</span>

        <span class="c"># Issue #11576</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="mi">999999999</span><span class="p">,</span> <span class="mi">86399</span><span class="p">,</span> <span class="mi">999999</span><span class="p">)</span> <span class="o">-</span> <span class="n">td</span><span class="p">(</span><span class="mi">999999999</span><span class="p">,</span> <span class="mi">86399</span><span class="p">,</span> <span class="mi">999998</span><span class="p">),</span>
           <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="mi">999999999</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">td</span><span class="p">(</span><span class="mi">999999999</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
           <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_disallowed_computations"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_disallowed_computations">[docs]</a>    <span class="k">def</span> <span class="nf">test_disallowed_computations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>

        <span class="c"># Add/sub ints or floats should be illegal</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span><span class="o">-</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">i</span><span class="o">+</span><span class="n">a</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">i</span><span class="o">-</span><span class="n">a</span><span class="p">)</span>

        <span class="c"># Division of int by timedelta doesn&#39;t make sense.</span>
        <span class="c"># Division by zero doesn&#39;t make sense.</span>
        <span class="n">zero</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">zero</span> <span class="o">//</span> <span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">//</span> <span class="n">zero</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">/</span> <span class="n">zero</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">/</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">/</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
    <span class="nd">@support.requires_IEEE_754</span>
<div class="viewcode-block" id="TestTimeDelta.test_disallowed_special"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_disallowed_special">[docs]</a>    <span class="k">def</span> <span class="nf">test_disallowed_special</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">__mul__</span><span class="p">,</span> <span class="n">NAN</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">__truediv__</span><span class="p">,</span> <span class="n">NAN</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_basic_attributes"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_basic_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">days</span><span class="p">,</span> <span class="n">seconds</span><span class="p">,</span> <span class="n">us</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">31</span>
        <span class="n">td</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="p">,</span> <span class="n">seconds</span><span class="p">,</span> <span class="n">us</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="n">days</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span> <span class="n">seconds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">microseconds</span><span class="p">,</span> <span class="n">us</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_total_seconds"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_total_seconds">[docs]</a>    <span class="k">def</span> <span class="nf">test_total_seconds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">td</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">365</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">(),</span> <span class="mf">31536000.0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">total_seconds</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">123456.789012</span><span class="p">,</span> <span class="o">-</span><span class="mf">123456.789012</span><span class="p">,</span> <span class="mf">0.123456</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1e6</span><span class="p">]:</span>
            <span class="n">td</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">total_seconds</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">(),</span> <span class="n">total_seconds</span><span class="p">)</span>
        <span class="c"># Issue8644: Test that td.total_seconds() has the same</span>
        <span class="c"># accuracy as td / timedelta(seconds=1).</span>
        <span class="k">for</span> <span class="n">ms</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">123</span><span class="p">]:</span>
            <span class="n">td</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="n">ms</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">(),</span> <span class="n">td</span> <span class="o">/</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_carries"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_carries">[docs]</a>    <span class="k">def</span> <span class="nf">test_carries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                       <span class="n">weeks</span><span class="o">=-</span><span class="mi">7</span><span class="p">,</span>
                       <span class="n">hours</span><span class="o">=-</span><span class="mi">24</span><span class="o">*</span><span class="p">(</span><span class="mi">100</span><span class="o">-</span><span class="mi">49</span><span class="p">),</span>
                       <span class="n">minutes</span><span class="o">=-</span><span class="mi">3</span><span class="p">,</span>
                       <span class="n">seconds</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
                       <span class="n">microseconds</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="mi">60</span> <span class="o">-</span> <span class="mi">12</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1e6</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_hash_equality"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_hash_equality">[docs]</a>    <span class="k">def</span> <span class="nf">test_hash_equality</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                       <span class="n">weeks</span><span class="o">=-</span><span class="mi">7</span><span class="p">,</span>
                       <span class="n">hours</span><span class="o">=-</span><span class="mi">24</span><span class="o">*</span><span class="p">(</span><span class="mi">100</span><span class="o">-</span><span class="mi">49</span><span class="p">),</span>
                       <span class="n">minutes</span><span class="o">=-</span><span class="mi">3</span><span class="p">,</span>
                       <span class="n">seconds</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
                       <span class="n">microseconds</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="mi">60</span> <span class="o">-</span> <span class="mi">12</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000000</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">t2</span><span class="p">))</span>

        <span class="n">t1</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">weeks</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="o">*</span><span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">t2</span><span class="p">))</span>

        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="n">t1</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="n">d</span><span class="p">[</span><span class="n">t2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">t1</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_pickling"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_pickling">[docs]</a>    <span class="k">def</span> <span class="nf">test_pickling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">56</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">pickler</span><span class="p">,</span> <span class="n">unpickler</span><span class="p">,</span> <span class="n">proto</span> <span class="ow">in</span> <span class="n">pickle_choices</span><span class="p">:</span>
            <span class="n">green</span> <span class="o">=</span> <span class="n">pickler</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
            <span class="n">derived</span> <span class="o">=</span> <span class="n">unpickler</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">derived</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_compare"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_compare">[docs]</a>    <span class="k">def</span> <span class="nf">test_compare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;=</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;=</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">!=</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;</span> <span class="n">t2</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">args</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>   <span class="c"># this is larger than t1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t2</span> <span class="o">&gt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;=</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t2</span> <span class="o">&gt;=</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">!=</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t2</span> <span class="o">!=</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">==</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t2</span> <span class="o">==</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t2</span> <span class="o">&lt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;=</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t2</span> <span class="o">&lt;=</span> <span class="n">t1</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">badarg</span> <span class="ow">in</span> <span class="n">OTHERSTUFF</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span> <span class="o">==</span> <span class="n">badarg</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span> <span class="o">!=</span> <span class="n">badarg</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">badarg</span> <span class="o">==</span> <span class="n">t1</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">badarg</span> <span class="o">!=</span> <span class="n">t1</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t1</span> <span class="o">&lt;=</span> <span class="n">badarg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t1</span> <span class="o">&lt;</span> <span class="n">badarg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t1</span> <span class="o">&gt;</span> <span class="n">badarg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t1</span> <span class="o">&gt;=</span> <span class="n">badarg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">badarg</span> <span class="o">&lt;=</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">badarg</span> <span class="o">&lt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">badarg</span> <span class="o">&gt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">badarg</span> <span class="o">&gt;=</span> <span class="n">t1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_str"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">td</span> <span class="o">=</span> <span class="n">timedelta</span>
        <span class="n">eq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span>

        <span class="n">eq</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="s">&quot;1 day, 0:00:00&quot;</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span> <span class="s">&quot;-1 day, 0:00:00&quot;</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="mi">2</span><span class="p">)),</span> <span class="s">&quot;2 days, 0:00:00&quot;</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)),</span> <span class="s">&quot;-2 days, 0:00:00&quot;</span><span class="p">)</span>

        <span class="n">eq</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">58</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">59</span><span class="p">)),</span> <span class="s">&quot;12:58:59&quot;</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">4</span><span class="p">)),</span> <span class="s">&quot;2:03:04&quot;</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">weeks</span><span class="o">=-</span><span class="mi">30</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">34</span><span class="p">)),</span>
           <span class="s">&quot;-210 days, 23:12:34&quot;</span><span class="p">)</span>

        <span class="n">eq</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">milliseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span> <span class="s">&quot;0:00:00.001000&quot;</span><span class="p">)</span>
        <span class="n">eq</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mi">3</span><span class="p">)),</span> <span class="s">&quot;0:00:00.000003&quot;</span><span class="p">)</span>

        <span class="n">eq</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">999999999</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">59</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">59</span><span class="p">,</span>
                   <span class="n">microseconds</span><span class="o">=</span><span class="mi">999999</span><span class="p">)),</span>
           <span class="s">&quot;999999999 days, 23:59:59.999999&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_repr"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_repr">[docs]</a>    <span class="k">def</span> <span class="nf">test_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;datetime.&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">__name__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span>
                         <span class="s">&quot;</span><span class="si">%s</span><span class="s">(1)&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
                         <span class="s">&quot;</span><span class="si">%s</span><span class="s">(10, 2)&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">400000</span><span class="p">)),</span>
                         <span class="s">&quot;</span><span class="si">%s</span><span class="s">(-10, 2, 400000)&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_roundtrip"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_roundtrip">[docs]</a>    <span class="k">def</span> <span class="nf">test_roundtrip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">td</span> <span class="ow">in</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">999999999</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">59</span><span class="p">,</span>
                             <span class="n">seconds</span><span class="o">=</span><span class="mi">59</span><span class="p">,</span> <span class="n">microseconds</span><span class="o">=</span><span class="mi">999999</span><span class="p">),</span>
                   <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=-</span><span class="mi">999999999</span><span class="p">),</span>
                   <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=-</span><span class="mi">999999999</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                   <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">microseconds</span><span class="o">=</span><span class="mi">3</span><span class="p">)):</span>

            <span class="c"># Verify td -&gt; string -&gt; td identity.</span>
            <span class="n">s</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">td</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;datetime.&#39;</span><span class="p">))</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">9</span><span class="p">:]</span>
            <span class="n">td2</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">td</span><span class="p">,</span> <span class="n">td2</span><span class="p">)</span>

            <span class="c"># Verify identity via reconstructing from pieces.</span>
            <span class="n">td2</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">microseconds</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">td</span><span class="p">,</span> <span class="n">td2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_resolution_info"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_resolution_info">[docs]</a>    <span class="k">def</span> <span class="nf">test_resolution_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">timedelta</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">timedelta</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">timedelta</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">timedelta</span><span class="o">.</span><span class="n">max</span> <span class="o">&gt;</span> <span class="n">timedelta</span><span class="o">.</span><span class="n">min</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">timedelta</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">(</span><span class="o">-</span><span class="mi">999999999</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">timedelta</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">999999999</span><span class="p">,</span> <span class="mi">24</span><span class="o">*</span><span class="mi">3600</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1e6</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">timedelta</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_overflow"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_overflow">[docs]</a>    <span class="k">def</span> <span class="nf">test_overflow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tiny</span> <span class="o">=</span> <span class="n">timedelta</span><span class="o">.</span><span class="n">resolution</span>

        <span class="n">td</span> <span class="o">=</span> <span class="n">timedelta</span><span class="o">.</span><span class="n">min</span> <span class="o">+</span> <span class="n">tiny</span>
        <span class="n">td</span> <span class="o">-=</span> <span class="n">tiny</span>  <span class="c"># no problem</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">__sub__</span><span class="p">,</span> <span class="n">tiny</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">__add__</span><span class="p">,</span> <span class="o">-</span><span class="n">tiny</span><span class="p">)</span>

        <span class="n">td</span> <span class="o">=</span> <span class="n">timedelta</span><span class="o">.</span><span class="n">max</span> <span class="o">-</span> <span class="n">tiny</span>
        <span class="n">td</span> <span class="o">+=</span> <span class="n">tiny</span>  <span class="c"># no problem</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">__add__</span><span class="p">,</span> <span class="n">tiny</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">__sub__</span><span class="p">,</span> <span class="o">-</span><span class="n">tiny</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="o">-</span><span class="n">timedelta</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>

        <span class="n">day</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">day</span><span class="o">.</span><span class="n">__mul__</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">day</span><span class="o">.</span><span class="n">__mul__</span><span class="p">,</span> <span class="mf">1e9</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">day</span><span class="o">.</span><span class="n">__truediv__</span><span class="p">,</span> <span class="mf">1e-20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">day</span><span class="o">.</span><span class="n">__truediv__</span><span class="p">,</span> <span class="mf">1e-10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">day</span><span class="o">.</span><span class="n">__truediv__</span><span class="p">,</span> <span class="mf">9e-10</span><span class="p">)</span>
</div>
    <span class="nd">@support.requires_IEEE_754</span>
    <span class="k">def</span> <span class="nf">_test_overflow_special</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">day</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">day</span><span class="o">.</span><span class="n">__mul__</span><span class="p">,</span> <span class="n">INF</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">day</span><span class="o">.</span><span class="n">__mul__</span><span class="p">,</span> <span class="o">-</span><span class="n">INF</span><span class="p">)</span>

<div class="viewcode-block" id="TestTimeDelta.test_microsecond_rounding"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_microsecond_rounding">[docs]</a>    <span class="k">def</span> <span class="nf">test_microsecond_rounding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">td</span> <span class="o">=</span> <span class="n">timedelta</span>
        <span class="n">eq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span>

        <span class="c"># Single-field rounding.</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">milliseconds</span><span class="o">=</span><span class="mf">0.4</span><span class="o">/</span><span class="mi">1000</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>    <span class="c"># rounds to 0</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">milliseconds</span><span class="o">=-</span><span class="mf">0.4</span><span class="o">/</span><span class="mi">1000</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>    <span class="c"># rounds to 0</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">milliseconds</span><span class="o">=</span><span class="mf">0.6</span><span class="o">/</span><span class="mi">1000</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">milliseconds</span><span class="o">=-</span><span class="mf">0.6</span><span class="o">/</span><span class="mi">1000</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=-</span><span class="mi">1</span><span class="p">))</span>

        <span class="c"># Rounding due to contributions from more than one field.</span>
        <span class="n">us_per_hour</span> <span class="o">=</span> <span class="mf">3600e6</span>
        <span class="n">us_per_day</span> <span class="o">=</span> <span class="n">us_per_hour</span> <span class="o">*</span> <span class="mi">24</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">days</span><span class="o">=.</span><span class="mi">4</span><span class="o">/</span><span class="n">us_per_day</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">hours</span><span class="o">=.</span><span class="mi">2</span><span class="o">/</span><span class="n">us_per_hour</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">days</span><span class="o">=.</span><span class="mi">4</span><span class="o">/</span><span class="n">us_per_day</span><span class="p">,</span> <span class="n">hours</span><span class="o">=.</span><span class="mi">2</span><span class="o">/</span><span class="n">us_per_hour</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>

        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">days</span><span class="o">=-.</span><span class="mi">4</span><span class="o">/</span><span class="n">us_per_day</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">hours</span><span class="o">=-.</span><span class="mi">2</span><span class="o">/</span><span class="n">us_per_hour</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">days</span><span class="o">=-.</span><span class="mi">4</span><span class="o">/</span><span class="n">us_per_day</span><span class="p">,</span> <span class="n">hours</span><span class="o">=-.</span><span class="mi">2</span><span class="o">/</span><span class="n">us_per_hour</span><span class="p">),</span> <span class="n">td</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=-</span><span class="mi">1</span><span class="p">))</span>

        <span class="c"># Test for a patch in Issue 8860</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mf">0.5</span><span class="p">),</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">td</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mf">1.0</span><span class="p">))</span>
        <span class="n">eq</span><span class="p">(</span><span class="n">td</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span><span class="o">//</span><span class="n">td</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">td</span><span class="o">.</span><span class="n">resolution</span><span class="o">//</span><span class="n">td</span><span class="o">.</span><span class="n">resolution</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_massive_normalization"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_massive_normalization">[docs]</a>    <span class="k">def</span> <span class="nf">test_massive_normalization</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">td</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">td</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">microseconds</span><span class="p">),</span>
                         <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">24</span><span class="o">*</span><span class="mi">3600</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">999999</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_bool"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_bool">[docs]</a>    <span class="k">def</span> <span class="nf">test_bool</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_subclass_timedelta"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_subclass_timedelta">[docs]</a>    <span class="k">def</span> <span class="nf">test_subclass_timedelta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">class</span> <span class="nc">T</span><span class="p">(</span><span class="n">timedelta</span><span class="p">):</span>
            <span class="nd">@staticmethod</span>
            <span class="k">def</span> <span class="nf">from_td</span><span class="p">(</span><span class="n">td</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">T</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span> <span class="n">td</span><span class="o">.</span><span class="n">microseconds</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">as_hours</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="nb">sum</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">days</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">+</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">seconds</span> <span class="o">/</span> <span class="mf">3600.0</span> <span class="o">+</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">microseconds</span> <span class="o">/</span> <span class="mf">3600e6</span><span class="p">)</span>
                <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="nb">sum</span><span class="p">)</span>

        <span class="n">t1</span> <span class="o">=</span> <span class="n">T</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="n">T</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">as_hours</span><span class="p">(),</span> <span class="mi">24</span><span class="p">)</span>

        <span class="n">t2</span> <span class="o">=</span> <span class="n">T</span><span class="p">(</span><span class="n">days</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=-</span><span class="mi">3600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">t2</span><span class="p">),</span> <span class="n">T</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="o">.</span><span class="n">as_hours</span><span class="p">(),</span> <span class="o">-</span><span class="mi">25</span><span class="p">)</span>

        <span class="n">t3</span> <span class="o">=</span> <span class="n">t1</span> <span class="o">+</span> <span class="n">t2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">t3</span><span class="p">),</span> <span class="n">timedelta</span><span class="p">)</span>
        <span class="n">t4</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">from_td</span><span class="p">(</span><span class="n">t3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">t4</span><span class="p">),</span> <span class="n">T</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t3</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="n">t4</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t3</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span> <span class="n">t4</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t3</span><span class="o">.</span><span class="n">microseconds</span><span class="p">,</span> <span class="n">t4</span><span class="o">.</span><span class="n">microseconds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t3</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">t4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t4</span><span class="o">.</span><span class="n">as_hours</span><span class="p">(),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_division"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_division">[docs]</a>    <span class="k">def</span> <span class="nf">test_division</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">19</span><span class="p">)</span>
        <span class="n">second</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="n">second</span><span class="p">,</span> <span class="mf">5059.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span> <span class="o">//</span> <span class="n">second</span><span class="p">,</span> <span class="mi">5059</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
        <span class="n">minute</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="n">minute</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span> <span class="o">//</span> <span class="n">minute</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

        <span class="n">zerotd</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="n">truediv</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">zerotd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="n">floordiv</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">zerotd</span><span class="p">)</span>

        <span class="c"># self.assertRaises(TypeError, truediv, t, 2)</span>
        <span class="c"># note: floor division of a timedelta by an integer *is*</span>
        <span class="c"># currently permitted.</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_remainder"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_remainder">[docs]</a>    <span class="k">def</span> <span class="nf">test_remainder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
        <span class="n">minute</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">t</span> <span class="o">%</span> <span class="n">minute</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">t</span> <span class="o">%</span>  <span class="n">minute</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>

        <span class="n">zerotd</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">zerotd</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeDelta.test_divmod"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeDelta.test_divmod">[docs]</a>    <span class="k">def</span> <span class="nf">test_divmod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
        <span class="n">minute</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">q</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">minute</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
        <span class="n">q</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">minute</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>

        <span class="n">zerotd</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">divmod</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">zerotd</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">divmod</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>


<span class="c">#############################################################################</span>
<span class="c"># date tests</span>
</div></div>
<div class="viewcode-block" id="TestDateOnly"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateOnly">[docs]</a><span class="k">class</span> <span class="nc">TestDateOnly</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c"># Tests here won&#39;t pass if also run on datetime objects, so don&#39;t</span>
    <span class="c"># subclass this to test datetimes too.</span>

<div class="viewcode-block" id="TestDateOnly.test_delta_non_days_ignored"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateOnly.test_delta_non_days_ignored">[docs]</a>    <span class="k">def</span> <span class="nf">test_delta_non_days_ignored</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                          <span class="n">microseconds</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">days</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">delta</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">days</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

        <span class="n">dt2</span> <span class="o">=</span> <span class="n">dt</span> <span class="o">+</span> <span class="n">delta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="p">,</span> <span class="n">dt</span> <span class="o">+</span> <span class="n">days</span><span class="p">)</span>

        <span class="n">dt2</span> <span class="o">=</span> <span class="n">delta</span> <span class="o">+</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="p">,</span> <span class="n">dt</span> <span class="o">+</span> <span class="n">days</span><span class="p">)</span>

        <span class="n">dt2</span> <span class="o">=</span> <span class="n">dt</span> <span class="o">-</span> <span class="n">delta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="p">,</span> <span class="n">dt</span> <span class="o">-</span> <span class="n">days</span><span class="p">)</span>

        <span class="n">delta</span> <span class="o">=</span> <span class="o">-</span><span class="n">delta</span>
        <span class="n">days</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">delta</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">days</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>

        <span class="n">dt2</span> <span class="o">=</span> <span class="n">dt</span> <span class="o">+</span> <span class="n">delta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="p">,</span> <span class="n">dt</span> <span class="o">+</span> <span class="n">days</span><span class="p">)</span>

        <span class="n">dt2</span> <span class="o">=</span> <span class="n">delta</span> <span class="o">+</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="p">,</span> <span class="n">dt</span> <span class="o">+</span> <span class="n">days</span><span class="p">)</span>

        <span class="n">dt2</span> <span class="o">=</span> <span class="n">dt</span> <span class="o">-</span> <span class="n">delta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="p">,</span> <span class="n">dt</span> <span class="o">-</span> <span class="n">days</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="SubclassDate"><a class="viewcode-back" href="../../test.html#test.datetimetester.SubclassDate">[docs]</a><span class="k">class</span> <span class="nc">SubclassDate</span><span class="p">(</span><span class="n">date</span><span class="p">):</span>
    <span class="n">sub_var</span> <span class="o">=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="TestDate"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate">[docs]</a><span class="k">class</span> <span class="nc">TestDate</span><span class="p">(</span><span class="n">HarmlessMixedComparison</span><span class="p">,</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c"># Tests here should pass for both dates and datetimes, except for a</span>
    <span class="c"># few tests that TestDateTime overrides.</span>

    <span class="n">theclass</span> <span class="o">=</span> <span class="n">date</span>

<div class="viewcode-block" id="TestDate.test_basic_attributes"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_basic_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="mi">2002</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_roundtrip"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_roundtrip">[docs]</a>    <span class="k">def</span> <span class="nf">test_roundtrip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">dt</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">today</span><span class="p">()):</span>
            <span class="c"># Verify dt -&gt; string -&gt; date identity.</span>
            <span class="n">s</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;datetime.&#39;</span><span class="p">))</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">9</span><span class="p">:]</span>
            <span class="n">dt2</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">dt2</span><span class="p">)</span>

            <span class="c"># Verify identity via reconstructing from pieces.</span>
            <span class="n">dt2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">dt2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_ordinal_conversions"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_ordinal_conversions">[docs]</a>    <span class="k">def</span> <span class="nf">test_ordinal_conversions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Check some fixed values.</span>
        <span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>      <span class="c"># calendar origin</span>
                           <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">365</span><span class="p">),</span>
                           <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">366</span><span class="p">),</span>
                           <span class="c"># first example from &quot;Calendrical Calculations&quot;</span>
                           <span class="p">(</span><span class="mi">1945</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">710347</span><span class="p">)]:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">toordinal</span><span class="p">())</span>
            <span class="n">fromord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromordinal</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">fromord</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fromord</span><span class="p">,</span> <span class="s">&quot;hour&quot;</span><span class="p">):</span>
            <span class="c"># if we&#39;re checking something fancier than a date, verify</span>
            <span class="c"># the extra fields have been zeroed out</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fromord</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fromord</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fromord</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fromord</span><span class="o">.</span><span class="n">microsecond</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c"># Check first and last days of year spottily across the whole</span>
        <span class="c"># range of years supported.</span>
        <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">MINYEAR</span><span class="p">,</span> <span class="n">MAXYEAR</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
            <span class="c"># Verify (year, 1, 1) -&gt; ordinal -&gt; y, m, d is identity.</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">toordinal</span><span class="p">()</span>
            <span class="n">d2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromordinal</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span>
            <span class="c"># Verify that moving back a day gets to the end of year-1.</span>
            <span class="k">if</span> <span class="n">year</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromordinal</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">d2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">year</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d2</span><span class="o">.</span><span class="n">toordinal</span><span class="p">(),</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="c"># Test every day in a leap-year and a non-leap year.</span>
        <span class="n">dim</span> <span class="o">=</span> <span class="p">[</span><span class="mi">31</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">isleap</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span> <span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">toordinal</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">month</span><span class="p">,</span> <span class="n">maxday</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span> <span class="n">dim</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">month</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">isleap</span><span class="p">:</span>
                    <span class="n">maxday</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">day</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">maxday</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">toordinal</span><span class="p">(),</span> <span class="n">n</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromordinal</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="TestDate.test_extreme_ordinals"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_extreme_ordinals">[docs]</a>    <span class="k">def</span> <span class="nf">test_extreme_ordinals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">min</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>  <span class="c"># get rid of time parts</span>
        <span class="n">aord</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">toordinal</span><span class="p">()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">fromordinal</span><span class="p">(</span><span class="n">aord</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">fromordinal</span><span class="p">(</span><span class="n">aord</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>

        <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">toordinal</span><span class="p">(),</span> <span class="n">aord</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromordinal</span><span class="p">(</span><span class="n">aord</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>

        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">max</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>  <span class="c"># get rid of time parts</span>
        <span class="n">aord</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">toordinal</span><span class="p">()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">fromordinal</span><span class="p">(</span><span class="n">aord</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">fromordinal</span><span class="p">(</span><span class="n">aord</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>

        <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">toordinal</span><span class="p">(),</span> <span class="n">aord</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromordinal</span><span class="p">(</span><span class="n">aord</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestDate.test_bad_constructor_arguments"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_bad_constructor_arguments">[docs]</a>    <span class="k">def</span> <span class="nf">test_bad_constructor_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># bad years</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">MINYEAR</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">MAXYEAR</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="n">MINYEAR</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="n">MAXYEAR</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="c"># bad months</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>    <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="c"># bad days</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2400</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2001</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2100</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">1900</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_hash_equality"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_hash_equality">[docs]</a>    <span class="k">def</span> <span class="nf">test_hash_equality</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
        <span class="c"># same thing</span>
        <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="n">dic</span><span class="p">[</span><span class="n">e</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dic</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">d</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">e</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">)</span>
        <span class="c"># same thing</span>
        <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="n">dic</span><span class="p">[</span><span class="n">e</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dic</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">d</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">e</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_computations"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_computations">[docs]</a>    <span class="k">def</span> <span class="nf">test_computations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1956</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">diff</span> <span class="o">=</span> <span class="n">a</span><span class="o">-</span><span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">diff</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="mi">46</span><span class="o">*</span><span class="mi">365</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1956</span><span class="p">,</span> <span class="mi">2002</span><span class="p">,</span> <span class="mi">4</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">diff</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">diff</span><span class="o">.</span><span class="n">microseconds</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">day</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">week</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">day</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">day</span> <span class="o">+</span> <span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">day</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="o">-</span><span class="n">day</span> <span class="o">+</span> <span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">week</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">week</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">23</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="mi">52</span><span class="o">*</span><span class="n">week</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2003</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="mi">52</span><span class="o">*</span><span class="n">week</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">a</span> <span class="o">+</span> <span class="n">week</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="p">,</span> <span class="n">week</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">a</span> <span class="o">+</span> <span class="n">day</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">a</span> <span class="o">-</span> <span class="n">week</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">week</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">a</span> <span class="o">-</span> <span class="n">day</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">week</span><span class="p">),</span> <span class="o">-</span><span class="n">week</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">day</span><span class="p">),</span> <span class="o">-</span><span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">week</span><span class="p">),</span> <span class="n">week</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">day</span><span class="p">),</span> <span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">c</span> <span class="o">-</span> <span class="p">(</span><span class="n">c</span> <span class="o">-</span> <span class="n">day</span><span class="p">),</span> <span class="n">day</span><span class="p">)</span>

        <span class="c"># Add/sub ints or floats should be illegal</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span><span class="o">-</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">i</span><span class="o">+</span><span class="n">a</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">i</span><span class="o">-</span><span class="n">a</span><span class="p">)</span>

        <span class="c"># delta - date is senseless.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">day</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span>
        <span class="c"># mixing date and (delta or date) via * or // is senseless</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">day</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">day</span> <span class="o">//</span> <span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">//</span> <span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">//</span> <span class="n">a</span><span class="p">)</span>
        <span class="c"># date + date is senseless</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_overflow"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_overflow">[docs]</a>    <span class="k">def</span> <span class="nf">test_overflow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tiny</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">resolution</span>

        <span class="k">for</span> <span class="n">delta</span> <span class="ow">in</span> <span class="p">[</span><span class="n">tiny</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">2</span><span class="p">)]:</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">min</span> <span class="o">+</span> <span class="n">delta</span>
            <span class="n">dt</span> <span class="o">-=</span> <span class="n">delta</span>  <span class="c"># no problem</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">__sub__</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">__add__</span><span class="p">,</span> <span class="o">-</span><span class="n">delta</span><span class="p">)</span>

            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">max</span> <span class="o">-</span> <span class="n">delta</span>
            <span class="n">dt</span> <span class="o">+=</span> <span class="n">delta</span>  <span class="c"># no problem</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">__add__</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">__sub__</span><span class="p">,</span> <span class="o">-</span><span class="n">delta</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_fromtimestamp"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_fromtimestamp">[docs]</a>    <span class="k">def</span> <span class="nf">test_fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">time</span>

        <span class="c"># Try an arbitrary fixed value.</span>
        <span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span> <span class="o">=</span> <span class="mi">1999</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">19</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">mktime</span><span class="p">((</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">month</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_insane_fromtimestamp"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_insane_fromtimestamp">[docs]</a>    <span class="k">def</span> <span class="nf">test_insane_fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># It&#39;s possible that some platform maps time_t to double,</span>
        <span class="c"># and that this test will fail there.  This test should</span>
        <span class="c"># exempt such platforms (provided they return reasonable</span>
        <span class="c"># results!).</span>
        <span class="k">for</span> <span class="n">insane</span> <span class="ow">in</span> <span class="o">-</span><span class="mf">1e200</span><span class="p">,</span> <span class="mf">1e200</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">,</span>
                              <span class="n">insane</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_today"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_today">[docs]</a>    <span class="k">def</span> <span class="nf">test_today</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">time</span>

        <span class="c"># We claim that today() is like fromtimestamp(time.time()), so</span>
        <span class="c"># prove it.</span>
        <span class="k">for</span> <span class="n">dummy</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">today</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
            <span class="n">ts</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="n">todayagain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">today</span> <span class="o">==</span> <span class="n">todayagain</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="c"># There are several legit reasons that could fail:</span>
            <span class="c"># 1. It recently became midnight, between the today() and the</span>
            <span class="c">#    time() calls.</span>
            <span class="c"># 2. The platform time() has such fine resolution that we&#39;ll</span>
            <span class="c">#    never get the same value twice.</span>
            <span class="c"># 3. The platform time() has poor resolution, and we just</span>
            <span class="c">#    happened to call today() right before a resolution quantum</span>
            <span class="c">#    boundary.</span>
            <span class="c"># 4. The system clock got fiddled between calls.</span>
            <span class="c"># In any case, wait a little while and try again.</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

        <span class="c"># It worked or it didn&#39;t.  If it didn&#39;t, assume it&#39;s reason #2, and</span>
        <span class="c"># let the test pass if they&#39;re within half a second of each other.</span>
        <span class="k">if</span> <span class="n">today</span> <span class="o">!=</span> <span class="n">todayagain</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">todayagain</span><span class="p">,</span> <span class="n">today</span><span class="p">,</span>
                                   <span class="n">delta</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mf">0.5</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestDate.test_weekday"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_weekday">[docs]</a>    <span class="k">def</span> <span class="nf">test_weekday</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
            <span class="c"># March 4, 2002 is a Monday</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="o">+</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">weekday</span><span class="p">(),</span> <span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="o">+</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">isoweekday</span><span class="p">(),</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="c"># January 2, 1956 is a Monday</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1956</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">weekday</span><span class="p">(),</span> <span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1956</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">isoweekday</span><span class="p">(),</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_isocalendar"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_isocalendar">[docs]</a>    <span class="k">def</span> <span class="nf">test_isocalendar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Check examples from</span>
        <span class="c"># http://www.phys.uu.nl/~vgent/calendar/isocalendar.htm</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2003</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">22</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">(),</span> <span class="p">(</span><span class="mi">2003</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2003</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">(),</span> <span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">(),</span> <span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">21</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">(),</span> <span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">28</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">(),</span> <span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">(),</span> <span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestDate.test_iso_long_years"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_iso_long_years">[docs]</a>    <span class="k">def</span> <span class="nf">test_iso_long_years</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Calculate long ISO years and compare to table from</span>
        <span class="c"># http://www.phys.uu.nl/~vgent/calendar/isocalendar.htm</span>
        <span class="n">ISO_LONG_YEARS_TABLE</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">              4   32   60   88</span>
<span class="s">              9   37   65   93</span>
<span class="s">             15   43   71   99</span>
<span class="s">             20   48   76</span>
<span class="s">             26   54   82</span>

<span class="s">            105  133  161  189</span>
<span class="s">            111  139  167  195</span>
<span class="s">            116  144  172</span>
<span class="s">            122  150  178</span>
<span class="s">            128  156  184</span>

<span class="s">            201  229  257  285</span>
<span class="s">            207  235  263  291</span>
<span class="s">            212  240  268  296</span>
<span class="s">            218  246  274</span>
<span class="s">            224  252  280</span>

<span class="s">            303  331  359  387</span>
<span class="s">            308  336  364  392</span>
<span class="s">            314  342  370  398</span>
<span class="s">            320  348  376</span>
<span class="s">            325  353  381</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">iso_long_years</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">ISO_LONG_YEARS_TABLE</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
        <span class="n">L</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">400</span><span class="p">):</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
            <span class="n">d1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1600</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">d1</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()[</span><span class="mi">1</span><span class="p">:])</span>
            <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">53</span><span class="p">:</span>
                <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">iso_long_years</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_isoformat"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_isoformat">[docs]</a>    <span class="k">def</span> <span class="nf">test_isoformat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;0002-03-02&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_ctime"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_ctime">[docs]</a>    <span class="k">def</span> <span class="nf">test_ctime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">ctime</span><span class="p">(),</span> <span class="s">&quot;Sat Mar  2 00:00:00 2002&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_strftime"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_strftime">[docs]</a>    <span class="k">def</span> <span class="nf">test_strftime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;m:%m d:</span><span class="si">%d</span><span class="s"> y:%y&quot;</span><span class="p">),</span> <span class="s">&quot;m:03 d:02 y:05&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">),</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="c"># SF bug #761337</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="o">*</span><span class="mi">1000</span><span class="p">),</span> <span class="s">&#39;x&#39;</span><span class="o">*</span><span class="mi">1000</span><span class="p">)</span> <span class="c"># SF bug #1556784</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">)</span> <span class="c"># needs an arg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">,</span> <span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="s">&quot;two&quot;</span><span class="p">)</span> <span class="c"># too many args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span> <span class="c"># arg wrong type</span>

        <span class="c"># test that unicode input is allowed (issue 2782)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%m&quot;</span><span class="p">),</span> <span class="s">&quot;03&quot;</span><span class="p">)</span>

        <span class="c"># A naive object replaces %z and %Z w/ empty strings.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;&#39;%z&#39; &#39;%Z&#39;&quot;</span><span class="p">),</span> <span class="s">&quot;&#39;&#39; &#39;&#39;&quot;</span><span class="p">)</span>

        <span class="c">#make sure that invalid format specifiers are handled correctly</span>
        <span class="c">#self.assertRaises(ValueError, t.strftime, &quot;%e&quot;)</span>
        <span class="c">#self.assertRaises(ValueError, t.strftime, &quot;%&quot;)</span>
        <span class="c">#self.assertRaises(ValueError, t.strftime, &quot;%#&quot;)</span>

        <span class="c">#oh well, some systems just ignore those invalid ones.</span>
        <span class="c">#at least, excercise them to make sure that no crashes</span>
        <span class="c">#are generated</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">%e</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;%&quot;</span><span class="p">,</span> <span class="s">&quot;%#&quot;</span><span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="c">#check that this standard extension works</span>
        <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%f</span><span class="s">&quot;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="TestDate.test_format"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_format">[docs]</a>    <span class="k">def</span> <span class="nf">test_format</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">dt</span><span class="p">))</span>

        <span class="c"># check that a derived class&#39;s __str__() gets called</span>
        <span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="s">&#39;A&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;A&#39;</span><span class="p">)</span>

        <span class="c"># check that a derived class&#39;s strftime gets called</span>
        <span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">strftime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_spec</span><span class="p">):</span>
                <span class="k">return</span> <span class="s">&#39;B&#39;</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">dt</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">fmt</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;m:%m d:</span><span class="si">%d</span><span class="s"> y:%y&quot;</span><span class="p">,</span>
                    <span class="s">&quot;m:%m d:</span><span class="si">%d</span><span class="s"> y:%y H:%H M:%M S:%S&quot;</span><span class="p">,</span>
                    <span class="s">&quot;%z %Z&quot;</span><span class="p">,</span>
                    <span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="n">fmt</span><span class="p">),</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="n">fmt</span><span class="p">),</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="n">fmt</span><span class="p">),</span> <span class="s">&#39;B&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_resolution_info"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_resolution_info">[docs]</a>    <span class="k">def</span> <span class="nf">test_resolution_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># XXX: Should min and max respect subclassing?</span>
        <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">expected_class</span> <span class="o">=</span> <span class="n">datetime</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">expected_class</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">expected_class</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">expected_class</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">max</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">min</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_extreme_timedelta"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_extreme_timedelta">[docs]</a>    <span class="k">def</span> <span class="nf">test_extreme_timedelta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">big</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">max</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">min</span>
        <span class="c"># 3652058 days, 23 hours, 59 minutes, 59 seconds, 999999 microseconds</span>
        <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">big</span><span class="o">.</span><span class="n">days</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">3600</span> <span class="o">+</span> <span class="n">big</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span><span class="o">*</span><span class="mi">1000000</span> <span class="o">+</span> <span class="n">big</span><span class="o">.</span><span class="n">microseconds</span>
        <span class="c"># n == 315537897599999999 ~= 2**58.13</span>
        <span class="n">justasbig</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">big</span><span class="p">,</span> <span class="n">justasbig</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">min</span> <span class="o">+</span> <span class="n">big</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">max</span> <span class="o">-</span> <span class="n">big</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">min</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_timetuple"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_timetuple">[docs]</a>    <span class="k">def</span> <span class="nf">test_timetuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
            <span class="c"># January 2, 1956 is a Monday (0)</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1956</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="p">(</span><span class="mi">1956</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="c"># February 1, 1956 is a Wednesday (2)</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1956</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="p">(</span><span class="mi">1956</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="o">+</span><span class="n">i</span><span class="p">)</span><span class="o">%</span><span class="mi">7</span><span class="p">,</span> <span class="mi">32</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="c"># March 1, 1956 is a Thursday (3), and is the 31+29+1 = 61st day</span>
            <span class="c"># of the year.</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1956</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="p">(</span><span class="mi">1956</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="o">+</span><span class="n">i</span><span class="p">)</span><span class="o">%</span><span class="mi">7</span><span class="p">,</span> <span class="mi">61</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">tm_year</span><span class="p">,</span> <span class="mi">1956</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">tm_mon</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">tm_mday</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">tm_hour</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">tm_min</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">tm_sec</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">tm_wday</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="o">+</span><span class="n">i</span><span class="p">)</span><span class="o">%</span><span class="mi">7</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">tm_yday</span><span class="p">,</span> <span class="mi">61</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">tm_isdst</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_pickling"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_pickling">[docs]</a>    <span class="k">def</span> <span class="nf">test_pickling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">23</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">pickler</span><span class="p">,</span> <span class="n">unpickler</span><span class="p">,</span> <span class="n">proto</span> <span class="ow">in</span> <span class="n">pickle_choices</span><span class="p">:</span>
            <span class="n">green</span> <span class="o">=</span> <span class="n">pickler</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
            <span class="n">derived</span> <span class="o">=</span> <span class="n">unpickler</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">derived</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_compare"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_compare">[docs]</a>    <span class="k">def</span> <span class="nf">test_compare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;=</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;=</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">!=</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;</span> <span class="n">t2</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">args</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>   <span class="c"># this is larger than t1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t2</span> <span class="o">&gt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;=</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t2</span> <span class="o">&gt;=</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">!=</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t2</span> <span class="o">!=</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">==</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t2</span> <span class="o">==</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t2</span> <span class="o">&lt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;=</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t2</span> <span class="o">&lt;=</span> <span class="n">t1</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">badarg</span> <span class="ow">in</span> <span class="n">OTHERSTUFF</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span> <span class="o">==</span> <span class="n">badarg</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span> <span class="o">!=</span> <span class="n">badarg</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">badarg</span> <span class="o">==</span> <span class="n">t1</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">badarg</span> <span class="o">!=</span> <span class="n">t1</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t1</span> <span class="o">&lt;</span> <span class="n">badarg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t1</span> <span class="o">&gt;</span> <span class="n">badarg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t1</span> <span class="o">&gt;=</span> <span class="n">badarg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">badarg</span> <span class="o">&lt;=</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">badarg</span> <span class="o">&lt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">badarg</span> <span class="o">&gt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">badarg</span> <span class="o">&gt;=</span> <span class="n">t1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_mixed_compare"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_mixed_compare">[docs]</a>    <span class="k">def</span> <span class="nf">test_mixed_compare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">our</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

        <span class="c"># Our class can be compared for equality to other classes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">our</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span> <span class="o">==</span> <span class="n">our</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">our</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span> <span class="o">!=</span> <span class="n">our</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

        <span class="c"># But the ordering is undefined</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">our</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">our</span><span class="p">)</span>

        <span class="c"># Repeat those tests with a different class</span>

        <span class="k">class</span> <span class="nc">SomeClass</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="n">their</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">our</span> <span class="o">==</span> <span class="n">their</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">their</span> <span class="o">==</span> <span class="n">our</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">our</span> <span class="o">!=</span> <span class="n">their</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">their</span> <span class="o">!=</span> <span class="n">our</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">our</span> <span class="o">&lt;</span> <span class="n">their</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">their</span> <span class="o">&lt;</span> <span class="n">our</span><span class="p">)</span>

        <span class="c"># However, if the other class explicitly defines ordering</span>
        <span class="c"># relative to our class, it is allowed to do so</span>

        <span class="k">class</span> <span class="nc">LargerThanAnything</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">False</span>
            <span class="k">def</span> <span class="nf">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LargerThanAnything</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LargerThanAnything</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
                <span class="k">return</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LargerThanAnything</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
                <span class="k">return</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LargerThanAnything</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">True</span>

        <span class="n">their</span> <span class="o">=</span> <span class="n">LargerThanAnything</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">our</span> <span class="o">==</span> <span class="n">their</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">their</span> <span class="o">==</span> <span class="n">our</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">our</span> <span class="o">!=</span> <span class="n">their</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">their</span> <span class="o">!=</span> <span class="n">our</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">our</span> <span class="o">&lt;</span> <span class="n">their</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">their</span> <span class="o">&lt;</span> <span class="n">our</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_bool"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_bool">[docs]</a>    <span class="k">def</span> <span class="nf">test_bool</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># All dates are considered true.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">min</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_strftime_y2k"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_strftime_y2k">[docs]</a>    <span class="k">def</span> <span class="nf">test_strftime_y2k</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">999</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1970</span><span class="p">):</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="c"># Issue 13305:  For years &lt; 1000, the value is not always</span>
            <span class="c"># padded to 4 digits across platforms.  The C standard</span>
            <span class="c"># assumes year &gt;= 1900, so it does not specify the number</span>
            <span class="c"># of digits.</span>
            <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%Y&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="s">&#39;</span><span class="si">%04d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">y</span><span class="p">:</span>
                <span class="c"># Year 42 returns &#39;42&#39;, not padded</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%Y&quot;</span><span class="p">),</span> <span class="s">&#39;</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">y</span><span class="p">)</span>
                <span class="c"># &#39;0042&#39; is obtained anyway</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%4Y&quot;</span><span class="p">),</span> <span class="s">&#39;</span><span class="si">%04d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">y</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_replace"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_replace">[docs]</a>    <span class="k">def</span> <span class="nf">test_replace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">())</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">newval</span> <span class="ow">in</span> <span class="p">((</span><span class="s">&quot;year&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;month&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;day&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)):</span>
            <span class="n">newargs</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:]</span>
            <span class="n">newargs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">newval</span>
            <span class="n">expected</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">newargs</span><span class="p">)</span>
            <span class="n">got</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">newval</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c"># Out of bounds.</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2001</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_subclass_date"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_subclass_date">[docs]</a>    <span class="k">def</span> <span class="nf">test_subclass_date</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">):</span>
            <span class="n">theAnswer</span> <span class="o">=</span> <span class="mi">42</span>

            <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">extra</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">&#39;extra&#39;</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">temp</span><span class="p">)</span>
                <span class="n">result</span><span class="o">.</span><span class="n">extra</span> <span class="o">=</span> <span class="n">extra</span>
                <span class="k">return</span> <span class="n">result</span>

            <span class="k">def</span> <span class="nf">newmeth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">start</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">month</span>

        <span class="n">args</span> <span class="o">=</span> <span class="mi">2003</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">14</span>

        <span class="n">dt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="n">dt2</span> <span class="o">=</span> <span class="n">C</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;extra&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">theAnswer</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt1</span><span class="o">.</span><span class="n">toordinal</span><span class="p">(),</span> <span class="n">dt2</span><span class="o">.</span><span class="n">toordinal</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">newmeth</span><span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">),</span> <span class="n">dt1</span><span class="o">.</span><span class="n">year</span> <span class="o">+</span> <span class="n">dt1</span><span class="o">.</span><span class="n">month</span> <span class="o">-</span> <span class="mi">7</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_pickling_subclass_date"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_pickling_subclass_date">[docs]</a>    <span class="k">def</span> <span class="nf">test_pickling_subclass_date</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">args</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">23</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="n">SubclassDate</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">pickler</span><span class="p">,</span> <span class="n">unpickler</span><span class="p">,</span> <span class="n">proto</span> <span class="ow">in</span> <span class="n">pickle_choices</span><span class="p">:</span>
            <span class="n">green</span> <span class="o">=</span> <span class="n">pickler</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
            <span class="n">derived</span> <span class="o">=</span> <span class="n">unpickler</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">derived</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDate.test_backdoor_resistance"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDate.test_backdoor_resistance">[docs]</a>    <span class="k">def</span> <span class="nf">test_backdoor_resistance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># For fast unpickling, the constructor accepts a pickle byte string.</span>
        <span class="c"># This is a low-overhead backdoor.  A user can (by intent or</span>
        <span class="c"># mistake) pass a string directly, which (if it&#39;s the right length)</span>
        <span class="c"># will get treated like a pickle, and bypass the normal sanity</span>
        <span class="c"># checks in the constructor.  This can create insane objects.</span>
        <span class="c"># The constructor doesn&#39;t want to burn the time to validate all</span>
        <span class="c"># fields, but does check the month field.  This stops, e.g.,</span>
        <span class="c"># datetime.datetime(&#39;1995-03-25&#39;) from yielding an insane object.</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">b</span><span class="s">&#39;1995-03-25&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">base</span> <span class="o">=</span> <span class="n">base</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">month_byte</span> <span class="ow">in</span> <span class="n">b</span><span class="s">&#39;9&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;</span><span class="se">\0</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;</span><span class="se">\r</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;</span><span class="se">\xff</span><span class="s">&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span>
                                         <span class="n">base</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">month_byte</span> <span class="o">+</span> <span class="n">base</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span>
        <span class="c"># Good bytes, but bad tzinfo:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span>
                          <span class="nb">bytes</span><span class="p">([</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">base</span><span class="p">)),</span> <span class="s">&#39;EST&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">ord_byte</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">):</span>
            <span class="c"># This shouldn&#39;t blow up because of the month byte alone.  If</span>
            <span class="c"># the implementation changes to do more-careful checking, it may</span>
            <span class="c"># blow up because other fields are insane.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">base</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">ord_byte</span><span class="p">])</span> <span class="o">+</span> <span class="n">base</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span>

<span class="c">#############################################################################</span>
<span class="c"># datetime tests</span>
</div></div>
<div class="viewcode-block" id="SubclassDatetime"><a class="viewcode-back" href="../../test.html#test.datetimetester.SubclassDatetime">[docs]</a><span class="k">class</span> <span class="nc">SubclassDatetime</span><span class="p">(</span><span class="n">datetime</span><span class="p">):</span>
    <span class="n">sub_var</span> <span class="o">=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="TestDateTime"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime">[docs]</a><span class="k">class</span> <span class="nc">TestDateTime</span><span class="p">(</span><span class="n">TestDate</span><span class="p">):</span>

    <span class="n">theclass</span> <span class="o">=</span> <span class="n">datetime</span>

<div class="viewcode-block" id="TestDateTime.test_basic_attributes"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_basic_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="mi">2002</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">microsecond</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_basic_attributes_nonzero"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_basic_attributes_nonzero">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic_attributes_nonzero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Make sure all attributes are non-zero so bugs in</span>
        <span class="c"># bit-shifting access show up.</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">8000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="mi">2002</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="mi">59</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="mi">59</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">microsecond</span><span class="p">,</span> <span class="mi">8000</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_roundtrip"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_roundtrip">[docs]</a>    <span class="k">def</span> <span class="nf">test_roundtrip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">dt</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">now</span><span class="p">()):</span>
            <span class="c"># Verify dt -&gt; string -&gt; datetime identity.</span>
            <span class="n">s</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;datetime.&#39;</span><span class="p">))</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">9</span><span class="p">:]</span>
            <span class="n">dt2</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">dt2</span><span class="p">)</span>

            <span class="c"># Verify identity via reconstructing from pieces.</span>
            <span class="n">dt2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">,</span>
                                <span class="n">dt</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">second</span><span class="p">,</span>
                                <span class="n">dt</span><span class="o">.</span><span class="n">microsecond</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">dt2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_isoformat"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_isoformat">[docs]</a>    <span class="k">def</span> <span class="nf">test_isoformat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>    <span class="s">&quot;0002-03-02T04:05:01.000123&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(</span><span class="s">&#39;T&#39;</span><span class="p">),</span> <span class="s">&quot;0002-03-02T04:05:01.000123&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">),</span> <span class="s">&quot;0002-03-02 04:05:01.000123&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\x00</span><span class="s">&#39;</span><span class="p">),</span> <span class="s">&quot;0002-03-02</span><span class="se">\x00</span><span class="s">04:05:01.000123&quot;</span><span class="p">)</span>
        <span class="c"># str is ISO format with the separator forced to a blank.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="s">&quot;0002-03-02 04:05:01.000123&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>    <span class="s">&quot;0002-03-02T00:00:00&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(</span><span class="s">&#39;T&#39;</span><span class="p">),</span> <span class="s">&quot;0002-03-02T00:00:00&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">),</span> <span class="s">&quot;0002-03-02 00:00:00&quot;</span><span class="p">)</span>
        <span class="c"># str is ISO format with the separator forced to a blank.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="s">&quot;0002-03-02 00:00:00&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_format"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_format">[docs]</a>    <span class="k">def</span> <span class="nf">test_format</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">dt</span><span class="p">))</span>

        <span class="c"># check that a derived class&#39;s __str__() gets called</span>
        <span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="s">&#39;A&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;A&#39;</span><span class="p">)</span>

        <span class="c"># check that a derived class&#39;s strftime gets called</span>
        <span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">strftime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_spec</span><span class="p">):</span>
                <span class="k">return</span> <span class="s">&#39;B&#39;</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">dt</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">fmt</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;m:%m d:</span><span class="si">%d</span><span class="s"> y:%y&quot;</span><span class="p">,</span>
                    <span class="s">&quot;m:%m d:</span><span class="si">%d</span><span class="s"> y:%y H:%H M:%M S:%S&quot;</span><span class="p">,</span>
                    <span class="s">&quot;%z %Z&quot;</span><span class="p">,</span>
                    <span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="n">fmt</span><span class="p">),</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="n">fmt</span><span class="p">),</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="n">fmt</span><span class="p">),</span> <span class="s">&#39;B&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_more_ctime"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_more_ctime">[docs]</a>    <span class="k">def</span> <span class="nf">test_more_ctime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test fields that TestDate doesn&#39;t touch.</span>
        <span class="kn">import</span> <span class="nn">time</span>

        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">ctime</span><span class="p">(),</span> <span class="s">&quot;Sat Mar  2 18:03:05 2002&quot;</span><span class="p">)</span>
        <span class="c"># Oops!  The next line fails on Win2K under MSVC 6, so it&#39;s commented</span>
        <span class="c"># out.  The difference is that t.ctime() produces &quot; 2&quot; for the day,</span>
        <span class="c"># but platform ctime() produces &quot;02&quot; for the day.  According to</span>
        <span class="c"># C99, t.ctime() is correct here.</span>
        <span class="c"># self.assertEqual(t.ctime(), time.ctime(time.mktime(t.timetuple())))</span>

        <span class="c"># So test a case where that difference doesn&#39;t matter.</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">ctime</span><span class="p">(),</span> <span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">mktime</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">timetuple</span><span class="p">())))</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_tz_independent_comparing"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_tz_independent_comparing">[docs]</a>    <span class="k">def</span> <span class="nf">test_tz_independent_comparing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">dt2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">dt3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt1</span><span class="p">,</span> <span class="n">dt3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">dt2</span> <span class="o">&gt;</span> <span class="n">dt3</span><span class="p">)</span>

        <span class="c"># Make sure comparison doesn&#39;t forget microseconds, and isn&#39;t done</span>
        <span class="c"># via comparing a float timestamp (an IEEE double doesn&#39;t have enough</span>
        <span class="c"># precision to span microsecond resolution across years 1 thru 9999,</span>
        <span class="c"># so comparing via timestamp necessarily calls some distinct values</span>
        <span class="c"># equal).</span>
        <span class="n">dt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">MAXYEAR</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">999998</span><span class="p">)</span>
        <span class="n">us</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">dt2</span> <span class="o">=</span> <span class="n">dt1</span> <span class="o">+</span> <span class="n">us</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span> <span class="o">-</span> <span class="n">dt1</span><span class="p">,</span> <span class="n">us</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">dt1</span> <span class="o">&lt;</span> <span class="n">dt2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_strftime_with_bad_tzname_replace"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_strftime_with_bad_tzname_replace">[docs]</a>    <span class="k">def</span> <span class="nf">test_strftime_with_bad_tzname_replace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># verify ok if tzinfo.tzname().replace() returns a non-string</span>
        <span class="k">class</span> <span class="nc">MyTzInfo</span><span class="p">(</span><span class="n">FixedOffset</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">tzname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
                <span class="k">class</span> <span class="nc">MyStr</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
                    <span class="k">def</span> <span class="nf">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
                        <span class="k">return</span> <span class="bp">None</span>
                <span class="k">return</span> <span class="n">MyStr</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">MyTzInfo</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">,</span> <span class="s">&#39;%Z&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_bad_constructor_arguments"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_bad_constructor_arguments">[docs]</a>    <span class="k">def</span> <span class="nf">test_bad_constructor_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># bad years</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">MINYEAR</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">MAXYEAR</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="n">MINYEAR</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="n">MAXYEAR</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="c"># bad months</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>    <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="c"># bad days</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2400</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2001</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2100</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">1900</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
        <span class="c"># bad hours</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
        <span class="c"># bad minutes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
        <span class="c"># bad seconds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
        <span class="c"># bad microseconds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">999999</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span>
                          <span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span>
                          <span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span>
                          <span class="mi">1000000</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_hash_equality"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_hash_equality">[docs]</a>    <span class="k">def</span> <span class="nf">test_hash_equality</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="n">dic</span><span class="p">[</span><span class="n">e</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dic</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">d</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">e</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="n">dic</span><span class="p">[</span><span class="n">e</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dic</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">d</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">e</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_computations"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_computations">[docs]</a>    <span class="k">def</span> <span class="nf">test_computations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1956</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="n">a</span><span class="o">-</span><span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">diff</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="mi">46</span><span class="o">*</span><span class="mi">365</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1956</span><span class="p">,</span> <span class="mi">2002</span><span class="p">,</span> <span class="mi">4</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">diff</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">diff</span><span class="o">.</span><span class="n">microseconds</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="n">millisec</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="n">hour</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3600</span><span class="p">)</span>
        <span class="n">day</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">week</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">hour</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">hour</span> <span class="o">+</span> <span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="mi">10</span><span class="o">*</span><span class="n">hour</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">hour</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="o">-</span><span class="n">hour</span> <span class="o">+</span> <span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">hour</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="o">-</span><span class="n">hour</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="mi">20</span><span class="o">*</span><span class="n">hour</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">day</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">day</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">week</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">week</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="mi">52</span><span class="o">*</span><span class="n">week</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2003</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="mi">52</span><span class="o">*</span><span class="n">week</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">a</span> <span class="o">+</span> <span class="n">week</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="p">,</span> <span class="n">week</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">a</span> <span class="o">+</span> <span class="n">day</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">a</span> <span class="o">+</span> <span class="n">hour</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="p">,</span> <span class="n">hour</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">a</span> <span class="o">+</span> <span class="n">millisec</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="p">,</span> <span class="n">millisec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">a</span> <span class="o">-</span> <span class="n">week</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">week</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">a</span> <span class="o">-</span> <span class="n">day</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">a</span> <span class="o">-</span> <span class="n">hour</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">hour</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">a</span> <span class="o">-</span> <span class="n">millisec</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">millisec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">week</span><span class="p">),</span> <span class="o">-</span><span class="n">week</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">day</span><span class="p">),</span> <span class="o">-</span><span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">hour</span><span class="p">),</span> <span class="o">-</span><span class="n">hour</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">millisec</span><span class="p">),</span> <span class="o">-</span><span class="n">millisec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">week</span><span class="p">),</span> <span class="n">week</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">day</span><span class="p">),</span> <span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">hour</span><span class="p">),</span> <span class="n">hour</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">millisec</span><span class="p">),</span> <span class="n">millisec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="p">(</span><span class="n">week</span> <span class="o">+</span> <span class="n">day</span> <span class="o">+</span> <span class="n">hour</span> <span class="o">+</span> <span class="n">millisec</span><span class="p">),</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="p">(</span><span class="n">week</span> <span class="o">+</span> <span class="n">day</span> <span class="o">+</span> <span class="n">hour</span> <span class="o">+</span> <span class="n">millisec</span><span class="p">),</span>
                         <span class="p">(((</span><span class="n">a</span> <span class="o">+</span> <span class="n">week</span><span class="p">)</span> <span class="o">+</span> <span class="n">day</span><span class="p">)</span> <span class="o">+</span> <span class="n">hour</span><span class="p">)</span> <span class="o">+</span> <span class="n">millisec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">week</span> <span class="o">+</span> <span class="n">day</span> <span class="o">+</span> <span class="n">hour</span> <span class="o">+</span> <span class="n">millisec</span><span class="p">),</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">999000</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="p">(</span><span class="n">week</span> <span class="o">+</span> <span class="n">day</span> <span class="o">+</span> <span class="n">hour</span> <span class="o">+</span> <span class="n">millisec</span><span class="p">),</span>
                         <span class="p">(((</span><span class="n">a</span> <span class="o">-</span> <span class="n">week</span><span class="p">)</span> <span class="o">-</span> <span class="n">day</span><span class="p">)</span> <span class="o">-</span> <span class="n">hour</span><span class="p">)</span> <span class="o">-</span> <span class="n">millisec</span><span class="p">)</span>
        <span class="c"># Add/sub ints or floats should be illegal</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span><span class="o">-</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">i</span><span class="o">+</span><span class="n">a</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">i</span><span class="o">-</span><span class="n">a</span><span class="p">)</span>

        <span class="c"># delta - datetime is senseless.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">day</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span>
        <span class="c"># mixing datetime and (delta or datetime) via * or // is senseless</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">day</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">day</span> <span class="o">//</span> <span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">//</span> <span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">//</span> <span class="n">a</span><span class="p">)</span>
        <span class="c"># datetime + datetime is senseless</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_pickling"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_pickling">[docs]</a>    <span class="k">def</span> <span class="nf">test_pickling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">64</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">pickler</span><span class="p">,</span> <span class="n">unpickler</span><span class="p">,</span> <span class="n">proto</span> <span class="ow">in</span> <span class="n">pickle_choices</span><span class="p">:</span>
            <span class="n">green</span> <span class="o">=</span> <span class="n">pickler</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
            <span class="n">derived</span> <span class="o">=</span> <span class="n">unpickler</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">derived</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_more_pickling"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_more_pickling">[docs]</a>    <span class="k">def</span> <span class="nf">test_more_pickling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2003</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">444116</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="mi">2003</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_pickling_subclass_datetime"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_pickling_subclass_datetime">[docs]</a>    <span class="k">def</span> <span class="nf">test_pickling_subclass_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">64</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="n">SubclassDatetime</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">pickler</span><span class="p">,</span> <span class="n">unpickler</span><span class="p">,</span> <span class="n">proto</span> <span class="ow">in</span> <span class="n">pickle_choices</span><span class="p">:</span>
            <span class="n">green</span> <span class="o">=</span> <span class="n">pickler</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
            <span class="n">derived</span> <span class="o">=</span> <span class="n">unpickler</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">derived</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_more_compare"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_more_compare">[docs]</a>    <span class="k">def</span> <span class="nf">test_more_compare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># The test_compare() inherited from TestDate covers the error cases.</span>
        <span class="c"># We just want to test lexicographic ordering on the members datetime</span>
        <span class="c"># has that date lacks.</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">999998</span><span class="p">]</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;=</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;=</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">!=</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;</span> <span class="n">t2</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)):</span>
            <span class="n">newargs</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:]</span>
            <span class="n">newargs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">newargs</span><span class="p">)</span>   <span class="c"># this is larger than t1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t2</span> <span class="o">&gt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;=</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t2</span> <span class="o">&gt;=</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">!=</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t2</span> <span class="o">!=</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">==</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t2</span> <span class="o">==</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t2</span> <span class="o">&lt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;=</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t2</span> <span class="o">&lt;=</span> <span class="n">t1</span><span class="p">)</span>


    <span class="c"># A helper for timestamp constructor tests.</span></div>
<div class="viewcode-block" id="TestDateTime.verify_field_equality"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.verify_field_equality">[docs]</a>    <span class="k">def</span> <span class="nf">verify_field_equality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">tm_year</span><span class="p">,</span> <span class="n">got</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">tm_mon</span><span class="p">,</span> <span class="n">got</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">tm_mday</span><span class="p">,</span> <span class="n">got</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">tm_hour</span><span class="p">,</span> <span class="n">got</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">tm_min</span><span class="p">,</span> <span class="n">got</span><span class="o">.</span><span class="n">minute</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">tm_sec</span><span class="p">,</span> <span class="n">got</span><span class="o">.</span><span class="n">second</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_fromtimestamp"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_fromtimestamp">[docs]</a>    <span class="k">def</span> <span class="nf">test_fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">time</span>

        <span class="n">ts</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="n">got</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verify_field_equality</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_utcfromtimestamp"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_utcfromtimestamp">[docs]</a>    <span class="k">def</span> <span class="nf">test_utcfromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">time</span>

        <span class="n">ts</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="n">got</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verify_field_equality</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>

    <span class="c"># Run with US-style DST rules: DST begins 2 a.m. on second Sunday in</span>
    <span class="c"># March (M3.2.0) and ends 2 a.m. on first Sunday in November (M11.1.0).</span></div>
    <span class="nd">@support.run_with_tz</span><span class="p">(</span><span class="s">&#39;EST+05EDT,M3.2.0,M11.1.0&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_timestamp_naive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1970</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">timestamp</span><span class="p">(),</span> <span class="mf">18000.0</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1970</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">timestamp</span><span class="p">(),</span>
                         <span class="mf">18000.0</span> <span class="o">+</span> <span class="mi">3600</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="mi">60</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span><span class="o">*</span><span class="mf">1e-6</span><span class="p">)</span>
        <span class="c"># Missing hour may produce platform-dependent result</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()),</span>
                      <span class="p">[</span><span class="n">t</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">t</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">)])</span>
        <span class="c"># Ambiguous hour defaults to DST</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()),</span> <span class="n">t</span><span class="p">)</span>

        <span class="c"># Timestamp may raise an overflow error on some platforms</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">9999</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">)]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">OverflowError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">t</span><span class="p">)</span>

<div class="viewcode-block" id="TestDateTime.test_timestamp_aware"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_timestamp_aware">[docs]</a>    <span class="k">def</span> <span class="nf">test_timestamp_aware</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1970</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">timestamp</span><span class="p">(),</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1970</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">timestamp</span><span class="p">(),</span>
                         <span class="mi">3600</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="mi">60</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span><span class="o">*</span><span class="mf">1e-6</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1970</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                          <span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=-</span><span class="mi">5</span><span class="p">),</span> <span class="s">&#39;EST&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">timestamp</span><span class="p">(),</span>
                         <span class="mi">18000</span> <span class="o">+</span> <span class="mi">3600</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="mi">60</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span><span class="o">*</span><span class="mf">1e-6</span><span class="p">)</span></div>
<div class="viewcode-block" id="TestDateTime.test_microsecond_rounding"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_microsecond_rounding">[docs]</a>    <span class="k">def</span> <span class="nf">test_microsecond_rounding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">fts</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">]:</span>
            <span class="n">zero</span> <span class="o">=</span> <span class="n">fts</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">zero</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">zero</span><span class="o">.</span><span class="n">microsecond</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">minus_one</span> <span class="o">=</span> <span class="n">fts</span><span class="p">(</span><span class="o">-</span><span class="mf">1e-6</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
                <span class="c"># localtime(-1) and gmtime(-1) is not supported on Windows</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">minus_one</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="mi">59</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">minus_one</span><span class="o">.</span><span class="n">microsecond</span><span class="p">,</span> <span class="mi">999999</span><span class="p">)</span>

                <span class="n">t</span> <span class="o">=</span> <span class="n">fts</span><span class="p">(</span><span class="o">-</span><span class="mf">1e-8</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">minus_one</span><span class="p">)</span>
                <span class="n">t</span> <span class="o">=</span> <span class="n">fts</span><span class="p">(</span><span class="o">-</span><span class="mf">9e-7</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">minus_one</span><span class="p">)</span>
                <span class="n">t</span> <span class="o">=</span> <span class="n">fts</span><span class="p">(</span><span class="o">-</span><span class="mf">1e-7</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">minus_one</span><span class="p">)</span>

            <span class="n">t</span> <span class="o">=</span> <span class="n">fts</span><span class="p">(</span><span class="mf">1e-7</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">zero</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">fts</span><span class="p">(</span><span class="mf">9e-7</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">zero</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">fts</span><span class="p">(</span><span class="mf">0.99999949</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">microsecond</span><span class="p">,</span> <span class="mi">999999</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">fts</span><span class="p">(</span><span class="mf">0.9999999</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">microsecond</span><span class="p">,</span> <span class="mi">999999</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_insane_fromtimestamp"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_insane_fromtimestamp">[docs]</a>    <span class="k">def</span> <span class="nf">test_insane_fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># It&#39;s possible that some platform maps time_t to double,</span>
        <span class="c"># and that this test will fail there.  This test should</span>
        <span class="c"># exempt such platforms (provided they return reasonable</span>
        <span class="c"># results!).</span>
        <span class="k">for</span> <span class="n">insane</span> <span class="ow">in</span> <span class="o">-</span><span class="mf">1e200</span><span class="p">,</span> <span class="mf">1e200</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">,</span>
                              <span class="n">insane</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_insane_utcfromtimestamp"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_insane_utcfromtimestamp">[docs]</a>    <span class="k">def</span> <span class="nf">test_insane_utcfromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># It&#39;s possible that some platform maps time_t to double,</span>
        <span class="c"># and that this test will fail there.  This test should</span>
        <span class="c"># exempt such platforms (provided they return reasonable</span>
        <span class="c"># results!).</span>
        <span class="k">for</span> <span class="n">insane</span> <span class="ow">in</span> <span class="o">-</span><span class="mf">1e200</span><span class="p">,</span> <span class="mf">1e200</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">,</span>
                              <span class="n">insane</span><span class="p">)</span></div>
    <span class="nd">@unittest.skipIf</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s">&quot;win32&quot;</span><span class="p">,</span> <span class="s">&quot;Windows doesn&#39;t accept negative timestamps&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="TestDateTime.test_negative_float_fromtimestamp"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_negative_float_fromtimestamp">[docs]</a>    <span class="k">def</span> <span class="nf">test_negative_float_fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># The result is tz-dependent; at least test that this doesn&#39;t</span>
        <span class="c"># fail (like it did before bug 1646728 was fixed).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="o">-</span><span class="mf">1.05</span><span class="p">)</span>
</div>
    <span class="nd">@unittest.skipIf</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s">&quot;win32&quot;</span><span class="p">,</span> <span class="s">&quot;Windows doesn&#39;t accept negative timestamps&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="TestDateTime.test_negative_float_utcfromtimestamp"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_negative_float_utcfromtimestamp">[docs]</a>    <span class="k">def</span> <span class="nf">test_negative_float_utcfromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="o">-</span><span class="mf">1.05</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1969</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">950000</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_utcnow"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_utcnow">[docs]</a>    <span class="k">def</span> <span class="nf">test_utcnow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">time</span>

        <span class="c"># Call it a success if utcnow() and utcfromtimestamp() are within</span>
        <span class="c"># a second of each other.</span>
        <span class="n">tolerance</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">dummy</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">from_now</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
            <span class="n">from_timestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">from_timestamp</span> <span class="o">-</span> <span class="n">from_now</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="c"># Else try again a few times.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertLessEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">from_timestamp</span> <span class="o">-</span> <span class="n">from_now</span><span class="p">),</span> <span class="n">tolerance</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_strptime"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_strptime">[docs]</a>    <span class="k">def</span> <span class="nf">test_strptime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">string</span> <span class="o">=</span> <span class="s">&#39;2004-12-01 13:02:47.197&#39;</span>
        <span class="n">format</span> <span class="o">=</span> <span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s"> %H:%M:%S.</span><span class="si">%f</span><span class="s">&#39;</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">_strptime</span><span class="o">.</span><span class="n">_strptime_datetime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">format</span><span class="p">)</span>
        <span class="n">got</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">format</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">got</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">)</span>

        <span class="n">strptime</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">strptime</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">strptime</span><span class="p">(</span><span class="s">&quot;+0002&quot;</span><span class="p">,</span> <span class="s">&quot;%z&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">MINUTE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">strptime</span><span class="p">(</span><span class="s">&quot;-0002&quot;</span><span class="p">,</span> <span class="s">&quot;%z&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="n">MINUTE</span><span class="p">)</span>
        <span class="c"># Only local timezone and UTC are supported</span>
        <span class="k">for</span> <span class="n">tzseconds</span><span class="p">,</span> <span class="n">tzname</span> <span class="ow">in</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;UTC&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;GMT&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="o">-</span><span class="n">_time</span><span class="o">.</span><span class="n">timezone</span><span class="p">,</span> <span class="n">_time</span><span class="o">.</span><span class="n">tzname</span><span class="p">[</span><span class="mi">0</span><span class="p">])):</span>
            <span class="k">if</span> <span class="n">tzseconds</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">sign</span> <span class="o">=</span> <span class="s">&#39;-&#39;</span>
                <span class="n">seconds</span> <span class="o">=</span> <span class="o">-</span><span class="n">tzseconds</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sign</span> <span class="o">=</span><span class="s">&#39;+&#39;</span>
                <span class="n">seconds</span> <span class="o">=</span> <span class="n">tzseconds</span>
            <span class="n">hours</span><span class="p">,</span> <span class="n">minutes</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">seconds</span><span class="o">//</span><span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
            <span class="n">dtstr</span> <span class="o">=</span> <span class="s">&quot;{}{:02d}{:02d} {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sign</span><span class="p">,</span> <span class="n">hours</span><span class="p">,</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">tzname</span><span class="p">)</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">strptime</span><span class="p">(</span><span class="n">dtstr</span><span class="p">,</span> <span class="s">&quot;%z %Z&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">tzseconds</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="n">tzname</span><span class="p">)</span>
        <span class="c"># Can produce inconsistent datetime</span>
        <span class="n">dtstr</span><span class="p">,</span> <span class="n">fmt</span> <span class="o">=</span> <span class="s">&quot;+1234 UTC&quot;</span><span class="p">,</span> <span class="s">&quot;%z %Z&quot;</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">strptime</span><span class="p">(</span><span class="n">dtstr</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="mi">12</span> <span class="o">*</span> <span class="n">HOUR</span> <span class="o">+</span> <span class="mi">34</span> <span class="o">*</span> <span class="n">MINUTE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="s">&#39;UTC&#39;</span><span class="p">)</span>
        <span class="c"># yet will roundtrip</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">),</span> <span class="n">dtstr</span><span class="p">)</span>

        <span class="c"># Produce naive datetime if no %z is provided</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">strptime</span><span class="p">(</span><span class="s">&quot;UTC&quot;</span><span class="p">,</span> <span class="s">&quot;%Z&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span> <span class="n">strptime</span><span class="p">(</span><span class="s">&quot;-2400&quot;</span><span class="p">,</span> <span class="s">&quot;%z&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span> <span class="n">strptime</span><span class="p">(</span><span class="s">&quot;-000&quot;</span><span class="p">,</span> <span class="s">&quot;%z&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_more_timetuple"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_more_timetuple">[docs]</a>    <span class="k">def</span> <span class="nf">test_more_timetuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># This tests fields beyond those tested by the TestDate.test_timetuple.</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">33</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">timetuple</span><span class="p">(),</span> <span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">366</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">timetuple</span><span class="p">(),</span>
                         <span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">day</span><span class="p">,</span>
                          <span class="n">t</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">second</span><span class="p">,</span>
                          <span class="n">t</span><span class="o">.</span><span class="n">weekday</span><span class="p">(),</span>
                          <span class="n">t</span><span class="o">.</span><span class="n">toordinal</span><span class="p">()</span> <span class="o">-</span> <span class="n">date</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">toordinal</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                          <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tt</span><span class="o">.</span><span class="n">tm_year</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tt</span><span class="o">.</span><span class="n">tm_mon</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tt</span><span class="o">.</span><span class="n">tm_mday</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tt</span><span class="o">.</span><span class="n">tm_hour</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tt</span><span class="o">.</span><span class="n">tm_min</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">minute</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tt</span><span class="o">.</span><span class="n">tm_sec</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">second</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tt</span><span class="o">.</span><span class="n">tm_wday</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">weekday</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tt</span><span class="o">.</span><span class="n">tm_yday</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">toordinal</span><span class="p">()</span> <span class="o">-</span>
                                     <span class="n">date</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">toordinal</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tt</span><span class="o">.</span><span class="n">tm_isdst</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_more_strftime"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_more_strftime">[docs]</a>    <span class="k">def</span> <span class="nf">test_more_strftime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># This tests fields beyond those tested by the TestDate.test_strftime.</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">47</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%m </span><span class="si">%d</span><span class="s"> %y </span><span class="si">%f</span><span class="s"> %S %M %H %j&quot;</span><span class="p">),</span>
                                    <span class="s">&quot;12 31 04 000047 33 22 06 366&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_extract"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_extract">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1234</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(),</span> <span class="n">date</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span> <span class="n">time</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1234</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_combine"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_combine">[docs]</a>    <span class="k">def</span> <span class="nf">test_combine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1234</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1234</span><span class="p">)</span>
        <span class="n">combine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">combine</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">combine</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>

        <span class="n">dt</span> <span class="o">=</span> <span class="n">combine</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">t</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">combine</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(),</span> <span class="n">dt</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">combine</span><span class="p">)</span> <span class="c"># need an arg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">combine</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span> <span class="c"># need two args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">combine</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span> <span class="c"># args reversed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">combine</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c"># too many args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">combine</span><span class="p">,</span> <span class="s">&quot;date&quot;</span><span class="p">,</span> <span class="s">&quot;time&quot;</span><span class="p">)</span> <span class="c"># wrong types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">combine</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="s">&quot;time&quot;</span><span class="p">)</span> <span class="c"># wrong type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">combine</span><span class="p">,</span> <span class="s">&quot;date&quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="c"># wrong type</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_replace"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_replace">[docs]</a>    <span class="k">def</span> <span class="nf">test_replace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">())</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">newval</span> <span class="ow">in</span> <span class="p">((</span><span class="s">&quot;year&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;month&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;day&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;hour&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;minute&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;second&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;microsecond&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)):</span>
            <span class="n">newargs</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:]</span>
            <span class="n">newargs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">newval</span>
            <span class="n">expected</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">newargs</span><span class="p">)</span>
            <span class="n">got</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">newval</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c"># Out of bounds.</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2001</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_astimezone"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_astimezone">[docs]</a>    <span class="k">def</span> <span class="nf">test_astimezone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Pretty boring!  The TZ test is more interesting here.  astimezone()</span>
        <span class="c"># simply can&#39;t be applied to a naive object.</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">44</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">)</span> <span class="c"># naive</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="c"># too many args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span> <span class="c"># arg wrong type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="c"># naive</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>  <span class="c"># naive</span>

        <span class="k">class</span> <span class="nc">Bogus</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="bp">None</span>
            <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">bog</span> <span class="o">=</span> <span class="n">Bogus</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">,</span> <span class="n">bog</span><span class="p">)</span>   <span class="c"># naive</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span>
                          <span class="n">dt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">bog</span><span class="p">)</span><span class="o">.</span><span class="n">astimezone</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">AlsoBogus</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="bp">None</span>
        <span class="n">alsobog</span> <span class="o">=</span> <span class="n">AlsoBogus</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">,</span> <span class="n">alsobog</span><span class="p">)</span> <span class="c"># also naive</span>
</div>
<div class="viewcode-block" id="TestDateTime.test_subclass_datetime"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTime.test_subclass_datetime">[docs]</a>    <span class="k">def</span> <span class="nf">test_subclass_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">):</span>
            <span class="n">theAnswer</span> <span class="o">=</span> <span class="mi">42</span>

            <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">extra</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">&#39;extra&#39;</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">temp</span><span class="p">)</span>
                <span class="n">result</span><span class="o">.</span><span class="n">extra</span> <span class="o">=</span> <span class="n">extra</span>
                <span class="k">return</span> <span class="n">result</span>

            <span class="k">def</span> <span class="nf">newmeth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">start</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">month</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">second</span>

        <span class="n">args</span> <span class="o">=</span> <span class="mi">2003</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">41</span>

        <span class="n">dt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="n">dt2</span> <span class="o">=</span> <span class="n">C</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;extra&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">theAnswer</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt1</span><span class="o">.</span><span class="n">toordinal</span><span class="p">(),</span> <span class="n">dt2</span><span class="o">.</span><span class="n">toordinal</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">newmeth</span><span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">),</span> <span class="n">dt1</span><span class="o">.</span><span class="n">year</span> <span class="o">+</span> <span class="n">dt1</span><span class="o">.</span><span class="n">month</span> <span class="o">+</span>
                                          <span class="n">dt1</span><span class="o">.</span><span class="n">second</span> <span class="o">-</span> <span class="mi">7</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="TestSubclassDateTime"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestSubclassDateTime">[docs]</a><span class="k">class</span> <span class="nc">TestSubclassDateTime</span><span class="p">(</span><span class="n">TestDateTime</span><span class="p">):</span>
    <span class="n">theclass</span> <span class="o">=</span> <span class="n">SubclassDatetime</span>
    <span class="c"># Override tests not designed for subclass</span>
    <span class="nd">@unittest.skip</span><span class="p">(</span><span class="s">&#39;not appropriate for subclasses&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="TestSubclassDateTime.test_roundtrip"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestSubclassDateTime.test_roundtrip">[docs]</a>    <span class="k">def</span> <span class="nf">test_roundtrip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div></div>
<div class="viewcode-block" id="SubclassTime"><a class="viewcode-back" href="../../test.html#test.datetimetester.SubclassTime">[docs]</a><span class="k">class</span> <span class="nc">SubclassTime</span><span class="p">(</span><span class="n">time</span><span class="p">):</span>
    <span class="n">sub_var</span> <span class="o">=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="TestTime"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime">[docs]</a><span class="k">class</span> <span class="nc">TestTime</span><span class="p">(</span><span class="n">HarmlessMixedComparison</span><span class="p">,</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="n">theclass</span> <span class="o">=</span> <span class="n">time</span>

<div class="viewcode-block" id="TestTime.test_basic_attributes"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_basic_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">microsecond</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_basic_attributes_nonzero"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_basic_attributes_nonzero">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic_attributes_nonzero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Make sure all attributes are non-zero so bugs in</span>
        <span class="c"># bit-shifting access show up.</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">8000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="mi">59</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="mi">59</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">microsecond</span><span class="p">,</span> <span class="mi">8000</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_roundtrip"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_roundtrip">[docs]</a>    <span class="k">def</span> <span class="nf">test_roundtrip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

        <span class="c"># Verify t -&gt; string -&gt; time identity.</span>
        <span class="n">s</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;datetime.&#39;</span><span class="p">))</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">9</span><span class="p">:]</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># Verify identity via reconstructing from pieces.</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">second</span><span class="p">,</span>
                           <span class="n">t</span><span class="o">.</span><span class="n">microsecond</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_comparing"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_comparing">[docs]</a>    <span class="k">def</span> <span class="nf">test_comparing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;=</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;=</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">!=</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;</span> <span class="n">t2</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)):</span>
            <span class="n">newargs</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:]</span>
            <span class="n">newargs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">newargs</span><span class="p">)</span>   <span class="c"># this is larger than t1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t2</span> <span class="o">&gt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;=</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t2</span> <span class="o">&gt;=</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">!=</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t2</span> <span class="o">!=</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">==</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t2</span> <span class="o">==</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t2</span> <span class="o">&lt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;=</span> <span class="n">t2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t2</span> <span class="o">&lt;=</span> <span class="n">t1</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">badarg</span> <span class="ow">in</span> <span class="n">OTHERSTUFF</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span> <span class="o">==</span> <span class="n">badarg</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span> <span class="o">!=</span> <span class="n">badarg</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">badarg</span> <span class="o">==</span> <span class="n">t1</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">badarg</span> <span class="o">!=</span> <span class="n">t1</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t1</span> <span class="o">&lt;=</span> <span class="n">badarg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t1</span> <span class="o">&lt;</span> <span class="n">badarg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t1</span> <span class="o">&gt;</span> <span class="n">badarg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t1</span> <span class="o">&gt;=</span> <span class="n">badarg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">badarg</span> <span class="o">&lt;=</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">badarg</span> <span class="o">&lt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">badarg</span> <span class="o">&gt;</span> <span class="n">t1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">badarg</span> <span class="o">&gt;=</span> <span class="n">t1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_bad_constructor_arguments"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_bad_constructor_arguments">[docs]</a>    <span class="k">def</span> <span class="nf">test_bad_constructor_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># bad hours</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c"># bad minutes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
        <span class="c"># bad seconds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
        <span class="c"># bad microseconds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>        <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">999999</span><span class="p">)</span>   <span class="c"># no exception</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_hash_equality"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_hash_equality">[docs]</a>    <span class="k">def</span> <span class="nf">test_hash_equality</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="n">dic</span><span class="p">[</span><span class="n">e</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dic</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">d</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">e</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="n">dic</span><span class="p">[</span><span class="n">e</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dic</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">d</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">e</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_isoformat"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_isoformat">[docs]</a>    <span class="k">def</span> <span class="nf">test_isoformat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;04:05:01.000123&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>

        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;00:00:00&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>

        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">microsecond</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;00:00:00.000001&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>

        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">microsecond</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;00:00:00.000010&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>

        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">microsecond</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;00:00:00.000100&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>

        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">microsecond</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;00:00:00.001000&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>

        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">microsecond</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;00:00:00.010000&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>

        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">microsecond</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;00:00:00.100000&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestTime.test_1653736"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_1653736">[docs]</a>    <span class="k">def</span> <span class="nf">test_1653736</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># verify it doesn&#39;t accept extra keyword arguments</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">second</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">isoformat</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_strftime"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_strftime">[docs]</a>    <span class="k">def</span> <span class="nf">test_strftime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&#39;%H %M %S </span><span class="si">%f</span><span class="s">&#39;</span><span class="p">),</span> <span class="s">&quot;01 02 03 000004&quot;</span><span class="p">)</span>
        <span class="c"># A naive object replaces %z and %Z with empty strings.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;&#39;%z&#39; &#39;%Z&#39;&quot;</span><span class="p">),</span> <span class="s">&quot;&#39;&#39; &#39;&#39;&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_format"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_format">[docs]</a>    <span class="k">def</span> <span class="nf">test_format</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>

        <span class="c"># check that a derived class&#39;s __str__() gets called</span>
        <span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="s">&#39;A&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;A&#39;</span><span class="p">)</span>

        <span class="c"># check that a derived class&#39;s strftime gets called</span>
        <span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">strftime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_spec</span><span class="p">):</span>
                <span class="k">return</span> <span class="s">&#39;B&#39;</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">fmt</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;%H %M %S&#39;</span><span class="p">,</span>
                    <span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="n">fmt</span><span class="p">),</span> <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="n">fmt</span><span class="p">),</span> <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="n">fmt</span><span class="p">),</span> <span class="s">&#39;B&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_str"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span> <span class="s">&quot;01:02:03.000004&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4000</span><span class="p">)),</span> <span class="s">&quot;10:02:03.004000&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">400000</span><span class="p">)),</span> <span class="s">&quot;00:02:03.400000&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span> <span class="s">&quot;12:02:03&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span> <span class="s">&quot;23:15:00&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_repr"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_repr">[docs]</a>    <span class="k">def</span> <span class="nf">test_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;datetime.&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">__name__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
                         <span class="s">&quot;</span><span class="si">%s</span><span class="s">(1, 2, 3, 4)&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4000</span><span class="p">)),</span>
                         <span class="s">&quot;</span><span class="si">%s</span><span class="s">(10, 2, 3, 4000)&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">400000</span><span class="p">)),</span>
                         <span class="s">&quot;</span><span class="si">%s</span><span class="s">(0, 2, 3, 400000)&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
                         <span class="s">&quot;</span><span class="si">%s</span><span class="s">(12, 2, 3)&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
                         <span class="s">&quot;</span><span class="si">%s</span><span class="s">(23, 15)&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_resolution_info"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_resolution_info">[docs]</a>    <span class="k">def</span> <span class="nf">test_resolution_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">max</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">min</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_pickling"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_pickling">[docs]</a>    <span class="k">def</span> <span class="nf">test_pickling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">64</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">pickler</span><span class="p">,</span> <span class="n">unpickler</span><span class="p">,</span> <span class="n">proto</span> <span class="ow">in</span> <span class="n">pickle_choices</span><span class="p">:</span>
            <span class="n">green</span> <span class="o">=</span> <span class="n">pickler</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
            <span class="n">derived</span> <span class="o">=</span> <span class="n">unpickler</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">derived</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_pickling_subclass_time"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_pickling_subclass_time">[docs]</a>    <span class="k">def</span> <span class="nf">test_pickling_subclass_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">64</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="n">SubclassTime</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">pickler</span><span class="p">,</span> <span class="n">unpickler</span><span class="p">,</span> <span class="n">proto</span> <span class="ow">in</span> <span class="n">pickle_choices</span><span class="p">:</span>
            <span class="n">green</span> <span class="o">=</span> <span class="n">pickler</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
            <span class="n">derived</span> <span class="o">=</span> <span class="n">unpickler</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">derived</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_bool"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_bool">[docs]</a>    <span class="k">def</span> <span class="nf">test_bool</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">cls</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">cls</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">cls</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">cls</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">cls</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestTime.test_replace"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_replace">[docs]</a>    <span class="k">def</span> <span class="nf">test_replace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">())</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">newval</span> <span class="ow">in</span> <span class="p">((</span><span class="s">&quot;hour&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;minute&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;second&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;microsecond&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)):</span>
            <span class="n">newargs</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:]</span>
            <span class="n">newargs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">newval</span>
            <span class="n">expected</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">newargs</span><span class="p">)</span>
            <span class="n">got</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">newval</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c"># Out of bounds.</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">minute</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">1000000</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_subclass_time"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_subclass_time">[docs]</a>    <span class="k">def</span> <span class="nf">test_subclass_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">):</span>
            <span class="n">theAnswer</span> <span class="o">=</span> <span class="mi">42</span>

            <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">extra</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">&#39;extra&#39;</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">temp</span><span class="p">)</span>
                <span class="n">result</span><span class="o">.</span><span class="n">extra</span> <span class="o">=</span> <span class="n">extra</span>
                <span class="k">return</span> <span class="n">result</span>

            <span class="k">def</span> <span class="nf">newmeth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">start</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">hour</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">second</span>

        <span class="n">args</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span>

        <span class="n">dt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="n">dt2</span> <span class="o">=</span> <span class="n">C</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;extra&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">theAnswer</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt1</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="n">dt2</span><span class="o">.</span><span class="n">isoformat</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">newmeth</span><span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">),</span> <span class="n">dt1</span><span class="o">.</span><span class="n">hour</span> <span class="o">+</span> <span class="n">dt1</span><span class="o">.</span><span class="n">second</span> <span class="o">-</span> <span class="mi">7</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTime.test_backdoor_resistance"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTime.test_backdoor_resistance">[docs]</a>    <span class="k">def</span> <span class="nf">test_backdoor_resistance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># see TestDate.test_backdoor_resistance().</span>
        <span class="n">base</span> <span class="o">=</span> <span class="s">&#39;2:59.0&#39;</span>
        <span class="k">for</span> <span class="n">hour_byte</span> <span class="ow">in</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;9&#39;</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\xff</span><span class="s">&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">,</span>
                                         <span class="n">hour_byte</span> <span class="o">+</span> <span class="n">base</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>

<span class="c"># A mixin for classes with a tzinfo= argument.  Subclasses must define</span>
<span class="c"># theclass as a class atribute, and theclass(1, 1, 1, tzinfo=whatever)</span>
<span class="c"># must be legit (which is true for time and datetime).</span></div></div>
<div class="viewcode-block" id="TZInfoBase"><a class="viewcode-back" href="../../test.html#test.datetimetester.TZInfoBase">[docs]</a><span class="k">class</span> <span class="nc">TZInfoBase</span><span class="p">:</span>

<div class="viewcode-block" id="TZInfoBase.test_argument_passing"><a class="viewcode-back" href="../../test.html#test.datetimetester.TZInfoBase.test_argument_passing">[docs]</a>    <span class="k">def</span> <span class="nf">test_argument_passing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>
        <span class="c"># A datetime passes itself on, a time passes None.</span>
        <span class="k">class</span> <span class="nc">introspective</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">tzname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>    <span class="k">return</span> <span class="n">dt</span> <span class="ow">and</span> <span class="s">&quot;real&quot;</span> <span class="ow">or</span> <span class="s">&quot;none&quot;</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span> <span class="o">=</span> <span class="n">dt</span> <span class="ow">and</span> <span class="mi">42</span> <span class="ow">or</span> <span class="o">-</span><span class="mi">42</span><span class="p">)</span>
            <span class="n">dst</span> <span class="o">=</span> <span class="n">utcoffset</span>

        <span class="n">obj</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">introspective</span><span class="p">())</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="n">cls</span> <span class="ow">is</span> <span class="n">time</span> <span class="ow">and</span> <span class="s">&quot;none&quot;</span> <span class="ow">or</span> <span class="s">&quot;real&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="n">expected</span><span class="p">)</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="p">(</span><span class="n">cls</span> <span class="ow">is</span> <span class="n">time</span> <span class="ow">and</span> <span class="o">-</span><span class="mi">42</span> <span class="ow">or</span> <span class="mi">42</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">expected</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">dst</span><span class="p">(),</span> <span class="n">expected</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TZInfoBase.test_bad_tzinfo_classes"><a class="viewcode-back" href="../../test.html#test.datetimetester.TZInfoBase.test_bad_tzinfo_classes">[docs]</a>    <span class="k">def</span> <span class="nf">test_bad_tzinfo_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">NiceTry</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">NiceTry</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">BetterTry</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">BetterTry</span><span class="p">()</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TZInfoBase.test_utc_offset_out_of_bounds"><a class="viewcode-back" href="../../test.html#test.datetimetester.TZInfoBase.test_utc_offset_out_of_bounds">[docs]</a>    <span class="k">def</span> <span class="nf">test_utc_offset_out_of_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">Edgy</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span>

        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>
        <span class="k">for</span> <span class="n">offset</span><span class="p">,</span> <span class="n">legit</span> <span class="ow">in</span> <span class="p">((</span><span class="o">-</span><span class="mi">1440</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
                              <span class="p">(</span><span class="o">-</span><span class="mi">1439</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span>
                              <span class="p">(</span><span class="mi">1439</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span>
                              <span class="p">(</span><span class="mi">1440</span><span class="p">,</span> <span class="bp">False</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">cls</span> <span class="ow">is</span> <span class="n">time</span><span class="p">:</span>
                <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">Edgy</span><span class="p">(</span><span class="n">offset</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">cls</span> <span class="ow">is</span> <span class="n">datetime</span><span class="p">:</span>
                <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">Edgy</span><span class="p">(</span><span class="n">offset</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;impossible&quot;</span>
            <span class="k">if</span> <span class="n">legit</span><span class="p">:</span>
                <span class="n">aofs</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">h</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">aofs</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%c%02d</span><span class="s">:</span><span class="si">%02d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">offset</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s">&#39;-&#39;</span> <span class="ow">or</span> <span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">timetz</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="s">&quot;01:02:03&quot;</span> <span class="o">+</span> <span class="n">tag</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TZInfoBase.test_tzinfo_classes"><a class="viewcode-back" href="../../test.html#test.datetimetester.TZInfoBase.test_tzinfo_classes">[docs]</a>    <span class="k">def</span> <span class="nf">test_tzinfo_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>
        <span class="k">class</span> <span class="nc">C1</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="bp">None</span>
            <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="bp">None</span>
            <span class="k">def</span> <span class="nf">tzname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="bp">None</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="p">(</span><span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                  <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="bp">None</span><span class="p">),</span>
                  <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">C1</span><span class="p">())):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">dst</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">tzname</span><span class="p">())</span>

        <span class="k">class</span> <span class="nc">C3</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">1439</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1439</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">tzname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="s">&quot;aname&quot;</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">C3</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">1439</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">dst</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1439</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="s">&quot;aname&quot;</span><span class="p">)</span>

        <span class="c"># Wrong types.</span>
        <span class="k">class</span> <span class="nc">C4</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="s">&quot;aname&quot;</span>
            <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="mi">7</span>
            <span class="k">def</span> <span class="nf">tzname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="mi">0</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">C4</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">dst</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tzname</span><span class="p">)</span>

        <span class="c"># Offset out of range.</span>
        <span class="k">class</span> <span class="nc">C6</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=-</span><span class="mi">24</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">C6</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">dst</span><span class="p">)</span>

        <span class="c"># Not a whole number of minutes.</span>
        <span class="k">class</span> <span class="nc">C7</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">61</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=-</span><span class="mi">81</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">C7</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">dst</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TZInfoBase.test_aware_compare"><a class="viewcode-back" href="../../test.html#test.datetimetester.TZInfoBase.test_aware_compare">[docs]</a>    <span class="k">def</span> <span class="nf">test_aware_compare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>

        <span class="c"># Ensure that utcoffset() gets ignored if the comparands have</span>
        <span class="c"># the same tzinfo member.</span>
        <span class="k">class</span> <span class="nc">OperandDependentOffset</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">minute</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                    <span class="c"># d0 and d1 equal after adjustment</span>
                    <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">minute</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c"># d2 off in the weeds</span>
                    <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">59</span><span class="p">)</span>

        <span class="n">base</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">OperandDependentOffset</span><span class="p">())</span>
        <span class="n">d0</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">d1</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
        <span class="n">d2</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">d0</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">d0</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">lt</span><span class="p">,</span> <span class="n">le</span><span class="p">,</span> <span class="n">gt</span><span class="p">,</span> <span class="n">ge</span><span class="p">,</span> <span class="n">eq</span><span class="p">,</span> <span class="n">ne</span><span class="p">:</span>
                    <span class="n">got</span> <span class="o">=</span> <span class="n">op</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                    <span class="n">expected</span> <span class="o">=</span> <span class="n">op</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">minute</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">got</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>

        <span class="c"># However, if they&#39;re different members, uctoffset is not ignored.</span>
        <span class="c"># Note that a time can&#39;t actually have an operand-depedent offset,</span>
        <span class="c"># though (and time.utcoffset() passes None to tzinfo.utcoffset()),</span>
        <span class="c"># so skip this test for time.</span>
        <span class="k">if</span> <span class="n">cls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">time</span><span class="p">:</span>
            <span class="n">d0</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">OperandDependentOffset</span><span class="p">())</span>
            <span class="n">d1</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">OperandDependentOffset</span><span class="p">())</span>
            <span class="n">d2</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">OperandDependentOffset</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">d0</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">d0</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">:</span>
                    <span class="n">got</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">)</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="ow">is</span> <span class="n">d0</span> <span class="ow">or</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">d1</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">y</span> <span class="ow">is</span> <span class="n">d0</span> <span class="ow">or</span> <span class="n">y</span> <span class="ow">is</span> <span class="n">d1</span><span class="p">):</span>
                        <span class="n">expected</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">elif</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">y</span> <span class="ow">is</span> <span class="n">d2</span><span class="p">:</span>
                        <span class="n">expected</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">elif</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">d2</span><span class="p">:</span>
                        <span class="n">expected</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">assert</span> <span class="n">y</span> <span class="ow">is</span> <span class="n">d2</span>
                        <span class="n">expected</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">got</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>


<span class="c"># Testing time objects with a non-None tzinfo.</span></div></div>
<div class="viewcode-block" id="TestTimeTZ"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeTZ">[docs]</a><span class="k">class</span> <span class="nc">TestTimeTZ</span><span class="p">(</span><span class="n">TestTime</span><span class="p">,</span> <span class="n">TZInfoBase</span><span class="p">,</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">theclass</span> <span class="o">=</span> <span class="n">time</span>

<div class="viewcode-block" id="TestTimeTZ.test_empty"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeTZ.test_empty">[docs]</a>    <span class="k">def</span> <span class="nf">test_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">microsecond</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeTZ.test_zones"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeTZ.test_zones">[docs]</a>    <span class="k">def</span> <span class="nf">test_zones</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">est</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="s">&quot;EST&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">utc</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;UTC&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">met</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="s">&quot;MET&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">est</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">utc</span><span class="p">)</span>
        <span class="n">t3</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">met</span><span class="p">)</span>
        <span class="n">t4</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="n">microsecond</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
        <span class="n">t5</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="n">microsecond</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">utc</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">est</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">utc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t3</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">met</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">t4</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t5</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">utc</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">300</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t3</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">60</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">t4</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">t1</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">,</span> <span class="s">&quot;no args&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="s">&quot;EST&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="s">&quot;UTC&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t3</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="s">&quot;MET&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">t4</span><span class="o">.</span><span class="n">tzname</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">t1</span><span class="o">.</span><span class="n">tzname</span><span class="p">,</span> <span class="s">&quot;no args&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">dst</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="o">.</span><span class="n">dst</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t3</span><span class="o">.</span><span class="n">dst</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">t4</span><span class="o">.</span><span class="n">dst</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">t1</span><span class="o">.</span><span class="n">dst</span><span class="p">,</span> <span class="s">&quot;no args&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">t2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">t3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">t2</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">t3</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">t4</span><span class="p">,</span> <span class="n">t5</span><span class="p">)</span> <span class="c"># mixed tz-aware &amp; naive</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t4</span> <span class="o">&lt;</span> <span class="n">t5</span><span class="p">)</span> <span class="c"># mixed tz-aware &amp; naive</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t5</span> <span class="o">&lt;</span> <span class="n">t4</span><span class="p">)</span> <span class="c"># mixed tz-aware &amp; naive</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="s">&quot;07:47:00-05:00&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t2</span><span class="p">),</span> <span class="s">&quot;12:47:00+00:00&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t3</span><span class="p">),</span> <span class="s">&quot;13:47:00+01:00&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t4</span><span class="p">),</span> <span class="s">&quot;00:00:00.000040&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t5</span><span class="p">),</span> <span class="s">&quot;00:00:00.000040+00:00&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;07:47:00-05:00&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;12:47:00+00:00&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t3</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;13:47:00+01:00&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t4</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;00:00:00.000040&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t5</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="s">&quot;00:00:00.000040+00:00&quot;</span><span class="p">)</span>

        <span class="n">d</span> <span class="o">=</span> <span class="s">&#39;datetime.time&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="n">d</span> <span class="o">+</span> <span class="s">&quot;(7, 47, tzinfo=est)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">t2</span><span class="p">),</span> <span class="n">d</span> <span class="o">+</span> <span class="s">&quot;(12, 47, tzinfo=utc)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">t3</span><span class="p">),</span> <span class="n">d</span> <span class="o">+</span> <span class="s">&quot;(13, 47, tzinfo=met)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">t4</span><span class="p">),</span> <span class="n">d</span> <span class="o">+</span> <span class="s">&quot;(0, 0, 0, 40)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">t5</span><span class="p">),</span> <span class="n">d</span> <span class="o">+</span> <span class="s">&quot;(0, 0, 0, 40, tzinfo=utc)&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%H:%M:%S </span><span class="si">%%</span><span class="s">Z=%Z </span><span class="si">%%</span><span class="s">z=%z&quot;</span><span class="p">),</span>
                                     <span class="s">&quot;07:47:00 %Z=EST %z=-0500&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%H:%M:%S %Z %z&quot;</span><span class="p">),</span> <span class="s">&quot;12:47:00 UTC +0000&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t3</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%H:%M:%S %Z %z&quot;</span><span class="p">),</span> <span class="s">&quot;13:47:00 MET +0100&quot;</span><span class="p">)</span>

        <span class="n">yuck</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">1439</span><span class="p">,</span> <span class="s">&quot;%z %Z </span><span class="si">%%</span><span class="s">z</span><span class="si">%%</span><span class="s">Z&quot;</span><span class="p">)</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">yuck</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%H:%M </span><span class="si">%%</span><span class="s">Z=&#39;%Z&#39; </span><span class="si">%%</span><span class="s">z=&#39;%z&#39;&quot;</span><span class="p">),</span>
                                     <span class="s">&quot;23:59 %Z=&#39;%z %Z </span><span class="si">%%</span><span class="s">z</span><span class="si">%%</span><span class="s">Z&#39; %z=&#39;-2359&#39;&quot;</span><span class="p">)</span>

        <span class="c"># Check that an invalid tzname result raises an exception.</span>
        <span class="k">class</span> <span class="nc">Badtzname</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="n">tz</span> <span class="o">=</span> <span class="mi">42</span>
            <span class="k">def</span> <span class="nf">tzname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tz</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">Badtzname</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%H:%M:%S&quot;</span><span class="p">),</span> <span class="s">&quot;02:03:04&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">,</span> <span class="s">&quot;%Z&quot;</span><span class="p">)</span>

        <span class="c"># Issue #6697:</span>
        <span class="k">if</span> <span class="s">&#39;_Fast&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="n">Badtzname</span><span class="o">.</span><span class="n">tz</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\ud800</span><span class="s">&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">,</span> <span class="s">&quot;%Z&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeTZ.test_hash_edge_cases"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeTZ.test_hash_edge_cases">[docs]</a>    <span class="k">def</span> <span class="nf">test_hash_edge_cases</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Offsets that overflow a basic time.</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">1439</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">1438</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">t2</span><span class="p">))</span>

        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">1000</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">1010</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">t2</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestTimeTZ.test_pickling"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeTZ.test_pickling">[docs]</a>    <span class="k">def</span> <span class="nf">test_pickling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Try one without a tzinfo.</span>
        <span class="n">args</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">64</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">pickler</span><span class="p">,</span> <span class="n">unpickler</span><span class="p">,</span> <span class="n">proto</span> <span class="ow">in</span> <span class="n">pickle_choices</span><span class="p">:</span>
            <span class="n">green</span> <span class="o">=</span> <span class="n">pickler</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
            <span class="n">derived</span> <span class="o">=</span> <span class="n">unpickler</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">derived</span><span class="p">)</span>

        <span class="c"># Try one with a tzinfo.</span>
        <span class="n">tinfo</span> <span class="o">=</span> <span class="n">PicklableFixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="s">&#39;cookie&#39;</span><span class="p">)</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tinfo</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">pickler</span><span class="p">,</span> <span class="n">unpickler</span><span class="p">,</span> <span class="n">proto</span> <span class="ow">in</span> <span class="n">pickle_choices</span><span class="p">:</span>
            <span class="n">green</span> <span class="o">=</span> <span class="n">pickler</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
            <span class="n">derived</span> <span class="o">=</span> <span class="n">unpickler</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">derived</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">derived</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">PicklableFixedOffset</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">300</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="s">&#39;cookie&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeTZ.test_more_bool"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeTZ.test_more_bool">[docs]</a>    <span class="k">def</span> <span class="nf">test_more_bool</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test cases with non-None tzinfo.</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">23</span><span class="o">*</span><span class="mi">60</span> <span class="o">+</span> <span class="mi">59</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

        <span class="c"># Mostly ensuring this doesn&#39;t overflow internally.</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">23</span><span class="o">*</span><span class="mi">60</span> <span class="o">+</span> <span class="mi">59</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

        <span class="c"># But this should yield a value error -- the utcoffset is bogus.</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">24</span><span class="o">*</span><span class="mi">60</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>

        <span class="c"># Likewise.</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">24</span><span class="o">*</span><span class="mi">60</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestTimeTZ.test_replace"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeTZ.test_replace">[docs]</a>    <span class="k">def</span> <span class="nf">test_replace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>
        <span class="n">z100</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s">&quot;+100&quot;</span><span class="p">)</span>
        <span class="n">zm200</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">200</span><span class="p">),</span> <span class="s">&quot;-200&quot;</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">z100</span><span class="p">]</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">())</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">newval</span> <span class="ow">in</span> <span class="p">((</span><span class="s">&quot;hour&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;minute&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;second&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;microsecond&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;tzinfo&quot;</span><span class="p">,</span> <span class="n">zm200</span><span class="p">)):</span>
            <span class="n">newargs</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:]</span>
            <span class="n">newargs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">newval</span>
            <span class="n">expected</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">newargs</span><span class="p">)</span>
            <span class="n">got</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">newval</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c"># Ensure we can get rid of a tzinfo.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="s">&quot;+100&quot;</span><span class="p">)</span>
        <span class="n">base2</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">base2</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">base2</span><span class="o">.</span><span class="n">tzname</span><span class="p">())</span>

        <span class="c"># Ensure we can add one.</span>
        <span class="n">base3</span> <span class="o">=</span> <span class="n">base2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">z100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">base3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">base3</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>

        <span class="c"># Out of bounds.</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">minute</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">1000000</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimeTZ.test_mixed_compare"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeTZ.test_mixed_compare">[docs]</a>    <span class="k">def</span> <span class="nf">test_mixed_compare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># In time w/ identical tzinfo objects, utcoffset is ignored.</span>
        <span class="k">class</span> <span class="nc">Varies</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span>

        <span class="n">v</span> <span class="o">=</span> <span class="n">Varies</span><span class="p">()</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">v</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">v</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">23</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">24</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># But if they&#39;re not identical, it isn&#39;t ignored.</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">Varies</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">t2</span><span class="p">)</span>  <span class="c"># t1&#39;s offset counter still going up</span>
</div>
<div class="viewcode-block" id="TestTimeTZ.test_subclass_timetz"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimeTZ.test_subclass_timetz">[docs]</a>    <span class="k">def</span> <span class="nf">test_subclass_timetz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">):</span>
            <span class="n">theAnswer</span> <span class="o">=</span> <span class="mi">42</span>

            <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">extra</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">&#39;extra&#39;</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">temp</span><span class="p">)</span>
                <span class="n">result</span><span class="o">.</span><span class="n">extra</span> <span class="o">=</span> <span class="n">extra</span>
                <span class="k">return</span> <span class="n">result</span>

            <span class="k">def</span> <span class="nf">newmeth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">start</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">hour</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">second</span>

        <span class="n">args</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="s">&quot;EST&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">dt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="n">dt2</span> <span class="o">=</span> <span class="n">C</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;extra&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">theAnswer</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt1</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">dt2</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">newmeth</span><span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">),</span> <span class="n">dt1</span><span class="o">.</span><span class="n">hour</span> <span class="o">+</span> <span class="n">dt1</span><span class="o">.</span><span class="n">second</span> <span class="o">-</span> <span class="mi">7</span><span class="p">)</span>


<span class="c"># Testing datetime objects with a non-None tzinfo.</span>
</div></div>
<div class="viewcode-block" id="TestDateTimeTZ"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ">[docs]</a><span class="k">class</span> <span class="nc">TestDateTimeTZ</span><span class="p">(</span><span class="n">TestDateTime</span><span class="p">,</span> <span class="n">TZInfoBase</span><span class="p">,</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">theclass</span> <span class="o">=</span> <span class="n">datetime</span>

<div class="viewcode-block" id="TestDateTimeTZ.test_trivial"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_trivial">[docs]</a>    <span class="k">def</span> <span class="nf">test_trivial</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">microsecond</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_even_more_compare"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_even_more_compare">[docs]</a>    <span class="k">def</span> <span class="nf">test_even_more_compare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># The test_compare() and test_more_compare() inherited from TestDate</span>
        <span class="c"># and TestDateTime covered non-tzinfo cases.</span>

        <span class="c"># Smallest possible after UTC adjustment.</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">1439</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="c"># Largest possible after UTC adjustment.</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">MAXYEAR</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">999999</span><span class="p">,</span>
                           <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">1439</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>

        <span class="c"># Make sure those compare correctly, and w/o overflow.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">!=</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t2</span> <span class="o">&gt;</span> <span class="n">t1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># Equal afer adjustment.</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="mi">60</span><span class="o">+</span><span class="mi">13</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># Change t1 not to subtract a minute, and t1 should be larger.</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># Change t1 to subtract 2 minutes, and t1 should be smaller.</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># Back to the original t1, but make seconds resolve it.</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">),</span>
                           <span class="n">second</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># Likewise, but make microseconds resolve it.</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">),</span>
                           <span class="n">microsecond</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&gt;</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># Make t2 naive and it should differ.</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">min</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># It&#39;s also naive if it has tzinfo but tzinfo.utcoffset() is None.</span>
        <span class="k">class</span> <span class="nc">Naive</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="bp">None</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">Naive</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># OTOH, it&#39;s OK to compare two of these mixing the two ways of being</span>
        <span class="c"># naive.</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># Try a bogus uctoffset.</span>
        <span class="k">class</span> <span class="nc">Bogus</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1440</span><span class="p">)</span> <span class="c"># out of bounds</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">Bogus</span><span class="p">())</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">t1</span> <span class="o">==</span> <span class="n">t2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_pickling"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_pickling">[docs]</a>    <span class="k">def</span> <span class="nf">test_pickling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Try one without a tzinfo.</span>
        <span class="n">args</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">64</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">pickler</span><span class="p">,</span> <span class="n">unpickler</span><span class="p">,</span> <span class="n">proto</span> <span class="ow">in</span> <span class="n">pickle_choices</span><span class="p">:</span>
            <span class="n">green</span> <span class="o">=</span> <span class="n">pickler</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
            <span class="n">derived</span> <span class="o">=</span> <span class="n">unpickler</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">derived</span><span class="p">)</span>

        <span class="c"># Try one with a tzinfo.</span>
        <span class="n">tinfo</span> <span class="o">=</span> <span class="n">PicklableFixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="s">&#39;cookie&#39;</span><span class="p">)</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;tzinfo&#39;</span><span class="p">:</span> <span class="n">tinfo</span><span class="p">})</span>
        <span class="n">derived</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">pickler</span><span class="p">,</span> <span class="n">unpickler</span><span class="p">,</span> <span class="n">proto</span> <span class="ow">in</span> <span class="n">pickle_choices</span><span class="p">:</span>
            <span class="n">green</span> <span class="o">=</span> <span class="n">pickler</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
            <span class="n">derived</span> <span class="o">=</span> <span class="n">unpickler</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">derived</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">derived</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">PicklableFixedOffset</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">300</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">derived</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="s">&#39;cookie&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_extreme_hashes"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_extreme_hashes">[docs]</a>    <span class="k">def</span> <span class="nf">test_extreme_hashes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># If an attempt is made to hash these via subtracting the offset</span>
        <span class="c"># then hashing a datetime object, OverflowError results.  The</span>
        <span class="c"># Python implementation used to blow up here.</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">1439</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="nb">hash</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">MAXYEAR</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">999999</span><span class="p">,</span>
                          <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">1439</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="nb">hash</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

        <span class="c"># OTOH, an OOB offset should blow up.</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">1440</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">hash</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_zones"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_zones">[docs]</a>    <span class="k">def</span> <span class="nf">test_zones</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">est</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="s">&quot;EST&quot;</span><span class="p">)</span>
        <span class="n">utc</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;UTC&quot;</span><span class="p">)</span>
        <span class="n">met</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="s">&quot;MET&quot;</span><span class="p">)</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">est</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">utc</span><span class="p">)</span>
        <span class="n">t3</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">met</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">est</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">utc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t3</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">met</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">300</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t3</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">60</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="s">&quot;EST&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="s">&quot;UTC&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t3</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="s">&quot;MET&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">t2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">t3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">t2</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">t3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="s">&quot;2002-03-19 07:47:00-05:00&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t2</span><span class="p">),</span> <span class="s">&quot;2002-03-19 12:47:00+00:00&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t3</span><span class="p">),</span> <span class="s">&quot;2002-03-19 13:47:00+01:00&quot;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="s">&#39;datetime.datetime(2002, 3, 19, &#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="n">d</span> <span class="o">+</span> <span class="s">&quot;7, 47, tzinfo=est)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">t2</span><span class="p">),</span> <span class="n">d</span> <span class="o">+</span> <span class="s">&quot;12, 47, tzinfo=utc)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">t3</span><span class="p">),</span> <span class="n">d</span> <span class="o">+</span> <span class="s">&quot;13, 47, tzinfo=met)&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_combine"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_combine">[docs]</a>    <span class="k">def</span> <span class="nf">test_combine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">met</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="s">&quot;MET&quot;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="n">tz</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1234</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">met</span><span class="p">)</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1234</span><span class="p">,</span>
                                        <span class="n">tzinfo</span><span class="o">=</span><span class="n">met</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_extract"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_extract">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">met</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="s">&quot;MET&quot;</span><span class="p">)</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1234</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">met</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(),</span> <span class="n">date</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span> <span class="n">time</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1234</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">timetz</span><span class="p">(),</span> <span class="n">time</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1234</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">met</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_tz_aware_arithmetic"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_tz_aware_arithmetic">[docs]</a>    <span class="k">def</span> <span class="nf">test_tz_aware_arithmetic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">random</span>

        <span class="n">now</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">tz55</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">330</span><span class="p">,</span> <span class="s">&quot;west 5:30&quot;</span><span class="p">)</span>
        <span class="n">timeaware</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz55</span><span class="p">)</span>
        <span class="n">nowaware</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">date</span><span class="p">(),</span> <span class="n">timeaware</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">nowaware</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">tz55</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nowaware</span><span class="o">.</span><span class="n">timetz</span><span class="p">(),</span> <span class="n">timeaware</span><span class="p">)</span>

        <span class="c"># Can&#39;t mix aware and non-aware.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">now</span> <span class="o">-</span> <span class="n">nowaware</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">nowaware</span> <span class="o">-</span> <span class="n">now</span><span class="p">)</span>

        <span class="c"># And adding datetime&#39;s doesn&#39;t make sense, aware or not.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">now</span> <span class="o">+</span> <span class="n">nowaware</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">nowaware</span> <span class="o">+</span> <span class="n">now</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">nowaware</span> <span class="o">+</span> <span class="n">nowaware</span><span class="p">)</span>

        <span class="c"># Subtracting should yield 0.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">now</span> <span class="o">-</span> <span class="n">now</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nowaware</span> <span class="o">-</span> <span class="n">nowaware</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

        <span class="c"># Adding a delta should preserve tzinfo.</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">weeks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">microseconds</span><span class="o">=</span><span class="mi">5678</span><span class="p">)</span>
        <span class="n">nowawareplus</span> <span class="o">=</span> <span class="n">nowaware</span> <span class="o">+</span> <span class="n">delta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">nowaware</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">tz55</span><span class="p">)</span>
        <span class="n">nowawareplus2</span> <span class="o">=</span> <span class="n">delta</span> <span class="o">+</span> <span class="n">nowaware</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">nowawareplus2</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">tz55</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nowawareplus</span><span class="p">,</span> <span class="n">nowawareplus2</span><span class="p">)</span>

        <span class="c"># that - delta should be what we started with, and that - what we</span>
        <span class="c"># started with should be delta.</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="n">nowawareplus</span> <span class="o">-</span> <span class="n">delta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">diff</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">tz55</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nowaware</span><span class="p">,</span> <span class="n">diff</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">delta</span> <span class="o">-</span> <span class="n">nowawareplus</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nowawareplus</span> <span class="o">-</span> <span class="n">nowaware</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span>

        <span class="c"># Make up a random timezone.</span>
        <span class="n">tzr</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="o">-</span><span class="mi">1439</span><span class="p">,</span> <span class="mi">1440</span><span class="p">),</span> <span class="s">&quot;randomtimezone&quot;</span><span class="p">)</span>
        <span class="c"># Attach it to nowawareplus.</span>
        <span class="n">nowawareplus</span> <span class="o">=</span> <span class="n">nowawareplus</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tzr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">nowawareplus</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">tzr</span><span class="p">)</span>
        <span class="c"># Make sure the difference takes the timezone adjustments into account.</span>
        <span class="n">got</span> <span class="o">=</span> <span class="n">nowaware</span> <span class="o">-</span> <span class="n">nowawareplus</span>
        <span class="c"># Expected:  (nowaware base - nowaware offset) -</span>
        <span class="c">#            (nowawareplus base - nowawareplus offset) =</span>
        <span class="c">#            (nowaware base - nowawareplus base) +</span>
        <span class="c">#            (nowawareplus offset - nowaware offset) =</span>
        <span class="c">#            -delta + nowawareplus offset - nowaware offset</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">nowawareplus</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">()</span> <span class="o">-</span> <span class="n">nowaware</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">()</span> <span class="o">-</span> <span class="n">delta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">got</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>

        <span class="c"># Try max possible difference.</span>
        <span class="nb">min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">1439</span><span class="p">,</span> <span class="s">&quot;min&quot;</span><span class="p">))</span>
        <span class="nb">max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="n">MAXYEAR</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">999999</span><span class="p">,</span>
                            <span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">1439</span><span class="p">,</span> <span class="s">&quot;max&quot;</span><span class="p">))</span>
        <span class="n">maxdiff</span> <span class="o">=</span> <span class="nb">max</span> <span class="o">-</span> <span class="nb">min</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">maxdiff</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">max</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">min</span> <span class="o">+</span>
                                  <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="mi">1439</span><span class="p">))</span>
        <span class="c"># Different tzinfo, but the same offset</span>
        <span class="n">tza</span> <span class="o">=</span> <span class="n">timezone</span><span class="p">(</span><span class="n">HOUR</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">)</span>
        <span class="n">tzb</span> <span class="o">=</span> <span class="n">timezone</span><span class="p">(</span><span class="n">HOUR</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">)</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="nb">min</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tza</span><span class="p">)</span> <span class="o">-</span> <span class="nb">max</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tzb</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">delta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">min</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_tzinfo_now"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_tzinfo_now">[docs]</a>    <span class="k">def</span> <span class="nf">test_tzinfo_now</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">meth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">now</span>
        <span class="c"># Ensure it doesn&#39;t require tzinfo (i.e., that this doesn&#39;t blow up).</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">meth</span><span class="p">()</span>
        <span class="c"># Try with and without naming the keyword.</span>
        <span class="n">off42</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="s">&quot;42&quot;</span><span class="p">)</span>
        <span class="n">another</span> <span class="o">=</span> <span class="n">meth</span><span class="p">(</span><span class="n">off42</span><span class="p">)</span>
        <span class="n">again</span> <span class="o">=</span> <span class="n">meth</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">off42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">another</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">again</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">another</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">42</span><span class="p">))</span>
        <span class="c"># Bad argument with and w/o naming the keyword.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">meth</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">meth</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
        <span class="c"># Bad keyword name.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">meth</span><span class="p">,</span> <span class="n">tinfo</span><span class="o">=</span><span class="n">off42</span><span class="p">)</span>
        <span class="c"># Too many args.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">meth</span><span class="p">,</span> <span class="n">off42</span><span class="p">,</span> <span class="n">off42</span><span class="p">)</span>

        <span class="c"># We don&#39;t know which time zone we&#39;re in, and don&#39;t have a tzinfo</span>
        <span class="c"># class to represent it, so seeing whether a tz argument actually</span>
        <span class="c"># does a conversion is tricky.</span>
        <span class="n">utc</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;utc&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">weirdtz</span> <span class="ow">in</span> <span class="p">[</span><span class="n">FixedOffset</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">58</span><span class="p">),</span> <span class="s">&quot;weirdtz&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                        <span class="n">timezone</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">58</span><span class="p">),</span> <span class="s">&quot;weirdtz&quot;</span><span class="p">),]:</span>
            <span class="k">for</span> <span class="n">dummy</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">weirdtz</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">weirdtz</span><span class="p">)</span>
                <span class="n">utcnow</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">utc</span><span class="p">)</span>
                <span class="n">now2</span> <span class="o">=</span> <span class="n">utcnow</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">weirdtz</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">now</span> <span class="o">-</span> <span class="n">now2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>
                    <span class="k">break</span>
                <span class="c"># Else the code is broken, or more than 30 seconds passed between</span>
                <span class="c"># calls; assuming the latter, just try again.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># Three strikes and we&#39;re out.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;utcnow(), now(tz), or astimezone() may be broken&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_tzinfo_fromtimestamp"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_tzinfo_fromtimestamp">[docs]</a>    <span class="k">def</span> <span class="nf">test_tzinfo_fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">time</span>
        <span class="n">meth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">fromtimestamp</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="c"># Ensure it doesn&#39;t require tzinfo (i.e., that this doesn&#39;t blow up).</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">meth</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="c"># Try with and without naming the keyword.</span>
        <span class="n">off42</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="s">&quot;42&quot;</span><span class="p">)</span>
        <span class="n">another</span> <span class="o">=</span> <span class="n">meth</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">off42</span><span class="p">)</span>
        <span class="n">again</span> <span class="o">=</span> <span class="n">meth</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="n">off42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">another</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">again</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">another</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">42</span><span class="p">))</span>
        <span class="c"># Bad argument with and w/o naming the keyword.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">meth</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">meth</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
        <span class="c"># Bad keyword name.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">meth</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">tinfo</span><span class="o">=</span><span class="n">off42</span><span class="p">)</span>
        <span class="c"># Too many args.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">meth</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">off42</span><span class="p">,</span> <span class="n">off42</span><span class="p">)</span>
        <span class="c"># Too few args.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">meth</span><span class="p">)</span>

        <span class="c"># Try to make sure tz= actually does some conversion.</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="mi">1000000000</span>
        <span class="n">utcdatetime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
        <span class="c"># In POSIX (epoch 1970), that&#39;s 2001-09-09 01:46:40 UTC, give or take.</span>
        <span class="c"># But on some flavor of Mac, it&#39;s nowhere near that.  So we can&#39;t have</span>
        <span class="c"># any idea here what time that actually is, we can only test that</span>
        <span class="c"># relative changes match.</span>
        <span class="n">utcoffset</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=-</span><span class="mi">15</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">39</span><span class="p">)</span> <span class="c"># arbitrary, but not zero</span>
        <span class="n">tz</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="n">utcoffset</span><span class="p">,</span> <span class="s">&quot;tz&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">utcdatetime</span> <span class="o">+</span> <span class="n">utcoffset</span>
        <span class="n">got</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="bp">None</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_tzinfo_utcnow"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_tzinfo_utcnow">[docs]</a>    <span class="k">def</span> <span class="nf">test_tzinfo_utcnow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">meth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">utcnow</span>
        <span class="c"># Ensure it doesn&#39;t require tzinfo (i.e., that this doesn&#39;t blow up).</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">meth</span><span class="p">()</span>
        <span class="c"># Try with and without naming the keyword; for whatever reason,</span>
        <span class="c"># utcnow() doesn&#39;t accept a tzinfo argument.</span>
        <span class="n">off42</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="s">&quot;42&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">meth</span><span class="p">,</span> <span class="n">off42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">meth</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">off42</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_tzinfo_utcfromtimestamp"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_tzinfo_utcfromtimestamp">[docs]</a>    <span class="k">def</span> <span class="nf">test_tzinfo_utcfromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">time</span>
        <span class="n">meth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">utcfromtimestamp</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="c"># Ensure it doesn&#39;t require tzinfo (i.e., that this doesn&#39;t blow up).</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">meth</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="c"># Try with and without naming the keyword; for whatever reason,</span>
        <span class="c"># utcfromtimestamp() doesn&#39;t accept a tzinfo argument.</span>
        <span class="n">off42</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="s">&quot;42&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">meth</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">off42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">meth</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">off42</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_tzinfo_timetuple"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_tzinfo_timetuple">[docs]</a>    <span class="k">def</span> <span class="nf">test_tzinfo_timetuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># TestDateTime tested most of this.  datetime adds a twist to the</span>
        <span class="c"># DST flag.</span>
        <span class="k">class</span> <span class="nc">DST</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dstvalue</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dstvalue</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                    <span class="n">dstvalue</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">dstvalue</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dstvalue</span> <span class="o">=</span> <span class="n">dstvalue</span>
            <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dstvalue</span>

        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>
        <span class="k">for</span> <span class="n">dstvalue</span><span class="p">,</span> <span class="n">flag</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="mi">33</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">DST</span><span class="p">(</span><span class="n">dstvalue</span><span class="p">))</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_year</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_mon</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_mday</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_hour</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_min</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_sec</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_wday</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_yday</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">flag</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_isdst</span><span class="p">)</span>

        <span class="c"># dst() returns wrong type.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">DST</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">timetuple</span><span class="p">)</span>

        <span class="c"># dst() at the edge.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">DST</span><span class="p">(</span><span class="mi">1439</span><span class="p">))</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()</span><span class="o">.</span><span class="n">tm_isdst</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">DST</span><span class="p">(</span><span class="o">-</span><span class="mi">1439</span><span class="p">))</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()</span><span class="o">.</span><span class="n">tm_isdst</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># dst() out of range.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">DST</span><span class="p">(</span><span class="mi">1440</span><span class="p">))</span><span class="o">.</span><span class="n">timetuple</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">DST</span><span class="p">(</span><span class="o">-</span><span class="mi">1440</span><span class="p">))</span><span class="o">.</span><span class="n">timetuple</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_utctimetuple"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_utctimetuple">[docs]</a>    <span class="k">def</span> <span class="nf">test_utctimetuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">DST</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dstvalue</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dstvalue</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                    <span class="n">dstvalue</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">dstvalue</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dstvalue</span> <span class="o">=</span> <span class="n">dstvalue</span>
            <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dstvalue</span>

        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>
        <span class="c"># This can&#39;t work:  DST didn&#39;t implement utcoffset.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">NotImplementedError</span><span class="p">,</span>
                          <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">DST</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">UOFS</span><span class="p">(</span><span class="n">DST</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uofs</span><span class="p">,</span> <span class="n">dofs</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
                <span class="n">DST</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dofs</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uofs</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">uofs</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">uofs</span>

        <span class="k">for</span> <span class="n">dstvalue</span> <span class="ow">in</span> <span class="o">-</span><span class="mi">33</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">UOFS</span><span class="p">(</span><span class="o">-</span><span class="mi">53</span><span class="p">,</span> <span class="n">dstvalue</span><span class="p">))</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">utctimetuple</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_year</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_mon</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_mday</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_hour</span><span class="p">)</span> <span class="c"># 20mm + 53mm = 1hn + 13mm</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_min</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_sec</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">weekday</span><span class="p">(),</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_wday</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">toordinal</span><span class="p">()</span> <span class="o">-</span> <span class="n">date</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">toordinal</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                             <span class="n">t</span><span class="o">.</span><span class="n">tm_yday</span><span class="p">)</span>
            <span class="c"># Ensure tm_isdst is 0 regardless of what dst() says: DST</span>
            <span class="c"># is never in effect for a UTC time.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_isdst</span><span class="p">)</span>

        <span class="c"># For naive datetime, utctimetuple == timetuple except for isdst</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">utctimetuple</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">d</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_isdst</span><span class="p">)</span>
        <span class="c"># Same if utcoffset is None</span>
        <span class="k">class</span> <span class="nc">NOFS</span><span class="p">(</span><span class="n">DST</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">None</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">NOFS</span><span class="p">())</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">utctimetuple</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">d</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_isdst</span><span class="p">)</span>
        <span class="c"># Check that bad tzinfo is detected</span>
        <span class="k">class</span> <span class="nc">BOFS</span><span class="p">(</span><span class="n">DST</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
                <span class="k">return</span> <span class="s">&quot;EST&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">BOFS</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">utctimetuple</span><span class="p">)</span>

        <span class="c"># Check that utctimetuple() is the same as</span>
        <span class="c"># astimezone(utc).timetuple()</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">171819</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">tz</span> <span class="ow">in</span> <span class="p">[</span><span class="n">timezone</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">,</span> <span class="n">timezone</span><span class="o">.</span><span class="n">max</span><span class="p">]:</span>
            <span class="n">dtz</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dtz</span><span class="o">.</span><span class="n">utctimetuple</span><span class="p">()[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                             <span class="n">dtz</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="c"># At the edges, UTC adjustment can produce years out-of-range</span>
        <span class="c"># for a datetime object.  Ensure that an OverflowError is</span>
        <span class="c"># raised.</span>
        <span class="n">tiny</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="n">MINYEAR</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">UOFS</span><span class="p">(</span><span class="mi">1439</span><span class="p">))</span>
        <span class="c"># That goes back 1 minute less than a full day.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">tiny</span><span class="o">.</span><span class="n">utctimetuple</span><span class="p">)</span>

        <span class="n">huge</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="n">MAXYEAR</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">999999</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">UOFS</span><span class="p">(</span><span class="o">-</span><span class="mi">1439</span><span class="p">))</span>
        <span class="c"># That goes forward 1 minute less than a full day.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">huge</span><span class="o">.</span><span class="n">utctimetuple</span><span class="p">)</span>
        <span class="c"># More overflow cases</span>
        <span class="n">tiny</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="p">(</span><span class="n">MINUTE</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">tiny</span><span class="o">.</span><span class="n">utctimetuple</span><span class="p">)</span>
        <span class="n">huge</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="p">(</span><span class="o">-</span><span class="n">MINUTE</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">huge</span><span class="o">.</span><span class="n">utctimetuple</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_tzinfo_isoformat"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_tzinfo_isoformat">[docs]</a>    <span class="k">def</span> <span class="nf">test_tzinfo_isoformat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">zero</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;+00:00&quot;</span><span class="p">)</span>
        <span class="n">plus</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="s">&quot;+03:40&quot;</span><span class="p">)</span>
        <span class="n">minus</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">231</span><span class="p">,</span> <span class="s">&quot;-03:51&quot;</span><span class="p">)</span>
        <span class="n">unknown</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>

        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>
        <span class="n">datestr</span> <span class="o">=</span> <span class="s">&#39;0001-02-03&#39;</span>
        <span class="k">for</span> <span class="n">ofs</span> <span class="ow">in</span> <span class="bp">None</span><span class="p">,</span> <span class="n">zero</span><span class="p">,</span> <span class="n">plus</span><span class="p">,</span> <span class="n">minus</span><span class="p">,</span> <span class="n">unknown</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">us</span> <span class="ow">in</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">987001</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="n">us</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">ofs</span><span class="p">)</span>
                <span class="n">timestr</span> <span class="o">=</span> <span class="s">&#39;04:05:59&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="n">us</span> <span class="ow">and</span> <span class="s">&#39;.987001&#39;</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
                <span class="n">ofsstr</span> <span class="o">=</span> <span class="n">ofs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">tzname</span><span class="p">()</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span>
                <span class="n">tailstr</span> <span class="o">=</span> <span class="n">timestr</span> <span class="o">+</span> <span class="n">ofsstr</span>
                <span class="n">iso</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">iso</span><span class="p">,</span> <span class="n">datestr</span> <span class="o">+</span> <span class="s">&#39;T&#39;</span> <span class="o">+</span> <span class="n">tailstr</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">iso</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(</span><span class="s">&#39;T&#39;</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(</span><span class="s">&#39;k&#39;</span><span class="p">),</span> <span class="n">datestr</span> <span class="o">+</span> <span class="s">&#39;k&#39;</span> <span class="o">+</span> <span class="n">tailstr</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\u1234</span><span class="s">&#39;</span><span class="p">),</span> <span class="n">datestr</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\u1234</span><span class="s">&#39;</span> <span class="o">+</span> <span class="n">tailstr</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="n">datestr</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="n">tailstr</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_replace"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_replace">[docs]</a>    <span class="k">def</span> <span class="nf">test_replace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>
        <span class="n">z100</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s">&quot;+100&quot;</span><span class="p">)</span>
        <span class="n">zm200</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=-</span><span class="mi">200</span><span class="p">),</span> <span class="s">&quot;-200&quot;</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">z100</span><span class="p">]</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">())</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">newval</span> <span class="ow">in</span> <span class="p">((</span><span class="s">&quot;year&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;month&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;day&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;hour&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;minute&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;second&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;microsecond&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&quot;tzinfo&quot;</span><span class="p">,</span> <span class="n">zm200</span><span class="p">)):</span>
            <span class="n">newargs</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:]</span>
            <span class="n">newargs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">newval</span>
            <span class="n">expected</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">newargs</span><span class="p">)</span>
            <span class="n">got</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">newval</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c"># Ensure we can get rid of a tzinfo.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">tzname</span><span class="p">(),</span> <span class="s">&quot;+100&quot;</span><span class="p">)</span>
        <span class="n">base2</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">base2</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">base2</span><span class="o">.</span><span class="n">tzname</span><span class="p">())</span>

        <span class="c"># Ensure we can add one.</span>
        <span class="n">base3</span> <span class="o">=</span> <span class="n">base2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">z100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">base3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">base3</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>

        <span class="c"># Out of bounds.</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2001</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_more_astimezone"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_more_astimezone">[docs]</a>    <span class="k">def</span> <span class="nf">test_more_astimezone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># The inherited test_astimezone covered some trivial and error cases.</span>
        <span class="n">fnone</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&quot;None&quot;</span><span class="p">)</span>
        <span class="n">f44m</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">44</span><span class="p">,</span> <span class="s">&quot;44&quot;</span><span class="p">)</span>
        <span class="n">fm5h</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span> <span class="s">&quot;m300&quot;</span><span class="p">)</span>

        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">f44m</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">f44m</span><span class="p">)</span>
        <span class="c"># Replacing with degenerate tzinfo raises an exception.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">,</span> <span class="n">fnone</span><span class="p">)</span>
        <span class="c"># Replacing with same tzinfo makes no change.</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">f44m</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">date</span><span class="p">(),</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span> <span class="n">dt</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>

        <span class="c"># Replacing with different tzinfo does adjust.</span>
        <span class="n">got</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">fm5h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">got</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">fm5h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">got</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=-</span><span class="mi">5</span><span class="p">))</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">dt</span> <span class="o">-</span> <span class="n">dt</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">()</span>  <span class="c"># in effect, convert to UTC</span>
        <span class="n">expected</span> <span class="o">+=</span> <span class="n">fm5h</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>  <span class="c"># and from there to local time</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">expected</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">fm5h</span><span class="p">)</span> <span class="c"># and attach new tzinfo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">got</span><span class="o">.</span><span class="n">date</span><span class="p">(),</span> <span class="n">expected</span><span class="o">.</span><span class="n">date</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">got</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span> <span class="n">expected</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">got</span><span class="o">.</span><span class="n">timetz</span><span class="p">(),</span> <span class="n">expected</span><span class="o">.</span><span class="n">timetz</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">got</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">expected</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">got</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>
</div>
    <span class="nd">@support.run_with_tz</span><span class="p">(</span><span class="s">&#39;UTC&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_astimezone_default_utc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="n">dt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(),</span> <span class="n">dt</span><span class="p">)</span>

    <span class="c"># Note that offset in TZ variable has the opposite sign to that</span>
    <span class="c"># produced by %z directive.</span>
    <span class="nd">@support.run_with_tz</span><span class="p">(</span><span class="s">&#39;EST+05EDT,M3.2.0,M11.1.0&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_astimezone_default_eastern</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
        <span class="n">local</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">local</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%z %Z&quot;</span><span class="p">),</span> <span class="s">&quot;-0500 EST&quot;</span><span class="p">)</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
        <span class="n">local</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">local</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%z %Z&quot;</span><span class="p">),</span> <span class="s">&quot;-0400 EDT&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="TestDateTimeTZ.test_aware_subtract"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_aware_subtract">[docs]</a>    <span class="k">def</span> <span class="nf">test_aware_subtract</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span>

        <span class="c"># Ensure that utcoffset() is ignored when the operands have the</span>
        <span class="c"># same tzinfo member.</span>
        <span class="k">class</span> <span class="nc">OperandDependentOffset</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">minute</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                    <span class="c"># d0 and d1 equal after adjustment</span>
                    <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">minute</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c"># d2 off in the weeds</span>
                    <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">59</span><span class="p">)</span>

        <span class="n">base</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">OperandDependentOffset</span><span class="p">())</span>
        <span class="n">d0</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">d1</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
        <span class="n">d2</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">d0</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">d0</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">:</span>
                <span class="n">got</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span>
                <span class="n">expected</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">minute</span> <span class="o">-</span> <span class="n">y</span><span class="o">.</span><span class="n">minute</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">got</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>

        <span class="c"># OTOH, if the tzinfo members are distinct, utcoffsets aren&#39;t</span>
        <span class="c"># ignored.</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
        <span class="n">d0</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">OperandDependentOffset</span><span class="p">())</span>
        <span class="n">d1</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">OperandDependentOffset</span><span class="p">())</span>
        <span class="n">d2</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">OperandDependentOffset</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">d0</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">d0</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">:</span>
                <span class="n">got</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="ow">is</span> <span class="n">d0</span> <span class="ow">or</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">d1</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">y</span> <span class="ow">is</span> <span class="n">d0</span> <span class="ow">or</span> <span class="n">y</span> <span class="ow">is</span> <span class="n">d1</span><span class="p">):</span>
                    <span class="n">expected</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">y</span> <span class="ow">is</span> <span class="n">d2</span><span class="p">:</span>
                    <span class="n">expected</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">d2</span><span class="p">:</span>
                    <span class="n">expected</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="p">(</span><span class="mi">11</span><span class="o">-</span><span class="mi">59</span><span class="p">)</span><span class="o">-</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">assert</span> <span class="n">y</span> <span class="ow">is</span> <span class="n">d2</span>
                    <span class="n">expected</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">0</span><span class="o">-</span><span class="p">(</span><span class="mi">11</span><span class="o">-</span><span class="mi">59</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">got</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_mixed_compare"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_mixed_compare">[docs]</a>    <span class="k">def</span> <span class="nf">test_mixed_compare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">FixedOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># In datetime w/ identical tzinfo objects, utcoffset is ignored.</span>
        <span class="k">class</span> <span class="nc">Varies</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span>

        <span class="n">v</span> <span class="o">=</span> <span class="n">Varies</span><span class="p">()</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">v</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">v</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">23</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t2</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">24</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>

        <span class="c"># But if they&#39;re not identical, it isn&#39;t ignored.</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">Varies</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">t2</span><span class="p">)</span>  <span class="c"># t1&#39;s offset counter still going up</span>
</div>
<div class="viewcode-block" id="TestDateTimeTZ.test_subclass_datetimetz"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestDateTimeTZ.test_subclass_datetimetz">[docs]</a>    <span class="k">def</span> <span class="nf">test_subclass_datetimetz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">):</span>
            <span class="n">theAnswer</span> <span class="o">=</span> <span class="mi">42</span>

            <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">extra</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">&#39;extra&#39;</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">temp</span><span class="p">)</span>
                <span class="n">result</span><span class="o">.</span><span class="n">extra</span> <span class="o">=</span> <span class="n">extra</span>
                <span class="k">return</span> <span class="n">result</span>

            <span class="k">def</span> <span class="nf">newmeth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">start</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">hour</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">year</span>

        <span class="n">args</span> <span class="o">=</span> <span class="mi">2002</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="s">&quot;EST&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">dt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="n">dt2</span> <span class="o">=</span> <span class="n">C</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;extra&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">theAnswer</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt1</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(),</span> <span class="n">dt2</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt2</span><span class="o">.</span><span class="n">newmeth</span><span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">),</span> <span class="n">dt1</span><span class="o">.</span><span class="n">hour</span> <span class="o">+</span> <span class="n">dt1</span><span class="o">.</span><span class="n">year</span> <span class="o">-</span> <span class="mi">7</span><span class="p">)</span>

<span class="c"># Pain to set up DST-aware tzinfo classes.</span>
</div></div>
<div class="viewcode-block" id="first_sunday_on_or_after"><a class="viewcode-back" href="../../test.html#test.datetimetester.first_sunday_on_or_after">[docs]</a><span class="k">def</span> <span class="nf">first_sunday_on_or_after</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
    <span class="n">days_to_go</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">dt</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">days_to_go</span><span class="p">:</span>
        <span class="n">dt</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days_to_go</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dt</span>
</div>
<span class="n">ZERO</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">MINUTE</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">HOUR</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">DAY</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c"># In the US, DST starts at 2am (standard time) on the first Sunday in April.</span>
<span class="n">DSTSTART</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c"># and ends at 2am (DST time; 1am standard time) on the last Sunday of Oct,</span>
<span class="c"># which is the first Sunday on or after Oct 25.  Because we view 1:MM as</span>
<span class="c"># being standard time on that day, there is no spelling in local time of</span>
<span class="c"># the last hour of DST (that&#39;s 1:MM DST, but 1:MM is taken as standard time).</span>
<span class="n">DSTEND</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<div class="viewcode-block" id="USTimeZone"><a class="viewcode-back" href="../../test.html#test.datetimetester.USTimeZone">[docs]</a><span class="k">class</span> <span class="nc">USTimeZone</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hours</span><span class="p">,</span> <span class="n">reprname</span><span class="p">,</span> <span class="n">stdname</span><span class="p">,</span> <span class="n">dstname</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stdoffset</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="n">hours</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reprname</span> <span class="o">=</span> <span class="n">reprname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stdname</span> <span class="o">=</span> <span class="n">stdname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dstname</span> <span class="o">=</span> <span class="n">dstname</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reprname</span>

<div class="viewcode-block" id="USTimeZone.tzname"><a class="viewcode-back" href="../../test.html#test.datetimetester.USTimeZone.tzname">[docs]</a>    <span class="k">def</span> <span class="nf">tzname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dst</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dstname</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stdname</span>
</div>
<div class="viewcode-block" id="USTimeZone.utcoffset"><a class="viewcode-back" href="../../test.html#test.datetimetester.USTimeZone.utcoffset">[docs]</a>    <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stdoffset</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dst</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="USTimeZone.dst"><a class="viewcode-back" href="../../test.html#test.datetimetester.USTimeZone.dst">[docs]</a>    <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">dt</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">dt</span><span class="o">.</span><span class="n">tzinfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># An exception instead may be sensible here, in one or more of</span>
            <span class="c"># the cases.</span>
            <span class="k">return</span> <span class="n">ZERO</span>
        <span class="k">assert</span> <span class="n">dt</span><span class="o">.</span><span class="n">tzinfo</span> <span class="ow">is</span> <span class="bp">self</span>

        <span class="c"># Find first Sunday in April.</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">first_sunday_on_or_after</span><span class="p">(</span><span class="n">DSTSTART</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">))</span>
        <span class="k">assert</span> <span class="n">start</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span> <span class="o">==</span> <span class="mi">6</span> <span class="ow">and</span> <span class="n">start</span><span class="o">.</span><span class="n">month</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">start</span><span class="o">.</span><span class="n">day</span> <span class="o">&lt;=</span> <span class="mi">7</span>

        <span class="c"># Find last Sunday in October.</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">first_sunday_on_or_after</span><span class="p">(</span><span class="n">DSTEND</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">))</span>
        <span class="k">assert</span> <span class="n">end</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span> <span class="o">==</span> <span class="mi">6</span> <span class="ow">and</span> <span class="n">end</span><span class="o">.</span><span class="n">month</span> <span class="o">==</span> <span class="mi">10</span> <span class="ow">and</span> <span class="n">end</span><span class="o">.</span><span class="n">day</span> <span class="o">&gt;=</span> <span class="mi">25</span>

        <span class="c"># Can&#39;t compare naive to aware objects, so strip the timezone from</span>
        <span class="c"># dt first.</span>
        <span class="k">if</span> <span class="n">start</span> <span class="o">&lt;=</span> <span class="n">dt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">end</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">HOUR</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ZERO</span>
</div></div>
<span class="n">Eastern</span>  <span class="o">=</span> <span class="n">USTimeZone</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="s">&quot;Eastern&quot;</span><span class="p">,</span>  <span class="s">&quot;EST&quot;</span><span class="p">,</span> <span class="s">&quot;EDT&quot;</span><span class="p">)</span>
<span class="n">Central</span>  <span class="o">=</span> <span class="n">USTimeZone</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="s">&quot;Central&quot;</span><span class="p">,</span>  <span class="s">&quot;CST&quot;</span><span class="p">,</span> <span class="s">&quot;CDT&quot;</span><span class="p">)</span>
<span class="n">Mountain</span> <span class="o">=</span> <span class="n">USTimeZone</span><span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="s">&quot;Mountain&quot;</span><span class="p">,</span> <span class="s">&quot;MST&quot;</span><span class="p">,</span> <span class="s">&quot;MDT&quot;</span><span class="p">)</span>
<span class="n">Pacific</span>  <span class="o">=</span> <span class="n">USTimeZone</span><span class="p">(</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="s">&quot;Pacific&quot;</span><span class="p">,</span>  <span class="s">&quot;PST&quot;</span><span class="p">,</span> <span class="s">&quot;PDT&quot;</span><span class="p">)</span>
<span class="n">utc_real</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;UTC&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="c"># For better test coverage, we want another flavor of UTC that&#39;s west of</span>
<span class="c"># the Eastern and Pacific timezones.</span>
<span class="n">utc_fake</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">12</span><span class="o">*</span><span class="mi">60</span><span class="p">,</span> <span class="s">&quot;UTCfake&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<div class="viewcode-block" id="TestTimezoneConversions"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimezoneConversions">[docs]</a><span class="k">class</span> <span class="nc">TestTimezoneConversions</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c"># The DST switch times for 2002, in std time.</span>
    <span class="n">dston</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">dstoff</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">theclass</span> <span class="o">=</span> <span class="n">datetime</span>

    <span class="c"># Check a time that&#39;s inside DST.</span>
<div class="viewcode-block" id="TestTimezoneConversions.checkinside"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimezoneConversions.checkinside">[docs]</a>    <span class="k">def</span> <span class="nf">checkinside</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">tz</span><span class="p">,</span> <span class="n">utc</span><span class="p">,</span> <span class="n">dston</span><span class="p">,</span> <span class="n">dstoff</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">dst</span><span class="p">(),</span> <span class="n">HOUR</span><span class="p">)</span>

        <span class="c"># Conversion to our own timezone is always an identity.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">tz</span><span class="p">),</span> <span class="n">dt</span><span class="p">)</span>

        <span class="n">asutc</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">utc</span><span class="p">)</span>
        <span class="n">there_and_back</span> <span class="o">=</span> <span class="n">asutc</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">tz</span><span class="p">)</span>

        <span class="c"># Conversion to UTC and back isn&#39;t always an identity here,</span>
        <span class="c"># because there are redundant spellings (in local time) of</span>
        <span class="c"># UTC time when DST begins:  the clock jumps from 1:59:59</span>
        <span class="c"># to 3:00:00, and a local time of 2:MM:SS doesn&#39;t really</span>
        <span class="c"># make sense then.  The classes above treat 2:MM:SS as</span>
        <span class="c"># daylight time then (it&#39;s &quot;after 2am&quot;), really an alias</span>
        <span class="c"># for 1:MM:SS standard time.  The latter form is what</span>
        <span class="c"># conversion back from UTC produces.</span>
        <span class="k">if</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="o">==</span> <span class="n">dston</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="ow">and</span> <span class="n">dt</span><span class="o">.</span><span class="n">hour</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c"># We&#39;re in the redundant hour, and coming back from</span>
            <span class="c"># UTC gives the 1:MM:SS standard-time spelling.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">there_and_back</span> <span class="o">+</span> <span class="n">HOUR</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
            <span class="c"># Although during was considered to be in daylight</span>
            <span class="c"># time, there_and_back is not.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">there_and_back</span><span class="o">.</span><span class="n">dst</span><span class="p">(),</span> <span class="n">ZERO</span><span class="p">)</span>
            <span class="c"># They&#39;re the same times in UTC.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">there_and_back</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">utc</span><span class="p">),</span>
                             <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">utc</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># We&#39;re not in the redundant hour.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">there_and_back</span><span class="p">)</span>

        <span class="c"># Because we have a redundant spelling when DST begins, there is</span>
        <span class="c"># (unfortunately) an hour when DST ends that can&#39;t be spelled at all in</span>
        <span class="c"># local time.  When DST ends, the clock jumps from 1:59 back to 1:00</span>
        <span class="c"># again.  The hour 1:MM DST has no spelling then:  1:MM is taken to be</span>
        <span class="c"># standard time.  1:MM DST == 0:MM EST, but 0:MM is taken to be</span>
        <span class="c"># daylight time.  The hour 1:MM daylight == 0:MM standard can&#39;t be</span>
        <span class="c"># expressed in local time.  Nevertheless, we want conversion back</span>
        <span class="c"># from UTC to mimic the local clock&#39;s &quot;repeat an hour&quot; behavior.</span>
        <span class="n">nexthour_utc</span> <span class="o">=</span> <span class="n">asutc</span> <span class="o">+</span> <span class="n">HOUR</span>
        <span class="n">nexthour_tz</span> <span class="o">=</span> <span class="n">nexthour_utc</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">tz</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="o">==</span> <span class="n">dstoff</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="ow">and</span> <span class="n">dt</span><span class="o">.</span><span class="n">hour</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c"># We&#39;re in the hour before the last DST hour.  The last DST hour</span>
            <span class="c"># is ineffable.  We want the conversion back to repeat 1:MM.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nexthour_tz</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">nexthour_utc</span> <span class="o">+=</span> <span class="n">HOUR</span>
            <span class="n">nexthour_tz</span> <span class="o">=</span> <span class="n">nexthour_utc</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">tz</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nexthour_tz</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">nexthour_tz</span> <span class="o">-</span> <span class="n">dt</span><span class="p">,</span> <span class="n">HOUR</span><span class="p">)</span>

    <span class="c"># Check a time that&#39;s outside DST.</span></div>
<div class="viewcode-block" id="TestTimezoneConversions.checkoutside"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimezoneConversions.checkoutside">[docs]</a>    <span class="k">def</span> <span class="nf">checkoutside</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">tz</span><span class="p">,</span> <span class="n">utc</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">dst</span><span class="p">(),</span> <span class="n">ZERO</span><span class="p">)</span>

        <span class="c"># Conversion to our own timezone is always an identity.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">tz</span><span class="p">),</span> <span class="n">dt</span><span class="p">)</span>

        <span class="c"># Converting to UTC and back is an identity too.</span>
        <span class="n">asutc</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">utc</span><span class="p">)</span>
        <span class="n">there_and_back</span> <span class="o">=</span> <span class="n">asutc</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">tz</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">there_and_back</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimezoneConversions.convert_between_tz_and_utc"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimezoneConversions.convert_between_tz_and_utc">[docs]</a>    <span class="k">def</span> <span class="nf">convert_between_tz_and_utc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tz</span><span class="p">,</span> <span class="n">utc</span><span class="p">):</span>
        <span class="n">dston</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dston</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
        <span class="c"># Because 1:MM on the day DST ends is taken as being standard time,</span>
        <span class="c"># there is no spelling in tz for the last hour of daylight time.</span>
        <span class="c"># For purposes of the test, the last hour of DST is 0:MM, which is</span>
        <span class="c"># taken as being daylight time (and 1:MM is taken as being standard</span>
        <span class="c"># time).</span>
        <span class="n">dstoff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dstoff</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">delta</span> <span class="ow">in</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">weeks</span><span class="o">=</span><span class="mi">13</span><span class="p">),</span>
                      <span class="n">DAY</span><span class="p">,</span>
                      <span class="n">HOUR</span><span class="p">,</span>
                      <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                      <span class="n">timedelta</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">)):</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">checkinside</span><span class="p">(</span><span class="n">dston</span><span class="p">,</span> <span class="n">tz</span><span class="p">,</span> <span class="n">utc</span><span class="p">,</span> <span class="n">dston</span><span class="p">,</span> <span class="n">dstoff</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">during</span> <span class="ow">in</span> <span class="n">dston</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span> <span class="n">dstoff</span> <span class="o">-</span> <span class="n">delta</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">checkinside</span><span class="p">(</span><span class="n">during</span><span class="p">,</span> <span class="n">tz</span><span class="p">,</span> <span class="n">utc</span><span class="p">,</span> <span class="n">dston</span><span class="p">,</span> <span class="n">dstoff</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">checkoutside</span><span class="p">(</span><span class="n">dstoff</span><span class="p">,</span> <span class="n">tz</span><span class="p">,</span> <span class="n">utc</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">outside</span> <span class="ow">in</span> <span class="n">dston</span> <span class="o">-</span> <span class="n">delta</span><span class="p">,</span> <span class="n">dstoff</span> <span class="o">+</span> <span class="n">delta</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">checkoutside</span><span class="p">(</span><span class="n">outside</span><span class="p">,</span> <span class="n">tz</span><span class="p">,</span> <span class="n">utc</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTimezoneConversions.test_easy"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimezoneConversions.test_easy">[docs]</a>    <span class="k">def</span> <span class="nf">test_easy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Despite the name of this test, the endcases are excruciating.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convert_between_tz_and_utc</span><span class="p">(</span><span class="n">Eastern</span><span class="p">,</span> <span class="n">utc_real</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convert_between_tz_and_utc</span><span class="p">(</span><span class="n">Pacific</span><span class="p">,</span> <span class="n">utc_real</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convert_between_tz_and_utc</span><span class="p">(</span><span class="n">Eastern</span><span class="p">,</span> <span class="n">utc_fake</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convert_between_tz_and_utc</span><span class="p">(</span><span class="n">Pacific</span><span class="p">,</span> <span class="n">utc_fake</span><span class="p">)</span>
        <span class="c"># The next is really dancing near the edge.  It works because</span>
        <span class="c"># Pacific and Eastern are far enough apart that their &quot;problem</span>
        <span class="c"># hours&quot; don&#39;t overlap.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convert_between_tz_and_utc</span><span class="p">(</span><span class="n">Eastern</span><span class="p">,</span> <span class="n">Pacific</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convert_between_tz_and_utc</span><span class="p">(</span><span class="n">Pacific</span><span class="p">,</span> <span class="n">Eastern</span><span class="p">)</span>
        <span class="c"># OTOH, these fail!  Don&#39;t enable them.  The difficulty is that</span>
        <span class="c"># the edge case tests assume that every hour is representable in</span>
        <span class="c"># the &quot;utc&quot; class.  This is always true for a fixed-offset tzinfo</span>
        <span class="c"># class (lke utc_real and utc_fake), but not for Eastern or Central.</span>
        <span class="c"># For these adjacent DST-aware time zones, the range of time offsets</span>
        <span class="c"># tested ends up creating hours in the one that aren&#39;t representable</span>
        <span class="c"># in the other.  For the same reason, we would see failures in the</span>
        <span class="c"># Eastern vs Pacific tests too if we added 3*HOUR to the list of</span>
        <span class="c"># offset deltas in convert_between_tz_and_utc().</span>
        <span class="c">#</span>
        <span class="c"># self.convert_between_tz_and_utc(Eastern, Central)  # can&#39;t work</span>
        <span class="c"># self.convert_between_tz_and_utc(Central, Eastern)  # can&#39;t work</span>
</div>
<div class="viewcode-block" id="TestTimezoneConversions.test_tricky"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimezoneConversions.test_tricky">[docs]</a>    <span class="k">def</span> <span class="nf">test_tricky</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># 22:00 on day before daylight starts.</span>
        <span class="n">fourback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dston</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">ninewest</span> <span class="o">=</span> <span class="n">FixedOffset</span><span class="p">(</span><span class="o">-</span><span class="mi">9</span><span class="o">*</span><span class="mi">60</span><span class="p">,</span> <span class="s">&quot;-0900&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">fourback</span> <span class="o">=</span> <span class="n">fourback</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">ninewest</span><span class="p">)</span>
        <span class="c"># 22:00-0900 is 7:00 UTC == 2:00 EST == 3:00 DST.  Since it&#39;s &quot;after</span>
        <span class="c"># 2&quot;, we should get the 3 spelling.</span>
        <span class="c"># If we plug 22:00 the day before into Eastern, it &quot;looks like std</span>
        <span class="c"># time&quot;, so its offset is returned as -5, and -5 - -9 = 4.  Adding 4</span>
        <span class="c"># to 22:00 lands on 2:00, which makes no sense in local time (the</span>
        <span class="c"># local clock jumps from 1 to 3).  The point here is to make sure we</span>
        <span class="c"># get the 3 spelling.</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dston</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">got</span> <span class="o">=</span> <span class="n">fourback</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">Eastern</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>

        <span class="c"># Similar, but map to 6:00 UTC == 1:00 EST == 2:00 DST.  In that</span>
        <span class="c"># case we want the 1:00 spelling.</span>
        <span class="n">sixutc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dston</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">utc_real</span><span class="p">)</span>
        <span class="c"># Now 6:00 &quot;looks like daylight&quot;, so the offset wrt Eastern is -4,</span>
        <span class="c"># and adding -4-0 == -4 gives the 2:00 spelling.  We want the 1:00 EST</span>
        <span class="c"># spelling.</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dston</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">got</span> <span class="o">=</span> <span class="n">sixutc</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">Eastern</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>

        <span class="c"># Now on the day DST ends, we want &quot;repeat an hour&quot; behavior.</span>
        <span class="c">#  UTC  4:MM  5:MM  6:MM  7:MM  checking these</span>
        <span class="c">#  EST 23:MM  0:MM  1:MM  2:MM</span>
        <span class="c">#  EDT  0:MM  1:MM  2:MM  3:MM</span>
        <span class="c"># wall  0:MM  1:MM  1:MM  2:MM  against these</span>
        <span class="k">for</span> <span class="n">utc</span> <span class="ow">in</span> <span class="n">utc_real</span><span class="p">,</span> <span class="n">utc_fake</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tz</span> <span class="ow">in</span> <span class="n">Eastern</span><span class="p">,</span> <span class="n">Pacific</span><span class="p">:</span>
                <span class="n">first_std_hour</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dstoff</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c"># 23:MM</span>
                <span class="c"># Convert that to UTC.</span>
                <span class="n">first_std_hour</span> <span class="o">-=</span> <span class="n">tz</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
                <span class="c"># Adjust for possibly fake UTC.</span>
                <span class="n">asutc</span> <span class="o">=</span> <span class="n">first_std_hour</span> <span class="o">+</span> <span class="n">utc</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
                <span class="c"># First UTC hour to convert; this is 4:00 when utc=utc_real &amp;</span>
                <span class="c"># tz=Eastern.</span>
                <span class="n">asutcbase</span> <span class="o">=</span> <span class="n">asutc</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">utc</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">tzhour</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
                    <span class="n">expectedbase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dstoff</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="n">tzhour</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">minute</span> <span class="ow">in</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">59</span><span class="p">:</span>
                        <span class="n">expected</span> <span class="o">=</span> <span class="n">expectedbase</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="n">minute</span><span class="p">)</span>
                        <span class="n">asutc</span> <span class="o">=</span> <span class="n">asutcbase</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="n">minute</span><span class="p">)</span>
                        <span class="n">astz</span> <span class="o">=</span> <span class="n">asutc</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">tz</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">astz</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="bp">None</span><span class="p">),</span> <span class="n">expected</span><span class="p">)</span>
                    <span class="n">asutcbase</span> <span class="o">+=</span> <span class="n">HOUR</span>

</div>
<div class="viewcode-block" id="TestTimezoneConversions.test_bogus_dst"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimezoneConversions.test_bogus_dst">[docs]</a>    <span class="k">def</span> <span class="nf">test_bogus_dst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">ok</span><span class="p">(</span><span class="n">tzinfo</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="n">HOUR</span>
            <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="n">HOUR</span>

        <span class="n">now</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">utc_real</span><span class="p">)</span>
        <span class="c"># Doesn&#39;t blow up.</span>
        <span class="n">now</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">ok</span><span class="p">())</span>

        <span class="c"># Does blow up.</span>
        <span class="k">class</span> <span class="nc">notok</span><span class="p">(</span><span class="n">ok</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span> <span class="k">return</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">astimezone</span><span class="p">,</span> <span class="n">notok</span><span class="p">())</span>

        <span class="c"># Sometimes blow up. In the following, tzinfo.dst()</span>
        <span class="c"># implementation may return None or not None depending on</span>
        <span class="c"># whether DST is assumed to be in effect.  In this situation,</span>
        <span class="c"># a ValueError should be raised by astimezone().</span>
        <span class="k">class</span> <span class="nc">tricky_notok</span><span class="p">(</span><span class="n">ok</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">dt</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="mi">2000</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="mi">10</span><span class="o">*</span><span class="n">HOUR</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theclass</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">utc_real</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">,</span> <span class="n">tricky_notok</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestTimezoneConversions.test_fromutc"><a class="viewcode-back" href="../../test.html#test.datetimetester.TestTimezoneConversions.test_fromutc">[docs]</a>    <span class="k">def</span> <span class="nf">test_fromutc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">Eastern</span><span class="o">.</span><span class="n">fromutc</span><span class="p">)</span>   <span class="c"># not enough args</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">utc_real</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">Eastern</span><span class="o">.</span><span class="n">fromutc</span><span class="p">,</span> <span class="n">now</span><span class="p">)</span> <span class="c"># wrong tzinfo</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">Eastern</span><span class="p">)</span>   <span class="c"># insert correct tzinfo</span>
        <span class="n">enow</span> <span class="o">=</span> <span class="n">Eastern</span><span class="o">.</span><span class="n">fromutc</span><span class="p">(</span><span class="n">now</span><span class="p">)</span>         <span class="c"># doesn&#39;t blow up</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">enow</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">,</span> <span class="n">Eastern</span><span class="p">)</span> <span class="c"># has right tzinfo member</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">Eastern</span><span class="o">.</span><span class="n">fromutc</span><span class="p">,</span> <span class="n">now</span><span class="p">,</span> <span class="n">now</span><span class="p">)</span> <span class="c"># too many args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">Eastern</span><span class="o">.</span><span class="n">fromutc</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">())</span> <span class="c"># wrong type</span>

        <span class="c"># Always converts UTC to standard time.</span>
        <span class="k">class</span> <span class="nc">FauxUSTimeZone</span><span class="p">(</span><span class="n">USTimeZone</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">fromutc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">dt</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">stdoffset</span>
        <span class="n">FEastern</span>  <span class="o">=</span> <span class="n">FauxUSTimeZone</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="s">&quot;FEastern&quot;</span><span class="p">,</span>  <span class="s">&quot;FEST&quot;</span><span class="p">,</span> <span class="s">&quot;FEDT&quot;</span><span class="p">)</span>

        <span class="c">#  UTC  4:MM  5:MM  6:MM  7:MM  8:MM  9:MM</span>
        <span class="c">#  EST 23:MM  0:MM  1:MM  2:MM  3:MM  4:MM</span>
        <span class="c">#  EDT  0:MM  1:MM  2:MM  3:MM  4:MM  5:MM</span>

        <span class="c"># Check around DST start.</span>
        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dston</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">Eastern</span><span class="p">)</span>
        <span class="n">fstart</span> <span class="o">=</span> <span class="n">start</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">FEastern</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">wall</span> <span class="ow">in</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">expected</span> <span class="o">=</span> <span class="n">start</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="n">wall</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">wall</span> <span class="o">==</span> <span class="mi">23</span><span class="p">:</span>
                <span class="n">expected</span> <span class="o">-=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">got</span> <span class="o">=</span> <span class="n">Eastern</span><span class="o">.</span><span class="n">fromutc</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>

            <span class="n">expected</span> <span class="o">=</span> <span class="n">fstart</span> <span class="o">+</span> <span class="n">FEastern</span><span class="o">.</span><span class="n">stdoffset</span>
            <span class="n">got</span> <span class="o">=</span> <span class="n">FEastern</span><span class="o">.</span><span class="n">fromutc</span><span class="p">(</span><span class="n">fstart</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>

            <span class="c"># Ensure astimezone() calls fromutc() too.</span>
            <span class="n">got</span> <span class="o">=</span> <span class="n">fstart</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">utc_real</span><span class="p">)</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">FEastern</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>

            <span class="n">start</span> <span class="o">+=</span> <span class="n">HOUR</span>
            <span class="n">fstart</span> <span class="o">+=</span> <span class="n">HOUR</span>

        <span class="c"># Check around DST end.</span>
        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dstoff</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">Eastern</span><span class="p">)</span>
        <span class="n">fstart</span> <span class="o">=</span> <span class="n">start</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">FEastern</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">wall</span> <span class="ow">in</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">expected</span> <span class="o">=</span> <span class="n">start</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="n">wall</span><span class="p">)</span>
            <span class="n">got</span> <span class="o">=</span> <span class="n">Eastern</span><span class="o">.</span><span class="n">fromutc</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>

            <span class="n">expected</span> <span class="o">=</span> <span class="n">fstart</span> <span class="o">+</span> <span class="n">FEastern</span><span class="o">.</span><span class="n">stdoffset</span>
            <span class="n">got</span> <span class="o">=</span> <span class="n">FEastern</span><span class="o">.</span><span class="n">fromutc</span><span class="p">(</span><span class="n">fstart</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>

            <span class="c"># Ensure astimezone() calls fromutc() too.</span>
            <span class="n">got</span> <span class="o">=</span> <span class="n">fstart</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">utc_real</span><span class="p">)</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">FEastern</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>

            <span class="n">start</span> <span class="o">+=</span> <span class="n">HOUR</span>
            <span class="n">fstart</span> <span class="o">+=</span> <span class="n">HOUR</span>


<span class="c">#############################################################################</span>
<span class="c"># oddballs</span>
</div></div>
<div class="viewcode-block" id="Oddballs"><a class="viewcode-back" href="../../test.html#test.datetimetester.Oddballs">[docs]</a><span class="k">class</span> <span class="nc">Oddballs</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="Oddballs.test_bug_1028306"><a class="viewcode-back" href="../../test.html#test.datetimetester.Oddballs.test_bug_1028306">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_1028306</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Trying to compare a date to a datetime should act like a mixed-</span>
        <span class="c"># type comparison, despite that datetime is a subclass of date.</span>
        <span class="n">as_date</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
        <span class="n">as_datetime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span><span class="n">as_date</span><span class="p">,</span> <span class="n">time</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">as_date</span> <span class="o">!=</span> <span class="n">as_datetime</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">as_datetime</span> <span class="o">!=</span> <span class="n">as_date</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">as_date</span> <span class="o">==</span> <span class="n">as_datetime</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">as_datetime</span> <span class="o">==</span> <span class="n">as_date</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">as_date</span> <span class="o">&lt;</span> <span class="n">as_datetime</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">as_datetime</span> <span class="o">&lt;</span> <span class="n">as_date</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">as_date</span> <span class="o">&lt;=</span> <span class="n">as_datetime</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">as_datetime</span> <span class="o">&lt;=</span> <span class="n">as_date</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">as_date</span> <span class="o">&gt;</span> <span class="n">as_datetime</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">as_datetime</span> <span class="o">&gt;</span> <span class="n">as_date</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">as_date</span> <span class="o">&gt;=</span> <span class="n">as_datetime</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">as_datetime</span> <span class="o">&gt;=</span> <span class="n">as_date</span><span class="p">)</span>

        <span class="c"># Neverthelss, comparison should work with the base-class (date)</span>
        <span class="c"># projection if use of a date method is forced.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">as_date</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="n">as_datetime</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
        <span class="n">different_day</span> <span class="o">=</span> <span class="p">(</span><span class="n">as_date</span><span class="o">.</span><span class="n">day</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">20</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">as_different</span> <span class="o">=</span> <span class="n">as_datetime</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">day</span><span class="o">=</span> <span class="n">different_day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">as_date</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="n">as_different</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>

        <span class="c"># And date should compare with other subclasses of date.  If a</span>
        <span class="c"># subclass wants to stop this, it&#39;s up to the subclass to do so.</span>
        <span class="n">date_sc</span> <span class="o">=</span> <span class="n">SubclassDate</span><span class="p">(</span><span class="n">as_date</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">as_date</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">as_date</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">as_date</span><span class="p">,</span> <span class="n">date_sc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">date_sc</span><span class="p">,</span> <span class="n">as_date</span><span class="p">)</span>

        <span class="c"># Ditto for datetimes.</span>
        <span class="n">datetime_sc</span> <span class="o">=</span> <span class="n">SubclassDatetime</span><span class="p">(</span><span class="n">as_datetime</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">as_datetime</span><span class="o">.</span><span class="n">month</span><span class="p">,</span>
                                       <span class="n">as_date</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">as_datetime</span><span class="p">,</span> <span class="n">datetime_sc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">datetime_sc</span><span class="p">,</span> <span class="n">as_datetime</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="test_main"><a class="viewcode-back" href="../../test.html#test.datetimetester.test_main">[docs]</a><span class="k">def</span> <span class="nf">test_main</span><span class="p">():</span>
    <span class="n">support</span><span class="o">.</span><span class="n">run_unittest</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">test_main</span><span class="p">()</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Weldon Henson.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>