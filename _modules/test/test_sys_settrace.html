

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>test.test_sys_settrace &mdash; ArcherBashPYDocs 1.0.0. documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ArcherBashPYDocs 1.0.0. documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> ArcherBashPYDocs</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="simple">
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ArcherBashPYDocs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>test.test_sys_settrace</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for test.test_sys_settrace</h1><div class="highlight"><pre>
<span class="c"># Testing the line trace facility.</span>

<span class="kn">from</span> <span class="nn">test</span> <span class="kn">import</span> <span class="n">support</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">difflib</span>
<span class="kn">import</span> <span class="nn">gc</span>

<span class="c"># A very basic example.  If this fails, we&#39;re in deep trouble.</span>
<div class="viewcode-block" id="basic"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.basic">[docs]</a><span class="k">def</span> <span class="nf">basic</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">1</span>
</div>
<span class="n">basic</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)]</span>

<span class="c"># Many of the tests below are tricky because they involve pass statements.</span>
<span class="c"># If there is implicit control flow around a pass statement (in an except</span>
<span class="c"># clause or else caluse) under what conditions do you set a line number</span>
<span class="c"># following that clause?</span>


<span class="c"># The entire &quot;while 0:&quot; statement is optimized away.  No code</span>
<span class="c"># exists for it, so the line numbers skip directly from &quot;del x&quot;</span>
<span class="c"># to &quot;x = 1&quot;.</span>
<div class="viewcode-block" id="arigo_example"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.arigo_example">[docs]</a><span class="k">def</span> <span class="nf">arigo_example</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">del</span> <span class="n">x</span>
    <span class="k">while</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
</div>
<span class="n">arigo_example</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)]</span>

<span class="c"># check that lines consisting of just one instruction get traced:</span>
<div class="viewcode-block" id="one_instr_line"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.one_instr_line">[docs]</a><span class="k">def</span> <span class="nf">one_instr_line</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">del</span> <span class="n">x</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
</div>
<span class="n">one_instr_line</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)]</span>

<div class="viewcode-block" id="no_pop_tops"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_pop_tops">[docs]</a><span class="k">def</span> <span class="nf">no_pop_tops</span><span class="p">():</span>      <span class="c"># 0</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>               <span class="c"># 1</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>  <span class="c"># 2</span>
        <span class="k">if</span> <span class="n">a</span><span class="p">:</span>           <span class="c"># 3</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>       <span class="c"># 4</span>
        <span class="k">else</span><span class="p">:</span>           <span class="c"># 5</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>       <span class="c"># 6</span>
</div>
<span class="n">no_pop_tops</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)]</span>

<div class="viewcode-block" id="no_pop_blocks"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_pop_blocks">[docs]</a><span class="k">def</span> <span class="nf">no_pop_blocks</span><span class="p">():</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">y</span><span class="p">:</span>
        <span class="n">bla</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
</div>
<span class="n">no_pop_blocks</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)]</span>

<div class="viewcode-block" id="called"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.called">[docs]</a><span class="k">def</span> <span class="nf">called</span><span class="p">():</span> <span class="c"># line -3</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="call"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.call">[docs]</a><span class="k">def</span> <span class="nf">call</span><span class="p">():</span>   <span class="c"># line 0</span>
    <span class="n">called</span><span class="p">()</span>
</div>
<span class="n">call</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
               <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
               <span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
               <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
               <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">),</span>
               <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)]</span>

<div class="viewcode-block" id="raises"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.raises">[docs]</a><span class="k">def</span> <span class="nf">raises</span><span class="p">():</span>
    <span class="k">raise</span> <span class="ne">Exception</span>
</div>
<div class="viewcode-block" id="test_raise"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.test_raise">[docs]</a><span class="k">def</span> <span class="nf">test_raise</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">raises</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
</div>
<span class="n">test_raise</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
                     <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                     <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                     <span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
                     <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                     <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;exception&#39;</span><span class="p">),</span>
                     <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">),</span>
                     <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;exception&#39;</span><span class="p">),</span>
                     <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                     <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                     <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)]</span>

<span class="k">def</span> <span class="nf">_settrace_and_return</span><span class="p">(</span><span class="n">tracefunc</span><span class="p">):</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="n">tracefunc</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_back</span><span class="o">.</span><span class="n">f_trace</span> <span class="o">=</span> <span class="n">tracefunc</span>
<div class="viewcode-block" id="settrace_and_return"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.settrace_and_return">[docs]</a><span class="k">def</span> <span class="nf">settrace_and_return</span><span class="p">(</span><span class="n">tracefunc</span><span class="p">):</span>
    <span class="n">_settrace_and_return</span><span class="p">(</span><span class="n">tracefunc</span><span class="p">)</span>
</div>
<span class="n">settrace_and_return</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)]</span>

<span class="k">def</span> <span class="nf">_settrace_and_raise</span><span class="p">(</span><span class="n">tracefunc</span><span class="p">):</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="n">tracefunc</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_back</span><span class="o">.</span><span class="n">f_trace</span> <span class="o">=</span> <span class="n">tracefunc</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span>
<div class="viewcode-block" id="settrace_and_raise"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.settrace_and_raise">[docs]</a><span class="k">def</span> <span class="nf">settrace_and_raise</span><span class="p">(</span><span class="n">tracefunc</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">_settrace_and_raise</span><span class="p">(</span><span class="n">tracefunc</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="k">pass</span>
</div>
<span class="n">settrace_and_raise</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;exception&#39;</span><span class="p">),</span>
                             <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                             <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                             <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)]</span>

<span class="c"># implicit return example</span>
<span class="c"># This test is interesting because of the else: pass</span>
<span class="c"># part of the code.  The code generate for the true</span>
<span class="c"># part of the if contains a jump past the else branch.</span>
<span class="c"># The compiler then generates an implicit &quot;return None&quot;</span>
<span class="c"># Internally, the compiler visits the pass statement</span>
<span class="c"># and stores its line number for use on the next instruction.</span>
<span class="c"># The next instruction is the implicit return None.</span>
<div class="viewcode-block" id="ireturn_example"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.ireturn_example">[docs]</a><span class="k">def</span> <span class="nf">ireturn_example</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">pass</span>
</div>
<span class="n">ireturn_example</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)]</span>

<span class="c"># Tight loop with while(1) example (SF #765624)</span>
<div class="viewcode-block" id="tightloop_example"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.tightloop_example">[docs]</a><span class="k">def</span> <span class="nf">tightloop_example</span><span class="p">():</span>
    <span class="n">items</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
        <span class="k">pass</span>
</div>
<span class="n">tightloop_example</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;exception&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)]</span>

<div class="viewcode-block" id="tighterloop_example"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.tighterloop_example">[docs]</a><span class="k">def</span> <span class="nf">tighterloop_example</span><span class="p">():</span>
    <span class="n">items</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span> <span class="n">i</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
        <span class="k">pass</span>
</div>
<span class="n">tighterloop_example</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;exception&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)]</span>

<div class="viewcode-block" id="generator_function"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.generator_function">[docs]</a><span class="k">def</span> <span class="nf">generator_function</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span> <span class="bp">True</span>
        <span class="s">&quot;continued&quot;</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="s">&quot;finally&quot;</span></div>
<div class="viewcode-block" id="generator_example"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.generator_example">[docs]</a><span class="k">def</span> <span class="nf">generator_example</span><span class="p">():</span>
    <span class="c"># any() will leave the generator before its end</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">generator_function</span><span class="p">())</span>

    <span class="c"># the following lines were not traced</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">x</span>
</div>
<span class="n">generator_example</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
                             <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                             <span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
                             <span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                             <span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                             <span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">),</span>
                             <span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
                             <span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;exception&#39;</span><span class="p">),</span>
                             <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
                             <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)]</span> <span class="o">+</span>
                            <span class="p">[(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">)]</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span>
                            <span class="p">[(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)])</span>


<div class="viewcode-block" id="Tracer"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.Tracer">[docs]</a><span class="k">class</span> <span class="nc">Tracer</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[]</span>
<div class="viewcode-block" id="Tracer.trace"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.Tracer.trace">[docs]</a>    <span class="k">def</span> <span class="nf">trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">frame</span><span class="o">.</span><span class="n">f_lineno</span><span class="p">,</span> <span class="n">event</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace</span></div>
<div class="viewcode-block" id="Tracer.traceWithGenexp"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.Tracer.traceWithGenexp">[docs]</a>    <span class="k">def</span> <span class="nf">traceWithGenexp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="p">(</span><span class="n">o</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">frame</span><span class="o">.</span><span class="n">f_lineno</span><span class="p">,</span> <span class="n">event</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace</span>
</div></div>
<div class="viewcode-block" id="TraceTestCase"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase">[docs]</a><span class="k">class</span> <span class="nc">TraceTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="c"># Disable gc collection when tracing, otherwise the</span>
    <span class="c"># deallocators may be traced as well.</span>
<div class="viewcode-block" id="TraceTestCase.setUp"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">using_gc</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">isenabled</span><span class="p">()</span>
        <span class="n">gc</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addCleanup</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">gettrace</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TraceTestCase.tearDown"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">using_gc</span><span class="p">:</span>
            <span class="n">gc</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="TraceTestCase.compare_events"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.compare_events">[docs]</a>    <span class="k">def</span> <span class="nf">compare_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line_offset</span><span class="p">,</span> <span class="n">events</span><span class="p">,</span> <span class="n">expected_events</span><span class="p">):</span>
        <span class="n">events</span> <span class="o">=</span> <span class="p">[(</span><span class="n">l</span> <span class="o">-</span> <span class="n">line_offset</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="ow">in</span> <span class="n">events</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">events</span> <span class="o">!=</span> <span class="n">expected_events</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span>
                <span class="s">&quot;events did not match expectation:</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span>
                <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">difflib</span><span class="o">.</span><span class="n">ndiff</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">expected_events</span><span class="p">],</span>
                                        <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">events</span><span class="p">])))</span>
</div>
<div class="viewcode-block" id="TraceTestCase.run_and_compare"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.run_and_compare">[docs]</a>    <span class="k">def</span> <span class="nf">run_and_compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">events</span><span class="p">):</span>
        <span class="n">tracer</span> <span class="o">=</span> <span class="n">Tracer</span><span class="p">()</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="n">tracer</span><span class="o">.</span><span class="n">trace</span><span class="p">)</span>
        <span class="n">func</span><span class="p">()</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compare_events</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">__code__</span><span class="o">.</span><span class="n">co_firstlineno</span><span class="p">,</span>
                            <span class="n">tracer</span><span class="o">.</span><span class="n">events</span><span class="p">,</span> <span class="n">events</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TraceTestCase.run_test"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.run_test">[docs]</a>    <span class="k">def</span> <span class="nf">run_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_and_compare</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="n">events</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TraceTestCase.run_test2"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.run_test2">[docs]</a>    <span class="k">def</span> <span class="nf">run_test2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="n">tracer</span> <span class="o">=</span> <span class="n">Tracer</span><span class="p">()</span>
        <span class="n">func</span><span class="p">(</span><span class="n">tracer</span><span class="o">.</span><span class="n">trace</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compare_events</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">__code__</span><span class="o">.</span><span class="n">co_firstlineno</span><span class="p">,</span>
                            <span class="n">tracer</span><span class="o">.</span><span class="n">events</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="n">events</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TraceTestCase.test_set_and_retrieve_none"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_set_and_retrieve_none">[docs]</a>    <span class="k">def</span> <span class="nf">test_set_and_retrieve_none</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">sys</span><span class="o">.</span><span class="n">gettrace</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="TraceTestCase.test_set_and_retrieve_func"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_set_and_retrieve_func">[docs]</a>    <span class="k">def</span> <span class="nf">test_set_and_retrieve_func</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">sys</span><span class="o">.</span><span class="n">gettrace</span><span class="p">()</span> <span class="ow">is</span> <span class="n">fn</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TraceTestCase.test_01_basic"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_01_basic">[docs]</a>    <span class="k">def</span> <span class="nf">test_01_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">basic</span><span class="p">)</span></div>
<div class="viewcode-block" id="TraceTestCase.test_02_arigo"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_02_arigo">[docs]</a>    <span class="k">def</span> <span class="nf">test_02_arigo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">arigo_example</span><span class="p">)</span></div>
<div class="viewcode-block" id="TraceTestCase.test_03_one_instr"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_03_one_instr">[docs]</a>    <span class="k">def</span> <span class="nf">test_03_one_instr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">one_instr_line</span><span class="p">)</span></div>
<div class="viewcode-block" id="TraceTestCase.test_04_no_pop_blocks"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_04_no_pop_blocks">[docs]</a>    <span class="k">def</span> <span class="nf">test_04_no_pop_blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">no_pop_blocks</span><span class="p">)</span></div>
<div class="viewcode-block" id="TraceTestCase.test_05_no_pop_tops"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_05_no_pop_tops">[docs]</a>    <span class="k">def</span> <span class="nf">test_05_no_pop_tops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">no_pop_tops</span><span class="p">)</span></div>
<div class="viewcode-block" id="TraceTestCase.test_06_call"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_06_call">[docs]</a>    <span class="k">def</span> <span class="nf">test_06_call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">call</span><span class="p">)</span></div>
<div class="viewcode-block" id="TraceTestCase.test_07_raise"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_07_raise">[docs]</a>    <span class="k">def</span> <span class="nf">test_07_raise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">test_raise</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TraceTestCase.test_08_settrace_and_return"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_08_settrace_and_return">[docs]</a>    <span class="k">def</span> <span class="nf">test_08_settrace_and_return</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test2</span><span class="p">(</span><span class="n">settrace_and_return</span><span class="p">)</span></div>
<div class="viewcode-block" id="TraceTestCase.test_09_settrace_and_raise"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_09_settrace_and_raise">[docs]</a>    <span class="k">def</span> <span class="nf">test_09_settrace_and_raise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test2</span><span class="p">(</span><span class="n">settrace_and_raise</span><span class="p">)</span></div>
<div class="viewcode-block" id="TraceTestCase.test_10_ireturn"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_10_ireturn">[docs]</a>    <span class="k">def</span> <span class="nf">test_10_ireturn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">ireturn_example</span><span class="p">)</span></div>
<div class="viewcode-block" id="TraceTestCase.test_11_tightloop"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_11_tightloop">[docs]</a>    <span class="k">def</span> <span class="nf">test_11_tightloop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">tightloop_example</span><span class="p">)</span></div>
<div class="viewcode-block" id="TraceTestCase.test_12_tighterloop"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_12_tighterloop">[docs]</a>    <span class="k">def</span> <span class="nf">test_12_tighterloop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">tighterloop_example</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TraceTestCase.test_13_genexp"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_13_genexp">[docs]</a>    <span class="k">def</span> <span class="nf">test_13_genexp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">generator_example</span><span class="p">)</span>
        <span class="c"># issue1265: if the trace function contains a generator,</span>
        <span class="c"># and if the traced function contains another generator</span>
        <span class="c"># that is not completely exhausted, the trace stopped.</span>
        <span class="c"># Worse: the &#39;finally&#39; clause was not invoked.</span>
        <span class="n">tracer</span> <span class="o">=</span> <span class="n">Tracer</span><span class="p">()</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="n">tracer</span><span class="o">.</span><span class="n">traceWithGenexp</span><span class="p">)</span>
        <span class="n">generator_example</span><span class="p">()</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compare_events</span><span class="p">(</span><span class="n">generator_example</span><span class="o">.</span><span class="n">__code__</span><span class="o">.</span><span class="n">co_firstlineno</span><span class="p">,</span>
                            <span class="n">tracer</span><span class="o">.</span><span class="n">events</span><span class="p">,</span> <span class="n">generator_example</span><span class="o">.</span><span class="n">events</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TraceTestCase.test_14_onliner_if"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_14_onliner_if">[docs]</a>    <span class="k">def</span> <span class="nf">test_14_onliner_if</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">onliners</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">True</span><span class="p">:</span> <span class="bp">False</span>
            <span class="k">else</span><span class="p">:</span> <span class="bp">True</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_and_compare</span><span class="p">(</span>
            <span class="n">onliners</span><span class="p">,</span>
            <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="TraceTestCase.test_15_loops"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_15_loops">[docs]</a>    <span class="k">def</span> <span class="nf">test_15_loops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># issue1750076: &quot;while&quot; expression is skipped by debugger</span>
        <span class="k">def</span> <span class="nf">for_example</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
                <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_and_compare</span><span class="p">(</span>
            <span class="n">for_example</span><span class="p">,</span>
            <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)])</span>

        <span class="k">def</span> <span class="nf">while_example</span><span class="p">():</span>
            <span class="c"># While expression should be traced on every loop</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">while</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_and_compare</span><span class="p">(</span>
            <span class="n">while_example</span><span class="p">,</span>
            <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="TraceTestCase.test_16_blank_lines"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.TraceTestCase.test_16_blank_lines">[docs]</a>    <span class="k">def</span> <span class="nf">test_16_blank_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">exec</span><span class="p">(</span><span class="s">&quot;def f():</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">*</span> <span class="mi">256</span> <span class="o">+</span> <span class="s">&quot;    pass&quot;</span><span class="p">,</span> <span class="n">namespace</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_and_compare</span><span class="p">(</span>
            <span class="n">namespace</span><span class="p">[</span><span class="s">&quot;f&quot;</span><span class="p">],</span>
            <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">257</span><span class="p">,</span> <span class="s">&#39;line&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">257</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">)])</span>

</div></div>
<div class="viewcode-block" id="RaisingTraceFuncTestCase"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.RaisingTraceFuncTestCase">[docs]</a><span class="k">class</span> <span class="nc">RaisingTraceFuncTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="RaisingTraceFuncTestCase.setUp"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.RaisingTraceFuncTestCase.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addCleanup</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">gettrace</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="RaisingTraceFuncTestCase.trace"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.RaisingTraceFuncTestCase.trace">[docs]</a>    <span class="k">def</span> <span class="nf">trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A trace function that raises an exception in response to a</span>
<span class="sd">        specific trace event.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">raiseOnEvent</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span> <span class="c"># just something that isn&#39;t RuntimeError</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace</span>
</div>
<div class="viewcode-block" id="RaisingTraceFuncTestCase.f"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.RaisingTraceFuncTestCase.f">[docs]</a>    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The function to trace; raises an exception if that&#39;s the case</span>
<span class="sd">        we&#39;re testing, so that the &#39;exception&#39; trace event fires.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">raiseOnEvent</span> <span class="o">==</span> <span class="s">&#39;exception&#39;</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="RaisingTraceFuncTestCase.run_test_for_event"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.RaisingTraceFuncTestCase.run_test_for_event">[docs]</a>    <span class="k">def</span> <span class="nf">run_test_for_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Tests that an exception raised in response to the given event is</span>
<span class="sd">        handled OK.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raiseOnEvent</span> <span class="o">=</span> <span class="n">event</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getrecursionlimit</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;exception not raised!&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;recursion counter not reset&quot;</span><span class="p">)</span>

    <span class="c"># Test the handling of exceptions raised by each kind of trace event.</span></div>
<div class="viewcode-block" id="RaisingTraceFuncTestCase.test_call"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.RaisingTraceFuncTestCase.test_call">[docs]</a>    <span class="k">def</span> <span class="nf">test_call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test_for_event</span><span class="p">(</span><span class="s">&#39;call&#39;</span><span class="p">)</span></div>
<div class="viewcode-block" id="RaisingTraceFuncTestCase.test_line"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.RaisingTraceFuncTestCase.test_line">[docs]</a>    <span class="k">def</span> <span class="nf">test_line</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test_for_event</span><span class="p">(</span><span class="s">&#39;line&#39;</span><span class="p">)</span></div>
<div class="viewcode-block" id="RaisingTraceFuncTestCase.test_return"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.RaisingTraceFuncTestCase.test_return">[docs]</a>    <span class="k">def</span> <span class="nf">test_return</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test_for_event</span><span class="p">(</span><span class="s">&#39;return&#39;</span><span class="p">)</span></div>
<div class="viewcode-block" id="RaisingTraceFuncTestCase.test_exception"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.RaisingTraceFuncTestCase.test_exception">[docs]</a>    <span class="k">def</span> <span class="nf">test_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test_for_event</span><span class="p">(</span><span class="s">&#39;exception&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="RaisingTraceFuncTestCase.test_trash_stack"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.RaisingTraceFuncTestCase.test_trash_stack">[docs]</a>    <span class="k">def</span> <span class="nf">test_trash_stack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
                <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>  <span class="c"># line tracing will raise an exception at this line</span>

        <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">why</span><span class="p">,</span> <span class="n">extra</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">why</span> <span class="o">==</span> <span class="s">&#39;line&#39;</span> <span class="ow">and</span>
                <span class="n">frame</span><span class="o">.</span><span class="n">f_lineno</span> <span class="o">==</span> <span class="n">f</span><span class="o">.</span><span class="n">__code__</span><span class="o">.</span><span class="n">co_firstlineno</span> <span class="o">+</span> <span class="mi">2</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;i am crashing&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">g</span>

        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">f</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
            <span class="c"># the test is really that this doesn&#39;t segfault:</span>
            <span class="kn">import</span> <span class="nn">gc</span>
            <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;exception not propagated&quot;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="RaisingTraceFuncTestCase.test_exception_arguments"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.RaisingTraceFuncTestCase.test_exception_arguments">[docs]</a>    <span class="k">def</span> <span class="nf">test_exception_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="c"># this should raise an error</span>
            <span class="n">x</span><span class="o">.</span><span class="n">no_such_attr</span>
        <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">event</span> <span class="o">==</span> <span class="s">&#39;exception&#39;</span><span class="p">):</span>
                <span class="nb">type</span><span class="p">,</span> <span class="n">exception</span><span class="p">,</span> <span class="n">trace</span> <span class="o">=</span> <span class="n">arg</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">exception</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">g</span>

        <span class="n">existing</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">gettrace</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">f</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="c"># this is expected</span>
                <span class="k">pass</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="n">existing</span><span class="p">)</span>


<span class="c"># &#39;Jump&#39; tests: assigning to frame.f_lineno within a trace function</span>
<span class="c"># moves the execution position - it&#39;s how debuggers implement a Jump</span>
<span class="c"># command (aka. &quot;Set next statement&quot;).</span>
</div></div>
<div class="viewcode-block" id="JumpTracer"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTracer">[docs]</a><span class="k">class</span> <span class="nc">JumpTracer</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Defines a trace function that jumps from one place to another,</span>
<span class="sd">    with the source and destination lines of the jump being defined by</span>
<span class="sd">    the &#39;jump&#39; property of the function under test.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jumpFrom</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span><span class="n">jump</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jumpTo</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span><span class="n">jump</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">done</span> <span class="o">=</span> <span class="bp">False</span>

<div class="viewcode-block" id="JumpTracer.trace"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTracer.trace">[docs]</a>    <span class="k">def</span> <span class="nf">trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">done</span> <span class="ow">and</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_code</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">__code__</span><span class="p">:</span>
            <span class="n">firstLine</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_firstlineno</span>
            <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s">&#39;line&#39;</span> <span class="ow">and</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_lineno</span> <span class="o">==</span> <span class="n">firstLine</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">jumpFrom</span><span class="p">:</span>
                <span class="c"># Cope with non-integer self.jumpTo (because of</span>
                <span class="c"># no_jump_to_non_integers below).</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">frame</span><span class="o">.</span><span class="n">f_lineno</span> <span class="o">=</span> <span class="n">firstLine</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">jumpTo</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                    <span class="n">frame</span><span class="o">.</span><span class="n">f_lineno</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">jumpTo</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">done</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace</span>

<span class="c"># The first set of &#39;jump&#39; tests are for things that are allowed:</span>
</div></div>
<div class="viewcode-block" id="jump_simple_forwards"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.jump_simple_forwards">[docs]</a><span class="k">def</span> <span class="nf">jump_simple_forwards</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</div>
<span class="n">jump_simple_forwards</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">jump_simple_forwards</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span>

<div class="viewcode-block" id="jump_simple_backwards"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.jump_simple_backwards">[docs]</a><span class="k">def</span> <span class="nf">jump_simple_backwards</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</div>
<span class="n">jump_simple_backwards</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">jump_simple_backwards</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<div class="viewcode-block" id="jump_out_of_block_forwards"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.jump_out_of_block_forwards">[docs]</a><span class="k">def</span> <span class="nf">jump_out_of_block_forwards</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span>  <span class="c"># Also tests jumping over a block</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</div>
<span class="n">jump_out_of_block_forwards</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">jump_out_of_block_forwards</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<div class="viewcode-block" id="jump_out_of_block_backwards"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.jump_out_of_block_backwards">[docs]</a><span class="k">def</span> <span class="nf">jump_out_of_block_backwards</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span>  <span class="c"># Also tests jumping over a block</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
    <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
</div>
<span class="n">jump_out_of_block_backwards</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">jump_out_of_block_backwards</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>

<div class="viewcode-block" id="jump_to_codeless_line"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.jump_to_codeless_line">[docs]</a><span class="k">def</span> <span class="nf">jump_to_codeless_line</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="c"># Jumping to this line should skip to the next one.</span>
    <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</div>
<span class="n">jump_to_codeless_line</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">jump_to_codeless_line</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span>

<div class="viewcode-block" id="jump_to_same_line"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.jump_to_same_line">[docs]</a><span class="k">def</span> <span class="nf">jump_to_same_line</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</div>
<span class="n">jump_to_same_line</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">jump_to_same_line</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="c"># Tests jumping within a finally block, and over one.</span>
<div class="viewcode-block" id="jump_in_nested_finally"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.jump_in_nested_finally">[docs]</a><span class="k">def</span> <span class="nf">jump_in_nested_finally</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
</div>
<span class="n">jump_in_nested_finally</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="n">jump_in_nested_finally</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>

<span class="c"># The second set of &#39;jump&#39; tests are for things that are not allowed:</span>

<div class="viewcode-block" id="no_jump_too_far_forwards"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_jump_too_far_forwards">[docs]</a><span class="k">def</span> <span class="nf">no_jump_too_far_forwards</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;after&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</div>
<span class="n">no_jump_too_far_forwards</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">no_jump_too_far_forwards</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="bp">True</span><span class="p">]</span>

<div class="viewcode-block" id="no_jump_too_far_backwards"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_jump_too_far_backwards">[docs]</a><span class="k">def</span> <span class="nf">no_jump_too_far_backwards</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;before&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</div>
<span class="n">no_jump_too_far_backwards</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">no_jump_too_far_backwards</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="bp">True</span><span class="p">]</span>

<span class="c"># Test each kind of &#39;except&#39; line.</span>
<div class="viewcode-block" id="no_jump_to_except_1"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_jump_to_except_1">[docs]</a><span class="k">def</span> <span class="nf">no_jump_to_except_1</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;except&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</div>
<span class="n">no_jump_to_except_1</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">no_jump_to_except_1</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="bp">True</span><span class="p">]</span>

<div class="viewcode-block" id="no_jump_to_except_2"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_jump_to_except_2">[docs]</a><span class="k">def</span> <span class="nf">no_jump_to_except_2</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;except&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</div>
<span class="n">no_jump_to_except_2</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">no_jump_to_except_2</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="bp">True</span><span class="p">]</span>

<div class="viewcode-block" id="no_jump_to_except_3"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_jump_to_except_3">[docs]</a><span class="k">def</span> <span class="nf">no_jump_to_except_3</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;except&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</div>
<span class="n">no_jump_to_except_3</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">no_jump_to_except_3</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="bp">True</span><span class="p">]</span>

<div class="viewcode-block" id="no_jump_to_except_4"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_jump_to_except_4">[docs]</a><span class="k">def</span> <span class="nf">no_jump_to_except_4</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;except&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</div>
<span class="n">no_jump_to_except_4</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">no_jump_to_except_4</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="bp">True</span><span class="p">]</span>

<div class="viewcode-block" id="no_jump_forwards_into_block"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_jump_forwards_into_block">[docs]</a><span class="k">def</span> <span class="nf">no_jump_forwards_into_block</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;into&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</div>
<span class="n">no_jump_forwards_into_block</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">no_jump_forwards_into_block</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="bp">True</span><span class="p">]</span>

<div class="viewcode-block" id="no_jump_backwards_into_block"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_jump_backwards_into_block">[docs]</a><span class="k">def</span> <span class="nf">no_jump_backwards_into_block</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;into&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</div>
<span class="n">no_jump_backwards_into_block</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">no_jump_backwards_into_block</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">]</span>

<div class="viewcode-block" id="no_jump_into_finally_block"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_jump_into_finally_block">[docs]</a><span class="k">def</span> <span class="nf">no_jump_into_finally_block</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;finally&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</div>
<span class="n">no_jump_into_finally_block</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">no_jump_into_finally_block</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="bp">True</span><span class="p">]</span>  <span class="c"># The &#39;finally&#39; still runs</span>

<div class="viewcode-block" id="no_jump_out_of_finally_block"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_jump_out_of_finally_block">[docs]</a><span class="k">def</span> <span class="nf">no_jump_out_of_finally_block</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;finally&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</div>
<span class="n">no_jump_out_of_finally_block</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">no_jump_out_of_finally_block</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">]</span>

<span class="c"># This verifies the line-numbers-must-be-integers rule.</span>
<div class="viewcode-block" id="no_jump_to_non_integers"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_jump_to_non_integers">[docs]</a><span class="k">def</span> <span class="nf">no_jump_to_non_integers</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;integer&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</div>
<span class="n">no_jump_to_non_integers</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&quot;Spam&quot;</span><span class="p">)</span>
<span class="n">no_jump_to_non_integers</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="bp">True</span><span class="p">]</span>

<div class="viewcode-block" id="jump_across_with"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.jump_across_with">[docs]</a><span class="k">def</span> <span class="nf">jump_across_with</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">support</span><span class="o">.</span><span class="n">TESTFN</span><span class="p">,</span> <span class="s">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">support</span><span class="o">.</span><span class="n">TESTFN</span><span class="p">,</span> <span class="s">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">pass</span></div>
<span class="n">jump_across_with</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">jump_across_with</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c"># This verifies that you can&#39;t set f_lineno via _getframe or similar</span>
<span class="c"># trickery.</span>
<div class="viewcode-block" id="no_jump_without_trace_function"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.no_jump_without_trace_function">[docs]</a><span class="k">def</span> <span class="nf">no_jump_without_trace_function</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">previous_frame</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_back</span>
        <span class="n">previous_frame</span><span class="o">.</span><span class="n">f_lineno</span> <span class="o">=</span> <span class="n">previous_frame</span><span class="o">.</span><span class="n">f_lineno</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c"># This is the exception we wanted; make sure the error message</span>
        <span class="c"># talks about trace functions.</span>
        <span class="k">if</span> <span class="s">&#39;trace&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
            <span class="k">raise</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c"># Something&#39;s wrong - the expected exception wasn&#39;t raised.</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;Trace-function-less jump failed to fail&quot;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="JumpTestCase"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase">[docs]</a><span class="k">class</span> <span class="nc">JumpTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="JumpTestCase.setUp"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addCleanup</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">gettrace</span><span class="p">())</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="JumpTestCase.compare_jump_output"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.compare_jump_output">[docs]</a>    <span class="k">def</span> <span class="nf">compare_jump_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">received</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">received</span> <span class="o">!=</span> <span class="n">expected</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span> <span class="s">&quot;Outputs don&#39;t match:</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span>
                       <span class="s">&quot;Expected: &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span>
                       <span class="s">&quot;Received: &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">received</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="JumpTestCase.run_test"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.run_test">[docs]</a>    <span class="k">def</span> <span class="nf">run_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="n">tracer</span> <span class="o">=</span> <span class="n">JumpTracer</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="n">tracer</span><span class="o">.</span><span class="n">trace</span><span class="p">)</span>
        <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">func</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compare_jump_output</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="JumpTestCase.test_01_jump_simple_forwards"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_01_jump_simple_forwards">[docs]</a>    <span class="k">def</span> <span class="nf">test_01_jump_simple_forwards</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">jump_simple_forwards</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_02_jump_simple_backwards"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_02_jump_simple_backwards">[docs]</a>    <span class="k">def</span> <span class="nf">test_02_jump_simple_backwards</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">jump_simple_backwards</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_03_jump_out_of_block_forwards"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_03_jump_out_of_block_forwards">[docs]</a>    <span class="k">def</span> <span class="nf">test_03_jump_out_of_block_forwards</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">jump_out_of_block_forwards</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_04_jump_out_of_block_backwards"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_04_jump_out_of_block_backwards">[docs]</a>    <span class="k">def</span> <span class="nf">test_04_jump_out_of_block_backwards</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">jump_out_of_block_backwards</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_05_jump_to_codeless_line"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_05_jump_to_codeless_line">[docs]</a>    <span class="k">def</span> <span class="nf">test_05_jump_to_codeless_line</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">jump_to_codeless_line</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_06_jump_to_same_line"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_06_jump_to_same_line">[docs]</a>    <span class="k">def</span> <span class="nf">test_06_jump_to_same_line</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">jump_to_same_line</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_07_jump_in_nested_finally"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_07_jump_in_nested_finally">[docs]</a>    <span class="k">def</span> <span class="nf">test_07_jump_in_nested_finally</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">jump_in_nested_finally</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_08_no_jump_too_far_forwards"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_08_no_jump_too_far_forwards">[docs]</a>    <span class="k">def</span> <span class="nf">test_08_no_jump_too_far_forwards</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">no_jump_too_far_forwards</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_09_no_jump_too_far_backwards"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_09_no_jump_too_far_backwards">[docs]</a>    <span class="k">def</span> <span class="nf">test_09_no_jump_too_far_backwards</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">no_jump_too_far_backwards</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_10_no_jump_to_except_1"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_10_no_jump_to_except_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_10_no_jump_to_except_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">no_jump_to_except_1</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_11_no_jump_to_except_2"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_11_no_jump_to_except_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_11_no_jump_to_except_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">no_jump_to_except_2</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_12_no_jump_to_except_3"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_12_no_jump_to_except_3">[docs]</a>    <span class="k">def</span> <span class="nf">test_12_no_jump_to_except_3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">no_jump_to_except_3</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_13_no_jump_to_except_4"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_13_no_jump_to_except_4">[docs]</a>    <span class="k">def</span> <span class="nf">test_13_no_jump_to_except_4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">no_jump_to_except_4</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_14_no_jump_forwards_into_block"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_14_no_jump_forwards_into_block">[docs]</a>    <span class="k">def</span> <span class="nf">test_14_no_jump_forwards_into_block</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">no_jump_forwards_into_block</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_15_no_jump_backwards_into_block"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_15_no_jump_backwards_into_block">[docs]</a>    <span class="k">def</span> <span class="nf">test_15_no_jump_backwards_into_block</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">no_jump_backwards_into_block</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_16_no_jump_into_finally_block"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_16_no_jump_into_finally_block">[docs]</a>    <span class="k">def</span> <span class="nf">test_16_no_jump_into_finally_block</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">no_jump_into_finally_block</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_17_no_jump_out_of_finally_block"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_17_no_jump_out_of_finally_block">[docs]</a>    <span class="k">def</span> <span class="nf">test_17_no_jump_out_of_finally_block</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">no_jump_out_of_finally_block</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_18_no_jump_to_non_integers"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_18_no_jump_to_non_integers">[docs]</a>    <span class="k">def</span> <span class="nf">test_18_no_jump_to_non_integers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">no_jump_to_non_integers</span><span class="p">)</span></div>
<div class="viewcode-block" id="JumpTestCase.test_19_no_jump_without_trace_function"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_19_no_jump_without_trace_function">[docs]</a>    <span class="k">def</span> <span class="nf">test_19_no_jump_without_trace_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Must set sys.settrace(None) in setUp(), else condition is not</span>
        <span class="c"># triggered.</span>
        <span class="n">no_jump_without_trace_function</span><span class="p">()</span></div>
<div class="viewcode-block" id="JumpTestCase.test_jump_across_with"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_jump_across_with">[docs]</a>    <span class="k">def</span> <span class="nf">test_jump_across_with</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addCleanup</span><span class="p">(</span><span class="n">support</span><span class="o">.</span><span class="n">unlink</span><span class="p">,</span> <span class="n">support</span><span class="o">.</span><span class="n">TESTFN</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">jump_across_with</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="JumpTestCase.test_20_large_function"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_20_large_function">[docs]</a>    <span class="k">def</span> <span class="nf">test_20_large_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">exec</span><span class="p">(</span><span class="s">&quot;&quot;&quot;def f(output):        # line 0</span>
<span class="s">            x = 0                     # line 1</span>
<span class="s">            y = 1                     # line 2</span>
<span class="s">            &#39;&#39;&#39;                       # line 3</span>
<span class="s">            </span><span class="si">%s</span><span class="s">                        # lines 4-1004</span>
<span class="s">            &#39;&#39;&#39;                       # line 1005</span>
<span class="s">            x += 1                    # line 1006</span>
<span class="s">            output.append(x)          # line 1007</span>
<span class="s">            return&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,),</span> <span class="n">d</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s">&#39;f&#39;</span><span class="p">]</span>

        <span class="n">f</span><span class="o">.</span><span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1007</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="JumpTestCase.test_jump_to_firstlineno"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.JumpTestCase.test_jump_to_firstlineno">[docs]</a>    <span class="k">def</span> <span class="nf">test_jump_to_firstlineno</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># This tests that PDB can jump back to the first line in a</span>
        <span class="c"># file.  See issue #1689458.  It can only be triggered in a</span>
        <span class="c"># function call if the function is defined on a single line.</span>
        <span class="n">code</span> <span class="o">=</span> <span class="nb">compile</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s"># Comments don&#39;t count.</span>
<span class="s">output.append(2)  # firstlineno is here.</span>
<span class="s">output.append(3)</span>
<span class="s">output.append(4)</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;fake module&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;exec&quot;</span><span class="p">)</span>
        <span class="k">class</span> <span class="nc">fake_function</span><span class="p">:</span>
            <span class="n">__code__</span> <span class="o">=</span> <span class="n">code</span>
            <span class="n">jump</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">tracer</span> <span class="o">=</span> <span class="n">JumpTracer</span><span class="p">(</span><span class="n">fake_function</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="n">tracer</span><span class="o">.</span><span class="n">trace</span><span class="p">)</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;output&quot;</span><span class="p">:</span> <span class="p">[]}</span>
        <span class="k">exec</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">namespace</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compare_jump_output</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">namespace</span><span class="p">[</span><span class="s">&quot;output&quot;</span><span class="p">])</span>

</div></div>
<div class="viewcode-block" id="test_main"><a class="viewcode-back" href="../../test.html#test.test_sys_settrace.test_main">[docs]</a><span class="k">def</span> <span class="nf">test_main</span><span class="p">():</span>
    <span class="n">support</span><span class="o">.</span><span class="n">run_unittest</span><span class="p">(</span>
        <span class="n">TraceTestCase</span><span class="p">,</span>
        <span class="n">RaisingTraceFuncTestCase</span><span class="p">,</span>
        <span class="n">JumpTestCase</span>
    <span class="p">)</span>
</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">test_main</span><span class="p">()</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Weldon Henson.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>