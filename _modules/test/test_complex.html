

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>test.test_complex &mdash; ArcherBashPYDocs 1.0.0. documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ArcherBashPYDocs 1.0.0. documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> ArcherBashPYDocs</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="simple">
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ArcherBashPYDocs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>test.test_complex</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for test.test_complex</h1><div class="highlight"><pre>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">test</span> <span class="kn">import</span> <span class="n">support</span>

<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">atan2</span><span class="p">,</span> <span class="n">isnan</span><span class="p">,</span> <span class="n">copysign</span>
<span class="kn">import</span> <span class="nn">operator</span>

<span class="n">INF</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s">&quot;inf&quot;</span><span class="p">)</span>
<span class="n">NAN</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s">&quot;nan&quot;</span><span class="p">)</span>
<span class="c"># These tests ensure that complex math does the right thing</span>

<div class="viewcode-block" id="ComplexTest"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest">[docs]</a><span class="k">class</span> <span class="nc">ComplexTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="ComplexTest.assertAlmostEqual"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.assertAlmostEqual">[docs]</a>    <span class="k">def</span> <span class="nf">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">complex</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">complex</span><span class="p">):</span>
                <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">real</span><span class="p">)</span>
                <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
                <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">complex</span><span class="p">):</span>
                <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">real</span><span class="p">)</span>
                <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.assertCloseAbs"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.assertCloseAbs">[docs]</a>    <span class="k">def</span> <span class="nf">assertCloseAbs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">eps</span><span class="o">=</span><span class="mf">1e-9</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return true iff floats x and y &quot;are close\&quot;&quot;&quot;</span><span class="s">&quot;</span>
        <span class="c"># put the one with larger magnitude second</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span>
        <span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span>
        <span class="c"># check that relative difference &lt; eps</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">abs</span><span class="p">((</span><span class="n">x</span><span class="o">-</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.assertFloatsAreIdentical"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.assertFloatsAreIdentical">[docs]</a>    <span class="k">def</span> <span class="nf">assertFloatsAreIdentical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;assert that floats x and y are identical, in the sense that:</span>
<span class="sd">        (1) both x and y are nans, or</span>
<span class="sd">        (2) both x and y are infinities, with the same sign, or</span>
<span class="sd">        (3) both x and y are zeros, with the same sign, or</span>
<span class="sd">        (4) x and y are both finite and nonzero, and x == y</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s">&#39;floats {!r} and {!r} are not identical&#39;</span>

        <span class="k">if</span> <span class="n">isnan</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">or</span> <span class="n">isnan</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">isnan</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">and</span> <span class="n">isnan</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
                <span class="k">return</span>
        <span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="c"># both zero; check that signs match</span>
            <span class="k">elif</span> <span class="n">copysign</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="n">copysign</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s">&#39;: zeros have different signs&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ComplexTest.assertClose"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.assertClose">[docs]</a>    <span class="k">def</span> <span class="nf">assertClose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">eps</span><span class="o">=</span><span class="mf">1e-9</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return true iff complexes x and y &quot;are close\&quot;&quot;&quot;</span><span class="s">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertCloseAbs</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">eps</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertCloseAbs</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">eps</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.check_div"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.check_div">[docs]</a>    <span class="k">def</span> <span class="nf">check_div</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compute complex z=x*y, and check that z/x==y and z/y==x.&quot;&quot;&quot;</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">q</span> <span class="o">=</span> <span class="n">z</span> <span class="o">/</span> <span class="n">x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertClose</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="n">q</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">__truediv__</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertClose</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">q</span> <span class="o">=</span> <span class="n">z</span> <span class="o">/</span> <span class="n">y</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertClose</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
            <span class="n">q</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">__truediv__</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertClose</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_truediv"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_truediv">[docs]</a>    <span class="k">def</span> <span class="nf">test_truediv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">simple_real</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>
        <span class="n">simple_complex</span> <span class="o">=</span> <span class="p">[</span><span class="nb">complex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">simple_real</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">simple_real</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">simple_complex</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">simple_complex</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">check_div</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="c"># A naive complex division algorithm (such as in 2.0) is very prone to</span>
        <span class="c"># nonsense errors for these (overflows and underflows).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_div</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">1e200</span><span class="p">,</span> <span class="mf">1e200</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_div</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">1e-200</span><span class="p">,</span> <span class="mf">1e-200</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>

        <span class="c"># Just for fun.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check_div</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">random</span><span class="p">(),</span> <span class="n">random</span><span class="p">()),</span>
                           <span class="nb">complex</span><span class="p">(</span><span class="n">random</span><span class="p">(),</span> <span class="n">random</span><span class="p">()))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">complex</span><span class="o">.</span><span class="n">__truediv__</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">0</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="c"># FIXME: The following currently crashes on Alpha</span>
        <span class="c"># self.assertRaises(OverflowError, pow, 1e200+1j, 1e200+1j)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__truediv__</span><span class="p">(</span><span class="mi">2</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">),</span> <span class="mi">1</span><span class="o">-</span><span class="mi">1j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">complex</span><span class="o">.</span><span class="n">__truediv__</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">0</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_floordiv"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_floordiv">[docs]</a>    <span class="k">def</span> <span class="nf">test_floordiv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="o">.</span><span class="n">__floordiv__</span><span class="p">,</span> <span class="mi">3</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span> <span class="mf">1.5</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="o">.</span><span class="n">__floordiv__</span><span class="p">,</span> <span class="mi">3</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span> <span class="mi">0</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_richcompare"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_richcompare">[docs]</a>    <span class="k">def</span> <span class="nf">test_richcompare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">10000</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__lt__</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="bp">NotImplemented</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__ne__</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__ne__</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="mf">100.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="n">f</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__ne__</span><span class="p">(</span><span class="n">f</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="n">f</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__ne__</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="n">f</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__lt__</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span><span class="p">),</span> <span class="bp">NotImplemented</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__le__</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span><span class="p">),</span> <span class="bp">NotImplemented</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__gt__</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span><span class="p">),</span> <span class="bp">NotImplemented</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__ge__</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span><span class="p">),</span> <span class="bp">NotImplemented</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">lt</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">le</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">gt</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">ge</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">ne</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">ne</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2j</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_richcompare_boundaries"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_richcompare_boundaries">[docs]</a>    <span class="k">def</span> <span class="nf">test_richcompare_boundaries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">deltas</span><span class="p">,</span> <span class="n">is_equal</span><span class="p">,</span> <span class="n">imag</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">delta</span> <span class="ow">in</span> <span class="n">deltas</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="n">delta</span>
                <span class="n">z</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">imag</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="n">is_equal</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">complex</span><span class="o">.</span><span class="n">__ne__</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="ow">not</span> <span class="n">is_equal</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span>
        <span class="c"># For IEEE-754 doubles the following should hold:</span>
        <span class="c">#    x in [2 ** (52 + i), 2 ** (53 + i + 1)] -&gt; x mod 2 ** i == 0</span>
        <span class="c"># where the interval is representable, of course.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
            <span class="nb">pow</span> <span class="o">=</span> <span class="mi">52</span> <span class="o">+</span> <span class="n">i</span>
            <span class="n">mult</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="n">i</span>
            <span class="n">check</span><span class="p">(</span><span class="mi">2</span> <span class="o">**</span> <span class="nb">pow</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">delta</span><span class="p">:</span> <span class="n">delta</span> <span class="o">%</span> <span class="n">mult</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">check</span><span class="p">(</span><span class="mi">2</span> <span class="o">**</span> <span class="nb">pow</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">delta</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="n">check</span><span class="p">(</span><span class="mi">2</span> <span class="o">**</span> <span class="mi">53</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">delta</span><span class="p">:</span> <span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_mod"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_mod">[docs]</a>    <span class="k">def</span> <span class="nf">test_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># % is no longer supported on complex numbers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">)</span><span class="o">.</span><span class="n">__mod__</span><span class="p">,</span> <span class="mi">0</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">(</span><span class="mf">3.33</span><span class="o">+</span><span class="mf">4.43j</span><span class="p">)</span> <span class="o">%</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">)</span><span class="o">.</span><span class="n">__mod__</span><span class="p">,</span> <span class="mf">4.3j</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_divmod"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_divmod">[docs]</a>    <span class="k">def</span> <span class="nf">test_divmod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">divmod</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">divmod</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">0</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_pow"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_pow">[docs]</a>    <span class="k">def</span> <span class="nf">test_pow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">0</span><span class="o">+</span><span class="mi">0j</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">0</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">0j</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">pow</span><span class="p">,</span> <span class="mi">0</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span> <span class="mi">1j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">1j</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="o">/</span><span class="mi">1j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">pow</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">)</span>

        <span class="n">a</span> <span class="o">=</span> <span class="mf">3.33</span><span class="o">+</span><span class="mf">4.43j</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">**</span> <span class="mi">0j</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">**</span> <span class="mf">0.</span><span class="o">+</span><span class="mf">0.j</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">3j</span> <span class="o">**</span> <span class="mi">0j</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">3j</span> <span class="o">**</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="mi">0j</span> <span class="o">**</span> <span class="n">a</span>
        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should fail 0.0 to negative or complex power&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="mi">0j</span> <span class="o">**</span> <span class="p">(</span><span class="mi">3</span><span class="o">-</span><span class="mi">2j</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;should fail 0.0 to negative or complex power&quot;</span><span class="p">)</span>

        <span class="c"># The following is used to exercise certain code paths</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">**</span> <span class="mi">105</span><span class="p">,</span> <span class="n">a</span> <span class="o">**</span> <span class="mi">105</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">**</span> <span class="o">-</span><span class="mi">105</span><span class="p">,</span> <span class="n">a</span> <span class="o">**</span> <span class="o">-</span><span class="mi">105</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span> <span class="o">**</span> <span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="n">a</span> <span class="o">**</span> <span class="o">-</span><span class="mi">30</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mf">0.0j</span> <span class="o">**</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">b</span> <span class="o">=</span> <span class="mf">5.1</span><span class="o">+</span><span class="mf">2.3j</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">pow</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_boolcontext"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_boolcontext">[docs]</a>    <span class="k">def</span> <span class="nf">test_boolcontext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="mf">1e-6</span><span class="p">,</span> <span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="mf">1e-6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="ow">not</span> <span class="nb">complex</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_conjugate"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_conjugate">[docs]</a>    <span class="k">def</span> <span class="nf">test_conjugate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertClose</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">5.3</span><span class="p">,</span> <span class="mf">9.8</span><span class="p">)</span><span class="o">.</span><span class="n">conjugate</span><span class="p">(),</span> <span class="mf">5.3</span><span class="o">-</span><span class="mf">9.8j</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_constructor"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_constructor">[docs]</a>    <span class="k">def</span> <span class="nf">test_constructor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">OS</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">def</span> <span class="nf">__complex__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">class</span> <span class="nc">NS</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">def</span> <span class="nf">__complex__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">OS</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">OS</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="mf">1.5</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;1+10j&quot;</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">10</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">10.0</span><span class="p">),</span> <span class="mi">10</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">10</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">10</span><span class="o">+</span><span class="mi">0j</span><span class="p">),</span> <span class="mi">10</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mf">10.0</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mf">10.0</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">10.0</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">10j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">3.14</span><span class="o">+</span><span class="mi">0j</span><span class="p">),</span> <span class="mf">3.14</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">3.14</span><span class="p">),</span> <span class="mf">3.14</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">314</span><span class="p">),</span> <span class="mf">314.0</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">314</span><span class="p">),</span> <span class="mf">314.0</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">3.14</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span> <span class="mi">0j</span><span class="p">),</span> <span class="mf">3.14</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">3.14</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="mf">3.14</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">314</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">314.0</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">314</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">314.0</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">0j</span><span class="p">,</span> <span class="mf">3.14j</span><span class="p">),</span> <span class="o">-</span><span class="mf">3.14</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.14j</span><span class="p">),</span> <span class="o">-</span><span class="mf">3.14</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">0j</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">),</span> <span class="mf">3.14j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">),</span> <span class="mf">3.14j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;1j&quot;</span><span class="p">),</span> <span class="mi">1j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(),</span>  <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;-1&quot;</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;+1&quot;</span><span class="p">),</span> <span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;(1+2j)&quot;</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">2j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;(1.3+2.2j)&quot;</span><span class="p">),</span> <span class="mf">1.3</span><span class="o">+</span><span class="mf">2.2j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;3.14+1J&quot;</span><span class="p">),</span> <span class="mf">3.14</span><span class="o">+</span><span class="mi">1j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot; ( +3.14-6J )&quot;</span><span class="p">),</span> <span class="mf">3.14</span><span class="o">-</span><span class="mi">6j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot; ( +3.14-J )&quot;</span><span class="p">),</span> <span class="mf">3.14</span><span class="o">-</span><span class="mi">1j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot; ( +3.14+j )&quot;</span><span class="p">),</span> <span class="mf">3.14</span><span class="o">+</span><span class="mi">1j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;J&quot;</span><span class="p">),</span> <span class="mi">1j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;( j )&quot;</span><span class="p">),</span> <span class="mi">1j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;+J&quot;</span><span class="p">),</span> <span class="mi">1j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;( -j)&quot;</span><span class="p">),</span> <span class="o">-</span><span class="mi">1j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&#39;1e-500&#39;</span><span class="p">),</span> <span class="mf">0.0</span> <span class="o">+</span> <span class="mf">0.0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&#39;-1e-500j&#39;</span><span class="p">),</span> <span class="mf">0.0</span> <span class="o">-</span> <span class="mf">0.0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&#39;-1e-500+1e-500j&#39;</span><span class="p">),</span> <span class="o">-</span><span class="mf">0.0</span> <span class="o">+</span> <span class="mf">0.0j</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">complex2</span><span class="p">(</span><span class="nb">complex</span><span class="p">):</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">complex2</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">)),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">real</span><span class="o">=</span><span class="mi">17</span><span class="p">,</span> <span class="n">imag</span><span class="o">=</span><span class="mi">23</span><span class="p">),</span> <span class="mi">17</span><span class="o">+</span><span class="mi">23j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">real</span><span class="o">=</span><span class="mi">17</span><span class="o">+</span><span class="mi">23j</span><span class="p">),</span> <span class="mi">17</span><span class="o">+</span><span class="mi">23j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">real</span><span class="o">=</span><span class="mi">17</span><span class="o">+</span><span class="mi">23j</span><span class="p">,</span> <span class="n">imag</span><span class="o">=</span><span class="mi">23</span><span class="p">),</span> <span class="mi">17</span><span class="o">+</span><span class="mi">46j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">real</span><span class="o">=</span><span class="mi">1</span><span class="o">+</span><span class="mi">2j</span><span class="p">,</span> <span class="n">imag</span><span class="o">=</span><span class="mi">3</span><span class="o">+</span><span class="mi">4j</span><span class="p">),</span> <span class="o">-</span><span class="mi">3</span><span class="o">+</span><span class="mi">5j</span><span class="p">)</span>

        <span class="c"># check that the sign of a zero in the real or imaginary part</span>
        <span class="c"># is preserved when constructing from two floats.  (These checks</span>
        <span class="c"># are harmless on systems without support for signed zeros.)</span>
        <span class="k">def</span> <span class="nf">split_zeros</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Function that produces different results for 0. and -0.&quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="n">atan2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">split_zeros</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span><span class="o">.</span><span class="n">imag</span><span class="p">),</span> <span class="n">split_zeros</span><span class="p">(</span><span class="mf">0.</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">split_zeros</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.</span><span class="p">)</span><span class="o">.</span><span class="n">imag</span><span class="p">),</span> <span class="n">split_zeros</span><span class="p">(</span><span class="o">-</span><span class="mf">0.</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">split_zeros</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span><span class="o">.</span><span class="n">real</span><span class="p">),</span> <span class="n">split_zeros</span><span class="p">(</span><span class="mf">0.</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">split_zeros</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="o">-</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span><span class="o">.</span><span class="n">real</span><span class="p">),</span> <span class="n">split_zeros</span><span class="p">(</span><span class="o">-</span><span class="mf">0.</span><span class="p">))</span>

        <span class="n">c</span> <span class="o">=</span> <span class="mf">3.14</span> <span class="o">+</span> <span class="mi">1j</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="ow">is</span> <span class="n">c</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">c</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">)</span>

        <span class="c"># SF bug 543840:  complex(string) accepts strings with \0</span>
        <span class="c"># Fixed in 2.3.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&#39;1+1j</span><span class="se">\0</span><span class="s">j&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="mi">5</span><span class="o">+</span><span class="mi">3j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="mi">5</span><span class="o">+</span><span class="mi">3j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="mi">5</span><span class="o">+</span><span class="mi">3j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegex</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="s">&quot;not &#39;NoneType&#39;&quot;</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\0</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;3</span><span class="se">\0</span><span class="s">9&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;1+&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;1+1j+1j&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;--&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;(1+2j&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;1+2j)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;1+(2j)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;(1+2j)123&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;x&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;1j+2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;1e1ej&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;1e++1ej&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;)1+2j(&quot;</span><span class="p">)</span>
        <span class="c"># the following three are accepted by Python 2.6</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;1..1j&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;1.11.1j&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="s">&quot;1e1.1j&quot;</span><span class="p">)</span>

        <span class="c"># check that complex accepts long unicode strings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="o">*</span><span class="mi">500</span><span class="p">)),</span> <span class="nb">complex</span><span class="p">)</span>
        <span class="c"># check whitespace processing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\N{EM SPACE}</span><span class="s">(</span><span class="se">\N{EN SPACE}</span><span class="s">1+1j ) &#39;</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">EvilExc</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="k">class</span> <span class="nc">evilcomplex</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__complex__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">EvilExc</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">EvilExc</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">evilcomplex</span><span class="p">())</span>

        <span class="k">class</span> <span class="nc">float2</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">def</span> <span class="nf">__float__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">float2</span><span class="p">(</span><span class="mf">42.</span><span class="p">)),</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">real</span><span class="o">=</span><span class="n">float2</span><span class="p">(</span><span class="mf">17.</span><span class="p">),</span> <span class="n">imag</span><span class="o">=</span><span class="n">float2</span><span class="p">(</span><span class="mf">23.</span><span class="p">)),</span> <span class="mi">17</span><span class="o">+</span><span class="mi">23j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">float2</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span>

        <span class="k">class</span> <span class="nc">complex0</span><span class="p">(</span><span class="nb">complex</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Test usage of __complex__() when inheriting from &#39;complex&#39;&quot;&quot;&quot;</span>
            <span class="k">def</span> <span class="nf">__complex__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="mi">42j</span>

        <span class="k">class</span> <span class="nc">complex1</span><span class="p">(</span><span class="nb">complex</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Test usage of __complex__() with a __new__() method&quot;&quot;&quot;</span>
            <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0j</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">complex</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">value</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">__complex__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span>

        <span class="k">class</span> <span class="nc">complex2</span><span class="p">(</span><span class="nb">complex</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Make sure that __complex__() calls fail if anything other than a</span>
<span class="sd">            complex is returned&quot;&quot;&quot;</span>
            <span class="k">def</span> <span class="nf">__complex__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">complex0</span><span class="p">(</span><span class="mi">1j</span><span class="p">)),</span> <span class="mi">42j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">complex1</span><span class="p">(</span><span class="mi">1j</span><span class="p">)),</span> <span class="mi">2j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">complex2</span><span class="p">(</span><span class="mi">1j</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_hash"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_hash">[docs]</a>    <span class="k">def</span> <span class="nf">test_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
            <span class="n">x</span> <span class="o">/=</span> <span class="mf">3.0</span>    <span class="c"># now check against floating point</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_abs"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_abs">[docs]</a>    <span class="k">def</span> <span class="nf">test_abs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="nb">complex</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="mf">3.</span><span class="p">,</span> <span class="n">y</span><span class="o">/</span><span class="mf">7.</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">((</span><span class="n">num</span><span class="o">.</span><span class="n">real</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">num</span><span class="o">.</span><span class="n">imag</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>  <span class="o">**</span> <span class="mf">0.5</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_repr_str"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_repr_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_repr_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">test_fn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">):</span>
            <span class="n">test_fn</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">expected</span><span class="p">)</span>
            <span class="n">test_fn</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">expected</span><span class="p">)</span>

        <span class="n">test</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">6j</span><span class="p">,</span> <span class="s">&#39;(1+6j)&#39;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="mi">6j</span><span class="p">,</span> <span class="s">&#39;(1-6j)&#39;</span><span class="p">)</span>

        <span class="n">test</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">0j</span><span class="p">),</span> <span class="s">&#39;(-1+-0j)&#39;</span><span class="p">,</span> <span class="n">test_fn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">)</span>

        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="n">INF</span><span class="p">),</span> <span class="s">&quot;(1+infj)&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="o">-</span><span class="n">INF</span><span class="p">),</span> <span class="s">&quot;(1-infj)&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">INF</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s">&quot;(inf+1j)&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="o">-</span><span class="n">INF</span><span class="p">,</span> <span class="n">INF</span><span class="p">),</span> <span class="s">&quot;(-inf+infj)&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">NAN</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s">&quot;(nan+1j)&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">NAN</span><span class="p">),</span> <span class="s">&quot;(1+nanj)&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">NAN</span><span class="p">,</span> <span class="n">NAN</span><span class="p">),</span> <span class="s">&quot;(nan+nanj)&quot;</span><span class="p">)</span>

        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">INF</span><span class="p">),</span> <span class="s">&quot;infj&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">INF</span><span class="p">),</span> <span class="s">&quot;-infj&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">NAN</span><span class="p">),</span> <span class="s">&quot;nanj&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="mi">6j</span><span class="p">,</span><span class="nb">complex</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="mi">6j</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">6j</span><span class="p">,</span><span class="nb">complex</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">6j</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="o">-</span><span class="mi">6j</span><span class="p">,</span><span class="nb">complex</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="o">-</span><span class="mi">6j</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">6j</span><span class="p">,</span><span class="nb">complex</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="mi">6j</span><span class="p">)))</span>
</div>
    <span class="nd">@support.requires_IEEE_754</span>
<div class="viewcode-block" id="ComplexTest.test_negative_zero_repr_str"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_negative_zero_repr_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_negative_zero_repr_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">test_fn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">):</span>
            <span class="n">test_fn</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">expected</span><span class="p">)</span>
            <span class="n">test_fn</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">expected</span><span class="p">)</span>

        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">),</span>   <span class="s">&quot;1j&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="o">-</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">),</span>  <span class="s">&quot;(-0+1j)&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">),</span>  <span class="s">&quot;-1j&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="o">-</span><span class="mf">0.</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">),</span> <span class="s">&quot;(-0-1j)&quot;</span><span class="p">)</span>

        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span>   <span class="s">&quot;0j&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.</span><span class="p">),</span>  <span class="s">&quot;-0j&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="o">-</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span>  <span class="s">&quot;(-0+0j)&quot;</span><span class="p">)</span>
        <span class="n">test</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="o">-</span><span class="mf">0.</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.</span><span class="p">),</span> <span class="s">&quot;(-0-0j)&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_neg"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_neg">[docs]</a>    <span class="k">def</span> <span class="nf">test_neg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">6j</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">6j</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_file"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_file">[docs]</a>    <span class="k">def</span> <span class="nf">test_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="mf">3.33</span><span class="o">+</span><span class="mf">4.43j</span>
        <span class="n">b</span> <span class="o">=</span> <span class="mf">5.1</span><span class="o">+</span><span class="mf">2.3j</span>

        <span class="n">fo</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">support</span><span class="o">.</span><span class="n">TESTFN</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="nb">file</span><span class="o">=</span><span class="n">fo</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">support</span><span class="o">.</span><span class="n">TESTFN</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fo</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)))</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">fo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">fo</span><span class="o">.</span><span class="n">closed</span><span class="p">):</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">support</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">support</span><span class="o">.</span><span class="n">TESTFN</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_getnewargs"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_getnewargs">[docs]</a>    <span class="k">def</span> <span class="nf">test_getnewargs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">1</span><span class="o">+</span><span class="mi">2j</span><span class="p">)</span><span class="o">.</span><span class="n">__getnewargs__</span><span class="p">(),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="mi">2j</span><span class="p">)</span><span class="o">.</span><span class="n">__getnewargs__</span><span class="p">(),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">2j</span><span class="p">)</span><span class="o">.</span><span class="n">__getnewargs__</span><span class="p">(),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="o">-</span><span class="mi">0j</span><span class="p">)</span><span class="o">.</span><span class="n">__getnewargs__</span><span class="p">(),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">INF</span><span class="p">)</span><span class="o">.</span><span class="n">__getnewargs__</span><span class="p">(),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">INF</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">INF</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">__getnewargs__</span><span class="p">(),</span> <span class="p">(</span><span class="n">INF</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>
</div>
    <span class="nd">@support.requires_IEEE_754</span>
<div class="viewcode-block" id="ComplexTest.test_plus_minus_0j"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_plus_minus_0j">[docs]</a>    <span class="k">def</span> <span class="nf">test_plus_minus_0j</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># test that -0j and 0j literals are not identified</span>
        <span class="n">z1</span><span class="p">,</span> <span class="n">z2</span> <span class="o">=</span> <span class="mi">0j</span><span class="p">,</span> <span class="o">-</span><span class="mi">0j</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atan2</span><span class="p">(</span><span class="n">z1</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">),</span> <span class="n">atan2</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atan2</span><span class="p">(</span><span class="n">z2</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">),</span> <span class="n">atan2</span><span class="p">(</span><span class="o">-</span><span class="mf">0.</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">))</span>
</div>
    <span class="nd">@support.requires_IEEE_754</span>
<div class="viewcode-block" id="ComplexTest.test_negated_imaginary_literal"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_negated_imaginary_literal">[docs]</a>    <span class="k">def</span> <span class="nf">test_negated_imaginary_literal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">z0</span> <span class="o">=</span> <span class="o">-</span><span class="mi">0j</span>
        <span class="n">z1</span> <span class="o">=</span> <span class="o">-</span><span class="mi">7j</span>
        <span class="n">z2</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1e1000j</span>
        <span class="c"># Note: In versions of Python &lt; 3.2, a negated imaginary literal</span>
        <span class="c"># accidentally ended up with real part 0.0 instead of -0.0, thanks to a</span>
        <span class="c"># modification during CST -&gt; AST translation (see issue #9011).  That&#39;s</span>
        <span class="c"># fixed in Python 3.2.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFloatsAreIdentical</span><span class="p">(</span><span class="n">z0</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFloatsAreIdentical</span><span class="p">(</span><span class="n">z0</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFloatsAreIdentical</span><span class="p">(</span><span class="n">z1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFloatsAreIdentical</span><span class="p">(</span><span class="n">z1</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="o">-</span><span class="mf">7.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFloatsAreIdentical</span><span class="p">(</span><span class="n">z2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFloatsAreIdentical</span><span class="p">(</span><span class="n">z2</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="o">-</span><span class="n">INF</span><span class="p">)</span>
</div>
    <span class="nd">@support.requires_IEEE_754</span>
<div class="viewcode-block" id="ComplexTest.test_overflow"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_overflow">[docs]</a>    <span class="k">def</span> <span class="nf">test_overflow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;1e500&quot;</span><span class="p">),</span> <span class="nb">complex</span><span class="p">(</span><span class="n">INF</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;-1e500j&quot;</span><span class="p">),</span> <span class="nb">complex</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">INF</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="s">&quot;-1e500+1.8e308j&quot;</span><span class="p">),</span> <span class="nb">complex</span><span class="p">(</span><span class="o">-</span><span class="n">INF</span><span class="p">,</span> <span class="n">INF</span><span class="p">))</span>
</div>
    <span class="nd">@support.requires_IEEE_754</span>
<div class="viewcode-block" id="ComplexTest.test_repr_roundtrip"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_repr_roundtrip">[docs]</a>    <span class="k">def</span> <span class="nf">test_repr_roundtrip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1e-500</span><span class="p">,</span> <span class="mf">1e-315</span><span class="p">,</span> <span class="mf">1e-200</span><span class="p">,</span> <span class="mf">0.0123</span><span class="p">,</span> <span class="mf">3.1415</span><span class="p">,</span> <span class="mf">1e50</span><span class="p">,</span> <span class="n">INF</span><span class="p">,</span> <span class="n">NAN</span><span class="p">]</span>
        <span class="n">vals</span> <span class="o">+=</span> <span class="p">[</span><span class="o">-</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">]</span>

        <span class="c"># complex(repr(z)) should recover z exactly, even for complex</span>
        <span class="c"># numbers involving an infinity, nan, or negative zero</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">z</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                <span class="n">roundtrip</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertFloatsAreIdentical</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">roundtrip</span><span class="o">.</span><span class="n">real</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertFloatsAreIdentical</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">roundtrip</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>

        <span class="c"># if we predefine some constants, then eval(repr(z)) should</span>
        <span class="c"># also work, except that it might change the sign of zeros</span>
        <span class="n">inf</span><span class="p">,</span> <span class="n">nan</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s">&#39;inf&#39;</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="s">&#39;nan&#39;</span><span class="p">)</span>
        <span class="n">infj</span><span class="p">,</span> <span class="n">nanj</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">inf</span><span class="p">),</span> <span class="nb">complex</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">nan</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">z</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                <span class="n">roundtrip</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
                <span class="c"># adding 0.0 has no effect beside changing -0.0 to 0.0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertFloatsAreIdentical</span><span class="p">(</span><span class="mf">0.0</span> <span class="o">+</span> <span class="n">z</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                                              <span class="mf">0.0</span> <span class="o">+</span> <span class="n">roundtrip</span><span class="o">.</span><span class="n">real</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertFloatsAreIdentical</span><span class="p">(</span><span class="mf">0.0</span> <span class="o">+</span> <span class="n">z</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                              <span class="mf">0.0</span> <span class="o">+</span> <span class="n">roundtrip</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ComplexTest.test_format"><a class="viewcode-back" href="../../test.html#test.test_complex.ComplexTest.test_format">[docs]</a>    <span class="k">def</span> <span class="nf">test_format</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># empty format string is same as str()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">3j</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">3.5j</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="mi">3j</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">3.2j</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="mf">3.2j</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">3</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="mi">3</span><span class="o">+</span><span class="mi">0j</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">3.2</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="mf">3.2</span><span class="o">+</span><span class="mi">0j</span><span class="p">))</span>

        <span class="c"># empty presentation type should still be analogous to str,</span>
        <span class="c"># even when format string is nonempty (issue #5920).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">3.2</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="mf">3.2</span><span class="o">+</span><span class="mi">0j</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">3.2</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span> <span class="s">&#39;&lt;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="mf">3.2</span><span class="o">+</span><span class="mi">0j</span><span class="p">))</span>
        <span class="n">z</span> <span class="o">=</span> <span class="mi">4</span><span class="o">/</span><span class="mf">7.</span> <span class="o">-</span> <span class="mi">100j</span><span class="o">/</span><span class="mf">7.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s">&#39;&lt;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s">&#39;10&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
        <span class="n">z</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s">&#39;&lt;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
        <span class="n">z</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="o">-</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s">&#39;&lt;&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;g&#39;</span><span class="p">),</span> <span class="s">&#39;1+3j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;g&#39;</span><span class="p">),</span> <span class="s">&#39;0+3j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39;g&#39;</span><span class="p">),</span> <span class="s">&#39;1.5+3.5j&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39;+g&#39;</span><span class="p">),</span> <span class="s">&#39;+1.5+3.5j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">-</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39;+g&#39;</span><span class="p">),</span> <span class="s">&#39;+1.5-3.5j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">-</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39;-g&#39;</span><span class="p">),</span> <span class="s">&#39;1.5-3.5j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39; g&#39;</span><span class="p">),</span> <span class="s">&#39; 1.5+3.5j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">-</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39; g&#39;</span><span class="p">),</span> <span class="s">&#39; 1.5-3.5j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39; g&#39;</span><span class="p">),</span> <span class="s">&#39;-1.5+3.5j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="o">-</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39; g&#39;</span><span class="p">),</span> <span class="s">&#39;-1.5-3.5j&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="o">-</span><span class="mf">3.5e-20j</span><span class="p">,</span> <span class="s">&#39;g&#39;</span><span class="p">),</span> <span class="s">&#39;-1.5-3.5e-20j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="o">-</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">),</span> <span class="s">&#39;-1.500000-3.500000j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="o">-</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39;F&#39;</span><span class="p">),</span> <span class="s">&#39;-1.500000-3.500000j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="o">-</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">),</span> <span class="s">&#39;-1.500000e+00-3.500000e+00j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="o">-</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39;.2e&#39;</span><span class="p">),</span> <span class="s">&#39;-1.50e+00-3.50e+00j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="o">-</span><span class="mf">3.5j</span><span class="p">,</span> <span class="s">&#39;.2E&#39;</span><span class="p">),</span> <span class="s">&#39;-1.50E+00-3.50E+00j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5e10</span><span class="o">-</span><span class="mf">3.5e5j</span><span class="p">,</span> <span class="s">&#39;.2G&#39;</span><span class="p">),</span> <span class="s">&#39;-1.5E+10-3.5E+05j&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;&lt;20g&#39;</span><span class="p">),</span>  <span class="s">&#39;1.5+3j              &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;*&lt;20g&#39;</span><span class="p">),</span> <span class="s">&#39;1.5+3j**************&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;&gt;20g&#39;</span><span class="p">),</span>  <span class="s">&#39;              1.5+3j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;^20g&#39;</span><span class="p">),</span>  <span class="s">&#39;       1.5+3j       &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;&lt;20&#39;</span><span class="p">),</span>   <span class="s">&#39;(1.5+3j)            &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;&gt;20&#39;</span><span class="p">),</span>   <span class="s">&#39;            (1.5+3j)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;^20&#39;</span><span class="p">),</span>   <span class="s">&#39;      (1.5+3j)      &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.123</span><span class="o">-</span><span class="mf">3.123j</span><span class="p">,</span> <span class="s">&#39;^20.2&#39;</span><span class="p">),</span> <span class="s">&#39;     (1.1-3.1j)     &#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;20.2f&#39;</span><span class="p">),</span> <span class="s">&#39;          1.50+3.00j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;&gt;20.2f&#39;</span><span class="p">),</span> <span class="s">&#39;          1.50+3.00j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;&lt;20.2f&#39;</span><span class="p">),</span> <span class="s">&#39;1.50+3.00j          &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5e20</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;&lt;20.2f&#39;</span><span class="p">),</span> <span class="s">&#39;150000000000000000000.00+3.00j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5e20</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;&gt;40.2f&#39;</span><span class="p">),</span> <span class="s">&#39;          150000000000000000000.00+3.00j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5e20</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;^40,.2f&#39;</span><span class="p">),</span> <span class="s">&#39;  150,000,000,000,000,000,000.00+3.00j  &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5e21</span><span class="o">+</span><span class="mi">3j</span><span class="p">,</span> <span class="s">&#39;^40,.2f&#39;</span><span class="p">),</span> <span class="s">&#39; 1,500,000,000,000,000,000,000.00+3.00j &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.5e21</span><span class="o">+</span><span class="mi">3000j</span><span class="p">,</span> <span class="s">&#39;,.2f&#39;</span><span class="p">),</span> <span class="s">&#39;1,500,000,000,000,000,000,000.00+3,000.00j&#39;</span><span class="p">)</span>

        <span class="c"># Issue 7094: Alternate formatting (specified by #)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="s">&#39;.0e&#39;</span><span class="p">),</span> <span class="s">&#39;1e+00+1e+00j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="s">&#39;#.0e&#39;</span><span class="p">),</span> <span class="s">&#39;1.e+00+1.e+00j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="s">&#39;.0f&#39;</span><span class="p">),</span> <span class="s">&#39;1+1j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="s">&#39;#.0f&#39;</span><span class="p">),</span> <span class="s">&#39;1.+1.j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.1</span><span class="o">+</span><span class="mf">1.1j</span><span class="p">,</span> <span class="s">&#39;g&#39;</span><span class="p">),</span> <span class="s">&#39;1.1+1.1j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mf">1.1</span><span class="o">+</span><span class="mf">1.1j</span><span class="p">,</span> <span class="s">&#39;#g&#39;</span><span class="p">),</span> <span class="s">&#39;1.10000+1.10000j&#39;</span><span class="p">)</span>

        <span class="c"># Alternate doesn&#39;t make a difference for these, they format the same with or without it</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="s">&#39;.1e&#39;</span><span class="p">),</span>  <span class="s">&#39;1.0e+00+1.0e+00j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="s">&#39;#.1e&#39;</span><span class="p">),</span> <span class="s">&#39;1.0e+00+1.0e+00j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="s">&#39;.1f&#39;</span><span class="p">),</span>  <span class="s">&#39;1.0+1.0j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1j</span><span class="p">,</span> <span class="s">&#39;#.1f&#39;</span><span class="p">),</span> <span class="s">&#39;1.0+1.0j&#39;</span><span class="p">)</span>

        <span class="c"># Misc. other alternate tests</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">((</span><span class="o">-</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">0.5j</span><span class="p">),</span> <span class="s">&#39;#f&#39;</span><span class="p">),</span> <span class="s">&#39;-1.500000+0.500000j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">((</span><span class="o">-</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">0.5j</span><span class="p">),</span> <span class="s">&#39;#.0f&#39;</span><span class="p">),</span> <span class="s">&#39;-2.+0.j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">((</span><span class="o">-</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">0.5j</span><span class="p">),</span> <span class="s">&#39;#e&#39;</span><span class="p">),</span> <span class="s">&#39;-1.500000e+00+5.000000e-01j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">((</span><span class="o">-</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">0.5j</span><span class="p">),</span> <span class="s">&#39;#.0e&#39;</span><span class="p">),</span> <span class="s">&#39;-2.e+00+5.e-01j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">((</span><span class="o">-</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">0.5j</span><span class="p">),</span> <span class="s">&#39;#g&#39;</span><span class="p">),</span> <span class="s">&#39;-1.50000+0.500000j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">((</span><span class="o">-</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">0.5j</span><span class="p">),</span> <span class="s">&#39;.0g&#39;</span><span class="p">),</span> <span class="s">&#39;-2+0.5j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">((</span><span class="o">-</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">0.5j</span><span class="p">),</span> <span class="s">&#39;#.0g&#39;</span><span class="p">),</span> <span class="s">&#39;-2.+0.5j&#39;</span><span class="p">)</span>

        <span class="c"># zero padding is invalid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">0.5j</span><span class="p">)</span><span class="o">.</span><span class="n">__format__</span><span class="p">,</span> <span class="s">&#39;010f&#39;</span><span class="p">)</span>

        <span class="c"># &#39;=&#39; alignment is invalid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mi">3j</span><span class="p">)</span><span class="o">.</span><span class="n">__format__</span><span class="p">,</span> <span class="s">&#39;=20&#39;</span><span class="p">)</span>

        <span class="c"># integer presentation types are an error</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="s">&#39;bcdoxX&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">0.5j</span><span class="p">)</span><span class="o">.</span><span class="n">__format__</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

        <span class="c"># make sure everything works in &#39;&#39;.format()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;*{0:.3f}*&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">3.14159</span><span class="o">+</span><span class="mf">2.71828j</span><span class="p">),</span> <span class="s">&#39;*3.142+2.718j*&#39;</span><span class="p">)</span>

        <span class="c"># issue 3382</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">NAN</span><span class="p">,</span> <span class="n">NAN</span><span class="p">),</span> <span class="s">&#39;f&#39;</span><span class="p">),</span> <span class="s">&#39;nan+nanj&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">NAN</span><span class="p">),</span> <span class="s">&#39;f&#39;</span><span class="p">),</span> <span class="s">&#39;1.000000+nanj&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">NAN</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s">&#39;f&#39;</span><span class="p">),</span> <span class="s">&#39;nan+1.000000j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">NAN</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;f&#39;</span><span class="p">),</span> <span class="s">&#39;nan-1.000000j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">NAN</span><span class="p">,</span> <span class="n">NAN</span><span class="p">),</span> <span class="s">&#39;F&#39;</span><span class="p">),</span> <span class="s">&#39;NAN+NANj&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">NAN</span><span class="p">),</span> <span class="s">&#39;F&#39;</span><span class="p">),</span> <span class="s">&#39;1.000000+NANj&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">NAN</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s">&#39;F&#39;</span><span class="p">),</span> <span class="s">&#39;NAN+1.000000j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">NAN</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;F&#39;</span><span class="p">),</span> <span class="s">&#39;NAN-1.000000j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">INF</span><span class="p">,</span> <span class="n">INF</span><span class="p">),</span> <span class="s">&#39;f&#39;</span><span class="p">),</span> <span class="s">&#39;inf+infj&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">INF</span><span class="p">),</span> <span class="s">&#39;f&#39;</span><span class="p">),</span> <span class="s">&#39;1.000000+infj&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">INF</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s">&#39;f&#39;</span><span class="p">),</span> <span class="s">&#39;inf+1.000000j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">INF</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;f&#39;</span><span class="p">),</span> <span class="s">&#39;inf-1.000000j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">INF</span><span class="p">,</span> <span class="n">INF</span><span class="p">),</span> <span class="s">&#39;F&#39;</span><span class="p">),</span> <span class="s">&#39;INF+INFj&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">INF</span><span class="p">),</span> <span class="s">&#39;F&#39;</span><span class="p">),</span> <span class="s">&#39;1.000000+INFj&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">INF</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s">&#39;F&#39;</span><span class="p">),</span> <span class="s">&#39;INF+1.000000j&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">INF</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;F&#39;</span><span class="p">),</span> <span class="s">&#39;INF-1.000000j&#39;</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="test_main"><a class="viewcode-back" href="../../test.html#test.test_complex.test_main">[docs]</a><span class="k">def</span> <span class="nf">test_main</span><span class="p">():</span>
    <span class="n">support</span><span class="o">.</span><span class="n">run_unittest</span><span class="p">(</span><span class="n">ComplexTest</span><span class="p">)</span>
</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">test_main</span><span class="p">()</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Weldon Henson.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>