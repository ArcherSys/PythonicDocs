

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>test.test_grammar &mdash; ArcherBashPYDocs 1.0.0. documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ArcherBashPYDocs 1.0.0. documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> ArcherBashPYDocs</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="simple">
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ArcherBashPYDocs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>test.test_grammar</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for test.test_grammar</h1><div class="highlight"><pre>
<span class="c"># Python test set -- part 1, grammar.</span>
<span class="c"># This just tests whether the parser accepts them all.</span>

<span class="kn">from</span> <span class="nn">test.support</span> <span class="kn">import</span> <span class="n">run_unittest</span><span class="p">,</span> <span class="n">check_syntax_error</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="c"># testing import *</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="o">*</span>


<div class="viewcode-block" id="TokenTests"><a class="viewcode-back" href="../../test.html#test.test_grammar.TokenTests">[docs]</a><span class="k">class</span> <span class="nc">TokenTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TokenTests.test_backslash"><a class="viewcode-back" href="../../test.html#test.test_grammar.TokenTests.test_backslash">[docs]</a>    <span class="k">def</span> <span class="nf">test_backslash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Backslash means line continuation:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> \
        <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;backslash for line continuation&#39;</span><span class="p">)</span>

        <span class="c"># Backslash does not means continuation in comments :\</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;backslash ending comment&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TokenTests.test_plain_integers"><a class="viewcode-back" href="../../test.html#test.test_grammar.TokenTests.test_plain_integers">[docs]</a>    <span class="k">def</span> <span class="nf">test_plain_integers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="mo">000</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mh">0xff</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">0</span><span class="n">o377</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">2147483647</span><span class="p">,</span> <span class="mi">0</span><span class="n">o17777777777</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mb">0b1001</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
        <span class="c"># &quot;0x&quot; is not a valid literal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">SyntaxError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">,</span> <span class="s">&quot;0x&quot;</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">maxsize</span>
        <span class="k">if</span> <span class="n">maxsize</span> <span class="o">==</span> <span class="mi">2147483647</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="o">-</span><span class="mi">2147483647</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="n">o20000000000</span><span class="p">)</span>
            <span class="c"># XXX -2147483648</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="mi">0</span><span class="n">o37777777777</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="mh">0xffffffff</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="mb">0b1111111111111111111111111111111</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;2147483648&#39;</span><span class="p">,</span> <span class="s">&#39;0o40000000000&#39;</span><span class="p">,</span> <span class="s">&#39;0x100000000&#39;</span><span class="p">,</span>
                      <span class="s">&#39;0b10000000000000000000000000000000&#39;</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">OverflowError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;OverflowError on huge integer literal </span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">maxsize</span> <span class="o">==</span> <span class="mi">9223372036854775807</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="o">-</span><span class="mi">9223372036854775807</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="n">o1000000000000000000000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="mi">0</span><span class="n">o1777777777777777777777</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="mh">0xffffffffffffffff</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="mb">0b11111111111111111111111111111111111111111111111111111111111111</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="s">&#39;9223372036854775808&#39;</span><span class="p">,</span> <span class="s">&#39;0o2000000000000000000000&#39;</span><span class="p">,</span> \
                     <span class="s">&#39;0x10000000000000000&#39;</span><span class="p">,</span> \
                     <span class="s">&#39;0b100000000000000000000000000000000000000000000000000000000000000&#39;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">OverflowError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;OverflowError on huge integer literal </span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;Weird maxsize value </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">maxsize</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TokenTests.test_long_integers"><a class="viewcode-back" href="../../test.html#test.test_grammar.TokenTests.test_long_integers">[docs]</a>    <span class="k">def</span> <span class="nf">test_long_integers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mh">0xffffffffffffffff</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mh">0Xffffffffffffffff</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="n">o77777777777777777</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="n">O77777777777777777</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">123456789012345678901234567890</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mb">0b100000000000000000000000000000000000000000000000000000000000000000000</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mb">0B111111111111111111111111111111111111111111111111111111111111111111111</span>
</div>
<div class="viewcode-block" id="TokenTests.test_floats"><a class="viewcode-back" href="../../test.html#test.test_grammar.TokenTests.test_floats">[docs]</a>    <span class="k">def</span> <span class="nf">test_floats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mf">3.14</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mf">314.</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mf">0.314</span>
        <span class="c"># XXX x = 000.314</span>
        <span class="n">x</span> <span class="o">=</span> <span class="o">.</span><span class="mi">314</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mf">3e14</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mf">3E14</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mf">3e-14</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mf">3e+14</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mf">3.e14</span>
        <span class="n">x</span> <span class="o">=</span> <span class="o">.</span><span class="mf">3e14</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mf">3.1e4</span>
</div>
<div class="viewcode-block" id="TokenTests.test_float_exponent_tokenization"><a class="viewcode-back" href="../../test.html#test.test_grammar.TokenTests.test_float_exponent_tokenization">[docs]</a>    <span class="k">def</span> <span class="nf">test_float_exponent_tokenization</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># See issue 21642.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="mi">1</span><span class="k">else</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="mi">0</span><span class="k">else</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">SyntaxError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">,</span> <span class="s">&quot;0 if 1Else 0&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TokenTests.test_string_literals"><a class="viewcode-back" href="../../test.html#test.test_grammar.TokenTests.test_string_literals">[docs]</a>    <span class="k">def</span> <span class="nf">test_string_literals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">;</span> <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\&#39;</span><span class="s">&#39;</span><span class="p">;</span> <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;&#39;&quot;</span><span class="p">;</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span> <span class="ow">and</span> <span class="nb">ord</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">39</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s">&#39;&quot;&#39;</span><span class="p">;</span> <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="p">;</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span> <span class="ow">and</span> <span class="nb">ord</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">34</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;doesn&#39;t </span><span class="se">\&quot;</span><span class="s">shrink</span><span class="se">\&quot;</span><span class="s"> does it&quot;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="s">&#39;doesn</span><span class="se">\&#39;</span><span class="s">t &quot;shrink&quot; does it&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">24</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;does </span><span class="se">\&quot;</span><span class="s">shrink</span><span class="se">\&quot;</span><span class="s"> doesn&#39;t it&quot;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="s">&#39;does &quot;shrink&quot; doesn</span><span class="se">\&#39;</span><span class="s">t it&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">24</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">The &quot;quick&quot;</span>
<span class="s">brown fox</span>
<span class="s">jumps over</span>
<span class="s">the &#39;lazy&#39; dog.</span>
<span class="s">&quot;&quot;&quot;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">The &quot;quick&quot;</span><span class="se">\n</span><span class="s">brown fox</span><span class="se">\n</span><span class="s">jumps over</span><span class="se">\n</span><span class="s">the </span><span class="se">\&#39;</span><span class="s">lazy</span><span class="se">\&#39;</span><span class="s"> dog.</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span>
<span class="s">The &quot;quick&quot;</span>
<span class="s">brown fox</span>
<span class="s">jumps over</span>
<span class="s">the &#39;lazy&#39; dog.</span>
<span class="s">&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\n\</span>
<span class="s">The </span><span class="se">\&quot;</span><span class="s">quick</span><span class="se">\&quot;\n\</span>
<span class="s">brown fox</span><span class="se">\n\</span>
<span class="s">jumps over</span><span class="se">\n\</span>
<span class="s">the &#39;lazy&#39; dog.</span><span class="se">\n\</span>
<span class="s">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n\</span>
<span class="s">The </span><span class="se">\&quot;</span><span class="s">quick</span><span class="se">\&quot;\n\</span>
<span class="s">brown fox</span><span class="se">\n\</span>
<span class="s">jumps over</span><span class="se">\n\</span>
<span class="s">the </span><span class="se">\&#39;</span><span class="s">lazy</span><span class="se">\&#39;</span><span class="s"> dog.</span><span class="se">\n\</span>
<span class="s">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TokenTests.test_ellipsis"><a class="viewcode-back" href="../../test.html#test.test_grammar.TokenTests.test_ellipsis">[docs]</a>    <span class="k">def</span> <span class="nf">test_ellipsis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="o">...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">x</span> <span class="ow">is</span> <span class="bp">Ellipsis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">SyntaxError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">,</span> <span class="s">&quot;.. .&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TokenTests.test_eof_error"><a class="viewcode-back" href="../../test.html#test.test_grammar.TokenTests.test_eof_error">[docs]</a>    <span class="k">def</span> <span class="nf">test_eof_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;def foo(&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">def foo(&quot;</span><span class="p">,</span> <span class="s">&quot;def foo(</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">SyntaxError</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
                <span class="nb">compile</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;&lt;test&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;exec&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&quot;unexpected EOF&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">exception</span><span class="p">))</span>
</div></div>
<div class="viewcode-block" id="GrammarTests"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests">[docs]</a><span class="k">class</span> <span class="nc">GrammarTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="c"># single_input: NEWLINE | simple_stmt | compound_stmt NEWLINE</span>
    <span class="c"># XXX can&#39;t test in a script -- this rule is only used when interactive</span>

    <span class="c"># file_input: (NEWLINE | stmt)* ENDMARKER</span>
    <span class="c"># Being tested as this very moment this very module</span>

    <span class="c"># expr_input: testlist NEWLINE</span>
    <span class="c"># XXX Hard to test -- used only in calls to input()</span>

<div class="viewcode-block" id="GrammarTests.test_eval_input"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_eval_input">[docs]</a>    <span class="k">def</span> <span class="nf">test_eval_input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># testlist ENDMARKER</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s">&#39;1, 0 or 1&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_funcdef"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_funcdef">[docs]</a>    <span class="k">def</span> <span class="nf">test_funcdef</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">### [decorators] &#39;def&#39; NAME parameters [&#39;-&gt;&#39; test] &#39;:&#39; suite</span>
        <span class="c">### decorator: &#39;@&#39; dotted_name [ &#39;(&#39; [arglist] &#39;)&#39; ] NEWLINE</span>
        <span class="c">### decorators: decorator+</span>
        <span class="c">### parameters: &#39;(&#39; [typedargslist] &#39;)&#39;</span>
        <span class="c">### typedargslist: ((tfpdef [&#39;=&#39; test] &#39;,&#39;)*</span>
        <span class="c">###                (&#39;*&#39; [tfpdef] (&#39;,&#39; tfpdef [&#39;=&#39; test])* [&#39;,&#39; &#39;**&#39; tfpdef] | &#39;**&#39; tfpdef)</span>
        <span class="c">###                | tfpdef [&#39;=&#39; test] (&#39;,&#39; tfpdef [&#39;=&#39; test])* [&#39;,&#39;])</span>
        <span class="c">### tfpdef: NAME [&#39;:&#39; test]</span>
        <span class="c">### varargslist: ((vfpdef [&#39;=&#39; test] &#39;,&#39;)*</span>
        <span class="c">###              (&#39;*&#39; [vfpdef] (&#39;,&#39; vfpdef [&#39;=&#39; test])*  [&#39;,&#39; &#39;**&#39; vfpdef] | &#39;**&#39; vfpdef)</span>
        <span class="c">###              | vfpdef [&#39;=&#39; test] (&#39;,&#39; vfpdef [&#39;=&#39; test])* [&#39;,&#39;])</span>
        <span class="c">### vfpdef: NAME</span>
        <span class="k">def</span> <span class="nf">f1</span><span class="p">():</span> <span class="k">pass</span>
        <span class="n">f1</span><span class="p">()</span>
        <span class="n">f1</span><span class="p">(</span><span class="o">*</span><span class="p">())</span>
        <span class="n">f1</span><span class="p">(</span><span class="o">*</span><span class="p">(),</span> <span class="o">**</span><span class="p">{})</span>
        <span class="k">def</span> <span class="nf">f2</span><span class="p">(</span><span class="n">one_argument</span><span class="p">):</span> <span class="k">pass</span>
        <span class="k">def</span> <span class="nf">f3</span><span class="p">(</span><span class="n">two</span><span class="p">,</span> <span class="n">arguments</span><span class="p">):</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f2</span><span class="o">.</span><span class="n">__code__</span><span class="o">.</span><span class="n">co_varnames</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;one_argument&#39;</span><span class="p">,))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f3</span><span class="o">.</span><span class="n">__code__</span><span class="o">.</span><span class="n">co_varnames</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;arguments&#39;</span><span class="p">))</span>
        <span class="k">def</span> <span class="nf">a1</span><span class="p">(</span><span class="n">one_arg</span><span class="p">,):</span> <span class="k">pass</span>
        <span class="k">def</span> <span class="nf">a2</span><span class="p">(</span><span class="n">two</span><span class="p">,</span> <span class="n">args</span><span class="p">,):</span> <span class="k">pass</span>
        <span class="k">def</span> <span class="nf">v0</span><span class="p">(</span><span class="o">*</span><span class="n">rest</span><span class="p">):</span> <span class="k">pass</span>
        <span class="k">def</span> <span class="nf">v1</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span><span class="p">):</span> <span class="k">pass</span>
        <span class="k">def</span> <span class="nf">v2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span><span class="p">):</span> <span class="k">pass</span>

        <span class="n">f1</span><span class="p">()</span>
        <span class="n">f2</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">f2</span><span class="p">(</span><span class="mi">1</span><span class="p">,)</span>
        <span class="n">f3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">f3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,)</span>
        <span class="n">v0</span><span class="p">()</span>
        <span class="n">v0</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">v0</span><span class="p">(</span><span class="mi">1</span><span class="p">,)</span>
        <span class="n">v0</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">v0</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">v1</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">v1</span><span class="p">(</span><span class="mi">1</span><span class="p">,)</span>
        <span class="n">v1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">v1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">v1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">v2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">v2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">v2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">v2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">d01</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">d01</span><span class="p">()</span>
        <span class="n">d01</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">d01</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="p">,))</span>
        <span class="n">d01</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">d11</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">d11</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">d11</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">d11</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">d21</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">d21</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">d21</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">d21</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="n">d21</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="n">d21</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="mi">3</span><span class="p">,))</span>
        <span class="n">d21</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;c&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">d02</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">d02</span><span class="p">()</span>
        <span class="n">d02</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">d02</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">d02</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="n">d02</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="mi">2</span><span class="p">,))</span>
        <span class="n">d02</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">})</span>
        <span class="n">d02</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">d12</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">d12</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">d12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">d12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">d22</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">d22</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">d22</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">d22</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">d01v</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">d01v</span><span class="p">()</span>
        <span class="n">d01v</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">d01v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">d01v</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="n">d01v</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="p">,))</span>
        <span class="n">d01v</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">d11v</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">d11v</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">d11v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">d11v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">d21v</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">d21v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">d21v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">d21v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="n">d21v</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="n">d21v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">d02v</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">d02v</span><span class="p">()</span>
        <span class="n">d02v</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">d02v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">d02v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">d02v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="n">d02v</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">d12v</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">d12v</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">d12v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">d12v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">d12v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="n">d12v</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="n">d12v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
        <span class="n">d12v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="mi">2</span><span class="p">,),</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">d22v</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">d22v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">d22v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">d22v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="n">d22v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="n">d22v</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="n">d22v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
        <span class="n">d22v</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;d&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>

        <span class="c"># keyword argument type tests</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">str</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="n">b</span><span class="s">&#39;foo&#39;</span><span class="p">:</span><span class="mi">1</span> <span class="p">})</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;Bytes should not work as keyword argument names&#39;</span><span class="p">)</span>
        <span class="c"># keyword only argument tests</span>
        <span class="k">def</span> <span class="nf">pos0key1</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span> <span class="k">return</span> <span class="n">key</span>
        <span class="n">pos0key1</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">pos2key2</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span> <span class="k">return</span> <span class="n">p1</span><span class="p">,</span><span class="n">p2</span><span class="p">,</span><span class="n">k1</span><span class="p">,</span><span class="n">k2</span>
        <span class="n">pos2key2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">k1</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="n">pos2key2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">k1</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">k2</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="n">pos2key2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">k2</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">k1</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">pos2key2dict</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">k1</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="o">**</span><span class="n">kwarg</span><span class="p">):</span> <span class="k">return</span> <span class="n">p1</span><span class="p">,</span><span class="n">p2</span><span class="p">,</span><span class="n">k1</span><span class="p">,</span><span class="n">k2</span><span class="p">,</span><span class="n">kwarg</span>
        <span class="n">pos2key2dict</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">k2</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">tokwarg1</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">tokwarg2</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="n">pos2key2dict</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">tokwarg1</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">tokwarg2</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">k2</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

        <span class="c"># keyword arguments after *arglist</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span> <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                                    <span class="p">{</span><span class="s">&#39;x&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">SyntaxError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">,</span> <span class="s">&quot;f(1, *(2,3), 4)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">SyntaxError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">,</span> <span class="s">&quot;f(1, x=2, *(3,4), x=5)&quot;</span><span class="p">)</span>

        <span class="c"># argument annotation tests</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;return&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">x</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">**</span><span class="n">x</span><span class="p">:</span><span class="nb">float</span><span class="p">):</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="p">):</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span><span class="mi">3</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="o">*</span><span class="n">g</span><span class="p">:</span><span class="mi">6</span><span class="p">):</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">,</span>
                          <span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#39;g&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">})</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span><span class="mi">3</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="o">*</span><span class="n">g</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span> <span class="n">h</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span><span class="mi">9</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
              <span class="o">**</span><span class="n">k</span><span class="p">:</span><span class="mi">11</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">12</span><span class="p">:</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">,</span>
                          <span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#39;g&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s">&#39;h&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s">&#39;j&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
                           <span class="s">&#39;k&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s">&#39;return&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">})</span>
        <span class="c"># Check for issue #20625 -- annotations mangling</span>
        <span class="k">class</span> <span class="nc">Spam</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">__kw</span><span class="p">:</span><span class="mi">1</span><span class="p">):</span>
                <span class="k">pass</span>
        <span class="k">class</span> <span class="nc">Ham</span><span class="p">(</span><span class="n">Spam</span><span class="p">):</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">Spam</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;_Spam__kw&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">Ham</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;_Spam__kw&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="c"># Check for SF Bug #1697248 - mixing decorators and a return annotation</span>
        <span class="k">def</span> <span class="nf">null</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span>
        <span class="nd">@null</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;return&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">})</span>

        <span class="c"># test MAKE_CLOSURE with a variety of oparg&#39;s</span>
        <span class="n">closure</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">():</span> <span class="k">return</span> <span class="n">closure</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="k">return</span> <span class="n">closure</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="k">return</span> <span class="n">closure</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span> <span class="k">return</span> <span class="n">closure</span>

        <span class="c"># Check ast errors in *args and *kwargs</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;f(*g(1=2))&quot;</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;f(**g(1=2))&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_lambdef"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_lambdef">[docs]</a>    <span class="k">def</span> <span class="nf">test_lambdef</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">### lambdef: &#39;lambda&#39; [varargslist] &#39;:&#39; test</span>
        <span class="n">l1</span> <span class="o">=</span> <span class="k">lambda</span> <span class="p">:</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">l1</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">l2</span> <span class="o">=</span> <span class="k">lambda</span> <span class="p">:</span> <span class="n">a</span><span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="c"># XXX just testing the expression</span>
        <span class="n">l3</span> <span class="o">=</span> <span class="k">lambda</span> <span class="p">:</span> <span class="p">[</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">l3</span><span class="p">(),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="n">l4</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">y</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">z</span><span class="o">=</span><span class="mi">1</span> <span class="p">:</span> <span class="n">z</span> <span class="p">:</span> <span class="n">y</span><span class="p">()</span> <span class="p">:</span> <span class="n">x</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">l4</span><span class="p">(),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">l5</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">2</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">l5</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">l5</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;lambda x: x = 2&quot;</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;lambda (None,): None&quot;</span><span class="p">)</span>
        <span class="n">l6</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">20</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">+</span><span class="n">k</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">l6</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">+</span><span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">l6</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span> <span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">+</span><span class="mi">10</span><span class="p">)</span>


    <span class="c">### stmt: simple_stmt | compound_stmt</span>
    <span class="c"># Tested below</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_simple_stmt"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_simple_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">test_simple_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">### simple_stmt: small_stmt (&#39;;&#39; small_stmt)* [&#39;;&#39;]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="k">pass</span><span class="p">;</span> <span class="k">del</span> <span class="n">x</span>
        <span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
            <span class="c"># verify statements that end with semi-colons</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="k">pass</span><span class="p">;</span> <span class="k">del</span> <span class="n">x</span><span class="p">;</span>
        <span class="n">foo</span><span class="p">()</span>

    <span class="c">### small_stmt: expr_stmt | pass_stmt | del_stmt | flow_stmt | import_stmt | global_stmt | access_stmt</span>
    <span class="c"># Tested below</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_expr_stmt"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_expr_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">test_expr_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># (exprlist &#39;=&#39;)* exprlist</span>
        <span class="mi">1</span>
        <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="n">z</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>
        <span class="n">abc</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">xyz</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;x + 1 = 1&quot;</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;a + 1 = b + 2&quot;</span><span class="p">)</span>

    <span class="c"># Check the heuristic for print &amp; exec covers significant cases</span>
    <span class="c"># As well as placing some limits on false positives</span></div>
<div class="viewcode-block" id="GrammarTests.test_former_statements_refer_to_builtins"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_former_statements_refer_to_builtins">[docs]</a>    <span class="k">def</span> <span class="nf">test_former_statements_refer_to_builtins</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">keywords</span> <span class="o">=</span> <span class="s">&quot;print&quot;</span><span class="p">,</span> <span class="s">&quot;exec&quot;</span>
        <span class="c"># Cases where we want the custom error</span>
        <span class="n">cases</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&quot;{} foo&quot;</span><span class="p">,</span>
            <span class="s">&quot;{} {{1:foo}}&quot;</span><span class="p">,</span>
            <span class="s">&quot;if 1: {} foo&quot;</span><span class="p">,</span>
            <span class="s">&quot;if 1: {} {{1:foo}}&quot;</span><span class="p">,</span>
            <span class="s">&quot;if 1:</span><span class="se">\n</span><span class="s">    {} foo&quot;</span><span class="p">,</span>
            <span class="s">&quot;if 1:</span><span class="se">\n</span><span class="s">    {} {{1:foo}}&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">:</span>
            <span class="n">custom_msg</span> <span class="o">=</span> <span class="s">&quot;call to &#39;{}&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">keyword</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">case</span> <span class="ow">in</span> <span class="n">cases</span><span class="p">:</span>
                <span class="n">source</span> <span class="o">=</span> <span class="n">case</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">keyword</span><span class="p">)</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">subTest</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">):</span>
                    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegex</span><span class="p">(</span><span class="ne">SyntaxError</span><span class="p">,</span> <span class="n">custom_msg</span><span class="p">):</span>
                        <span class="k">exec</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
                <span class="n">source</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;(foo.)&quot;</span><span class="p">)</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">subTest</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">):</span>
                    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegex</span><span class="p">(</span><span class="ne">SyntaxError</span><span class="p">,</span> <span class="s">&quot;invalid syntax&quot;</span><span class="p">):</span>
                        <span class="k">exec</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_del_stmt"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_del_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">test_del_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;del&#39; exprlist</span>
        <span class="n">abc</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">abc</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>

        <span class="k">del</span> <span class="n">abc</span>
        <span class="k">del</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">xyz</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_pass_stmt"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_pass_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">test_pass_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;pass&#39;</span>
        <span class="k">pass</span>

    <span class="c"># flow_stmt: break_stmt | continue_stmt | return_stmt | raise_stmt</span>
    <span class="c"># Tested below</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_break_stmt"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_break_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">test_break_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;break&#39;</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span> <span class="k">break</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_continue_stmt"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_continue_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">test_continue_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;continue&#39;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="k">continue</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">msg</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;ok&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">continue</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;continue failed to continue inside try&quot;</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;continue inside try called except block&quot;</span>
        <span class="k">if</span> <span class="n">msg</span> <span class="o">!=</span> <span class="s">&quot;ok&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">msg</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;finally block not called&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;ok&quot;</span>
        <span class="k">if</span> <span class="n">msg</span> <span class="o">!=</span> <span class="s">&quot;ok&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_break_continue_loop"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_break_continue_loop">[docs]</a>    <span class="k">def</span> <span class="nf">test_break_continue_loop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># This test warrants an explanation. It is a test specifically for SF bugs</span>
        <span class="c"># #463359 and #462937. The bug is that a &#39;break&#39; statement executed or</span>
        <span class="c"># exception raised inside a try/except inside a loop, *after* a continue</span>
        <span class="c"># statement has been executed in that loop, will cause the wrong number of</span>
        <span class="c"># arguments to be popped off the stack and the instruction pointer reset to</span>
        <span class="c"># a very small number (usually 0.) Because of this, the following test</span>
        <span class="c"># *must* written as a function, and the tracking vars *must* be function</span>
        <span class="c"># arguments with default values. Otherwise, the test will loop and loop.</span>

        <span class="k">def</span> <span class="nf">test_inner</span><span class="p">(</span><span class="n">extra_burning_oil</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">big_hippo</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">while</span> <span class="n">big_hippo</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">extra_burning_oil</span> <span class="ow">and</span> <span class="n">big_hippo</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">extra_burning_oil</span> <span class="o">-=</span> <span class="mi">1</span>
                        <span class="k">break</span>
                    <span class="n">big_hippo</span> <span class="o">-=</span> <span class="mi">1</span>
                    <span class="k">continue</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">raise</span>
            <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">big_hippo</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;continue then break in try/except in loop broken!&quot;</span><span class="p">)</span>
        <span class="n">test_inner</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_return"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_return">[docs]</a>    <span class="k">def</span> <span class="nf">test_return</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;return&#39; [testlist]</span>
        <span class="k">def</span> <span class="nf">g1</span><span class="p">():</span> <span class="k">return</span>
        <span class="k">def</span> <span class="nf">g2</span><span class="p">():</span> <span class="k">return</span> <span class="mi">1</span>
        <span class="n">g1</span><span class="p">()</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">g2</span><span class="p">()</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;class foo:return 1&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_yield"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_yield">[docs]</a>    <span class="k">def</span> <span class="nf">test_yield</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Allowed as standalone statement</span>
        <span class="k">def</span> <span class="nf">g</span><span class="p">():</span> <span class="k">yield</span> <span class="mi">1</span>
        <span class="k">def</span> <span class="nf">g</span><span class="p">():</span> <span class="k">yield from</span> <span class="p">()</span>
        <span class="c"># Allowed as RHS of assignment</span>
        <span class="k">def</span> <span class="nf">g</span><span class="p">():</span> <span class="n">x</span> <span class="o">=</span> <span class="k">yield</span> <span class="mi">1</span>
        <span class="k">def</span> <span class="nf">g</span><span class="p">():</span> <span class="n">x</span> <span class="o">=</span> <span class="k">yield from</span> <span class="p">()</span>
        <span class="c"># Ordinary yield accepts implicit tuples</span>
        <span class="k">def</span> <span class="nf">g</span><span class="p">():</span> <span class="k">yield</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
        <span class="k">def</span> <span class="nf">g</span><span class="p">():</span> <span class="n">x</span> <span class="o">=</span> <span class="k">yield</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
        <span class="c"># &#39;yield from&#39; does not</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;def g(): yield from (), 1&quot;</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;def g(): x = yield from (), 1&quot;</span><span class="p">)</span>
        <span class="c"># Requires parentheses as subexpression</span>
        <span class="k">def</span> <span class="nf">g</span><span class="p">():</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="k">yield</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">g</span><span class="p">():</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="k">yield from</span> <span class="p">())</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;def g(): 1, yield 1&quot;</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;def g(): 1, yield from ()&quot;</span><span class="p">)</span>
        <span class="c"># Requires parentheses as call argument</span>
        <span class="k">def</span> <span class="nf">g</span><span class="p">():</span> <span class="n">f</span><span class="p">((</span><span class="k">yield</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">def</span> <span class="nf">g</span><span class="p">():</span> <span class="n">f</span><span class="p">((</span><span class="k">yield</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">g</span><span class="p">():</span> <span class="n">f</span><span class="p">((</span><span class="k">yield from</span> <span class="p">()))</span>
        <span class="k">def</span> <span class="nf">g</span><span class="p">():</span> <span class="n">f</span><span class="p">((</span><span class="k">yield from</span> <span class="p">()),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;def g(): f(yield 1)&quot;</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;def g(): f(yield 1, 1)&quot;</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;def g(): f(yield from ())&quot;</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;def g(): f(yield from (), 1)&quot;</span><span class="p">)</span>
        <span class="c"># Not allowed at top level</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;yield&quot;</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;yield from&quot;</span><span class="p">)</span>
        <span class="c"># Not allowed at class scope</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;class foo:yield 1&quot;</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;class foo:yield from ()&quot;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="GrammarTests.test_raise"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_raise">[docs]</a>    <span class="k">def</span> <span class="nf">test_raise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;raise&#39; test [&#39;,&#39; test]</span>
        <span class="k">try</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&#39;just testing&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">KeyboardInterrupt</span>
        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_import"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_import">[docs]</a>    <span class="k">def</span> <span class="nf">test_import</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;import&#39; dotted_as_names</span>
        <span class="kn">import</span> <span class="nn">sys</span>
        <span class="kn">import</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">sys</span>
        <span class="c"># &#39;from&#39; dotted_name &#39;import&#39; (&#39;*&#39; | &#39;(&#39; import_as_names &#39;)&#39; | import_as_names)</span>
        <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
        <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="p">(</span><span class="n">time</span><span class="p">)</span>
        <span class="c"># not testable inside a function, but already done at top of the module</span>
        <span class="c"># from sys import *</span>
        <span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span><span class="p">,</span> <span class="n">argv</span>
        <span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">argv</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">argv</span><span class="p">,)</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_global"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_global">[docs]</a>    <span class="k">def</span> <span class="nf">test_global</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;global&#39; NAME (&#39;,&#39; NAME)*</span>
        <span class="k">global</span> <span class="n">a</span>
        <span class="k">global</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
        <span class="k">global</span> <span class="n">one</span><span class="p">,</span> <span class="n">two</span><span class="p">,</span> <span class="n">three</span><span class="p">,</span> <span class="n">four</span><span class="p">,</span> <span class="n">five</span><span class="p">,</span> <span class="n">six</span><span class="p">,</span> <span class="n">seven</span><span class="p">,</span> <span class="n">eight</span><span class="p">,</span> <span class="n">nine</span><span class="p">,</span> <span class="n">ten</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_nonlocal"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_nonlocal">[docs]</a>    <span class="k">def</span> <span class="nf">test_nonlocal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;nonlocal&#39; NAME (&#39;,&#39; NAME)*</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
            <span class="n">nonlocal</span> <span class="n">x</span>
            <span class="n">nonlocal</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_assert"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_assert">[docs]</a>    <span class="k">def</span> <span class="nf">test_assert</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># assertTruestmt: &#39;assert&#39; test [&#39;,&#39; test]</span>
        <span class="k">assert</span> <span class="mi">1</span>
        <span class="k">assert</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
        <span class="k">assert</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span>
        <span class="k">assert</span> <span class="mi">1</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">True</span>
        <span class="k">except</span> <span class="ne">AssertionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;&#39;assert True&#39; should not have raised an AssertionError&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">True</span><span class="p">,</span> <span class="s">&#39;this should always pass&#39;</span>
        <span class="k">except</span> <span class="ne">AssertionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;&#39;assert True, msg&#39; should not have &quot;</span>
                      <span class="s">&quot;raised an AssertionError&quot;</span><span class="p">)</span>

    <span class="c"># these tests fail if python is run with -O, so check __debug__</span></div>
    <span class="nd">@unittest.skipUnless</span><span class="p">(</span><span class="n">__debug__</span><span class="p">,</span> <span class="s">&quot;Won&#39;t work if __debug__ is False&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="GrammarTests.testAssert2"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.testAssert2">[docs]</a>    <span class="k">def</span> <span class="nf">testAssert2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;msg&quot;</span>
        <span class="k">except</span> <span class="ne">AssertionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&quot;msg&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;AssertionError not raised by assert 0&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="k">except</span> <span class="ne">AssertionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;AssertionError not raised by &#39;assert False&#39;&quot;</span><span class="p">)</span>


    <span class="c">### compound_stmt: if_stmt | while_stmt | for_stmt | try_stmt | funcdef | classdef</span>
    <span class="c"># Tested below</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_if"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_if">[docs]</a>    <span class="k">def</span> <span class="nf">test_if</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;if&#39; test &#39;:&#39; suite (&#39;elif&#39; test &#39;:&#39; suite)* [&#39;else&#39; &#39;:&#39; suite]</span>
        <span class="k">if</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">elif</span> <span class="mi">0</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">elif</span> <span class="mi">0</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">elif</span> <span class="mi">0</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">elif</span> <span class="mi">0</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_while"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_while">[docs]</a>    <span class="k">def</span> <span class="nf">test_while</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;while&#39; test &#39;:&#39; suite [&#39;else&#39; &#39;:&#39; suite]</span>
        <span class="k">while</span> <span class="mi">0</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">while</span> <span class="mi">0</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">pass</span>

        <span class="c"># Issue1920: &quot;while 0&quot; is optimized away,</span>
        <span class="c"># ensure that the &quot;else&quot; clause is still present.</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_for"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_for">[docs]</a>    <span class="k">def</span> <span class="nf">test_for</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;for&#39; exprlist &#39;in&#39; exprlist &#39;:&#39; suite [&#39;else&#39; &#39;:&#39; suite]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">():</span> <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">class</span> <span class="nc">Squares</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">max</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">=</span> <span class="nb">max</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sofar</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sofar</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">IndexError</span>
                <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sofar</span><span class="p">)</span>
                <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="n">i</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">sofar</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sofar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">Squares</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span> <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">+</span><span class="n">x</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">285</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;for over growing sequence&#39;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="ow">in</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,)]:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_try"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_try">[docs]</a>    <span class="k">def</span> <span class="nf">test_try</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">### try_stmt: &#39;try&#39; &#39;:&#39; suite (except_clause &#39;:&#39; suite)+ [&#39;else&#39; &#39;:&#39; suite]</span>
        <span class="c">###         | &#39;try&#39; &#39;:&#39; suite &#39;finally&#39; &#39;:&#39; suite</span>
        <span class="c">### except_clause: &#39;except&#39; [expr [&#39;as&#39; expr]]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
        <span class="k">except</span> <span class="ne">EOFError</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">msg</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">msg</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">EOFError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ZeroDivisionError</span><span class="p">):</span> <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">EOFError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ZeroDivisionError</span><span class="p">)</span> <span class="k">as</span> <span class="n">msg</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">finally</span><span class="p">:</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_suite"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_suite">[docs]</a>    <span class="k">def</span> <span class="nf">test_suite</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># simple_stmt | NEWLINE INDENT NEWLINE* (stmt NEWLINE*)+ DEDENT</span>
        <span class="k">if</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c">#</span>
            <span class="c">#</span>
            <span class="c">#</span>
            <span class="k">pass</span>
            <span class="k">pass</span>
            <span class="c">#</span>
            <span class="k">pass</span>
            <span class="c">#</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_test"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_test">[docs]</a>    <span class="k">def</span> <span class="nf">test_test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">### and_test (&#39;or&#39; and_test)*</span>
        <span class="c">### and_test: not_test (&#39;and&#39; not_test)*</span>
        <span class="c">### not_test: &#39;not&#39; not_test | comparison</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="ow">or</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="ow">not</span> <span class="ow">not</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">1</span> <span class="ow">or</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">1</span> <span class="ow">or</span> <span class="ow">not</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_comparison"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_comparison">[docs]</a>    <span class="k">def</span> <span class="nf">test_comparison</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">### comparison: expr (comp_op expr)*</span>
        <span class="c">### comp_op: &#39;&lt;&#39;|&#39;&gt;&#39;|&#39;==&#39;|&#39;&gt;=&#39;|&#39;&lt;=&#39;|&#39;!=&#39;|&#39;in&#39;|&#39;not&#39; &#39;in&#39;|&#39;is&#39;|&#39;is&#39; &#39;not&#39;</span>
        <span class="k">if</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="ow">is</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="ow">in</span> <span class="p">():</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">():</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">in</span> <span class="mi">1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="mi">1</span> <span class="ow">is</span> <span class="mi">1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mi">1</span><span class="p">:</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_binary_mask_ops"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_binary_mask_ops">[docs]</a>    <span class="k">def</span> <span class="nf">test_binary_mask_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&amp;</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">^</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">|</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_shift_ops"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_shift_ops">[docs]</a>    <span class="k">def</span> <span class="nf">test_shift_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_additive_ops"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_additive_ops">[docs]</a>    <span class="k">def</span> <span class="nf">test_additive_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_multiplicative_ops"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_multiplicative_ops">[docs]</a>    <span class="k">def</span> <span class="nf">test_multiplicative_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">%</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">1</span> <span class="o">*</span> <span class="mi">1</span> <span class="o">%</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_unary_ops"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_unary_ops">[docs]</a>    <span class="k">def</span> <span class="nf">test_unary_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="o">+</span><span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="o">~</span><span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="o">~</span><span class="mi">1</span> <span class="o">^</span> <span class="mi">1</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">|</span> <span class="mi">1</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">^</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="o">*</span><span class="mi">1</span> <span class="o">-</span> <span class="o">---</span><span class="mi">1</span><span class="o">*</span><span class="mi">1</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_selectors"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_selectors">[docs]</a>    <span class="k">def</span> <span class="nf">test_selectors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">### trailer: &#39;(&#39; [testlist] &#39;)&#39; | &#39;[&#39; subscript &#39;]&#39; | &#39;.&#39; NAME</span>
        <span class="c">### subscript: expr | [expr] &#39;:&#39; [expr]</span>

        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">time</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s">&#39;time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;01234&#39;</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">:]</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:]</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
        <span class="c"># A rough test of SF bug 1333982.  http://python.org/sf/1333982</span>
        <span class="c"># The testing here is fairly incomplete.</span>
        <span class="c"># Test cases should include: commas with 1 and 2 colons</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">,]</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="n">L</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="n">L</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">else</span> <span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">L</span><span class="p">),</span> <span class="s">&#39;[1, (1,), (1, 2), (1, 2, 3)]&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_atoms"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_atoms">[docs]</a>    <span class="k">def</span> <span class="nf">test_atoms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">### atom: &#39;(&#39; [testlist] &#39;)&#39; | &#39;[&#39; [testlist] &#39;]&#39; | &#39;{&#39; [dictsetmaker] &#39;}&#39; | NAME | NUMBER | STRING</span>
        <span class="c">### dictsetmaker: (test &#39;:&#39; test (&#39;,&#39; test &#39;:&#39; test)* [&#39;,&#39;]) | (test (&#39;,&#39; test)* [&#39;,&#39;])</span>

        <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="ow">or</span> <span class="mi">2</span> <span class="ow">or</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="ow">or</span> <span class="mi">2</span> <span class="ow">or</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

        <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="ow">or</span> <span class="mi">2</span> <span class="ow">or</span> <span class="mi">3</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="ow">or</span> <span class="mi">2</span> <span class="ow">or</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">x</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;one&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;one&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,}</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;one&#39;</span> <span class="ow">or</span> <span class="s">&#39;two&#39;</span><span class="p">:</span> <span class="mi">1</span> <span class="ow">or</span> <span class="mi">2</span><span class="p">}</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;one&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;one&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,}</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;one&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;three&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#39;four&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&#39;five&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s">&#39;six&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>

        <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;one&#39;</span><span class="p">}</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,}</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;three&#39;</span><span class="p">}</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,}</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s">&#39;x&#39;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">123</span>

    <span class="c">### exprlist: expr (&#39;,&#39; expr)* [&#39;,&#39;]</span>
    <span class="c">### testlist: test (&#39;,&#39; test)* [&#39;,&#39;]</span>
    <span class="c"># These have been exercised enough above</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_classdef"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_classdef">[docs]</a>    <span class="k">def</span> <span class="nf">test_classdef</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;class&#39; NAME [&#39;(&#39; [testlist] &#39;)&#39;] &#39;:&#39; suite</span>
        <span class="k">class</span> <span class="nc">B</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">class</span> <span class="nc">B2</span><span class="p">():</span> <span class="k">pass</span>
        <span class="k">class</span> <span class="nc">C1</span><span class="p">(</span><span class="n">B</span><span class="p">):</span> <span class="k">pass</span>
        <span class="k">class</span> <span class="nc">C2</span><span class="p">(</span><span class="n">B</span><span class="p">):</span> <span class="k">pass</span>
        <span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">C1</span><span class="p">,</span> <span class="n">C2</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span> <span class="k">pass</span>
        <span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">meth1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
            <span class="k">def</span> <span class="nf">meth2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span> <span class="k">pass</span>
            <span class="k">def</span> <span class="nf">meth3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">):</span> <span class="k">pass</span>

        <span class="c"># decorator: &#39;@&#39; dotted_name [ &#39;(&#39; [arglist] &#39;)&#39; ] NEWLINE</span>
        <span class="c"># decorators: decorator+</span>
        <span class="c"># decorated: decorators (classdef | funcdef)</span>
        <span class="k">def</span> <span class="nf">class_decorator</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span>
        <span class="nd">@class_decorator</span>
        <span class="k">class</span> <span class="nc">G</span><span class="p">:</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_dictcomps"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_dictcomps">[docs]</a>    <span class="k">def</span> <span class="nf">test_dictcomps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># dictorsetmaker: ( (test &#39;:&#39; test (comp_for |</span>
        <span class="c">#                                   (&#39;,&#39; test &#39;:&#39; test)* [&#39;,&#39;])) |</span>
        <span class="c">#                   (test (comp_for | (&#39;,&#39; test)* [&#39;,&#39;])) )</span>
        <span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">({</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">},</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_listcomps"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_listcomps">[docs]</a>    <span class="k">def</span> <span class="nf">test_listcomps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># list comprehension tests</span>
        <span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
        <span class="n">strs</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Apple&quot;</span><span class="p">,</span> <span class="s">&quot;Banana&quot;</span><span class="p">,</span> <span class="s">&quot;Coconut&quot;</span><span class="p">]</span>
        <span class="n">spcs</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;  Apple&quot;</span><span class="p">,</span> <span class="s">&quot; Banana &quot;</span><span class="p">,</span> <span class="s">&quot;Coco  nut  &quot;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">spcs</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;Apple&#39;</span><span class="p">,</span> <span class="s">&#39;Banana&#39;</span><span class="p">,</span> <span class="s">&#39;Coco  nut&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="mi">3</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">15</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">nums</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([(</span><span class="n">i</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">nums</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">strs</span><span class="p">],</span>
                         <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Apple&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Banana&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Coconut&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;Apple&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;Banana&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;Coconut&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;Apple&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;Banana&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;Coconut&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;Apple&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;Banana&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;Coconut&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;Apple&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;Banana&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;Coconut&#39;</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([(</span><span class="n">i</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">nums</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">strs</span> <span class="k">if</span> <span class="s">&quot;n&quot;</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]],</span>
                         <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Banana&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Coconut&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;Banana&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;Coconut&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;Banana&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;Coconut&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;Banana&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#39;Coconut&#39;</span><span class="p">),</span>
                          <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;Banana&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;Coconut&#39;</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:[</span><span class="n">a</span><span class="o">**</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="p">)])(</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)],</span>
                         <span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">27</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">256</span><span class="p">]])</span>

        <span class="k">def</span> <span class="nf">test_in_func</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="mi">0</span> <span class="o">&lt;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">l</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">test_in_func</span><span class="p">(</span><span class="n">nums</span><span class="p">),</span> <span class="p">[</span><span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">])</span>

        <span class="k">def</span> <span class="nf">test_nested_front</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">]],</span>
                             <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>

        <span class="n">test_nested_front</span><span class="p">()</span>

        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;[i, s for i in nums for s in strs]&quot;</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;[x if y]&quot;</span><span class="p">)</span>

        <span class="n">suppliers</span> <span class="o">=</span> <span class="p">[</span>
          <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Boeing&quot;</span><span class="p">),</span>
          <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&quot;Ford&quot;</span><span class="p">),</span>
          <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&quot;Macdonalds&quot;</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="n">parts</span> <span class="o">=</span> <span class="p">[</span>
          <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s">&quot;Airliner&quot;</span><span class="p">),</span>
          <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="s">&quot;Engine&quot;</span><span class="p">),</span>
          <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="s">&quot;Cheeseburger&quot;</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="n">suppart</span> <span class="o">=</span> <span class="p">[</span>
          <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span>
          <span class="p">(</span><span class="n">sname</span><span class="p">,</span> <span class="n">pname</span><span class="p">)</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">sno</span><span class="p">,</span> <span class="n">sname</span><span class="p">)</span> <span class="ow">in</span> <span class="n">suppliers</span>
              <span class="k">for</span> <span class="p">(</span><span class="n">pno</span><span class="p">,</span> <span class="n">pname</span><span class="p">)</span> <span class="ow">in</span> <span class="n">parts</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">sp_sno</span><span class="p">,</span> <span class="n">sp_pno</span><span class="p">)</span> <span class="ow">in</span> <span class="n">suppart</span>
                  <span class="k">if</span> <span class="n">sno</span> <span class="o">==</span> <span class="n">sp_sno</span> <span class="ow">and</span> <span class="n">pno</span> <span class="o">==</span> <span class="n">sp_pno</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">[(</span><span class="s">&#39;Boeing&#39;</span><span class="p">,</span> <span class="s">&#39;Airliner&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;Boeing&#39;</span><span class="p">,</span> <span class="s">&#39;Engine&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;Ford&#39;</span><span class="p">,</span> <span class="s">&#39;Engine&#39;</span><span class="p">),</span>
                             <span class="p">(</span><span class="s">&#39;Macdonalds&#39;</span><span class="p">,</span> <span class="s">&#39;Cheeseburger&#39;</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_genexps"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_genexps">[docs]</a>    <span class="k">def</span> <span class="nf">test_genexps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># generator expression tests</span>
        <span class="n">g</span> <span class="o">=</span> <span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">),</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)])</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;should produce StopIteration exception&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">g</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">a</span><span class="p">)</span>
            <span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;should produce TypeError&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="s">&#39;abcd&#39;</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="s">&#39;abcd&#39;</span><span class="p">),</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="s">&#39;abcd&#39;</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="s">&#39;abcd&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="s">&#39;ab&#39;</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="s">&#39;xy&#39;</span><span class="p">),</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="s">&#39;ab&#39;</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="s">&#39;xy&#39;</span><span class="p">])</span>

        <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
        <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">a</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="nb">sum</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)),</span> <span class="nb">sum</span><span class="p">([</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="p">),</span> <span class="nb">sum</span><span class="p">([</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))),</span> <span class="nb">sum</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">(</span><span class="n">z</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))),</span> <span class="nb">sum</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">(</span><span class="n">z</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))]),</span> <span class="nb">sum</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">(</span><span class="n">z</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="bp">True</span><span class="p">))</span> <span class="k">if</span> <span class="bp">True</span><span class="p">),</span> <span class="nb">sum</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">(</span><span class="n">z</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="bp">True</span><span class="p">)</span> <span class="k">if</span> <span class="bp">False</span><span class="p">)</span> <span class="k">if</span> <span class="bp">True</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;foo(x for x in range(10), 100)&quot;</span><span class="p">)</span>
        <span class="n">check_syntax_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;foo(100, x for x in range(10))&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_comprehension_specials"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_comprehension_specials">[docs]</a>    <span class="k">def</span> <span class="nf">test_comprehension_specials</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># test for outmost iterable precomputation</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="n">g</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">));</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">)),</span> <span class="mi">10</span><span class="p">)</span>

        <span class="c"># This should hold, since we&#39;re only precomputing outmost iterable.</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="n">t</span> <span class="o">=</span> <span class="bp">False</span><span class="p">;</span> <span class="n">g</span> <span class="o">=</span> <span class="p">((</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="n">t</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">t</span> <span class="o">=</span> <span class="bp">True</span><span class="p">;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)],</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">))</span>

        <span class="c"># Grammar allows multiple adjacent &#39;if&#39;s in listcomps and genexps,</span>
        <span class="c"># even though it&#39;s silly. Make sure it works (ifelse broke this.)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span><span class="p">),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">])</span>

        <span class="c"># verify unpacking single element tuples in listcomp/genexp.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="ow">in</span> <span class="p">[(</span><span class="mi">4</span><span class="p">,),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,)]],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="ow">in</span> <span class="p">[(</span><span class="mi">7</span><span class="p">,),</span> <span class="p">(</span><span class="mi">8</span><span class="p">,),</span> <span class="p">(</span><span class="mi">9</span><span class="p">,)]),</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_with_statement"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_with_statement">[docs]</a>    <span class="k">def</span> <span class="nf">test_with_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">manager</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
                <span class="k">pass</span>

        <span class="k">with</span> <span class="n">manager</span><span class="p">():</span>
            <span class="k">pass</span>
        <span class="k">with</span> <span class="n">manager</span><span class="p">()</span> <span class="k">as</span> <span class="n">x</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">with</span> <span class="n">manager</span><span class="p">()</span> <span class="k">as</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">with</span> <span class="n">manager</span><span class="p">(),</span> <span class="n">manager</span><span class="p">():</span>
            <span class="k">pass</span>
        <span class="k">with</span> <span class="n">manager</span><span class="p">()</span> <span class="k">as</span> <span class="n">x</span><span class="p">,</span> <span class="n">manager</span><span class="p">()</span> <span class="k">as</span> <span class="n">y</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">with</span> <span class="n">manager</span><span class="p">()</span> <span class="k">as</span> <span class="n">x</span><span class="p">,</span> <span class="n">manager</span><span class="p">():</span>
            <span class="k">pass</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_if_else_expr"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_if_else_expr">[docs]</a>    <span class="k">def</span> <span class="nf">test_if_else_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test ifelse expressions in various cases</span>
        <span class="k">def</span> <span class="nf">_checkeval</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">ret</span><span class="p">):</span>
            <span class="s">&quot;helper to check that evaluation of expressions is done correctly&quot;</span>
            <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">ret</span>

        <span class="c"># the next line is not allowed anymore</span>
        <span class="c">#self.assertEqual([ x() for x in lambda: True, lambda: False if x() ], [True])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span> <span class="n">x</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">False</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="p">()</span> <span class="p">],</span> <span class="p">[</span><span class="bp">True</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span> <span class="n">x</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">False</span> <span class="k">if</span> <span class="n">x</span> <span class="k">else</span> <span class="bp">True</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">x</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span> <span class="p">],</span> <span class="p">[</span><span class="bp">True</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">5</span> <span class="k">if</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">_checkeval</span><span class="p">(</span><span class="s">&quot;check 1&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">_checkeval</span><span class="p">(</span><span class="s">&quot;check 2&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">if</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">5</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">5</span> <span class="ow">and</span> <span class="mi">6</span> <span class="k">if</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(((</span><span class="mi">5</span> <span class="ow">and</span> <span class="mi">6</span><span class="p">)</span> <span class="k">if</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">5</span> <span class="ow">and</span> <span class="p">(</span><span class="mi">6</span> <span class="k">if</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">1</span><span class="p">)),</span> <span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">_checkeval</span><span class="p">(</span><span class="s">&quot;check 3&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">_checkeval</span><span class="p">(</span><span class="s">&quot;check 4&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">_checkeval</span><span class="p">(</span><span class="s">&quot;check 5&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">0</span> <span class="ow">or</span> <span class="mi">5</span> <span class="k">if</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">_checkeval</span><span class="p">(</span><span class="s">&quot;check 6&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="ow">not</span> <span class="mi">5</span> <span class="k">if</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">1</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="ow">not</span> <span class="mi">5</span> <span class="k">if</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">6</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">if</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">6</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">if</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">6</span> <span class="o">*</span> <span class="mi">2</span> <span class="k">if</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">4</span><span class="p">),</span> <span class="mi">12</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">6</span> <span class="o">/</span> <span class="mi">2</span> <span class="k">if</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">6</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="k">if</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GrammarTests.test_paren_evaluation"><a class="viewcode-back" href="../../test.html#test.test_grammar.GrammarTests.test_paren_evaluation">[docs]</a>    <span class="k">def</span> <span class="nf">test_paren_evaluation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">16</span> <span class="o">//</span> <span class="p">(</span><span class="mi">4</span> <span class="o">//</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="mi">16</span> <span class="o">//</span> <span class="mi">4</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">16</span> <span class="o">//</span> <span class="mi">4</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">False</span> <span class="ow">is</span> <span class="p">(</span><span class="mi">2</span> <span class="ow">is</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">((</span><span class="bp">False</span> <span class="ow">is</span> <span class="mi">2</span><span class="p">)</span> <span class="ow">is</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="bp">False</span> <span class="ow">is</span> <span class="mi">2</span> <span class="ow">is</span> <span class="mi">3</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="test_main"><a class="viewcode-back" href="../../test.html#test.test_grammar.test_main">[docs]</a><span class="k">def</span> <span class="nf">test_main</span><span class="p">():</span>
    <span class="n">run_unittest</span><span class="p">(</span><span class="n">TokenTests</span><span class="p">,</span> <span class="n">GrammarTests</span><span class="p">)</span>
</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">test_main</span><span class="p">()</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Weldon Henson.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>