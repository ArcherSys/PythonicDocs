

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>test.test_argparse &mdash; ArcherBashPYDocs 1.0.0. documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ArcherBashPYDocs 1.0.0. documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> ArcherBashPYDocs</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="simple">
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ArcherBashPYDocs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>test.test_argparse</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for test.test_argparse</h1><div class="highlight"><pre>
<span class="c"># Author: Steven J. Bethard &lt;steven.bethard@gmail.com&gt;.</span>

<span class="kn">import</span> <span class="nn">codecs</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">stat</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">textwrap</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">argparse</span>

<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span>

<span class="kn">from</span> <span class="nn">test</span> <span class="kn">import</span> <span class="n">support</span>
<span class="kn">from</span> <span class="nn">unittest</span> <span class="kn">import</span> <span class="n">mock</span>
<div class="viewcode-block" id="StdIOBuffer"><a class="viewcode-back" href="../../test.html#test.test_argparse.StdIOBuffer">[docs]</a><span class="k">class</span> <span class="nc">StdIOBuffer</span><span class="p">(</span><span class="n">StringIO</span><span class="p">):</span>
    <span class="k">pass</span>
</div>
<div class="viewcode-block" id="TestCase"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestCase">[docs]</a><span class="k">class</span> <span class="nc">TestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestCase.assertEqual"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestCase.assertEqual">[docs]</a>    <span class="k">def</span> <span class="nf">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">obj1</span> <span class="o">!=</span> <span class="n">obj2</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">obj1</span><span class="p">))</span>
            <span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">obj2</span><span class="p">))</span>
            <span class="k">print</span><span class="p">(</span><span class="n">obj1</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TestCase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestCase.setUp"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestCase.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># The tests assume that line wrapping occurs at 80 columns, but this</span>
        <span class="c"># behaviour can be overridden by setting the COLUMNS environment</span>
        <span class="c"># variable.  To ensure that this assumption is true, unset COLUMNS.</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">support</span><span class="o">.</span><span class="n">EnvironmentVarGuard</span><span class="p">()</span>
        <span class="n">env</span><span class="o">.</span><span class="n">unset</span><span class="p">(</span><span class="s">&quot;COLUMNS&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addCleanup</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">__exit__</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="TempDirMixin"><a class="viewcode-back" href="../../test.html#test.test_argparse.TempDirMixin">[docs]</a><span class="k">class</span> <span class="nc">TempDirMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

<div class="viewcode-block" id="TempDirMixin.setUp"><a class="viewcode-back" href="../../test.html#test.test_argparse.TempDirMixin.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">old_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_dir</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TempDirMixin.tearDown"><a class="viewcode-back" href="../../test.html#test.test_argparse.TempDirMixin.tearDown">[docs]</a>    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">old_dir</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_dir</span><span class="p">,</span> <span class="n">topdown</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_dir</span><span class="p">,</span> <span class="n">name</span><span class="p">),</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IWRITE</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_dir</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TempDirMixin.create_readonly_file"><a class="viewcode-back" href="../../test.html#test.test_argparse.TempDirMixin.create_readonly_file">[docs]</a>    <span class="k">def</span> <span class="nf">create_readonly_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IREAD</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="Sig"><a class="viewcode-back" href="../../test.html#test.test_argparse.Sig">[docs]</a><span class="k">class</span> <span class="nc">Sig</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>

</div>
<div class="viewcode-block" id="NS"><a class="viewcode-back" href="../../test.html#test.test_argparse.NS">[docs]</a><span class="k">class</span> <span class="nc">NS</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sorted_items</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="n">kwarg_str</span> <span class="o">=</span> <span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">=</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">tup</span> <span class="k">for</span> <span class="n">tup</span> <span class="ow">in</span> <span class="n">sorted_items</span><span class="p">])</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">(</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">kwarg_str</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="nb">vars</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span> <span class="o">==</span> <span class="n">other</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="ArgumentParserError"><a class="viewcode-back" href="../../test.html#test.test_argparse.ArgumentParserError">[docs]</a><span class="k">class</span> <span class="nc">ArgumentParserError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">error_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">message</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">stdout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stderr</span> <span class="o">=</span> <span class="n">stderr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_code</span> <span class="o">=</span> <span class="n">error_code</span>

</div>
<div class="viewcode-block" id="stderr_to_parser_error"><a class="viewcode-back" href="../../test.html#test.test_argparse.stderr_to_parser_error">[docs]</a><span class="k">def</span> <span class="nf">stderr_to_parser_error</span><span class="p">(</span><span class="n">parse_args</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c"># if this is being called recursively and stderr or stdout is already being</span>
    <span class="c"># redirected, simply call the function and let the enclosing function</span>
    <span class="c"># catch the exception</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">StdIOBuffer</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">StdIOBuffer</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">parse_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c"># if this is not being called recursively, redirect stderr and</span>
    <span class="c"># use it as the ArgumentParserError message</span>
    <span class="n">old_stdout</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
    <span class="n">old_stderr</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">StdIOBuffer</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span> <span class="o">=</span> <span class="n">StdIOBuffer</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">parse_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">vars</span><span class="p">(</span><span class="n">result</span><span class="p">)):</span>
                <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">old_stdout</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">old_stderr</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">except</span> <span class="ne">SystemExit</span><span class="p">:</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">code</span>
            <span class="n">stdout</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
            <span class="n">stderr</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
            <span class="k">raise</span> <span class="n">ArgumentParserError</span><span class="p">(</span><span class="s">&quot;SystemExit&quot;</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">old_stdout</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span> <span class="o">=</span> <span class="n">old_stderr</span>

</div>
<div class="viewcode-block" id="ErrorRaisingArgumentParser"><a class="viewcode-back" href="../../test.html#test.test_argparse.ErrorRaisingArgumentParser">[docs]</a><span class="k">class</span> <span class="nc">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">):</span>

<div class="viewcode-block" id="ErrorRaisingArgumentParser.parse_args"><a class="viewcode-back" href="../../test.html#test.test_argparse.ErrorRaisingArgumentParser.parse_args">[docs]</a>    <span class="k">def</span> <span class="nf">parse_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">parse_args</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">ErrorRaisingArgumentParser</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">parse_args</span>
        <span class="k">return</span> <span class="n">stderr_to_parser_error</span><span class="p">(</span><span class="n">parse_args</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ErrorRaisingArgumentParser.exit"><a class="viewcode-back" href="../../test.html#test.test_argparse.ErrorRaisingArgumentParser.exit">[docs]</a>    <span class="k">def</span> <span class="nf">exit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">exit</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">ErrorRaisingArgumentParser</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">exit</span>
        <span class="k">return</span> <span class="n">stderr_to_parser_error</span><span class="p">(</span><span class="nb">exit</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ErrorRaisingArgumentParser.error"><a class="viewcode-back" href="../../test.html#test.test_argparse.ErrorRaisingArgumentParser.error">[docs]</a>    <span class="k">def</span> <span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">error</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">ErrorRaisingArgumentParser</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">error</span>
        <span class="k">return</span> <span class="n">stderr_to_parser_error</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="ParserTesterMetaclass"><a class="viewcode-back" href="../../test.html#test.test_argparse.ParserTesterMetaclass">[docs]</a><span class="k">class</span> <span class="nc">ParserTesterMetaclass</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Adds parser tests using the class attributes.</span>

<span class="sd">    Classes of this type should specify the following attributes:</span>

<span class="sd">    argument_signatures -- a list of Sig objects which specify</span>
<span class="sd">        the signatures of Argument objects to be created</span>
<span class="sd">    failures -- a list of args lists that should cause the parser</span>
<span class="sd">        to fail</span>
<span class="sd">    successes -- a list of (initial_args, options, remaining_args) tuples</span>
<span class="sd">        where initial_args specifies the string args to be parsed,</span>
<span class="sd">        options is a dict that should match the vars() of the options</span>
<span class="sd">        parsed out of initial_args, and remaining_args should be any</span>
<span class="sd">        remaining unparsed arguments</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">bodydict</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">&#39;ParserTestCase&#39;</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c"># default parser signature is empty</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="s">&#39;parser_signature&#39;</span><span class="p">):</span>
            <span class="n">cls</span><span class="o">.</span><span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="s">&#39;parser_class&#39;</span><span class="p">):</span>
            <span class="n">cls</span><span class="o">.</span><span class="n">parser_class</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span>

        <span class="c"># ---------------------------------------</span>
        <span class="c"># functions for adding optional arguments</span>
        <span class="c"># ---------------------------------------</span>
        <span class="k">def</span> <span class="nf">no_groups</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">argument_signatures</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Add all arguments directly to the parser&quot;&quot;&quot;</span>
            <span class="k">for</span> <span class="n">sig</span> <span class="ow">in</span> <span class="n">argument_signatures</span><span class="p">:</span>
                <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="o">*</span><span class="n">sig</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">sig</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">one_group</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">argument_signatures</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Add all arguments under a single group in the parser&quot;&quot;&quot;</span>
            <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">sig</span> <span class="ow">in</span> <span class="n">argument_signatures</span><span class="p">:</span>
                <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="o">*</span><span class="n">sig</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">sig</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">many_groups</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">argument_signatures</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Add each argument in its own group to the parser&quot;&quot;&quot;</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sig</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">argument_signatures</span><span class="p">):</span>
                <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;foo:</span><span class="si">%i</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="o">*</span><span class="n">sig</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">sig</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c"># --------------------------</span>
        <span class="c"># functions for parsing args</span>
        <span class="c"># --------------------------</span>
        <span class="k">def</span> <span class="nf">listargs</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Parse the args by passing in a list&quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">sysargs</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Parse the args by defaulting to sys.argv&quot;&quot;&quot;</span>
            <span class="n">old_sys_argv</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="n">old_sys_argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">+</span> <span class="n">args</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="n">old_sys_argv</span>

        <span class="c"># class that holds the combination of one optional argument</span>
        <span class="c"># addition method and one arg parsing method</span>
        <span class="k">class</span> <span class="nc">AddTests</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tester_cls</span><span class="p">,</span> <span class="n">add_arguments</span><span class="p">,</span> <span class="n">parse_args</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_add_arguments</span> <span class="o">=</span> <span class="n">add_arguments</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_args</span> <span class="o">=</span> <span class="n">parse_args</span>

                <span class="n">add_arguments_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_arguments</span><span class="o">.</span><span class="n">__name__</span>
                <span class="n">parse_args_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_args</span><span class="o">.</span><span class="n">__name__</span>
                <span class="k">for</span> <span class="n">test_func</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">test_failures</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">test_successes</span><span class="p">]:</span>
                    <span class="n">func_name</span> <span class="o">=</span> <span class="n">test_func</span><span class="o">.</span><span class="n">__name__</span>
                    <span class="n">names</span> <span class="o">=</span> <span class="n">func_name</span><span class="p">,</span> <span class="n">add_arguments_name</span><span class="p">,</span> <span class="n">parse_args_name</span>
                    <span class="n">test_name</span> <span class="o">=</span> <span class="s">&#39;_&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>

                    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_func</span><span class="o">=</span><span class="n">test_func</span><span class="p">):</span>
                        <span class="n">test_func</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">wrapper</span><span class="o">.</span><span class="n">__name__</span> <span class="o">=</span> <span class="n">test_name</span>
                    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                        <span class="k">pass</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">tester_cls</span><span class="p">,</span> <span class="n">test_name</span><span class="p">,</span> <span class="n">wrapper</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">_get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tester</span><span class="p">):</span>
                <span class="n">args</span> <span class="o">=</span> <span class="n">tester</span><span class="o">.</span><span class="n">parser_signature</span><span class="o">.</span><span class="n">args</span>
                <span class="n">kwargs</span> <span class="o">=</span> <span class="n">tester</span><span class="o">.</span><span class="n">parser_signature</span><span class="o">.</span><span class="n">kwargs</span>
                <span class="n">parser</span> <span class="o">=</span> <span class="n">tester</span><span class="o">.</span><span class="n">parser_class</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_add_arguments</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">tester</span><span class="o">.</span><span class="n">argument_signatures</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">parser</span>

            <span class="k">def</span> <span class="nf">test_failures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tester</span><span class="p">):</span>
                <span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_parser</span><span class="p">(</span><span class="n">tester</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">args_str</span> <span class="ow">in</span> <span class="n">tester</span><span class="o">.</span><span class="n">failures</span><span class="p">:</span>
                    <span class="n">args</span> <span class="o">=</span> <span class="n">args_str</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                    <span class="k">with</span> <span class="n">tester</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ArgumentParserError</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">args</span><span class="p">):</span>
                        <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">test_successes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tester</span><span class="p">):</span>
                <span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_parser</span><span class="p">(</span><span class="n">tester</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">args</span><span class="p">,</span> <span class="n">expected_ns</span> <span class="ow">in</span> <span class="n">tester</span><span class="o">.</span><span class="n">successes</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                        <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                    <span class="n">result_ns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
                    <span class="n">tester</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected_ns</span><span class="p">,</span> <span class="n">result_ns</span><span class="p">)</span>

        <span class="c"># add tests for each combination of an optionals adding method</span>
        <span class="c"># and an arg parsing method</span>
        <span class="k">for</span> <span class="n">add_arguments</span> <span class="ow">in</span> <span class="p">[</span><span class="n">no_groups</span><span class="p">,</span> <span class="n">one_group</span><span class="p">,</span> <span class="n">many_groups</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">parse_args</span> <span class="ow">in</span> <span class="p">[</span><span class="n">listargs</span><span class="p">,</span> <span class="n">sysargs</span><span class="p">]:</span>
                <span class="n">AddTests</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">add_arguments</span><span class="p">,</span> <span class="n">parse_args</span><span class="p">)</span>
</div>
<span class="n">bases</span> <span class="o">=</span> <span class="n">TestCase</span><span class="p">,</span>
<span class="n">ParserTestCase</span> <span class="o">=</span> <span class="n">ParserTesterMetaclass</span><span class="p">(</span><span class="s">&#39;ParserTestCase&#39;</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="p">{})</span>

<span class="c"># ===============</span>
<span class="c"># Optionals tests</span>
<span class="c"># ===============</span>

<div class="viewcode-block" id="TestOptionalsSingleDash"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsSingleDash">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsSingleDash</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test an Optional with a single-dash option string&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;-x --foo&#39;</span><span class="p">,</span> <span class="s">&#39;-x -y&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-xa&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x -1&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;-1&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x-1&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;-1&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsSingleDashCombined"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsSingleDashCombined">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsSingleDashCombined</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test an Optional with a single-dash option string&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-yyy&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_const&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;-xa&#39;</span><span class="p">,</span> <span class="s">&#39;-x --foo&#39;</span><span class="p">,</span> <span class="s">&#39;-x -z&#39;</span><span class="p">,</span> <span class="s">&#39;-z -x&#39;</span><span class="p">,</span>
                <span class="s">&#39;-yx&#39;</span><span class="p">,</span> <span class="s">&#39;-yz a&#39;</span><span class="p">,</span> <span class="s">&#39;-yyyx&#39;</span><span class="p">,</span> <span class="s">&#39;-yyyza&#39;</span><span class="p">,</span> <span class="s">&#39;-xyza&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">yyy</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">yyy</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-za&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">yyy</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-z a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">yyy</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-xza&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">yyy</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-xz a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">yyy</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x -za&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">yyy</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x -z a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">yyy</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">yyy</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-yyy&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">yyy</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x -yyy -za&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">yyy</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x -yyy -z a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">yyy</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsSingleDashLong"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsSingleDashLong">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsSingleDashLong</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test an Optional with a multi-character single-dash option string&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-foo&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-foo&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;-foo --foo&#39;</span><span class="p">,</span> <span class="s">&#39;-foo -y&#39;</span><span class="p">,</span> <span class="s">&#39;-fooa&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-foo a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-foo -1&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;-1&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-fo a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-f a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsSingleDashSubsetAmbiguous"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsSingleDashSubsetAmbiguous">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsSingleDashSubsetAmbiguous</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test Optionals where option strings are subsets of each other&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-f&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-foobar&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-foorab&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-f&#39;</span><span class="p">,</span> <span class="s">&#39;-foo&#39;</span><span class="p">,</span> <span class="s">&#39;-fo&#39;</span><span class="p">,</span> <span class="s">&#39;-foo b&#39;</span><span class="p">,</span> <span class="s">&#39;-foob&#39;</span><span class="p">,</span> <span class="s">&#39;-fooba&#39;</span><span class="p">,</span> <span class="s">&#39;-foora&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">foobar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-f a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">foobar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-fa&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">foobar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-foa&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="s">&#39;oa&#39;</span><span class="p">,</span> <span class="n">foobar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-fooa&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="s">&#39;ooa&#39;</span><span class="p">,</span> <span class="n">foobar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-foobar a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">foobar</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-foorab a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">foobar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsSingleDashAmbiguous"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsSingleDashAmbiguous">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsSingleDashAmbiguous</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test Optionals that partially match but are not subsets&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-foobar&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-foorab&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-f&#39;</span><span class="p">,</span> <span class="s">&#39;-f a&#39;</span><span class="p">,</span> <span class="s">&#39;-fa&#39;</span><span class="p">,</span> <span class="s">&#39;-foa&#39;</span><span class="p">,</span> <span class="s">&#39;-foo&#39;</span><span class="p">,</span> <span class="s">&#39;-fo&#39;</span><span class="p">,</span> <span class="s">&#39;-foo b&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foobar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-foob a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foobar</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-foor a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foobar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-fooba a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foobar</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-foora a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foobar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-foobar a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foobar</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-foorab a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foobar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">foorab</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsNumeric"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsNumeric">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsNumeric</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test an Optional with a short opt string&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-1&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;one&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-1&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;-1 --foo&#39;</span><span class="p">,</span> <span class="s">&#39;-1 -y&#39;</span><span class="p">,</span> <span class="s">&#39;-1 -1&#39;</span><span class="p">,</span> <span class="s">&#39;-1 -2&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">one</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-1 a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">one</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-1a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">one</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-1-2&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">one</span><span class="o">=</span><span class="s">&#39;-2&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsDoubleDash"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsDoubleDash">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsDoubleDash</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test an Optional with a double-dash option string&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;-f&#39;</span><span class="p">,</span> <span class="s">&#39;-f a&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;--foo -x&#39;</span><span class="p">,</span> <span class="s">&#39;--foo --bar&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--foo a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--foo=a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--foo -2.5&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;-2.5&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--foo=-2.5&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;-2.5&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsDoubleDashPartialMatch"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsDoubleDashPartialMatch">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsDoubleDashPartialMatch</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests partial matching with a double-dash option string&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--badger&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--bat&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="s">&#39;--b&#39;</span><span class="p">,</span> <span class="s">&#39;--ba&#39;</span><span class="p">,</span> <span class="s">&#39;--b=2&#39;</span><span class="p">,</span> <span class="s">&#39;--ba=4&#39;</span><span class="p">,</span> <span class="s">&#39;--badge 5&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bat</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--bat X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bat</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--bad&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bat</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--badg&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bat</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--badge&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bat</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--badger&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bat</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsDoubleDashPrefixMatch"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsDoubleDashPrefixMatch">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsDoubleDashPrefixMatch</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests when one double-dash option string is a prefix of another&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--badger&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--ba&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="s">&#39;--b&#39;</span><span class="p">,</span> <span class="s">&#39;--ba&#39;</span><span class="p">,</span> <span class="s">&#39;--b=2&#39;</span><span class="p">,</span> <span class="s">&#39;--badge 5&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">ba</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--ba X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">ba</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--ba=X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">ba</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--bad&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ba</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--badg&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ba</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--badge&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ba</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--badger&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ba</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsSingleDoubleDash"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsSingleDoubleDash">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsSingleDoubleDash</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test an Optional with single- and double-dash option strings&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-f&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--bar&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-baz&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_const&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="s">&#39;-fbar&#39;</span><span class="p">,</span> <span class="s">&#39;-fbaz&#39;</span><span class="p">,</span> <span class="s">&#39;-bazf&#39;</span><span class="p">,</span> <span class="s">&#39;-b B&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-f&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--ba B&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-f --bar B&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-f -b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-ba -f&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsAlternatePrefixChars"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsAlternatePrefixChars">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsAlternatePrefixChars</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test an Optional with option strings with custom prefixes&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prefix_chars</span><span class="o">=</span><span class="s">&#39;+:/&#39;</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;+f&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;::bar&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;/baz&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_const&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="s">&#39;-fbar&#39;</span><span class="p">,</span> <span class="s">&#39;-b B&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;-f&#39;</span><span class="p">,</span> <span class="s">&#39;--bar B&#39;</span><span class="p">,</span> <span class="s">&#39;-baz&#39;</span><span class="p">,</span> <span class="s">&#39;-h&#39;</span><span class="p">,</span> <span class="s">&#39;--help&#39;</span><span class="p">,</span> <span class="s">&#39;+h&#39;</span><span class="p">,</span> <span class="s">&#39;::help&#39;</span><span class="p">,</span> <span class="s">&#39;/help&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;+f&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;::ba B&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;+f ::bar B&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;+f /b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;/ba +f&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsAlternatePrefixCharsAddedHelp"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsAlternatePrefixCharsAddedHelp">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsAlternatePrefixCharsAddedHelp</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;When ``-`` not in prefix_chars, default operators created for help</span>
<span class="sd">       should use the prefix_chars in use rather than - or --</span>
<span class="sd">       http://bugs.python.org/issue9444&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prefix_chars</span><span class="o">=</span><span class="s">&#39;+:/&#39;</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;+f&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;::bar&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;/baz&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_const&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="s">&#39;-fbar&#39;</span><span class="p">,</span> <span class="s">&#39;-b B&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;-f&#39;</span><span class="p">,</span> <span class="s">&#39;--bar B&#39;</span><span class="p">,</span> <span class="s">&#39;-baz&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;+f&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;::ba B&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;+f ::bar B&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;+f /b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;/ba +f&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="mi">42</span><span class="p">))</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsAlternatePrefixCharsMultipleShortArgs"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsAlternatePrefixCharsMultipleShortArgs">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsAlternatePrefixCharsMultipleShortArgs</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Verify that Optionals must be called with their defined prefixes&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prefix_chars</span><span class="o">=</span><span class="s">&#39;+-&#39;</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;+y&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;+z&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-w&#39;</span><span class="p">,</span>
                <span class="s">&#39;-xyz&#39;</span><span class="p">,</span>
                <span class="s">&#39;+x&#39;</span><span class="p">,</span>
                <span class="s">&#39;-y&#39;</span><span class="p">,</span>
                <span class="s">&#39;+xyz&#39;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;+y -x&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;+yz -x&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsShortLong"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsShortLong">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsShortLong</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a combination of single- and double-dash option strings&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="s">&#39;--verbose&#39;</span><span class="p">,</span> <span class="s">&#39;-n&#39;</span><span class="p">,</span> <span class="s">&#39;--noisy&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;--x --verbose&#39;</span><span class="p">,</span> <span class="s">&#39;-N&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;-v x&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--verbose&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-n&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--noisy&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsDest"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsDest">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsDest</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests various means of setting destination&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo-bar&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;zabbaz&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;--foo-bar f&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo_bar</span><span class="o">=</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="n">zabbaz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--baz g&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo_bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">zabbaz</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--foo-bar h --baz i&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo_bar</span><span class="o">=</span><span class="s">&#39;h&#39;</span><span class="p">,</span> <span class="n">zabbaz</span><span class="o">=</span><span class="s">&#39;i&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--baz j --foo-bar k&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo_bar</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="n">zabbaz</span><span class="o">=</span><span class="s">&#39;j&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsDefault"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsDefault">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsDefault</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests specifying a default for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">42</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-xx&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-yy&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsNargsDefault"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsNargsDefault">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsNargsDefault</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests not specifying the number of args for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;-x&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsNargs1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsNargs1">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsNargs1</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests specifying the 1 arg for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;-x&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsNargs3"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsNargs3">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsNargs3</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests specifying the 3 args for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">3</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;-x a&#39;</span><span class="p">,</span> <span class="s">&#39;-x a b&#39;</span><span class="p">,</span> <span class="s">&#39;a -x&#39;</span><span class="p">,</span> <span class="s">&#39;a -x b&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsNargsOptional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsNargsOptional">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsNargsOptional</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests specifying an Optional arg for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-w&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;84&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;2&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">84</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-w&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">84</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-w 2&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">84</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">84</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x 2&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">84</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">84</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-y 2&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">84</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-z 2&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">2</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsNargsZeroOrMore"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsNargsZeroOrMore">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsNargsZeroOrMore</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests specifying an args for an Optional that accepts zero or more&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[],</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;-y a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;-y a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsNargsOneOrMore"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsNargsOneOrMore">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsNargsOneOrMore</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests specifying an args for an Optional that accepts one or more&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="s">&#39;a -x&#39;</span><span class="p">,</span> <span class="s">&#39;a -y b&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-y a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;-y a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsChoices"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsChoices">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsChoices</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests specifying the choices for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-f&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="s">&#39;abc&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-g&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;-f d&#39;</span><span class="p">,</span> <span class="s">&#39;-fad&#39;</span><span class="p">,</span> <span class="s">&#39;-ga&#39;</span><span class="p">,</span> <span class="s">&#39;-g 6&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-f a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-f c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-g 0&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mi">0</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-g 03&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mi">3</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-fb -g4&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mi">4</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsRequired"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsRequired">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsRequired</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests the an optional action that is required&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;-x 1&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x42&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsActionStore"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsActionStore">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsActionStore</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests the store action for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a -x&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-xfoo&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsActionStoreConst"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsActionStoreConst">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsActionStoreConst</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests the store_const action for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_const&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="nb">object</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="nb">object</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsActionStoreFalse"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsActionStoreFalse">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsActionStoreFalse</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests the store_false action for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;-za&#39;</span><span class="p">,</span> <span class="s">&#39;-z a&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsActionStoreTrue"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsActionStoreTrue">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsActionStoreTrue</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests the store_true action for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--apple&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;--apple=b&#39;</span><span class="p">,</span> <span class="s">&#39;--apple b&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">apple</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--apple&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">apple</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsActionAppend"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsActionAppend">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsActionAppend</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests the append action for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="s">&#39;a --baz&#39;</span><span class="p">,</span> <span class="s">&#39;--baz a b&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--baz a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">baz</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;--baz a --baz b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">baz</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsActionAppendWithDefault"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsActionAppendWithDefault">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsActionAppendWithDefault</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests the append action for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;X&#39;</span><span class="p">])]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="s">&#39;a --baz&#39;</span><span class="p">,</span> <span class="s">&#39;--baz a b&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">baz</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;X&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;--baz a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">baz</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;--baz a --baz b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">baz</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsActionAppendConst"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsActionAppendConst">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsActionAppendConst</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests the append_const action for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;append_const&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="ne">Exception</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-c&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;-c&#39;</span><span class="p">,</span> <span class="s">&#39;a -c&#39;</span><span class="p">,</span> <span class="s">&#39;-bx&#39;</span><span class="p">,</span> <span class="s">&#39;-b x&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="ne">Exception</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;-b -cx -b -cyz&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="ne">Exception</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">,</span> <span class="s">&#39;yz&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsActionAppendConstWithDefault"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsActionAppendConstWithDefault">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsActionAppendConstWithDefault</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests the append_const action for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;append_const&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="ne">Exception</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;X&#39;</span><span class="p">]),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-c&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;-c&#39;</span><span class="p">,</span> <span class="s">&#39;a -c&#39;</span><span class="p">,</span> <span class="s">&#39;-bx&#39;</span><span class="p">,</span> <span class="s">&#39;-b x&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;X&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;-b -cx -b -cyz&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">,</span> <span class="s">&#39;yz&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsActionCount"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsActionCount">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsActionCount</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests the count action for an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;count&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;-x a&#39;</span><span class="p">,</span> <span class="s">&#39;-x b&#39;</span><span class="p">,</span> <span class="s">&#39;-x a -x b&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
    <span class="p">]</span>


<span class="c"># ================</span>
<span class="c"># Positional tests</span>
<span class="c"># ================</span>
</div>
<div class="viewcode-block" id="TestPositionalsNargsNone"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsNone">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsNone</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional that doesn&#39;t specify nargs&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;a b&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargs1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargs1">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargs1</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional that specifies an nargs of 1&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;a b&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargs2"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargs2">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargs2</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional that specifies an nargs of 2&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;a b c&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsZeroOrMore"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsZeroOrMore">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsZeroOrMore</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional that specifies unlimited nargs&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsZeroOrMoreDefault"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsZeroOrMoreDefault">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsZeroOrMoreDefault</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional that specifies unlimited nargs and a default&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsOneOrMore"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsOneOrMore">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsOneOrMore</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional that specifies one or more nargs&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;-x&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsOptional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsOptional">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsOptional</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests an Optional Positional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;a b&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsOptionalDefault"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsOptionalDefault">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsOptionalDefault</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests an Optional Positional with a default value&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">42</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;a b&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsOptionalConvertedDefault"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsOptionalConvertedDefault">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsOptionalConvertedDefault</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests an Optional Positional with a default value</span>
<span class="sd">    that needs to be converted to the appropriate type.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;42&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="s">&#39;1 2&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsNoneNone"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsNoneNone">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsNoneNone</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test two Positionals that don&#39;t specify nargs&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a b c&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsNone1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsNone1">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsNone1</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with no nargs followed by one with 1&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a b c&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargs2None"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargs2None">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargs2None</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with 2 nargs followed by one with none&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="s">&#39;a b c d&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsNoneZeroOrMore"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsNoneZeroOrMore">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsNoneZeroOrMore</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with no nargs followed by one with unlimited&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsNoneOneOrMore"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsNoneOneOrMore">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsNoneOneOrMore</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with no nargs followed by one with one or more&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsNoneOptional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsNoneOptional">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsNoneOptional</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with no nargs followed by one with an Optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a b c&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsZeroOrMoreNone"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsZeroOrMoreNone">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsZeroOrMoreNone</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with unlimited nargs followed by one with none&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[],</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsOneOrMoreNone"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsOneOrMoreNone">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsOneOrMoreNone</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with one or more nargs followed by one with none&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsOptionalNone"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsOptionalNone">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsOptionalNone</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with an Optional nargs followed by one with none&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a b c&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargs2ZeroOrMore"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargs2ZeroOrMore">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargs2ZeroOrMore</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with 2 nargs followed by one with unlimited&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargs2OneOrMore"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargs2OneOrMore">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargs2OneOrMore</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with 2 nargs followed by one with one or more&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a b&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargs2Optional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargs2Optional">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargs2Optional</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with 2 nargs followed by one optional&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a b c d&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsZeroOrMore1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsZeroOrMore1">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsZeroOrMore1</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with unlimited nargs followed by one with 1&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[],</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsOneOrMore1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsOneOrMore1">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsOneOrMore1</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with one or more nargs followed by one with 1&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsOptional1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsOptional1">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsOptional1</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a Positional with an Optional nargs followed by one with 1&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a b c&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsNoneZeroOrMore1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsNoneZeroOrMore1">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsNoneZeroOrMore1</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test three Positionals: no nargs, unlimited nargs and 1 nargs&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[],</span> <span class="n">baz</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">baz</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsNoneOneOrMore1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsNoneOneOrMore1">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsNoneOneOrMore1</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test three Positionals: no nargs, one or more nargs and 1 nargs&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">baz</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b c d&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">],</span> <span class="n">baz</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsNoneOptional1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsNoneOptional1">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsNoneOptional1</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test three Positionals: no nargs, optional narg and 1 nargs&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.625</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mf">0.625</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsOptionalOptional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsOptionalOptional">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsOptionalOptional</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test two optional nargs&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a b c&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsOptionalZeroOrMore"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsOptionalZeroOrMore">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsOptionalZeroOrMore</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test an Optional narg followed by unlimited nargs&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;--foo&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsNargsOptionalOneOrMore"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsNargsOptionalOneOrMore">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsNargsOptionalOneOrMore</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test an Optional narg followed by one or more nargs&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsChoicesString"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsChoicesString">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsChoicesString</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a set of single-character choices&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="nb">set</span><span class="p">(</span><span class="s">&#39;abcdefg&#39;</span><span class="p">))]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;h&#39;</span><span class="p">,</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;ef&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;g&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsChoicesInt"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsChoicesInt">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsChoicesInt</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a set of integer choices&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">))]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;h&#39;</span><span class="p">,</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;ef&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;4&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="mi">4</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;15&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="mi">15</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPositionalsActionAppend"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsActionAppend">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsActionAppend</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test the &#39;append&#39; action&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="s">&#39;a b c d&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a b c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">]])),</span>
    <span class="p">]</span>

<span class="c"># ========================================</span>
<span class="c"># Combined optionals and positionals tests</span>
<span class="c"># ========================================</span>
</div>
<div class="viewcode-block" id="TestOptionalsNumericAndPositionals"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsNumericAndPositionals">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsNumericAndPositionals</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests negative number args when numeric options are present&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-4&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-2&#39;</span><span class="p">,</span> <span class="s">&#39;-315&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-4&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-4 a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionalsAlmostNumericAndPositionals"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsAlmostNumericAndPositionals">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsAlmostNumericAndPositionals</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests negative number args when almost numeric options are present&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-k4&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-k3&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-2&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;-2&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-k4&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-k4 a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestEmptyAndSpaceContainingArguments"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestEmptyAndSpaceContainingArguments">[docs]</a><span class="k">class</span> <span class="nc">TestEmptyAndSpaceContainingArguments</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="s">&#39;--yyy&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-y&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">([</span><span class="s">&#39;&#39;</span><span class="p">],</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">([</span><span class="s">&#39;a badger&#39;</span><span class="p">],</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;a badger&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">([</span><span class="s">&#39;-a badger&#39;</span><span class="p">],</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;-a badger&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">([</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">],</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)),</span>
        <span class="p">([</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="s">&#39;a badger&#39;</span><span class="p">],</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;a badger&#39;</span><span class="p">)),</span>
        <span class="p">([</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="s">&#39;-a badger&#39;</span><span class="p">],</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;-a badger&#39;</span><span class="p">)),</span>
        <span class="p">([</span><span class="s">&#39;--yyy=a badger&#39;</span><span class="p">],</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;a badger&#39;</span><span class="p">)),</span>
        <span class="p">([</span><span class="s">&#39;--yyy=-a badger&#39;</span><span class="p">],</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;-a badger&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestPrefixCharacterOnlyArguments"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPrefixCharacterOnlyArguments">[docs]</a><span class="k">class</span> <span class="nc">TestPrefixCharacterOnlyArguments</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prefix_chars</span><span class="o">=</span><span class="s">&#39;-+&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="s">&#39;badger&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-+-&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="s">&#39;+ -&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;badger&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;- X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;+ -3&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mi">3</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-+-&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;- ===&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;===&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestNargsZeroOrMore"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestNargsZeroOrMore">[docs]</a><span class="k">class</span> <span class="nc">TestNargsZeroOrMore</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests specifying an args for an Optional that accepts zero or more&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[],</span> <span class="n">y</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;-x a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;-x a -- b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a -x&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a -x b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestNargsRemainder"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestNargsRemainder">[docs]</a><span class="k">class</span> <span class="nc">TestNargsRemainder</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests specifying a positional with nargs=REMAINDER&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;...&#39;</span><span class="p">),</span> <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">)]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="s">&#39;-z Z&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[],</span> <span class="n">z</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-z Z X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[],</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;Z&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;X A B -z Z&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="s">&#39;Z&#39;</span><span class="p">],</span> <span class="n">z</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;X Y --foo&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">],</span> <span class="n">z</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestOptionLike"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionLike">[docs]</a><span class="k">class</span> <span class="nc">TestOptionLike</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests options that may or may not be arguments&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-3&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;-y2.5&#39;</span><span class="p">,</span> <span class="s">&#39;-xa&#39;</span><span class="p">,</span> <span class="s">&#39;-x -a&#39;</span><span class="p">,</span>
                <span class="s">&#39;-x -3&#39;</span><span class="p">,</span> <span class="s">&#39;-x -3.5&#39;</span><span class="p">,</span> <span class="s">&#39;-3 -3.5&#39;</span><span class="p">,</span>
                <span class="s">&#39;-x -2.5&#39;</span><span class="p">,</span> <span class="s">&#39;-x -2.5 a&#39;</span><span class="p">,</span> <span class="s">&#39;-3 -.5&#39;</span><span class="p">,</span>
                <span class="s">&#39;a x -1&#39;</span><span class="p">,</span> <span class="s">&#39;-x -1 a&#39;</span><span class="p">,</span> <span class="s">&#39;-3 -1 a&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;-x 2.5&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;-x 2.5 a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;-3.5&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;-3-.5&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;-3 .5&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="p">[])),</span>
        <span class="p">(</span><span class="s">&#39;a -3.5&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;a -x 1&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;-x 1 a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;-3 1 a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestDefaultSuppress"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestDefaultSuppress">[docs]</a><span class="k">class</span> <span class="nc">TestDefaultSuppress</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test actions with suppressed defaults&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">()),</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">baz</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a --baz&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--baz a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">baz</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestParserDefaultSuppress"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParserDefaultSuppress">[docs]</a><span class="k">class</span> <span class="nc">TestParserDefaultSuppress</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test actions with a parser-level default of SUPPRESS&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">argument_default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">()),</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">baz</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a --baz&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--baz a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">baz</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestParserDefault42"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParserDefault42">[docs]</a><span class="k">class</span> <span class="nc">TestParserDefault42</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test actions with a parser-level default of 42&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">argument_default</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--version&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;1.0&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">baz</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;a --baz&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--baz a b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">baz</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestArgumentsFromFile"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestArgumentsFromFile">[docs]</a><span class="k">class</span> <span class="nc">TestArgumentsFromFile</span><span class="p">(</span><span class="n">TempDirMixin</span><span class="p">,</span> <span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test reading arguments from a file&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestArgumentsFromFile.setUp"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestArgumentsFromFile.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TestArgumentsFromFile</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="n">file_texts</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="s">&#39;hello world!</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;recursive&#39;</span><span class="p">,</span> <span class="s">&#39;-a</span><span class="se">\n</span><span class="s">&#39;</span>
                          <span class="s">&#39;A</span><span class="se">\n</span><span class="s">&#39;</span>
                          <span class="s">&#39;@hello&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;invalid&#39;</span><span class="p">,</span> <span class="s">&#39;@no-such-path</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">file_texts</span><span class="p">:</span>
            <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">fromfile_prefix_chars</span><span class="o">=</span><span class="s">&#39;@&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-a&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="s">&#39;@invalid&#39;</span><span class="p">,</span> <span class="s">&#39;@missing&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;X Y&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Y&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;X -a A Y Z&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="s">&#39;Z&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;@hello X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;hello world!&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;X&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;X @hello&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;hello world!&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;-a B @recursive Y Z&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;hello world!&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="s">&#39;Z&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;X @recursive Z -a B&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;hello world!&#39;</span><span class="p">,</span> <span class="s">&#39;Z&#39;</span><span class="p">])),</span>
        <span class="p">([</span><span class="s">&quot;-a&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;X&quot;</span><span class="p">,</span> <span class="s">&quot;Y&quot;</span><span class="p">],</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Y&#39;</span><span class="p">])),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestArgumentsFromFileConverter"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestArgumentsFromFileConverter">[docs]</a><span class="k">class</span> <span class="nc">TestArgumentsFromFileConverter</span><span class="p">(</span><span class="n">TempDirMixin</span><span class="p">,</span> <span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test reading arguments from a file&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestArgumentsFromFileConverter.setUp"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestArgumentsFromFileConverter.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TestArgumentsFromFileConverter</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="n">file_texts</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="s">&#39;hello world!</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">file_texts</span><span class="p">:</span>
            <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="TestArgumentsFromFileConverter.FromFileConverterArgumentParser"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestArgumentsFromFileConverter.FromFileConverterArgumentParser">[docs]</a>    <span class="k">class</span> <span class="nc">FromFileConverterArgumentParser</span><span class="p">(</span><span class="n">ErrorRaisingArgumentParser</span><span class="p">):</span>

<div class="viewcode-block" id="TestArgumentsFromFileConverter.FromFileConverterArgumentParser.convert_arg_line_to_args"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestArgumentsFromFileConverter.FromFileConverterArgumentParser.convert_arg_line_to_args">[docs]</a>        <span class="k">def</span> <span class="nf">convert_arg_line_to_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg_line</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arg_line</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">arg</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
                    <span class="k">continue</span>
                <span class="k">yield</span> <span class="n">arg</span></div></div>
    <span class="n">parser_class</span> <span class="o">=</span> <span class="n">FromFileConverterArgumentParser</span>
    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">fromfile_prefix_chars</span><span class="o">=</span><span class="s">&#39;@&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;@hello X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="s">&#39;world!&#39;</span><span class="p">,</span> <span class="s">&#39;X&#39;</span><span class="p">])),</span>
    <span class="p">]</span>


<span class="c"># =====================</span>
<span class="c"># Type conversion tests</span>
<span class="c"># =====================</span>
</div>
<div class="viewcode-block" id="TestFileTypeRepr"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeRepr">[docs]</a><span class="k">class</span> <span class="nc">TestFileTypeRepr</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestFileTypeRepr.test_r"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeRepr.test_r">[docs]</a>    <span class="k">def</span> <span class="nf">test_r</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">type</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&quot;FileType(&#39;r&#39;)&quot;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">type</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestFileTypeRepr.test_wb_1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeRepr.test_wb_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_wb_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">type</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s">&#39;wb&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&quot;FileType(&#39;wb&#39;, 1)&quot;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">type</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestFileTypeRepr.test_r_latin"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeRepr.test_r_latin">[docs]</a>    <span class="k">def</span> <span class="nf">test_r_latin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">type</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;latin_1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&quot;FileType(&#39;r&#39;, encoding=&#39;latin_1&#39;)&quot;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">type</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestFileTypeRepr.test_w_big5_ignore"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeRepr.test_w_big5_ignore">[docs]</a>    <span class="k">def</span> <span class="nf">test_w_big5_ignore</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">type</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;big5&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&quot;FileType(&#39;w&#39;, encoding=&#39;big5&#39;, errors=&#39;ignore&#39;)&quot;</span><span class="p">,</span>
                         <span class="nb">repr</span><span class="p">(</span><span class="nb">type</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestFileTypeRepr.test_r_1_replace"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeRepr.test_r_1_replace">[docs]</a>    <span class="k">def</span> <span class="nf">test_r_1_replace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">type</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;replace&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&quot;FileType(&#39;r&#39;, 1, errors=&#39;replace&#39;)&quot;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">type</span><span class="p">))</span>

</div></div>
<div class="viewcode-block" id="RFile"><a class="viewcode-back" href="../../test.html#test.test_argparse.RFile">[docs]</a><span class="k">class</span> <span class="nc">RFile</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">seen</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">seen</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">seen</span><span class="p">[</span><span class="n">other</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">seen</span><span class="p">[</span><span class="n">other</span><span class="p">]</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">other</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">text</span>

</div>
<div class="viewcode-block" id="TestFileTypeR"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeR">[docs]</a><span class="k">class</span> <span class="nc">TestFileTypeR</span><span class="p">(</span><span class="n">TempDirMixin</span><span class="p">,</span> <span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test the FileType option/argument type for reading files&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestFileTypeR.setUp"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeR.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TestFileTypeR</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">file_name</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">]:</span>
            <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">),</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_readonly_file</span><span class="p">(</span><span class="s">&#39;readonly&#39;</span><span class="p">)</span>
</div>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">()),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s">&#39;r&#39;</span><span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;non-existent-file.txt&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="n">RFile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;-x foo bar&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">RFile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">spam</span><span class="o">=</span><span class="n">RFile</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;bar -x foo&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">RFile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">spam</span><span class="o">=</span><span class="n">RFile</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;-x - -&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;readonly&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="n">RFile</span><span class="p">(</span><span class="s">&#39;readonly&#39;</span><span class="p">))),</span>
    <span class="p">]</span>
</div>
<div class="viewcode-block" id="TestFileTypeDefaults"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeDefaults">[docs]</a><span class="k">class</span> <span class="nc">TestFileTypeDefaults</span><span class="p">(</span><span class="n">TempDirMixin</span><span class="p">,</span> <span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that a file is not created unless the default is needed&quot;&quot;&quot;</span>
<div class="viewcode-block" id="TestFileTypeDefaults.setUp"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeDefaults.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TestFileTypeDefaults</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_dir</span><span class="p">,</span> <span class="s">&#39;good&#39;</span><span class="p">),</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;good&#39;</span><span class="p">)</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-c&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s">&#39;r&#39;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;no-file.txt&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="c"># should provoke no such file error</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">]</span>
    <span class="c"># should not provoke error because default file is created</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;-c good&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">RFile</span><span class="p">(</span><span class="s">&#39;good&#39;</span><span class="p">)))]</span>

</div>
<div class="viewcode-block" id="TestFileTypeRB"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeRB">[docs]</a><span class="k">class</span> <span class="nc">TestFileTypeRB</span><span class="p">(</span><span class="n">TempDirMixin</span><span class="p">,</span> <span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test the FileType option/argument type for reading files&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestFileTypeRB.setUp"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeRB.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TestFileTypeRB</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">file_name</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">]:</span>
            <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">),</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s">&#39;rb&#39;</span><span class="p">)),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s">&#39;rb&#39;</span><span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="n">RFile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;-x foo bar&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">RFile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">spam</span><span class="o">=</span><span class="n">RFile</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;bar -x foo&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">RFile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">spam</span><span class="o">=</span><span class="n">RFile</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;-x - -&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="WFile"><a class="viewcode-back" href="../../test.html#test.test_argparse.WFile">[docs]</a><span class="k">class</span> <span class="nc">WFile</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">seen</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s">&#39;Check that file is writable.&#39;</span>
            <span class="k">if</span> <span class="s">&#39;b&#39;</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">)</span>
            <span class="n">other</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="n">other</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>

</div>
<span class="nd">@unittest.skipIf</span><span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s">&#39;geteuid&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">geteuid</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span>
                 <span class="s">&quot;non-root user required&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="TestFileTypeW"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeW">[docs]</a><span class="k">class</span> <span class="nc">TestFileTypeW</span><span class="p">(</span><span class="n">TempDirMixin</span><span class="p">,</span> <span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test the FileType option/argument type for writing files&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestFileTypeW.setUp"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeW.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TestFileTypeW</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_readonly_file</span><span class="p">(</span><span class="s">&#39;readonly&#39;</span><span class="p">)</span>
</div>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">)),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;readonly&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="n">WFile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;-x foo bar&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">WFile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">spam</span><span class="o">=</span><span class="n">WFile</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;bar -x foo&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">WFile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">spam</span><span class="o">=</span><span class="n">WFile</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;-x - -&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestFileTypeWB"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeWB">[docs]</a><span class="k">class</span> <span class="nc">TestFileTypeWB</span><span class="p">(</span><span class="n">TempDirMixin</span><span class="p">,</span> <span class="n">ParserTestCase</span><span class="p">):</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s">&#39;wb&#39;</span><span class="p">)),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s">&#39;wb&#39;</span><span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="n">WFile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;-x foo bar&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">WFile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">spam</span><span class="o">=</span><span class="n">WFile</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;bar -x foo&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">WFile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">spam</span><span class="o">=</span><span class="n">WFile</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;-x - -&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestFileTypeOpenArgs"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeOpenArgs">[docs]</a><span class="k">class</span> <span class="nc">TestFileTypeOpenArgs</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that open (the builtin) is correctly called&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestFileTypeOpenArgs.test_open_args"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestFileTypeOpenArgs.test_open_args">[docs]</a>    <span class="k">def</span> <span class="nf">test_open_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">FT</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span>
        <span class="n">cases</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">FT</span><span class="p">(</span><span class="s">&#39;rb&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;rb&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span>
            <span class="p">(</span><span class="n">FT</span><span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span>
            <span class="p">(</span><span class="n">FT</span><span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;replace&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;replace&#39;</span><span class="p">)),</span>
            <span class="p">(</span><span class="n">FT</span><span class="p">(</span><span class="s">&#39;wb&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;big5&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;wb&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;big5&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span>
            <span class="p">(</span><span class="n">FT</span><span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;l1&#39;</span><span class="p">,</span> <span class="s">&#39;strict&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;l1&#39;</span><span class="p">,</span> <span class="s">&#39;strict&#39;</span><span class="p">)),</span>
        <span class="p">]</span>
        <span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s">&#39;builtins.open&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">m</span><span class="p">:</span>
            <span class="k">for</span> <span class="nb">type</span><span class="p">,</span> <span class="n">args</span> <span class="ow">in</span> <span class="n">cases</span><span class="p">:</span>
                <span class="nb">type</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
                <span class="n">m</span><span class="o">.</span><span class="n">assert_called_with</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="TestTypeCallable"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeCallable">[docs]</a><span class="k">class</span> <span class="nc">TestTypeCallable</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test some callables as option/argument types&quot;&quot;&quot;</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--eggs&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">complex</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;42j&#39;</span><span class="p">,</span> <span class="s">&#39;--eggs a&#39;</span><span class="p">,</span> <span class="s">&#39;--eggs 2i&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;--eggs=42 42&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">eggs</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="mf">42.0</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--eggs 2j -- -1.5&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">eggs</span><span class="o">=</span><span class="mi">2j</span><span class="p">,</span> <span class="n">spam</span><span class="o">=-</span><span class="mf">1.5</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;1024.675&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">eggs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="mf">1024.675</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestTypeUserDefined"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeUserDefined">[docs]</a><span class="k">class</span> <span class="nc">TestTypeUserDefined</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a user-defined option/argument type&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestTypeUserDefined.MyType"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeUserDefined.MyType">[docs]</a>    <span class="k">class</span> <span class="nc">MyType</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</div>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">MyType</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">MyType</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a -x b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">MyType</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">),</span> <span class="n">spam</span><span class="o">=</span><span class="n">MyType</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;-xf g&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">MyType</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">),</span> <span class="n">spam</span><span class="o">=</span><span class="n">MyType</span><span class="p">(</span><span class="s">&#39;g&#39;</span><span class="p">))),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestTypeClassicClass"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeClassicClass">[docs]</a><span class="k">class</span> <span class="nc">TestTypeClassicClass</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a classic class type&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestTypeClassicClass.C"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeClassicClass.C">[docs]</a>    <span class="k">class</span> <span class="nc">C</span><span class="p">:</span>

        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</div>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">C</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">C</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;a -x b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">C</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">),</span> <span class="n">spam</span><span class="o">=</span><span class="n">C</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">))),</span>
        <span class="p">(</span><span class="s">&#39;-xf g&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">C</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">),</span> <span class="n">spam</span><span class="o">=</span><span class="n">C</span><span class="p">(</span><span class="s">&#39;g&#39;</span><span class="p">))),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestTypeRegistration"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeRegistration">[docs]</a><span class="k">class</span> <span class="nc">TestTypeRegistration</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a user-defined type by registering it&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestTypeRegistration.test"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeRegistration.test">[docs]</a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">get_my_type</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
            <span class="k">return</span> <span class="s">&#39;my_type{</span><span class="si">%s</span><span class="s">}&#39;</span> <span class="o">%</span> <span class="n">string</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">,</span> <span class="s">&#39;my_type&#39;</span><span class="p">,</span> <span class="n">get_my_type</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&#39;my_type&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&#39;my_type&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
                         <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;my_type{1}&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;-x 1 42&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
                         <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;my_type{1}&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;my_type{42}&#39;</span><span class="p">))</span>


<span class="c"># ============</span>
<span class="c"># Action tests</span>
<span class="c"># ============</span>
</div></div>
<div class="viewcode-block" id="TestActionUserDefined"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestActionUserDefined">[docs]</a><span class="k">class</span> <span class="nc">TestActionUserDefined</span><span class="p">(</span><span class="n">ParserTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a user-defined option/argument action&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestActionUserDefined.OptionalAction"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestActionUserDefined.OptionalAction">[docs]</a>    <span class="k">class</span> <span class="nc">OptionalAction</span><span class="p">(</span><span class="n">argparse</span><span class="o">.</span><span class="n">Action</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">option_string</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c"># check destination and option string</span>
                <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">dest</span> <span class="o">==</span> <span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="s">&#39;dest: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">dest</span>
                <span class="k">assert</span> <span class="n">option_string</span> <span class="o">==</span> <span class="s">&#39;-s&#39;</span><span class="p">,</span> <span class="s">&#39;flag: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">option_string</span>
                <span class="c"># when option is before argument, badger=2, and when</span>
                <span class="c"># option is after argument, badger=&lt;whatever was set&gt;</span>
                <span class="n">expected_ns</span> <span class="o">=</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.125</span><span class="p">,</span> <span class="mf">0.625</span><span class="p">]:</span>
                    <span class="n">expected_ns</span><span class="o">.</span><span class="n">badger</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">elif</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]:</span>
                    <span class="n">expected_ns</span><span class="o">.</span><span class="n">badger</span> <span class="o">=</span> <span class="mi">84</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s">&#39;value: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">expected_ns</span> <span class="o">==</span> <span class="n">namespace</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;expected </span><span class="si">%s</span><span class="s">, got </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span>
                                                  <span class="p">(</span><span class="n">expected_ns</span><span class="p">,</span> <span class="n">namespace</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">raise</span> <span class="n">ArgumentParserError</span><span class="p">(</span><span class="s">&#39;opt_action failed: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">e</span><span class="p">)</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestActionUserDefined.PositionalAction"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestActionUserDefined.PositionalAction">[docs]</a>    <span class="k">class</span> <span class="nc">PositionalAction</span><span class="p">(</span><span class="n">argparse</span><span class="o">.</span><span class="n">Action</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">option_string</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">assert</span> <span class="n">option_string</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;option_string: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span>
                                               <span class="n">option_string</span><span class="p">)</span>
                <span class="c"># check destination</span>
                <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">dest</span> <span class="o">==</span> <span class="s">&#39;badger&#39;</span><span class="p">,</span> <span class="s">&#39;dest: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">dest</span>
                <span class="c"># when argument is before option, spam=0.25, and when</span>
                <span class="c"># option is after argument, spam=&lt;whatever was set&gt;</span>
                <span class="n">expected_ns</span> <span class="o">=</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">42</span><span class="p">,</span> <span class="mi">84</span><span class="p">]:</span>
                    <span class="n">expected_ns</span><span class="o">.</span><span class="n">spam</span> <span class="o">=</span> <span class="mf">0.25</span>
                <span class="k">elif</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">expected_ns</span><span class="o">.</span><span class="n">spam</span> <span class="o">=</span> <span class="mf">0.625</span>
                <span class="k">elif</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
                    <span class="n">expected_ns</span><span class="o">.</span><span class="n">spam</span> <span class="o">=</span> <span class="mf">0.125</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s">&#39;value: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">expected_ns</span> <span class="o">==</span> <span class="n">namespace</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;expected </span><span class="si">%s</span><span class="s">, got </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span>
                                                  <span class="p">(</span><span class="n">expected_ns</span><span class="p">,</span> <span class="n">namespace</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">raise</span> <span class="n">ArgumentParserError</span><span class="p">(</span><span class="s">&#39;arg_action failed: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">e</span><span class="p">)</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="s">&#39;badger&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</div>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-s&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">OptionalAction</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;badger&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">PositionalAction</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;-s0.125&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="mf">0.125</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="mi">2</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="mi">42</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-s 0.625 1&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="mf">0.625</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;84 -s2&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="mi">84</span><span class="p">)),</span>
    <span class="p">]</span>

</div>
<div class="viewcode-block" id="TestActionRegistration"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestActionRegistration">[docs]</a><span class="k">class</span> <span class="nc">TestActionRegistration</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a user-defined action supplied by registering it&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestActionRegistration.MyAction"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestActionRegistration.MyAction">[docs]</a>    <span class="k">class</span> <span class="nc">MyAction</span><span class="p">(</span><span class="n">argparse</span><span class="o">.</span><span class="n">Action</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">option_string</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="p">,</span> <span class="s">&#39;foo[</span><span class="si">%s</span><span class="s">]&#39;</span> <span class="o">%</span> <span class="n">values</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestActionRegistration.test"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestActionRegistration.test">[docs]</a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&#39;action&#39;</span><span class="p">,</span> <span class="s">&#39;my_action&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MyAction</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;badger&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;my_action&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s">&#39;1&#39;</span><span class="p">]),</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="s">&#39;foo[1]&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s">&#39;42&#39;</span><span class="p">]),</span> <span class="n">NS</span><span class="p">(</span><span class="n">badger</span><span class="o">=</span><span class="s">&#39;foo[42]&#39;</span><span class="p">))</span>


<span class="c"># ================</span>
<span class="c"># Subparsers tests</span>
<span class="c"># ================</span>
</div></div>
<div class="viewcode-block" id="TestAddSubparsers"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers">[docs]</a><span class="k">class</span> <span class="nc">TestAddSubparsers</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test the add_subparsers method&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestAddSubparsers.assertArgumentParserError"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.assertArgumentParserError">[docs]</a>    <span class="k">def</span> <span class="nf">assertArgumentParserError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ArgumentParserError</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser_help</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">prefix_chars</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">aliases</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="c"># create a parser with a subparsers argument</span>
        <span class="k">if</span> <span class="n">prefix_chars</span><span class="p">:</span>
            <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span>
                <span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;main description&#39;</span><span class="p">,</span> <span class="n">prefix_chars</span><span class="o">=</span><span class="n">prefix_chars</span><span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="n">prefix_chars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;foo help&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span>
                <span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;main description&#39;</span><span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;foo help&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;bar help&#39;</span><span class="p">)</span>

        <span class="c"># check that only one subparsers argument can be added</span>
        <span class="n">subparsers_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">aliases</span><span class="p">:</span>
            <span class="n">subparsers_kwargs</span><span class="p">[</span><span class="s">&#39;metavar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;COMMAND&#39;</span>
            <span class="n">subparsers_kwargs</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;commands&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">subparsers_kwargs</span><span class="p">[</span><span class="s">&#39;help&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;command help&#39;</span>
        <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="o">**</span><span class="n">subparsers_kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">)</span>

        <span class="c"># add first sub-parser</span>
        <span class="n">parser1_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s">&#39;1 description&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">subparser_help</span><span class="p">:</span>
            <span class="n">parser1_kwargs</span><span class="p">[</span><span class="s">&#39;help&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;1 help&#39;</span>
        <span class="k">if</span> <span class="n">aliases</span><span class="p">:</span>
            <span class="n">parser1_kwargs</span><span class="p">[</span><span class="s">&#39;aliases&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;1alias1&#39;</span><span class="p">,</span> <span class="s">&#39;1alias2&#39;</span><span class="p">]</span>
        <span class="n">parser1</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">parser1_kwargs</span><span class="p">)</span>
        <span class="n">parser1</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-w&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;w help&#39;</span><span class="p">)</span>
        <span class="n">parser1</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;x help&#39;</span><span class="p">)</span>

        <span class="c"># add second sub-parser</span>
        <span class="n">parser2_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s">&#39;2 description&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">subparser_help</span><span class="p">:</span>
            <span class="n">parser2_kwargs</span><span class="p">[</span><span class="s">&#39;help&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;2 help&#39;</span>
        <span class="n">parser2</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">parser2_kwargs</span><span class="p">)</span>
        <span class="n">parser2</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="s">&#39;123&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;y help&#39;</span><span class="p">)</span>
        <span class="n">parser2</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">complex</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;z help&#39;</span><span class="p">)</span>

        <span class="c"># add third sub-parser</span>
        <span class="n">parser3_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s">&#39;3 description&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">subparser_help</span><span class="p">:</span>
            <span class="n">parser3_kwargs</span><span class="p">[</span><span class="s">&#39;help&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;3 help&#39;</span>
        <span class="n">parser3</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">parser3_kwargs</span><span class="p">)</span>
        <span class="n">parser3</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;t help&#39;</span><span class="p">)</span>
        <span class="n">parser3</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;u&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;...&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;u help&#39;</span><span class="p">)</span>

        <span class="c"># return the main parser</span>
        <span class="k">return</span> <span class="n">parser</span>

<div class="viewcode-block" id="TestAddSubparsers.setUp"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_parser</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_help_parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_parser</span><span class="p">(</span><span class="n">subparser_help</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddSubparsers.test_parse_args_failures"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_parse_args_failures">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_args_failures</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># check some failure cases:</span>
        <span class="k">for</span> <span class="n">args_str</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a a&#39;</span><span class="p">,</span> <span class="s">&#39;0.5 a&#39;</span><span class="p">,</span> <span class="s">&#39;0.5 1&#39;</span><span class="p">,</span>
                         <span class="s">&#39;0.5 1 -y&#39;</span><span class="p">,</span> <span class="s">&#39;0.5 2 -w&#39;</span><span class="p">]:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">args_str</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddSubparsers.test_parse_args"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_parse_args">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># check some non-failure cases:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;0.5 1 b -w 7&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
            <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;0.25 --foo 2 -y 2 3j -- -1j&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
            <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="mi">3j</span><span class="p">,</span> <span class="o">-</span><span class="mi">1j</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;--foo 0.125 1 c&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
            <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mf">0.125</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;-1.5 3 11 -- a --foo 7 -- b&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
            <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=-</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;7&#39;</span><span class="p">,</span> <span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">]),</span>
        <span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddSubparsers.test_parse_known_args"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_parse_known_args">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_known_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">(</span><span class="s">&#39;0.5 1 b -w 7&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
            <span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">),</span> <span class="p">[]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">(</span><span class="s">&#39;0.5 -p 1 b -w 7&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
            <span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;-p&#39;</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">(</span><span class="s">&#39;0.5 1 b -w 7 -p&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
            <span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;-p&#39;</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">(</span><span class="s">&#39;0.5 1 b -q -rs -w 7&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
            <span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;-q&#39;</span><span class="p">,</span> <span class="s">&#39;-rs&#39;</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">(</span><span class="s">&#39;0.5 -W 1 b -X Y -w 7 Z&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
            <span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;-W&#39;</span><span class="p">,</span> <span class="s">&#39;-X&#39;</span><span class="p">,</span> <span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="s">&#39;Z&#39;</span><span class="p">]),</span>
        <span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddSubparsers.test_dest"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_dest">[docs]</a>    <span class="k">def</span> <span class="nf">test_dest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">dest</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
        <span class="n">parser1</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">)</span>
        <span class="n">parser1</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;baz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;1 2&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
</div>
<div class="viewcode-block" id="TestAddSubparsers.test_help"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_help">[docs]</a>    <span class="k">def</span> <span class="nf">test_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">format_usage</span><span class="p">(),</span>
                         <span class="s">&#39;usage: PROG [-h] [--foo] bar {1,2,3} ...</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">format_help</span><span class="p">(),</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">            usage: PROG [-h] [--foo] bar {1,2,3} ...</span>

<span class="s">            main description</span>

<span class="s">            positional arguments:</span>
<span class="s">              bar         bar help</span>
<span class="s">              {1,2,3}     command help</span>

<span class="s">            optional arguments:</span>
<span class="s">              -h, --help  show this help message and exit</span>
<span class="s">              --foo       foo help</span>
<span class="s">            &#39;&#39;&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddSubparsers.test_help_extra_prefix_chars"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_help_extra_prefix_chars">[docs]</a>    <span class="k">def</span> <span class="nf">test_help_extra_prefix_chars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Make sure - is still used for help if it is a non-first prefix char</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_parser</span><span class="p">(</span><span class="n">prefix_chars</span><span class="o">=</span><span class="s">&#39;+:-&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">format_usage</span><span class="p">(),</span>
                         <span class="s">&#39;usage: PROG [-h] [++foo] bar {1,2,3} ...</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">format_help</span><span class="p">(),</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">            usage: PROG [-h] [++foo] bar {1,2,3} ...</span>

<span class="s">            main description</span>

<span class="s">            positional arguments:</span>
<span class="s">              bar         bar help</span>
<span class="s">              {1,2,3}     command help</span>

<span class="s">            optional arguments:</span>
<span class="s">              -h, --help  show this help message and exit</span>
<span class="s">              ++foo       foo help</span>
<span class="s">            &#39;&#39;&#39;</span><span class="p">))</span>

</div>
<div class="viewcode-block" id="TestAddSubparsers.test_help_alternate_prefix_chars"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_help_alternate_prefix_chars">[docs]</a>    <span class="k">def</span> <span class="nf">test_help_alternate_prefix_chars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_parser</span><span class="p">(</span><span class="n">prefix_chars</span><span class="o">=</span><span class="s">&#39;+:/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">format_usage</span><span class="p">(),</span>
                         <span class="s">&#39;usage: PROG [+h] [++foo] bar {1,2,3} ...</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">format_help</span><span class="p">(),</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">            usage: PROG [+h] [++foo] bar {1,2,3} ...</span>

<span class="s">            main description</span>

<span class="s">            positional arguments:</span>
<span class="s">              bar         bar help</span>
<span class="s">              {1,2,3}     command help</span>

<span class="s">            optional arguments:</span>
<span class="s">              +h, ++help  show this help message and exit</span>
<span class="s">              ++foo       foo help</span>
<span class="s">            &#39;&#39;&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddSubparsers.test_parser_command_help"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_parser_command_help">[docs]</a>    <span class="k">def</span> <span class="nf">test_parser_command_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">command_help_parser</span><span class="o">.</span><span class="n">format_usage</span><span class="p">(),</span>
                         <span class="s">&#39;usage: PROG [-h] [--foo] bar {1,2,3} ...</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">command_help_parser</span><span class="o">.</span><span class="n">format_help</span><span class="p">(),</span>
                         <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">            usage: PROG [-h] [--foo] bar {1,2,3} ...</span>

<span class="s">            main description</span>

<span class="s">            positional arguments:</span>
<span class="s">              bar         bar help</span>
<span class="s">              {1,2,3}     command help</span>
<span class="s">                1         1 help</span>
<span class="s">                2         2 help</span>
<span class="s">                3         3 help</span>

<span class="s">            optional arguments:</span>
<span class="s">              -h, --help  show this help message and exit</span>
<span class="s">              --foo       foo help</span>
<span class="s">            &#39;&#39;&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddSubparsers.test_subparser_title_help"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_subparser_title_help">[docs]</a>    <span class="k">def</span> <span class="nf">test_subparser_title_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span>
                                            <span class="n">description</span><span class="o">=</span><span class="s">&#39;main description&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;foo help&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;bar help&#39;</span><span class="p">)</span>
        <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&#39;subcommands&#39;</span><span class="p">,</span>
                                           <span class="n">description</span><span class="o">=</span><span class="s">&#39;command help&#39;</span><span class="p">,</span>
                                           <span class="n">help</span><span class="o">=</span><span class="s">&#39;additional text&#39;</span><span class="p">)</span>
        <span class="n">parser1</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">)</span>
        <span class="n">parser2</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s">&#39;2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">format_usage</span><span class="p">(),</span>
                         <span class="s">&#39;usage: PROG [-h] [--foo] bar {1,2} ...</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">format_help</span><span class="p">(),</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">            usage: PROG [-h] [--foo] bar {1,2} ...</span>

<span class="s">            main description</span>

<span class="s">            positional arguments:</span>
<span class="s">              bar         bar help</span>

<span class="s">            optional arguments:</span>
<span class="s">              -h, --help  show this help message and exit</span>
<span class="s">              --foo       foo help</span>

<span class="s">            subcommands:</span>
<span class="s">              command help</span>

<span class="s">              {1,2}       additional text</span>
<span class="s">            &#39;&#39;&#39;</span><span class="p">))</span>
</div>
    <span class="k">def</span> <span class="nf">_test_subparser_help</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args_str</span><span class="p">,</span> <span class="n">expected_help</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">args_str</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="k">except</span> <span class="n">ArgumentParserError</span><span class="p">:</span>
            <span class="n">err</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">err</span><span class="o">.</span><span class="n">stdout</span> <span class="o">!=</span> <span class="n">expected_help</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">expected_help</span><span class="p">))</span>
                <span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">stdout</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">expected_help</span><span class="p">)</span>

<div class="viewcode-block" id="TestAddSubparsers.test_subparser1_help"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_subparser1_help">[docs]</a>    <span class="k">def</span> <span class="nf">test_subparser1_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_subparser_help</span><span class="p">(</span><span class="s">&#39;5.0 1 -h&#39;</span><span class="p">,</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">            usage: PROG bar 1 [-h] [-w W] {a,b,c}</span>

<span class="s">            1 description</span>

<span class="s">            positional arguments:</span>
<span class="s">              {a,b,c}     x help</span>

<span class="s">            optional arguments:</span>
<span class="s">              -h, --help  show this help message and exit</span>
<span class="s">              -w W        w help</span>
<span class="s">            &#39;&#39;&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddSubparsers.test_subparser2_help"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_subparser2_help">[docs]</a>    <span class="k">def</span> <span class="nf">test_subparser2_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_subparser_help</span><span class="p">(</span><span class="s">&#39;5.0 2 -h&#39;</span><span class="p">,</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">            usage: PROG bar 2 [-h] [-y {1,2,3}] [z [z ...]]</span>

<span class="s">            2 description</span>

<span class="s">            positional arguments:</span>
<span class="s">              z           z help</span>

<span class="s">            optional arguments:</span>
<span class="s">              -h, --help  show this help message and exit</span>
<span class="s">              -y {1,2,3}  y help</span>
<span class="s">            &#39;&#39;&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddSubparsers.test_alias_invocation"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_alias_invocation">[docs]</a>    <span class="k">def</span> <span class="nf">test_alias_invocation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_parser</span><span class="p">(</span><span class="n">aliases</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">(</span><span class="s">&#39;0.5 1alias1 b&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
            <span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">),</span> <span class="p">[]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">(</span><span class="s">&#39;0.5 1alias2 b&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
            <span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">),</span> <span class="p">[]),</span>
        <span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddSubparsers.test_error_alias_invocation"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_error_alias_invocation">[docs]</a>    <span class="k">def</span> <span class="nf">test_error_alias_invocation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_parser</span><span class="p">(</span><span class="n">aliases</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">,</span>
                                       <span class="s">&#39;0.5 1alias3 b&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestAddSubparsers.test_alias_help"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddSubparsers.test_alias_help">[docs]</a>    <span class="k">def</span> <span class="nf">test_alias_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_parser</span><span class="p">(</span><span class="n">aliases</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">subparser_help</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxDiff</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">format_help</span><span class="p">(),</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s">            usage: PROG [-h] [--foo] bar COMMAND ...</span>

<span class="s">            main description</span>

<span class="s">            positional arguments:</span>
<span class="s">              bar                   bar help</span>

<span class="s">            optional arguments:</span>
<span class="s">              -h, --help            show this help message and exit</span>
<span class="s">              --foo                 foo help</span>

<span class="s">            commands:</span>
<span class="s">              COMMAND</span>
<span class="s">                1 (1alias1, 1alias2)</span>
<span class="s">                                    1 help</span>
<span class="s">                2                   2 help</span>
<span class="s">                3                   3 help</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">))</span>

<span class="c"># ============</span>
<span class="c"># Groups tests</span>
<span class="c"># ============</span>
</div></div>
<div class="viewcode-block" id="TestPositionalsGroups"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsGroups">[docs]</a><span class="k">class</span> <span class="nc">TestPositionalsGroups</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests that order of group positionals matches construction order&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestPositionalsGroups.test_nongroup_first"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsGroups.test_nongroup_first">[docs]</a>    <span class="k">def</span> <span class="nf">test_nongroup_first</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;g&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;baz&#39;</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="s">&#39;3&#39;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;1 2 3&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestPositionalsGroups.test_group_first"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsGroups.test_group_first">[docs]</a>    <span class="k">def</span> <span class="nf">test_group_first</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;xxx&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;baz&#39;</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="s">&#39;3&#39;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;1 2 3&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestPositionalsGroups.test_interleaved_groups"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestPositionalsGroups.test_interleaved_groups">[docs]</a>    <span class="k">def</span> <span class="nf">test_interleaved_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;xxx&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;baz&#39;</span><span class="p">)</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;yyy&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;frell&#39;</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="n">frell</span><span class="o">=</span><span class="s">&#39;4&#39;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;1 2 3 4&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>

<span class="c"># ===================</span>
<span class="c"># Parent parser tests</span>
<span class="c"># ===================</span>
</div></div>
<div class="viewcode-block" id="TestParentParsers"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers">[docs]</a><span class="k">class</span> <span class="nc">TestParentParsers</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests that parsers can be created with parent parsers&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestParentParsers.assertArgumentParserError"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.assertArgumentParserError">[docs]</a>    <span class="k">def</span> <span class="nf">assertArgumentParserError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ArgumentParserError</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParentParsers.setUp"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wxyz_parent</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wxyz_parent</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--w&#39;</span><span class="p">)</span>
        <span class="n">x_group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wxyz_parent</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">x_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wxyz_parent</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;z&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">abcd_parent</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abcd_parent</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abcd_parent</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-b&#39;</span><span class="p">)</span>
        <span class="n">c_group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">abcd_parent</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">)</span>
        <span class="n">c_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--d&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">w_parent</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w_parent</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--w&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">z_parent</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z_parent</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;z&#39;</span><span class="p">)</span>

        <span class="c"># parents with mutually exclusive groups</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ab_mutex_parent</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ab_mutex_parent</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-a&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">main_program</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParentParsers.test_single_parent"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.test_single_parent">[docs]</a>    <span class="k">def</span> <span class="nf">test_single_parent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">wxyz_parent</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;-y 1 2 --w 3&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
                         <span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestParentParsers.test_single_parent_mutex"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.test_single_parent_mutex">[docs]</a>    <span class="k">def</span> <span class="nf">test_single_parent_mutex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_mutex_ab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ab_mutex_parent</span><span class="o">.</span><span class="n">parse_args</span><span class="p">)</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ab_mutex_parent</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_mutex_ab</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParentParsers.test_single_granparent_mutex"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.test_single_granparent_mutex">[docs]</a>    <span class="k">def</span> <span class="nf">test_single_granparent_mutex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ab_mutex_parent</span><span class="p">]</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="n">parents</span><span class="p">)</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_mutex_ab</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_test_mutex_ab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parse_args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parse_args</span><span class="p">([]),</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parse_args</span><span class="p">([</span><span class="s">&#39;-a&#39;</span><span class="p">]),</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parse_args</span><span class="p">([</span><span class="s">&#39;-b&#39;</span><span class="p">]),</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parse_args</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;-a&#39;</span><span class="p">,</span> <span class="s">&#39;-b&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parse_args</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="s">&#39;-a&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parse_args</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;-c&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parse_args</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;-a&#39;</span><span class="p">,</span> <span class="s">&#39;-c&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parse_args</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="s">&#39;-c&#39;</span><span class="p">])</span>

<div class="viewcode-block" id="TestParentParsers.test_multiple_parents"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.test_multiple_parents">[docs]</a>    <span class="k">def</span> <span class="nf">test_multiple_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">abcd_parent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wxyz_parent</span><span class="p">]</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="n">parents</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;--d 1 --w 2 3 4&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
                         <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;4&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestParentParsers.test_multiple_parents_mutex"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.test_multiple_parents_mutex">[docs]</a>    <span class="k">def</span> <span class="nf">test_multiple_parents_mutex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ab_mutex_parent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wxyz_parent</span><span class="p">]</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="n">parents</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;-a --w 2 3&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
                         <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;3&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">,</span> <span class="s">&#39;-a --w 2 3 -b&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">,</span> <span class="s">&#39;-a -b --w 2 3&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestParentParsers.test_conflicting_parents"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.test_conflicting_parents">[docs]</a>    <span class="k">def</span> <span class="nf">test_conflicting_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span>
            <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentError</span><span class="p">,</span>
            <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">,</span>
            <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">w_parent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wxyz_parent</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParentParsers.test_conflicting_parents_mutex"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.test_conflicting_parents_mutex">[docs]</a>    <span class="k">def</span> <span class="nf">test_conflicting_parents_mutex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span>
            <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentError</span><span class="p">,</span>
            <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">,</span>
            <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">abcd_parent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ab_mutex_parent</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParentParsers.test_same_argument_name_parents"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.test_same_argument_name_parents">[docs]</a>    <span class="k">def</span> <span class="nf">test_same_argument_name_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">wxyz_parent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_parent</span><span class="p">]</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="n">parents</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;1 2&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
                         <span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestParentParsers.test_subparser_parents"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.test_subparser_parents">[docs]</a>    <span class="k">def</span> <span class="nf">test_subparser_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">()</span>
        <span class="n">abcde_parser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">abcd_parent</span><span class="p">])</span>
        <span class="n">abcde_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;bar -b 1 --d 2 3 4&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
                         <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="s">&#39;4&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestParentParsers.test_subparser_parents_mutex"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.test_subparser_parents_mutex">[docs]</a>    <span class="k">def</span> <span class="nf">test_subparser_parents_mutex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">()</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ab_mutex_parent</span><span class="p">]</span>
        <span class="n">abc_parser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="n">parents</span><span class="p">)</span>
        <span class="n">c_group</span> <span class="o">=</span> <span class="n">abc_parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;c_group&#39;</span><span class="p">)</span>
        <span class="n">c_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">)</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">wxyz_parent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ab_mutex_parent</span><span class="p">]</span>
        <span class="n">wxyzabe_parser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="n">parents</span><span class="p">)</span>
        <span class="n">wxyzabe_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;foo -a 4&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
                         <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;4&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;bar -b  --w 2 3 4&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span>
                         <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="s">&#39;4&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">,</span> <span class="s">&#39;foo -a -b 4&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">,</span> <span class="s">&#39;bar -b -a 4&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestParentParsers.test_parent_help"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.test_parent_help">[docs]</a>    <span class="k">def</span> <span class="nf">test_parent_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">abcd_parent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wxyz_parent</span><span class="p">]</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="n">parents</span><span class="p">)</span>
        <span class="n">parser_help</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">format_help</span><span class="p">()</span>
        <span class="n">progname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_program</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser_help</span><span class="p">,</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">            usage: {}{}[-h] [-b B] [--d D] [--w W] [-y Y] a z</span>

<span class="s">            positional arguments:</span>
<span class="s">              a</span>
<span class="s">              z</span>

<span class="s">            optional arguments:</span>
<span class="s">              -h, --help  show this help message and exit</span>
<span class="s">              -b B</span>
<span class="s">              --w W</span>

<span class="s">            c:</span>
<span class="s">              --d D</span>

<span class="s">            x:</span>
<span class="s">              -y Y</span>
<span class="s">        &#39;&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">progname</span><span class="p">,</span> <span class="s">&#39; &#39;</span> <span class="k">if</span> <span class="n">progname</span> <span class="k">else</span> <span class="s">&#39;&#39;</span> <span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestParentParsers.test_groups_parents"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParentParsers.test_groups_parents">[docs]</a>    <span class="k">def</span> <span class="nf">test_groups_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;gd&#39;</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-w&#39;</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">)</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parent</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ArgumentParserError</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">,</span>
            <span class="p">[</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="s">&#39;Z&#39;</span><span class="p">])</span>

        <span class="n">parser_help</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">format_help</span><span class="p">()</span>
        <span class="n">progname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_program</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser_help</span><span class="p">,</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">            usage: {}{}[-h] [-w W] [-x X] [-y Y | -z Z]</span>

<span class="s">            optional arguments:</span>
<span class="s">              -h, --help  show this help message and exit</span>
<span class="s">              -y Y</span>
<span class="s">              -z Z</span>

<span class="s">            g:</span>
<span class="s">              gd</span>

<span class="s">              -w W</span>
<span class="s">              -x X</span>
<span class="s">        &#39;&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">progname</span><span class="p">,</span> <span class="s">&#39; &#39;</span> <span class="k">if</span> <span class="n">progname</span> <span class="k">else</span> <span class="s">&#39;&#39;</span> <span class="p">)))</span>

<span class="c"># ==============================</span>
<span class="c"># Mutually exclusive group tests</span>
<span class="c"># ==============================</span>
</div></div>
<div class="viewcode-block" id="TestMutuallyExclusiveGroupErrors"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveGroupErrors">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveGroupErrors</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestMutuallyExclusiveGroupErrors.test_invalid_add_argument_group"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveGroupErrors.test_invalid_add_argument_group">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_add_argument_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">raises</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span>
        <span class="n">raises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMutuallyExclusiveGroupErrors.test_invalid_add_argument"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveGroupErrors.test_invalid_add_argument">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
        <span class="n">add_argument</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span>
        <span class="n">raises</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span>
        <span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">add_argument</span><span class="p">,</span> <span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">add_argument</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
        <span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">add_argument</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">)</span>
        <span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">add_argument</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">add_argument</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">PARSER</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMutuallyExclusiveGroupErrors.test_help"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveGroupErrors.test_help">[docs]</a>    <span class="k">def</span> <span class="nf">test_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
        <span class="n">group1</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
        <span class="n">group1</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="n">group1</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">)</span>
        <span class="n">group2</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
        <span class="n">group2</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--soup&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="n">group2</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--nuts&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">            usage: PROG [-h] [--foo | --bar] [--soup | --nuts]</span>

<span class="s">            optional arguments:</span>
<span class="s">              -h, --help  show this help message and exit</span>
<span class="s">              --foo</span>
<span class="s">              --bar</span>
<span class="s">              --soup</span>
<span class="s">              --nuts</span>
<span class="s">              &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">format_help</span><span class="p">(),</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="n">expected</span><span class="p">))</span>
</div></div>
<div class="viewcode-block" id="MEMixin"><a class="viewcode-back" href="../../test.html#test.test_argparse.MEMixin">[docs]</a><span class="k">class</span> <span class="nc">MEMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

<div class="viewcode-block" id="MEMixin.test_failures_when_not_required"><a class="viewcode-back" href="../../test.html#test.test_argparse.MEMixin.test_failures_when_not_required">[docs]</a>    <span class="k">def</span> <span class="nf">test_failures_when_not_required</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parse_args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parser</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">parse_args</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">ArgumentParserError</span>
        <span class="k">for</span> <span class="n">args_string</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">failures</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">parse_args</span><span class="p">,</span> <span class="n">args_string</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="MEMixin.test_failures_when_required"><a class="viewcode-back" href="../../test.html#test.test_argparse.MEMixin.test_failures_when_required">[docs]</a>    <span class="k">def</span> <span class="nf">test_failures_when_required</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parse_args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parser</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">parse_args</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">ArgumentParserError</span>
        <span class="k">for</span> <span class="n">args_string</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">failures</span> <span class="o">+</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">parse_args</span><span class="p">,</span> <span class="n">args_string</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="MEMixin.test_successes_when_not_required"><a class="viewcode-back" href="../../test.html#test.test_argparse.MEMixin.test_successes_when_not_required">[docs]</a>    <span class="k">def</span> <span class="nf">test_successes_when_not_required</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parse_args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parser</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">parse_args</span>
        <span class="n">successes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">successes</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">successes_when_not_required</span>
        <span class="k">for</span> <span class="n">args_string</span><span class="p">,</span> <span class="n">expected_ns</span> <span class="ow">in</span> <span class="n">successes</span><span class="p">:</span>
            <span class="n">actual_ns</span> <span class="o">=</span> <span class="n">parse_args</span><span class="p">(</span><span class="n">args_string</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual_ns</span><span class="p">,</span> <span class="n">expected_ns</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MEMixin.test_successes_when_required"><a class="viewcode-back" href="../../test.html#test.test_argparse.MEMixin.test_successes_when_required">[docs]</a>    <span class="k">def</span> <span class="nf">test_successes_when_required</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parse_args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parser</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">parse_args</span>
        <span class="k">for</span> <span class="n">args_string</span><span class="p">,</span> <span class="n">expected_ns</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">successes</span><span class="p">:</span>
            <span class="n">actual_ns</span> <span class="o">=</span> <span class="n">parse_args</span><span class="p">(</span><span class="n">args_string</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual_ns</span><span class="p">,</span> <span class="n">expected_ns</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MEMixin.test_usage_when_not_required"><a class="viewcode-back" href="../../test.html#test.test_argparse.MEMixin.test_usage_when_not_required">[docs]</a>    <span class="k">def</span> <span class="nf">test_usage_when_not_required</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">format_usage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parser</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">format_usage</span>
        <span class="n">expected_usage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">usage_when_not_required</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format_usage</span><span class="p">(),</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="n">expected_usage</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="MEMixin.test_usage_when_required"><a class="viewcode-back" href="../../test.html#test.test_argparse.MEMixin.test_usage_when_required">[docs]</a>    <span class="k">def</span> <span class="nf">test_usage_when_required</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">format_usage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parser</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">format_usage</span>
        <span class="n">expected_usage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">usage_when_required</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format_usage</span><span class="p">(),</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="n">expected_usage</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="MEMixin.test_help_when_not_required"><a class="viewcode-back" href="../../test.html#test.test_argparse.MEMixin.test_help_when_not_required">[docs]</a>    <span class="k">def</span> <span class="nf">test_help_when_not_required</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">format_help</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parser</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">format_help</span>
        <span class="n">help</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">usage_when_not_required</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">help</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format_help</span><span class="p">(),</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="n">help</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="MEMixin.test_help_when_required"><a class="viewcode-back" href="../../test.html#test.test_argparse.MEMixin.test_help_when_required">[docs]</a>    <span class="k">def</span> <span class="nf">test_help_when_required</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">format_help</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parser</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">format_help</span>
        <span class="n">help</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">usage_when_required</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">help</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format_help</span><span class="p">(),</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="n">help</span><span class="p">))</span>

</div></div>
<div class="viewcode-block" id="TestMutuallyExclusiveSimple"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveSimple">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveSimple</span><span class="p">(</span><span class="n">MEMixin</span><span class="p">,</span> <span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestMutuallyExclusiveSimple.get_parser"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveSimple.get_parser">[docs]</a>    <span class="k">def</span> <span class="nf">get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;bar help&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="s">&#39;Z&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;baz help&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parser</span>
</div>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;--bar X --baz Y&#39;</span><span class="p">,</span> <span class="s">&#39;--bar X --baz&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;--bar X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">bar</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--bar X --bar Z&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">bar</span><span class="o">=</span><span class="s">&#39;Z&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--baz Y&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="s">&#39;Y&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="s">&#39;Z&#39;</span><span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">successes_when_not_required</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
    <span class="p">]</span>

    <span class="n">usage_when_not_required</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [--bar BAR | --baz [BAZ]]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">usage_when_required</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] (--bar BAR | --baz [BAZ])</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help   show this help message and exit</span>
<span class="s">          --bar BAR    bar help</span>
<span class="s">          --baz [BAZ]  baz help</span>
<span class="s">        &#39;&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveLong"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveLong">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveLong</span><span class="p">(</span><span class="n">MEMixin</span><span class="p">,</span> <span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestMutuallyExclusiveLong.get_parser"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveLong.get_parser">[docs]</a>    <span class="k">def</span> <span class="nf">get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--abcde&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;abcde help&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--fghij&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;fghij help&#39;</span><span class="p">)</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--klmno&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;klmno help&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--pqrst&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;pqrst help&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parser</span>
</div>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;--klmno X --pqrst Y&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;--klmno X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">abcde</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fghij</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">klmno</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">pqrst</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--abcde Y --klmno X&#39;</span><span class="p">,</span>
            <span class="n">NS</span><span class="p">(</span><span class="n">abcde</span><span class="o">=</span><span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="n">fghij</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">klmno</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">pqrst</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--pqrst X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">abcde</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fghij</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">klmno</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">pqrst</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--pqrst X --fghij Y&#39;</span><span class="p">,</span>
            <span class="n">NS</span><span class="p">(</span><span class="n">abcde</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fghij</span><span class="o">=</span><span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="n">klmno</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">pqrst</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">successes_when_not_required</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">abcde</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fghij</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">klmno</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">pqrst</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
    <span class="p">]</span>

    <span class="n">usage_when_not_required</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">    usage: PROG [-h] [--abcde ABCDE] [--fghij FGHIJ]</span>
<span class="s">                [--klmno KLMNO | --pqrst PQRST]</span>
<span class="s">    &#39;&#39;&#39;</span>
    <span class="n">usage_when_required</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">    usage: PROG [-h] [--abcde ABCDE] [--fghij FGHIJ]</span>
<span class="s">                (--klmno KLMNO | --pqrst PQRST)</span>
<span class="s">    &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">    optional arguments:</span>
<span class="s">      -h, --help     show this help message and exit</span>
<span class="s">      --abcde ABCDE  abcde help</span>
<span class="s">      --fghij FGHIJ  fghij help</span>
<span class="s">      --klmno KLMNO  klmno help</span>
<span class="s">      --pqrst PQRST  pqrst help</span>
<span class="s">    &#39;&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveFirstSuppressed"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveFirstSuppressed">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveFirstSuppressed</span><span class="p">(</span><span class="n">MEMixin</span><span class="p">,</span> <span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestMutuallyExclusiveFirstSuppressed.get_parser"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveFirstSuppressed.get_parser">[docs]</a>    <span class="k">def</span> <span class="nf">get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">required</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;y help&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parser</span>
</div>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-x X -y&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;-x X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x X -x Y&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">successes_when_not_required</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
    <span class="p">]</span>

    <span class="n">usage_when_not_required</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-y]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">usage_when_required</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] -y</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          -y          y help</span>
<span class="s">        &#39;&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveManySuppressed"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveManySuppressed">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveManySuppressed</span><span class="p">(</span><span class="n">MEMixin</span><span class="p">,</span> <span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestMutuallyExclusiveManySuppressed.get_parser"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveManySuppressed.get_parser">[docs]</a>    <span class="k">def</span> <span class="nf">get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">required</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">)</span>
        <span class="n">add</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span>
        <span class="n">add</span><span class="p">(</span><span class="s">&#39;--spam&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>
        <span class="n">add</span><span class="p">(</span><span class="s">&#39;--badger&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>
        <span class="n">add</span><span class="p">(</span><span class="s">&#39;--bladder&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parser</span>
</div>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;--spam --badger&#39;</span><span class="p">,</span>
        <span class="s">&#39;--badger --bladder B&#39;</span><span class="p">,</span>
        <span class="s">&#39;--bladder B --spam&#39;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;--spam&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bladder</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--badger&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bladder</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--bladder B&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bladder</span><span class="o">=</span><span class="s">&#39;B&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--spam --spam&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bladder</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">successes_when_not_required</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bladder</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
    <span class="p">]</span>

    <span class="n">usage_when_required</span> <span class="o">=</span> <span class="n">usage_when_not_required</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">        &#39;&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveOptionalAndPositional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveOptionalAndPositional">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveOptionalAndPositional</span><span class="p">(</span><span class="n">MEMixin</span><span class="p">,</span> <span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestMutuallyExclusiveOptionalAndPositional.get_parser"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveOptionalAndPositional.get_parser">[docs]</a>    <span class="k">def</span> <span class="nf">get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">required</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;FOO&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--spam&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;SPAM&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;badger&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;BADGER&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parser</span>
</div>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;--foo --spam S&#39;</span><span class="p">,</span>
        <span class="s">&#39;--spam S X&#39;</span><span class="p">,</span>
        <span class="s">&#39;X --foo&#39;</span><span class="p">,</span>
        <span class="s">&#39;X Y Z --spam S&#39;</span><span class="p">,</span>
        <span class="s">&#39;--foo X Y&#39;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--spam S&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="s">&#39;S&#39;</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;X&#39;</span><span class="p">])),</span>
        <span class="p">(</span><span class="s">&#39;X Y Z&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="s">&#39;Z&#39;</span><span class="p">])),</span>
    <span class="p">]</span>
    <span class="n">successes_when_not_required</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

    <span class="n">usage_when_not_required</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [--foo | --spam SPAM | badger [badger ...]]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">usage_when_required</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] (--foo | --spam SPAM | badger [badger ...])</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          badger       BADGER</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help   show this help message and exit</span>
<span class="s">          --foo        FOO</span>
<span class="s">          --spam SPAM  SPAM</span>
<span class="s">        &#39;&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveOptionalsMixed"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveOptionalsMixed">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveOptionalsMixed</span><span class="p">(</span><span class="n">MEMixin</span><span class="p">,</span> <span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestMutuallyExclusiveOptionalsMixed.get_parser"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveOptionalsMixed.get_parser">[docs]</a>    <span class="k">def</span> <span class="nf">get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">required</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;x help&#39;</span><span class="p">)</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-a&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;a help&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;b help&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;y help&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-c&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;c help&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parser</span>
</div>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;-a -b&#39;</span><span class="p">,</span> <span class="s">&#39;-b -c&#39;</span><span class="p">,</span> <span class="s">&#39;-a -c&#39;</span><span class="p">,</span> <span class="s">&#39;-a -b -c&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;-a&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-a -x&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-y -b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x -y -c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">successes_when_not_required</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
    <span class="p">]</span>

    <span class="n">usage_when_required</span> <span class="o">=</span> <span class="n">usage_when_not_required</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-x] [-a] [-b] [-y] [-c]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          -x          x help</span>
<span class="s">          -a          a help</span>
<span class="s">          -b          b help</span>
<span class="s">          -y          y help</span>
<span class="s">          -c          c help</span>
<span class="s">        &#39;&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveInGroup"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveInGroup">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveInGroup</span><span class="p">(</span><span class="n">MEMixin</span><span class="p">,</span> <span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestMutuallyExclusiveInGroup.get_parser"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveInGroup.get_parser">[docs]</a>    <span class="k">def</span> <span class="nf">get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
        <span class="n">titled_group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s">&#39;Titled group&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;Group description&#39;</span><span class="p">)</span>
        <span class="n">mutex_group</span> <span class="o">=</span> \
            <span class="n">titled_group</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">)</span>
        <span class="n">mutex_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;bar help&#39;</span><span class="p">)</span>
        <span class="n">mutex_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;baz help&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parser</span>
</div>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;--bar X --baz Y&#39;</span><span class="p">,</span> <span class="s">&#39;--baz X --bar Y&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;--bar X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">bar</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;--baz Y&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="s">&#39;Y&#39;</span><span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">successes_when_not_required</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="bp">None</span><span class="p">)),</span>
    <span class="p">]</span>

    <span class="n">usage_when_not_required</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [--bar BAR | --baz BAZ]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">usage_when_required</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] (--bar BAR | --baz BAZ)</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>

<span class="s">        Titled group:</span>
<span class="s">          Group description</span>

<span class="s">          --bar BAR   bar help</span>
<span class="s">          --baz BAZ   baz help</span>
<span class="s">        &#39;&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveOptionalsAndPositionalsMixed"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveOptionalsAndPositionalsMixed">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveOptionalsAndPositionalsMixed</span><span class="p">(</span><span class="n">MEMixin</span><span class="p">,</span> <span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestMutuallyExclusiveOptionalsAndPositionalsMixed.get_parser"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveOptionalsAndPositionalsMixed.get_parser">[docs]</a>    <span class="k">def</span> <span class="nf">get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">required</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;x help&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;y help&#39;</span><span class="p">)</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;a help&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;b help&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-c&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;c help&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parser</span>
</div>
    <span class="n">failures</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;X A -b&#39;</span><span class="p">,</span> <span class="s">&#39;-b -c&#39;</span><span class="p">,</span> <span class="s">&#39;-c X A&#39;</span><span class="p">]</span>
    <span class="n">successes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;X A&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;X -b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;X -c&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;X A -y&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;X -y -b&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">successes_when_not_required</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">False</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;X -y&#39;</span><span class="p">,</span> <span class="n">NS</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
    <span class="p">]</span>

    <span class="n">usage_when_required</span> <span class="o">=</span> <span class="n">usage_when_not_required</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-y] [-b] [-c] x [a]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          x           x help</span>
<span class="s">          a           a help</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          -y          y help</span>
<span class="s">          -b          b help</span>
<span class="s">          -c          c help</span>
<span class="s">        &#39;&#39;&#39;</span>

<span class="c"># =================================================</span>
<span class="c"># Mutually exclusive group in parent parser tests</span>
<span class="c"># =================================================</span>
</div>
<div class="viewcode-block" id="MEPBase"><a class="viewcode-back" href="../../test.html#test.test_argparse.MEPBase">[docs]</a><span class="k">class</span> <span class="nc">MEPBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

<div class="viewcode-block" id="MEPBase.get_parser"><a class="viewcode-back" href="../../test.html#test.test_argparse.MEPBase.get_parser">[docs]</a>    <span class="k">def</span> <span class="nf">get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MEPBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_parser</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">)</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span>
            <span class="n">prog</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">prog</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parent</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">parser</span>

</div></div>
<div class="viewcode-block" id="TestMutuallyExclusiveGroupErrorsParent"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveGroupErrorsParent">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveGroupErrorsParent</span><span class="p">(</span>
    <span class="n">MEPBase</span><span class="p">,</span> <span class="n">TestMutuallyExclusiveGroupErrors</span><span class="p">):</span>
    <span class="k">pass</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveSimpleParent"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveSimpleParent">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveSimpleParent</span><span class="p">(</span>
    <span class="n">MEPBase</span><span class="p">,</span> <span class="n">TestMutuallyExclusiveSimple</span><span class="p">):</span>
    <span class="k">pass</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveLongParent"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveLongParent">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveLongParent</span><span class="p">(</span>
    <span class="n">MEPBase</span><span class="p">,</span> <span class="n">TestMutuallyExclusiveLong</span><span class="p">):</span>
    <span class="k">pass</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveFirstSuppressedParent"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveFirstSuppressedParent">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveFirstSuppressedParent</span><span class="p">(</span>
    <span class="n">MEPBase</span><span class="p">,</span> <span class="n">TestMutuallyExclusiveFirstSuppressed</span><span class="p">):</span>
    <span class="k">pass</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveManySuppressedParent"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveManySuppressedParent">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveManySuppressedParent</span><span class="p">(</span>
    <span class="n">MEPBase</span><span class="p">,</span> <span class="n">TestMutuallyExclusiveManySuppressed</span><span class="p">):</span>
    <span class="k">pass</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveOptionalAndPositionalParent"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveOptionalAndPositionalParent">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveOptionalAndPositionalParent</span><span class="p">(</span>
    <span class="n">MEPBase</span><span class="p">,</span> <span class="n">TestMutuallyExclusiveOptionalAndPositional</span><span class="p">):</span>
    <span class="k">pass</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveOptionalsMixedParent"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveOptionalsMixedParent">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveOptionalsMixedParent</span><span class="p">(</span>
    <span class="n">MEPBase</span><span class="p">,</span> <span class="n">TestMutuallyExclusiveOptionalsMixed</span><span class="p">):</span>
    <span class="k">pass</span>

</div>
<div class="viewcode-block" id="TestMutuallyExclusiveOptionalsAndPositionalsMixedParent"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMutuallyExclusiveOptionalsAndPositionalsMixedParent">[docs]</a><span class="k">class</span> <span class="nc">TestMutuallyExclusiveOptionalsAndPositionalsMixedParent</span><span class="p">(</span>
    <span class="n">MEPBase</span><span class="p">,</span> <span class="n">TestMutuallyExclusiveOptionalsAndPositionalsMixed</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="c"># =================</span>
<span class="c"># Set default tests</span>
<span class="c"># =================</span>
</div>
<div class="viewcode-block" id="TestSetDefaults"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestSetDefaults">[docs]</a><span class="k">class</span> <span class="nc">TestSetDefaults</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestSetDefaults.test_set_defaults_no_args"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestSetDefaults.test_set_defaults_no_args">[docs]</a>    <span class="k">def</span> <span class="nf">test_set_defaults_no_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([],</span> <span class="n">NS</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([],</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;baz&#39;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([],</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">2</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestSetDefaults.test_set_defaults_with_args"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestSetDefaults.test_set_defaults_with_args">[docs]</a>    <span class="k">def</span> <span class="nf">test_set_defaults_with_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;xfoox&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;xfoox&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;xfoox&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([],</span> <span class="n">NS</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([],</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;baz&#39;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;-x 1&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;-x 1&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">(),</span> <span class="n">NS</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;-x 1&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">(),</span> <span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;baz&#39;</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestSetDefaults.test_set_defaults_subparsers"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestSetDefaults.test_set_defaults_subparsers">[docs]</a>    <span class="k">def</span> <span class="nf">test_set_defaults_subparsers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">()</span>
        <span class="n">parser_a</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="n">parser_a</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
</div>
<div class="viewcode-block" id="TestSetDefaults.test_set_defaults_parents"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestSetDefaults.test_set_defaults_parents">[docs]</a>    <span class="k">def</span> <span class="nf">test_set_defaults_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parent</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([]))</span>
</div>
<div class="viewcode-block" id="TestSetDefaults.test_set_defaults_same_as_add_argument"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestSetDefaults.test_set_defaults_same_as_add_argument">[docs]</a>    <span class="k">def</span> <span class="nf">test_set_defaults_same_as_add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="s">&#39;W&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;Z&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-w&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;XX&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;ZZ&#39;</span><span class="p">)</span>

        <span class="c"># defaults set previously</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="s">&#39;W&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;XX&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;ZZ&#39;</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([]))</span>

        <span class="c"># reset defaults</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="s">&#39;WW&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;YY&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;Z&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="s">&#39;WW&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;YY&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;Z&#39;</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([]))</span>
</div>
<div class="viewcode-block" id="TestSetDefaults.test_set_defaults_same_as_add_argument_group"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestSetDefaults.test_set_defaults_same_as_add_argument_group">[docs]</a>    <span class="k">def</span> <span class="nf">test_set_defaults_same_as_add_argument_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="s">&#39;W&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;Z&#39;</span><span class="p">)</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-w&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;XX&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;ZZ&#39;</span><span class="p">)</span>


        <span class="c"># defaults set previously</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="s">&#39;W&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;XX&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;ZZ&#39;</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([]))</span>

        <span class="c"># reset defaults</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="s">&#39;WW&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;YY&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;Z&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="s">&#39;WW&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">&#39;YY&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s">&#39;Z&#39;</span><span class="p">),</span>
                         <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([]))</span>

<span class="c"># =================</span>
<span class="c"># Get default tests</span>
<span class="c"># =================</span>
</div></div>
<div class="viewcode-block" id="TestGetDefault"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestGetDefault">[docs]</a><span class="k">class</span> <span class="nc">TestGetDefault</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestGetDefault.test_get_default"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestGetDefault.test_get_default">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_default</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_default</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">))</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&quot;--foo&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_default</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_default</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">))</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&quot;--bar&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_default</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_default</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">))</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&quot;badger&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&quot;badger&quot;</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_default</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_default</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">))</span>

<span class="c"># ==========================</span>
<span class="c"># Namespace &#39;contains&#39; tests</span>
<span class="c"># ==========================</span>
</div></div>
<div class="viewcode-block" id="TestNamespaceContainsSimple"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestNamespaceContainsSimple">[docs]</a><span class="k">class</span> <span class="nc">TestNamespaceContainsSimple</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestNamespaceContainsSimple.test_empty"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestNamespaceContainsSimple.test_empty">[docs]</a>    <span class="k">def</span> <span class="nf">test_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;&#39;</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;x&#39;</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestNamespaceContainsSimple.test_non_empty"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestNamespaceContainsSimple.test_non_empty">[docs]</a>    <span class="k">def</span> <span class="nf">test_non_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;x&#39;</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;x&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;y&#39;</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;&#39;</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;xx&#39;</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;z&#39;</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

<span class="c"># =====================</span>
<span class="c"># Help formatting tests</span>
<span class="c"># =====================</span>
</div></div>
<div class="viewcode-block" id="TestHelpFormattingMetaclass"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpFormattingMetaclass">[docs]</a><span class="k">class</span> <span class="nc">TestHelpFormattingMetaclass</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">bodydict</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">&#39;HelpTestCase&#39;</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">class</span> <span class="nc">AddTests</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_class</span><span class="p">,</span> <span class="n">func_suffix</span><span class="p">,</span> <span class="n">std_name</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">func_suffix</span> <span class="o">=</span> <span class="n">func_suffix</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">std_name</span> <span class="o">=</span> <span class="n">std_name</span>

                <span class="k">for</span> <span class="n">test_func</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">test_format</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">test_print</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">test_print_file</span><span class="p">]:</span>
                    <span class="n">test_name</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">_</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">test_func</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">func_suffix</span><span class="p">)</span>

                    <span class="k">def</span> <span class="nf">test_wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_func</span><span class="o">=</span><span class="n">test_func</span><span class="p">):</span>
                        <span class="n">test_func</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">test_wrapper</span><span class="o">.</span><span class="n">__name__</span> <span class="o">=</span> <span class="n">test_name</span>
                    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                        <span class="k">pass</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">test_class</span><span class="p">,</span> <span class="n">test_name</span><span class="p">,</span> <span class="n">test_wrapper</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">_get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tester</span><span class="p">):</span>
                <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
                    <span class="o">*</span><span class="n">tester</span><span class="o">.</span><span class="n">parser_signature</span><span class="o">.</span><span class="n">args</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">tester</span><span class="o">.</span><span class="n">parser_signature</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">argument_sig</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tester</span><span class="p">,</span> <span class="s">&#39;argument_signatures&#39;</span><span class="p">,</span> <span class="p">[]):</span>
                    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="o">*</span><span class="n">argument_sig</span><span class="o">.</span><span class="n">args</span><span class="p">,</span>
                                        <span class="o">**</span><span class="n">argument_sig</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="n">group_sigs</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tester</span><span class="p">,</span> <span class="s">&#39;argument_group_signatures&#39;</span><span class="p">,</span> <span class="p">[])</span>
                <span class="k">for</span> <span class="n">group_sig</span><span class="p">,</span> <span class="n">argument_sigs</span> <span class="ow">in</span> <span class="n">group_sigs</span><span class="p">:</span>
                    <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="o">*</span><span class="n">group_sig</span><span class="o">.</span><span class="n">args</span><span class="p">,</span>
                                                      <span class="o">**</span><span class="n">group_sig</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">argument_sig</span> <span class="ow">in</span> <span class="n">argument_sigs</span><span class="p">:</span>
                        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="o">*</span><span class="n">argument_sig</span><span class="o">.</span><span class="n">args</span><span class="p">,</span>
                                           <span class="o">**</span><span class="n">argument_sig</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="n">subparsers_sigs</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tester</span><span class="p">,</span> <span class="s">&#39;subparsers_signatures&#39;</span><span class="p">,</span> <span class="p">[])</span>
                <span class="k">if</span> <span class="n">subparsers_sigs</span><span class="p">:</span>
                    <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">subparser_sig</span> <span class="ow">in</span> <span class="n">subparsers_sigs</span><span class="p">:</span>
                        <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="o">*</span><span class="n">subparser_sig</span><span class="o">.</span><span class="n">args</span><span class="p">,</span>
                                               <span class="o">**</span><span class="n">subparser_sig</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">parser</span>

            <span class="k">def</span> <span class="nf">_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tester</span><span class="p">,</span> <span class="n">parser_text</span><span class="p">):</span>
                <span class="n">expected_text</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tester</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">func_suffix</span><span class="p">)</span>
                <span class="n">expected_text</span> <span class="o">=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="n">expected_text</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">expected_text</span> <span class="o">!=</span> <span class="n">parser_text</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">expected_text</span><span class="p">))</span>
                    <span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">parser_text</span><span class="p">))</span>
                    <span class="k">for</span> <span class="n">char1</span><span class="p">,</span> <span class="n">char2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expected_text</span><span class="p">,</span> <span class="n">parser_text</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">char1</span> <span class="o">!=</span> <span class="n">char2</span><span class="p">:</span>
                            <span class="k">print</span><span class="p">(</span><span class="s">&#39;first diff: </span><span class="si">%r</span><span class="s"> </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">char1</span><span class="p">,</span> <span class="n">char2</span><span class="p">))</span>
                            <span class="k">break</span>
                <span class="n">tester</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected_text</span><span class="p">,</span> <span class="n">parser_text</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">test_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tester</span><span class="p">):</span>
                <span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_parser</span><span class="p">(</span><span class="n">tester</span><span class="p">)</span>
                <span class="n">format</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;format_</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">func_suffix</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">tester</span><span class="p">,</span> <span class="n">format</span><span class="p">())</span>

            <span class="k">def</span> <span class="nf">test_print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tester</span><span class="p">):</span>
                <span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_parser</span><span class="p">(</span><span class="n">tester</span><span class="p">)</span>
                <span class="n">print_</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;print_</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">func_suffix</span><span class="p">)</span>
                <span class="n">old_stream</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">std_name</span><span class="p">)</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">std_name</span><span class="p">,</span> <span class="n">StdIOBuffer</span><span class="p">())</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">print_</span><span class="p">()</span>
                    <span class="n">parser_text</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">std_name</span><span class="p">)</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
                <span class="k">finally</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">std_name</span><span class="p">,</span> <span class="n">old_stream</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">tester</span><span class="p">,</span> <span class="n">parser_text</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">test_print_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tester</span><span class="p">):</span>
                <span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_parser</span><span class="p">(</span><span class="n">tester</span><span class="p">)</span>
                <span class="n">print_</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;print_</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">func_suffix</span><span class="p">)</span>
                <span class="n">sfile</span> <span class="o">=</span> <span class="n">StdIOBuffer</span><span class="p">()</span>
                <span class="n">print_</span><span class="p">(</span><span class="n">sfile</span><span class="p">)</span>
                <span class="n">parser_text</span> <span class="o">=</span> <span class="n">sfile</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">tester</span><span class="p">,</span> <span class="n">parser_text</span><span class="p">)</span>

        <span class="c"># add tests for {format,print}_{usage,help}</span>
        <span class="k">for</span> <span class="n">func_suffix</span><span class="p">,</span> <span class="n">std_name</span> <span class="ow">in</span> <span class="p">[(</span><span class="s">&#39;usage&#39;</span><span class="p">,</span> <span class="s">&#39;stdout&#39;</span><span class="p">),</span>
                                      <span class="p">(</span><span class="s">&#39;help&#39;</span><span class="p">,</span> <span class="s">&#39;stdout&#39;</span><span class="p">)]:</span>
            <span class="n">AddTests</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">func_suffix</span><span class="p">,</span> <span class="n">std_name</span><span class="p">)</span>
</div>
<span class="n">bases</span> <span class="o">=</span> <span class="n">TestCase</span><span class="p">,</span>
<span class="n">HelpTestCase</span> <span class="o">=</span> <span class="n">TestHelpFormattingMetaclass</span><span class="p">(</span><span class="s">&#39;HelpTestCase&#39;</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="p">{})</span>


<div class="viewcode-block" id="TestHelpBiggerOptionals"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpBiggerOptionals">[docs]</a><span class="k">class</span> <span class="nc">TestHelpBiggerOptionals</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make sure that argument help aligns when options are longer&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;DESCRIPTION&#39;</span><span class="p">,</span>
                           <span class="n">epilog</span><span class="o">=</span><span class="s">&#39;EPILOG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="s">&#39;--version&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;0.1&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;X HELP&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--y&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;Y HELP&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;FOO HELP&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;BAR HELP&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-v] [-x] [--y Y] foo bar</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        DESCRIPTION</span>

<span class="s">        positional arguments:</span>
<span class="s">          foo            FOO HELP</span>
<span class="s">          bar            BAR HELP</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help     show this help message and exit</span>
<span class="s">          -v, --version  show program&#39;s version number and exit</span>
<span class="s">          -x             X HELP</span>
<span class="s">          --y Y          Y HELP</span>

<span class="s">        EPILOG</span>
<span class="s">    &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        0.1</span>
<span class="s">        &#39;&#39;&#39;</span>
</div>
<div class="viewcode-block" id="TestShortColumns"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestShortColumns">[docs]</a><span class="k">class</span> <span class="nc">TestShortColumns</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Test extremely small number of columns.</span>

<span class="sd">    TestCase prevents &quot;COLUMNS&quot; from being too small in the tests themselves,</span>
<span class="sd">    but we don&#39;t want any exceptions thrown in such case. Only ugly representation.</span>
<span class="sd">    &#39;&#39;&#39;</span>
<div class="viewcode-block" id="TestShortColumns.setUp"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestShortColumns.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">support</span><span class="o">.</span><span class="n">EnvironmentVarGuard</span><span class="p">()</span>
        <span class="n">env</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;COLUMNS&quot;</span><span class="p">,</span> <span class="s">&#39;15&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addCleanup</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">__exit__</span><span class="p">)</span>
</div>
    <span class="n">parser_signature</span>            <span class="o">=</span> <span class="n">TestHelpBiggerOptionals</span><span class="o">.</span><span class="n">parser_signature</span>
    <span class="n">argument_signatures</span>         <span class="o">=</span> <span class="n">TestHelpBiggerOptionals</span><span class="o">.</span><span class="n">argument_signatures</span>
    <span class="n">argument_group_signatures</span>   <span class="o">=</span> <span class="n">TestHelpBiggerOptionals</span><span class="o">.</span><span class="n">argument_group_signatures</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG</span>
<span class="s">               [-h]</span>
<span class="s">               [-v]</span>
<span class="s">               [-x]</span>
<span class="s">               [--y Y]</span>
<span class="s">               foo</span>
<span class="s">               bar</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        DESCRIPTION</span>

<span class="s">        positional arguments:</span>
<span class="s">          foo</span>
<span class="s">            FOO HELP</span>
<span class="s">          bar</span>
<span class="s">            BAR HELP</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help</span>
<span class="s">            show this</span>
<span class="s">            help</span>
<span class="s">            message and</span>
<span class="s">            exit</span>
<span class="s">          -v, --version</span>
<span class="s">            show</span>
<span class="s">            program&#39;s</span>
<span class="s">            version</span>
<span class="s">            number and</span>
<span class="s">            exit</span>
<span class="s">          -x</span>
<span class="s">            X HELP</span>
<span class="s">          --y Y</span>
<span class="s">            Y HELP</span>

<span class="s">        EPILOG</span>
<span class="s">    &#39;&#39;&#39;</span>
    <span class="n">version</span>                     <span class="o">=</span> <span class="n">TestHelpBiggerOptionals</span><span class="o">.</span><span class="n">version</span>

</div>
<div class="viewcode-block" id="TestHelpBiggerOptionalGroups"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpBiggerOptionalGroups">[docs]</a><span class="k">class</span> <span class="nc">TestHelpBiggerOptionalGroups</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make sure that argument help aligns when options are longer&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;DESCRIPTION&#39;</span><span class="p">,</span>
                           <span class="n">epilog</span><span class="o">=</span><span class="s">&#39;EPILOG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="s">&#39;--version&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;0.1&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;X HELP&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--y&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;Y HELP&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;FOO HELP&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;BAR HELP&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;GROUP TITLE&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;GROUP DESCRIPTION&#39;</span><span class="p">),</span> <span class="p">[</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;BAZ HELP&#39;</span><span class="p">),</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;Z HELP&#39;</span><span class="p">)]),</span>
    <span class="p">]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-v] [-x] [--y Y] [-z Z [Z ...]] foo bar baz</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        DESCRIPTION</span>

<span class="s">        positional arguments:</span>
<span class="s">          foo            FOO HELP</span>
<span class="s">          bar            BAR HELP</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help     show this help message and exit</span>
<span class="s">          -v, --version  show program&#39;s version number and exit</span>
<span class="s">          -x             X HELP</span>
<span class="s">          --y Y          Y HELP</span>

<span class="s">        GROUP TITLE:</span>
<span class="s">          GROUP DESCRIPTION</span>

<span class="s">          baz            BAZ HELP</span>
<span class="s">          -z Z [Z ...]   Z HELP</span>

<span class="s">        EPILOG</span>
<span class="s">    &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        0.1</span>
<span class="s">        &#39;&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpBiggerPositionals"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpBiggerPositionals">[docs]</a><span class="k">class</span> <span class="nc">TestHelpBiggerPositionals</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make sure that help aligns when arguments are longer&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">usage</span><span class="o">=</span><span class="s">&#39;USAGE&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;DESCRIPTION&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;X HELP&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--y&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;Y HELP&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;ekiekiekifekang&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;EKI HELP&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;BAR HELP&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: USAGE</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        DESCRIPTION</span>

<span class="s">        positional arguments:</span>
<span class="s">          ekiekiekifekang  EKI HELP</span>
<span class="s">          bar              BAR HELP</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help       show this help message and exit</span>
<span class="s">          -x               X HELP</span>
<span class="s">          --y Y            Y HELP</span>
<span class="s">        &#39;&#39;&#39;</span>

    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpReformatting"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpReformatting">[docs]</a><span class="k">class</span> <span class="nc">TestHelpReformatting</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make sure that text after short names starts on the first line&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span>
        <span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s">&#39;   oddly    formatted</span><span class="se">\n</span><span class="s">&#39;</span>
                    <span class="s">&#39;description</span><span class="se">\n</span><span class="s">&#39;</span>
                    <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
                    <span class="s">&#39;that is so long that it should go onto multiple &#39;</span>
                    <span class="s">&#39;lines when wrapped&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;XX&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;oddly</span><span class="se">\n</span><span class="s">&#39;</span>
                                     <span class="s">&#39;    formatted -x help&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;yyy&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;normal y help&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
                                  <span class="s">&#39;    oddly formatted group</span><span class="se">\n</span><span class="s">&#39;</span>
                                  <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
                                  <span class="s">&#39;description&#39;</span><span class="p">),</span>
         <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-a&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
              <span class="n">help</span><span class="o">=</span><span class="s">&#39; oddly </span><span class="se">\n</span><span class="s">&#39;</span>
                   <span class="s">&#39;formatted    -a  help  </span><span class="se">\n</span><span class="s">&#39;</span>
                   <span class="s">&#39;    again, so long that it should be wrapped over &#39;</span>
                   <span class="s">&#39;multiple lines&#39;</span><span class="p">)]),</span>
    <span class="p">]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-x XX] [-a] yyy</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        oddly formatted description that is so long that it should go onto </span><span class="se">\</span>
<span class="s">multiple</span>
<span class="s">        lines when wrapped</span>

<span class="s">        positional arguments:</span>
<span class="s">          yyy         normal y help</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          -x XX       oddly formatted -x help</span>

<span class="s">        title:</span>
<span class="s">          oddly formatted group description</span>

<span class="s">          -a          oddly formatted -a help again, so long that it should </span><span class="se">\</span>
<span class="s">be wrapped</span>
<span class="s">                      over multiple lines</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpWrappingShortNames"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpWrappingShortNames">[docs]</a><span class="k">class</span> <span class="nc">TestHelpWrappingShortNames</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make sure that text after short names starts on the first line&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span> <span class="s">&#39;D</span><span class="se">\n</span><span class="s">D&#39;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;XX&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;XHH HX&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;yyy&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;YH YH&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;ALPHAS&#39;</span><span class="p">),</span> <span class="p">[</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-a&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;AHHH HHA&#39;</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)]),</span>
    <span class="p">]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-x XX] [-a] yyy</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        D DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD </span><span class="se">\</span>
<span class="s">DD DD DD</span>
<span class="s">        DD DD DD DD D</span>

<span class="s">        positional arguments:</span>
<span class="s">          yyy         YH YHYH YHYH YHYH YHYH YHYH YHYH YHYH YHYH YHYH YHYH </span><span class="se">\</span>
<span class="s">YHYH YHYH</span>
<span class="s">                      YHYH YHYH YHYH YHYH YHYH YHYH YHYH YH</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          -x XX       XHH HXXHH HXXHH HXXHH HXXHH HXXHH HXXHH HXXHH HXXHH </span><span class="se">\</span>
<span class="s">HXXHH HXXHH</span>
<span class="s">                      HXXHH HXXHH HXXHH HXXHH HXXHH HXXHH HXXHH HXXHH HXXHH HX</span>

<span class="s">        ALPHAS:</span>
<span class="s">          -a          AHHH HHAAHHH HHAAHHH HHAAHHH HHAAHHH HHAAHHH HHAAHHH </span><span class="se">\</span>
<span class="s">HHAAHHH</span>
<span class="s">                      HHAAHHH HHAAHHH HHA</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpWrappingLongNames"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpWrappingLongNames">[docs]</a><span class="k">class</span> <span class="nc">TestHelpWrappingLongNames</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make sure that text after long names starts on the next line&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">usage</span><span class="o">=</span><span class="s">&#39;USAGE&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span> <span class="s">&#39;D D&#39;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="s">&#39;--version&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;V V&#39;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;X&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;XH XH&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;y&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;YH YH&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;ALPHAS&#39;</span><span class="p">),</span> <span class="p">[</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-a&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;A&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;AH AH&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">),</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;z&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;ZH ZH&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)]),</span>
    <span class="p">]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: USAGE</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        D DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD DD </span><span class="se">\</span>
<span class="s">DD DD DD</span>
<span class="s">        DD DD DD DD D</span>

<span class="s">        positional arguments:</span>
<span class="s">          yyyyyyyyyyyyyyyyyyyyyyyyy</span>
<span class="s">                                YH YHYH YHYH YHYH YHYH YHYH YHYH YHYH YHYH </span><span class="se">\</span>
<span class="s">YHYH YHYH</span>
<span class="s">                                YHYH YHYH YHYH YHYH YHYH YHYH YHYH YHYH YHYH YH</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help            show this help message and exit</span>
<span class="s">          -v, --version         show program&#39;s version number and exit</span>
<span class="s">          -x XXXXXXXXXXXXXXXXXXXXXXXXX</span>
<span class="s">                                XH XHXH XHXH XHXH XHXH XHXH XHXH XHXH XHXH </span><span class="se">\</span>
<span class="s">XHXH XHXH</span>
<span class="s">                                XHXH XHXH XHXH XHXH XHXH XHXH XHXH XHXH XHXH XH</span>

<span class="s">        ALPHAS:</span>
<span class="s">          -a AAAAAAAAAAAAAAAAAAAAAAAAA</span>
<span class="s">                                AH AHAH AHAH AHAH AHAH AHAH AHAH AHAH AHAH </span><span class="se">\</span>
<span class="s">AHAH AHAH</span>
<span class="s">                                AHAH AHAH AHAH AHAH AHAH AHAH AHAH AHAH AHAH AH</span>
<span class="s">          zzzzzzzzzzzzzzzzzzzzzzzzz</span>
<span class="s">                                ZH ZHZH ZHZH ZHZH ZHZH ZHZH ZHZH ZHZH ZHZH </span><span class="se">\</span>
<span class="s">ZHZH ZHZH</span>
<span class="s">                                ZHZH ZHZH ZHZH ZHZH ZHZH ZHZH ZHZH ZHZH ZHZH ZH</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        V VV VV VV VV VV VV VV VV VV VV VV VV VV VV VV VV VV VV VV VV VV VV </span><span class="se">\</span>
<span class="s">VV VV VV</span>
<span class="s">        VV VV VV VV V</span>
<span class="s">        &#39;&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpUsage"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpUsage">[docs]</a><span class="k">class</span> <span class="nc">TestHelpUsage</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test basic usage messages&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-w&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;w&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;group&#39;</span><span class="p">),</span> <span class="p">[</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">),</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;z&#39;</span><span class="p">),</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">),</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">),</span>
        <span class="p">])</span>
    <span class="p">]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-w W [W ...]] [-x [X [X ...]]] [-y [Y]] [-z Z Z Z]</span>
<span class="s">                    a b b [c] [d [d ...]] e [e ...]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          a               a</span>
<span class="s">          b               b</span>
<span class="s">          c               c</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help      show this help message and exit</span>
<span class="s">          -w W [W ...]    w</span>
<span class="s">          -x [X [X ...]]  x</span>

<span class="s">        group:</span>
<span class="s">          -y [Y]          y</span>
<span class="s">          -z Z Z Z        z</span>
<span class="s">          d               d</span>
<span class="s">          e               e</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpOnlyUserGroups"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpOnlyUserGroups">[docs]</a><span class="k">class</span> <span class="nc">TestHelpOnlyUserGroups</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test basic usage messages&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;xxxx&#39;</span><span class="p">),</span> <span class="p">[</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">),</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">),</span>
        <span class="p">]),</span>
        <span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;yyyy&#39;</span><span class="p">),</span> <span class="p">[</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">),</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">),</span>
        <span class="p">]),</span>
    <span class="p">]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-x X] [-y Y] a b</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        xxxx:</span>
<span class="s">          -x X  x</span>
<span class="s">          a     a</span>

<span class="s">        yyyy:</span>
<span class="s">          b     b</span>
<span class="s">          -y Y  y</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpUsageLongProg"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpUsageLongProg">[docs]</a><span class="k">class</span> <span class="nc">TestHelpUsageLongProg</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test usage messages where the prog is long&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;P&#39;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-w&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;W&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP</span>
<span class="s">               [-h] [-w W] [-x X] a b</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          a</span>
<span class="s">          b</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          -w W</span>
<span class="s">          -x X</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpUsageLongProgOptionsWrap"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpUsageLongProgOptionsWrap">[docs]</a><span class="k">class</span> <span class="nc">TestHelpUsageLongProgOptionsWrap</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test usage messages where the prog is long and the optionals wrap&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;P&#39;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-w&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;W&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;X&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;Y&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;Z&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP</span>
<span class="s">               [-h] [-w WWWWWWWWWWWWWWWWWWWWWWWWW] </span><span class="se">\</span>
<span class="s">[-x XXXXXXXXXXXXXXXXXXXXXXXXX]</span>
<span class="s">               [-y YYYYYYYYYYYYYYYYYYYYYYYYY] [-z ZZZZZZZZZZZZZZZZZZZZZZZZZ]</span>
<span class="s">               a b</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          a</span>
<span class="s">          b</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help            show this help message and exit</span>
<span class="s">          -w WWWWWWWWWWWWWWWWWWWWWWWWW</span>
<span class="s">          -x XXXXXXXXXXXXXXXXXXXXXXXXX</span>
<span class="s">          -y YYYYYYYYYYYYYYYYYYYYYYYYY</span>
<span class="s">          -z ZZZZZZZZZZZZZZZZZZZZZZZZZ</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpUsageLongProgPositionalsWrap"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpUsageLongProgPositionalsWrap">[docs]</a><span class="k">class</span> <span class="nc">TestHelpUsageLongProgPositionalsWrap</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test usage messages where the prog is long and the positionals wrap&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;P&#39;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;b&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;c&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP</span>
<span class="s">               aaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbb</span>
<span class="s">               ccccccccccccccccccccccccc</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          aaaaaaaaaaaaaaaaaaaaaaaaa</span>
<span class="s">          bbbbbbbbbbbbbbbbbbbbbbbbb</span>
<span class="s">          ccccccccccccccccccccccccc</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpUsageOptionalsWrap"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpUsageOptionalsWrap">[docs]</a><span class="k">class</span> <span class="nc">TestHelpUsageOptionalsWrap</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test usage messages where the optionals wrap&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-w&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;W&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;X&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;Y&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;Z&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-w WWWWWWWWWWWWWWWWWWWWWWWWW] </span><span class="se">\</span>
<span class="s">[-x XXXXXXXXXXXXXXXXXXXXXXXXX]</span>
<span class="s">                    [-y YYYYYYYYYYYYYYYYYYYYYYYYY] </span><span class="se">\</span>
<span class="s">[-z ZZZZZZZZZZZZZZZZZZZZZZZZZ]</span>
<span class="s">                    a b c</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          a</span>
<span class="s">          b</span>
<span class="s">          c</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help            show this help message and exit</span>
<span class="s">          -w WWWWWWWWWWWWWWWWWWWWWWWWW</span>
<span class="s">          -x XXXXXXXXXXXXXXXXXXXXXXXXX</span>
<span class="s">          -y YYYYYYYYYYYYYYYYYYYYYYYYY</span>
<span class="s">          -z ZZZZZZZZZZZZZZZZZZZZZZZZZ</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpUsagePositionalsWrap"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpUsagePositionalsWrap">[docs]</a><span class="k">class</span> <span class="nc">TestHelpUsagePositionalsWrap</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test usage messages where the positionals wrap&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;b&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;c&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-x X] [-y Y] [-z Z]</span>
<span class="s">                    aaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbb</span>
<span class="s">                    ccccccccccccccccccccccccc</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          aaaaaaaaaaaaaaaaaaaaaaaaa</span>
<span class="s">          bbbbbbbbbbbbbbbbbbbbbbbbb</span>
<span class="s">          ccccccccccccccccccccccccc</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help            show this help message and exit</span>
<span class="s">          -x X</span>
<span class="s">          -y Y</span>
<span class="s">          -z Z</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpUsageOptionalsPositionalsWrap"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpUsageOptionalsPositionalsWrap">[docs]</a><span class="k">class</span> <span class="nc">TestHelpUsageOptionalsPositionalsWrap</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test usage messages where the optionals and positionals wrap&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;X&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;Y&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;Z&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;b&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;c&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-x XXXXXXXXXXXXXXXXXXXXXXXXX] </span><span class="se">\</span>
<span class="s">[-y YYYYYYYYYYYYYYYYYYYYYYYYY]</span>
<span class="s">                    [-z ZZZZZZZZZZZZZZZZZZZZZZZZZ]</span>
<span class="s">                    aaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbb</span>
<span class="s">                    ccccccccccccccccccccccccc</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          aaaaaaaaaaaaaaaaaaaaaaaaa</span>
<span class="s">          bbbbbbbbbbbbbbbbbbbbbbbbb</span>
<span class="s">          ccccccccccccccccccccccccc</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help            show this help message and exit</span>
<span class="s">          -x XXXXXXXXXXXXXXXXXXXXXXXXX</span>
<span class="s">          -y YYYYYYYYYYYYYYYYYYYYYYYYY</span>
<span class="s">          -z ZZZZZZZZZZZZZZZZZZZZZZZZZ</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpUsageOptionalsOnlyWrap"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpUsageOptionalsOnlyWrap">[docs]</a><span class="k">class</span> <span class="nc">TestHelpUsageOptionalsOnlyWrap</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test usage messages where there are only optionals and they wrap&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;X&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;Y&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;Z&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-x XXXXXXXXXXXXXXXXXXXXXXXXX] </span><span class="se">\</span>
<span class="s">[-y YYYYYYYYYYYYYYYYYYYYYYYYY]</span>
<span class="s">                    [-z ZZZZZZZZZZZZZZZZZZZZZZZZZ]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help            show this help message and exit</span>
<span class="s">          -x XXXXXXXXXXXXXXXXXXXXXXXXX</span>
<span class="s">          -y YYYYYYYYYYYYYYYYYYYYYYYYY</span>
<span class="s">          -z ZZZZZZZZZZZZZZZZZZZZZZZZZ</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpUsagePositionalsOnlyWrap"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpUsagePositionalsOnlyWrap">[docs]</a><span class="k">class</span> <span class="nc">TestHelpUsagePositionalsOnlyWrap</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test usage messages where there are only positionals and they wrap&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;b&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;c&#39;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG aaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbb</span>
<span class="s">                    ccccccccccccccccccccccccc</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          aaaaaaaaaaaaaaaaaaaaaaaaa</span>
<span class="s">          bbbbbbbbbbbbbbbbbbbbbbbbb</span>
<span class="s">          ccccccccccccccccccccccccc</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpVariableExpansion"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpVariableExpansion">[docs]</a><span class="k">class</span> <span class="nc">TestHelpVariableExpansion</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that variables are expanded properly in help messages&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s">&#39;x </span><span class="si">%(prog)s</span><span class="s"> </span><span class="si">%(default)s</span><span class="s"> </span><span class="si">%(type)s</span><span class="s"> </span><span class="si">%%</span><span class="s">&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_const&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="s">&#39;XXX&#39;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s">&#39;y </span><span class="si">%(prog)s</span><span class="s"> </span><span class="si">%(default)s</span><span class="s"> </span><span class="si">%(const)s</span><span class="s">&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="s">&#39;abc&#39;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s">&#39;foo </span><span class="si">%(prog)s</span><span class="s"> </span><span class="si">%(default)s</span><span class="s"> </span><span class="si">%(choices)s</span><span class="s">&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;BBB&#39;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s">&#39;bar </span><span class="si">%(prog)s</span><span class="s"> </span><span class="si">%(default)s</span><span class="s"> </span><span class="si">%(dest)s</span><span class="s">&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;spam </span><span class="si">%(prog)s</span><span class="s"> </span><span class="si">%(default)s</span><span class="s">&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;badger&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;badger </span><span class="si">%(prog)s</span><span class="s"> </span><span class="si">%(default)s</span><span class="s">&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;group&#39;</span><span class="p">),</span> <span class="p">[</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-a&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;a </span><span class="si">%(prog)s</span><span class="s"> </span><span class="si">%(default)s</span><span class="s">&#39;</span><span class="p">),</span>
            <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;b </span><span class="si">%(prog)s</span><span class="s"> </span><span class="si">%(default)s</span><span class="s">&#39;</span><span class="p">),</span>
        <span class="p">])</span>
    <span class="p">]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-x X] [-y] [--foo {a,b,c}] [--bar BBB] [-a A] [-b B]</span>
<span class="s">                    spam badger</span>
<span class="s">        &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          spam           spam PROG None</span>
<span class="s">          badger         badger PROG 0.5</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help     show this help message and exit</span>
<span class="s">          -x X           x PROG None int %</span>
<span class="s">          -y             y PROG 42 XXX</span>
<span class="s">          --foo {a,b,c}  foo PROG None a, b, c</span>
<span class="s">          --bar BBB      bar PROG baz bar</span>

<span class="s">        group:</span>
<span class="s">          -a A           a PROG None</span>
<span class="s">          -b B           b PROG -1</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpVariableExpansionUsageSupplied"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpVariableExpansionUsageSupplied">[docs]</a><span class="k">class</span> <span class="nc">TestHelpVariableExpansionUsageSupplied</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that variables are expanded properly when usage= is present&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">usage</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%(prog)s</span><span class="s"> FOO&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG FOO</span>
<span class="s">        &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpVariableExpansionNoArguments"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpVariableExpansionNoArguments">[docs]</a><span class="k">class</span> <span class="nc">TestHelpVariableExpansionNoArguments</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that variables are expanded properly with no arguments&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG</span>
<span class="s">        &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpSuppressUsage"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpSuppressUsage">[docs]</a><span class="k">class</span> <span class="nc">TestHelpSuppressUsage</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that items can be suppressed in usage messages&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">usage</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;foo help&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;spam help&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">help</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        positional arguments:</span>
<span class="s">          spam        spam help</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          --foo FOO   foo help</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpSuppressOptional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpSuppressOptional">[docs]</a><span class="k">class</span> <span class="nc">TestHelpSuppressOptional</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that optional arguments can be suppressed in help messages&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;spam help&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG spam</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          spam  spam help</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpSuppressOptionalGroup"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpSuppressOptionalGroup">[docs]</a><span class="k">class</span> <span class="nc">TestHelpSuppressOptionalGroup</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that optional groups can be suppressed in help messages&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;foo help&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;spam help&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;group&#39;</span><span class="p">),</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)]),</span>
    <span class="p">]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [--foo FOO] spam</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          spam        spam help</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          --foo FOO   foo help</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpSuppressPositional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpSuppressPositional">[docs]</a><span class="k">class</span> <span class="nc">TestHelpSuppressPositional</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that positional arguments can be suppressed in help messages&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;foo help&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [--foo FOO]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          --foo FOO   foo help</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpRequiredOptional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpRequiredOptional">[docs]</a><span class="k">class</span> <span class="nc">TestHelpRequiredOptional</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that required options don&#39;t look optional&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;foo help&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] --foo FOO</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          --foo FOO   foo help</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpAlternatePrefixChars"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpAlternatePrefixChars">[docs]</a><span class="k">class</span> <span class="nc">TestHelpAlternatePrefixChars</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that options display with different prefix characters&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">prefix_chars</span><span class="o">=</span><span class="s">&#39;^;&#39;</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;^^foo&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;foo help&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;;b&#39;</span><span class="p">,</span> <span class="s">&#39;;;bar&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;bar help&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [^^foo] [;b BAR]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        optional arguments:</span>
<span class="s">          ^^foo              foo help</span>
<span class="s">          ;b BAR, ;;bar BAR  bar help</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpNoHelpOptional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpNoHelpOptional">[docs]</a><span class="k">class</span> <span class="nc">TestHelpNoHelpOptional</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that the --help argument can be suppressed help messages&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;foo help&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;spam help&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [--foo FOO] spam</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          spam       spam help</span>

<span class="s">        optional arguments:</span>
<span class="s">          --foo FOO  foo help</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpVersionOptional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpVersionOptional">[docs]</a><span class="k">class</span> <span class="nc">TestHelpVersionOptional</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that the --version argument can be suppressed help messages&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="s">&#39;--version&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;1.0&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;foo help&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;spam help&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-v] [--foo FOO] spam</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          spam           spam help</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help     show this help message and exit</span>
<span class="s">          -v, --version  show program&#39;s version number and exit</span>
<span class="s">          --foo FOO      foo help</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        1.0</span>
<span class="s">        &#39;&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpNone"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpNone">[docs]</a><span class="k">class</span> <span class="nc">TestHelpNone</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test that no errors occur if no help is specified&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [--foo FOO] spam</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        positional arguments:</span>
<span class="s">          spam</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          --foo FOO</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpTupleMetavar"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpTupleMetavar">[docs]</a><span class="k">class</span> <span class="nc">TestHelpTupleMetavar</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test specifying metavar as a tuple&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-w&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;W1&#39;</span><span class="p">,</span> <span class="s">&#39;W2&#39;</span><span class="p">)),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;X1&#39;</span><span class="p">,</span> <span class="s">&#39;X2&#39;</span><span class="p">)),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;Y1&#39;</span><span class="p">,</span> <span class="s">&#39;Y2&#39;</span><span class="p">,</span> <span class="s">&#39;Y3&#39;</span><span class="p">)),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-z&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;Z1&#39;</span><span class="p">,</span> <span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-w W1 [W2 ...]] [-x [X1 [X2 ...]]] [-y Y1 Y2 Y3] </span><span class="se">\</span>
<span class="s">[-z [Z1]]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help        show this help message and exit</span>
<span class="s">          -w W1 [W2 ...]    w</span>
<span class="s">          -x [X1 [X2 ...]]  x</span>
<span class="s">          -y Y1 Y2 Y3       y</span>
<span class="s">          -z [Z1]           z</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpRawText"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpRawText">[docs]</a><span class="k">class</span> <span class="nc">TestHelpRawText</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test the RawTextHelpFormatter&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span>
        <span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">formatter_class</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">RawTextHelpFormatter</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s">&#39;Keep the formatting</span><span class="se">\n</span><span class="s">&#39;</span>
                    <span class="s">&#39;    exactly as it is written</span><span class="se">\n</span><span class="s">&#39;</span>
                    <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
                    <span class="s">&#39;here</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;    foo help should also</span><span class="se">\n</span><span class="s">&#39;</span>
                          <span class="s">&#39;appear as given here&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;spam help&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;    This text</span><span class="se">\n</span><span class="s">&#39;</span>
                                  <span class="s">&#39;  should be indented</span><span class="se">\n</span><span class="s">&#39;</span>
                                  <span class="s">&#39;    exactly like it is here</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">),</span>
         <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;bar help&#39;</span><span class="p">)]),</span>
    <span class="p">]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [--foo FOO] [--bar BAR] spam</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        Keep the formatting</span>
<span class="s">            exactly as it is written</span>

<span class="s">        here</span>

<span class="s">        positional arguments:</span>
<span class="s">          spam        spam help</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          --foo FOO       foo help should also</span>
<span class="s">                      appear as given here</span>

<span class="s">        title:</span>
<span class="s">              This text</span>
<span class="s">            should be indented</span>
<span class="s">              exactly like it is here</span>

<span class="s">          --bar BAR   bar help</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpRawDescription"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpRawDescription">[docs]</a><span class="k">class</span> <span class="nc">TestHelpRawDescription</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test the RawTextHelpFormatter&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span>
        <span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">formatter_class</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">RawDescriptionHelpFormatter</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s">&#39;Keep the formatting</span><span class="se">\n</span><span class="s">&#39;</span>
                    <span class="s">&#39;    exactly as it is written</span><span class="se">\n</span><span class="s">&#39;</span>
                    <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
                    <span class="s">&#39;here</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;  foo help should not</span><span class="se">\n</span><span class="s">&#39;</span>
                          <span class="s">&#39;    retain this odd formatting&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;spam help&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;    This text</span><span class="se">\n</span><span class="s">&#39;</span>
                                  <span class="s">&#39;  should be indented</span><span class="se">\n</span><span class="s">&#39;</span>
                                  <span class="s">&#39;    exactly like it is here</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">),</span>
         <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;bar help&#39;</span><span class="p">)]),</span>
    <span class="p">]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [--foo FOO] [--bar BAR] spam</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        Keep the formatting</span>
<span class="s">            exactly as it is written</span>

<span class="s">        here</span>

<span class="s">        positional arguments:</span>
<span class="s">          spam        spam help</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          --foo FOO   foo help should not retain this odd formatting</span>

<span class="s">        title:</span>
<span class="s">              This text</span>
<span class="s">            should be indented</span>
<span class="s">              exactly like it is here</span>

<span class="s">          --bar BAR   bar help</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

</div>
<div class="viewcode-block" id="TestHelpArgumentDefaults"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpArgumentDefaults">[docs]</a><span class="k">class</span> <span class="nc">TestHelpArgumentDefaults</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test the ArgumentDefaultsHelpFormatter&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span>
        <span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">formatter_class</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentDefaultsHelpFormatter</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s">&#39;description&#39;</span><span class="p">)</span>

    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;foo help - oh and by the way, </span><span class="si">%(default)s</span><span class="s">&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;bar help&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;spam help&#39;</span><span class="p">),</span>
        <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;badger&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;wooden&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;badger help&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;description&#39;</span><span class="p">),</span>
         <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;--baz&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;baz help&#39;</span><span class="p">)]),</span>
    <span class="p">]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [--foo FOO] [--bar] [--baz BAZ] spam [badger]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        description</span>

<span class="s">        positional arguments:</span>
<span class="s">          spam        spam help</span>
<span class="s">          badger      badger help (default: wooden)</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help  show this help message and exit</span>
<span class="s">          --foo FOO   foo help - oh and by the way, None</span>
<span class="s">          --bar       bar help (default: False)</span>

<span class="s">        title:</span>
<span class="s">          description</span>

<span class="s">          --baz BAZ   baz help (default: 42)</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</div>
<div class="viewcode-block" id="TestHelpVersionAction"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpVersionAction">[docs]</a><span class="k">class</span> <span class="nc">TestHelpVersionAction</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test the default help for the version action&quot;&quot;&quot;</span>

    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;description&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-V&#39;</span><span class="p">,</span> <span class="s">&#39;--version&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;3.6&#39;</span><span class="p">)]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-V]</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        description</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help     show this help message and exit</span>
<span class="s">          -V, --version  show program&#39;s version number and exit</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</div>
<div class="viewcode-block" id="TestHelpSubparsersOrdering"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpSubparsersOrdering">[docs]</a><span class="k">class</span> <span class="nc">TestHelpSubparsersOrdering</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test ordering of subcommands in help matches the code&quot;&quot;&quot;</span>
    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span>
                           <span class="n">description</span><span class="o">=</span><span class="s">&#39;display some subcommands&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="s">&#39;--version&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;0.1&#39;</span><span class="p">)]</span>

    <span class="n">subparsers_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
                             <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">)]</span>

    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-v] {a,b,c,d,e} ...</span>
<span class="s">        &#39;&#39;&#39;</span>

    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        display some subcommands</span>

<span class="s">        positional arguments:</span>
<span class="s">          {a,b,c,d,e}</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help     show this help message and exit</span>
<span class="s">          -v, --version  show program&#39;s version number and exit</span>
<span class="s">        &#39;&#39;&#39;</span>

    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        0.1</span>
<span class="s">        &#39;&#39;&#39;</span>
</div>
<div class="viewcode-block" id="TestHelpSubparsersWithHelpOrdering"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpSubparsersWithHelpOrdering">[docs]</a><span class="k">class</span> <span class="nc">TestHelpSubparsersWithHelpOrdering</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test ordering of subcommands in help matches the code&quot;&quot;&quot;</span>
    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span>
                           <span class="n">description</span><span class="o">=</span><span class="s">&#39;display some subcommands&#39;</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="s">&#39;--version&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;0.1&#39;</span><span class="p">)]</span>

    <span class="n">subcommand_data</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a subcommand help&#39;</span><span class="p">),</span>
                       <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;b subcommand help&#39;</span><span class="p">),</span>
                       <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;c subcommand help&#39;</span><span class="p">),</span>
                       <span class="p">(</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="s">&#39;d subcommand help&#39;</span><span class="p">),</span>
                       <span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="s">&#39;e subcommand help&#39;</span><span class="p">),</span>
                       <span class="p">)</span>

    <span class="n">subparsers_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">help</span><span class="p">)</span>
                             <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">help</span> <span class="ow">in</span> <span class="n">subcommand_data</span><span class="p">]</span>

    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-v] {a,b,c,d,e} ...</span>
<span class="s">        &#39;&#39;&#39;</span>

    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        display some subcommands</span>

<span class="s">        positional arguments:</span>
<span class="s">          {a,b,c,d,e}</span>
<span class="s">            a            a subcommand help</span>
<span class="s">            b            b subcommand help</span>
<span class="s">            c            c subcommand help</span>
<span class="s">            d            d subcommand help</span>
<span class="s">            e            e subcommand help</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help     show this help message and exit</span>
<span class="s">          -v, --version  show program&#39;s version number and exit</span>
<span class="s">        &#39;&#39;&#39;</span>

    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        0.1</span>
<span class="s">        &#39;&#39;&#39;</span>


</div>
<div class="viewcode-block" id="TestHelpMetavarTypeFormatter"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpMetavarTypeFormatter">[docs]</a><span class="k">class</span> <span class="nc">TestHelpMetavarTypeFormatter</span><span class="p">(</span><span class="n">HelpTestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestHelpMetavarTypeFormatter.custom_type"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestHelpMetavarTypeFormatter.custom_type">[docs]</a>    <span class="k">def</span> <span class="nf">custom_type</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">string</span>
</div>
    <span class="n">parser_signature</span> <span class="o">=</span> <span class="n">Sig</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&#39;description&#39;</span><span class="p">,</span>
                           <span class="n">formatter_class</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">MetavarTypeHelpFormatter</span><span class="p">)</span>
    <span class="n">argument_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sig</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">),</span>
                           <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">custom_type</span><span class="p">),</span>
                           <span class="n">Sig</span><span class="p">(</span><span class="s">&#39;-c&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;SOME FLOAT&#39;</span><span class="p">)]</span>
    <span class="n">argument_group_signatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">        usage: PROG [-h] [-b custom_type] [-c SOME FLOAT] int</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">help</span> <span class="o">=</span> <span class="n">usage</span> <span class="o">+</span> <span class="s">&#39;&#39;&#39;</span><span class="se">\</span>

<span class="s">        description</span>

<span class="s">        positional arguments:</span>
<span class="s">          int</span>

<span class="s">        optional arguments:</span>
<span class="s">          -h, --help      show this help message and exit</span>
<span class="s">          -b custom_type</span>
<span class="s">          -c SOME FLOAT</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>


<span class="c"># =====================================</span>
<span class="c"># Optional/Positional constructor tests</span>
<span class="c"># =====================================</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors">[docs]</a><span class="k">class</span> <span class="nc">TestInvalidArgumentConstructors</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a bunch of invalid Argument constructors&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestInvalidArgumentConstructors.assertTypeError"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.assertTypeError">[docs]</a>    <span class="k">def</span> <span class="nf">assertTypeError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">,</span>
                          <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.assertValueError"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.assertValueError">[docs]</a>    <span class="k">def</span> <span class="nf">assertValueError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">,</span>
                          <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.test_invalid_keyword_arguments"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.test_invalid_keyword_arguments">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_keyword_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">callback_args</span><span class="o">=</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">callback_kwargs</span><span class="o">=</span><span class="p">{})</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.test_missing_destination"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.test_missing_destination">[docs]</a>    <span class="k">def</span> <span class="nf">test_missing_destination</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;append&#39;</span><span class="p">,</span> <span class="s">&#39;store&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.test_invalid_option_strings"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.test_invalid_option_strings">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_option_strings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertValueError</span><span class="p">(</span><span class="s">&#39;--&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertValueError</span><span class="p">(</span><span class="s">&#39;---&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.test_invalid_type"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.test_invalid_type">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertValueError</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&#39;int&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertValueError</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.test_invalid_action"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.test_invalid_action">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_action</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertValueError</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertValueError</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;baz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertValueError</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;store&#39;</span><span class="p">,</span> <span class="s">&#39;append&#39;</span><span class="p">))</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&quot;--foo&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&quot;store-true&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">expected</span> <span class="o">=</span> <span class="s">&#39;unknown action&#39;</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s">&#39;expected </span><span class="si">%r</span><span class="s">, found </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">expected</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">msg</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.test_multiple_dest"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.test_multiple_dest">[docs]</a>    <span class="k">def</span> <span class="nf">test_multiple_dest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="n">dest</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;baz&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">expected</span> <span class="o">=</span> <span class="s">&#39;dest supplied twice for positional argument&#39;</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s">&#39;expected </span><span class="si">%r</span><span class="s">, found </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">expected</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">msg</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.test_no_argument_actions"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.test_no_argument_actions">[docs]</a>    <span class="k">def</span> <span class="nf">test_no_argument_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;store_const&#39;</span><span class="p">,</span> <span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="s">&#39;store_false&#39;</span><span class="p">,</span>
                       <span class="s">&#39;append_const&#39;</span><span class="p">,</span> <span class="s">&#39;count&#39;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">attrs</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">),</span>
                          <span class="nb">dict</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="s">&#39;ab&#39;</span><span class="p">)]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.test_no_argument_no_const_actions"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.test_no_argument_no_const_actions">[docs]</a>    <span class="k">def</span> <span class="nf">test_no_argument_no_const_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># options with zero arguments</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span> <span class="s">&#39;store_false&#39;</span><span class="p">,</span> <span class="s">&#39;count&#39;</span><span class="p">]:</span>

            <span class="c"># const is always disallowed</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>

            <span class="c"># nargs is always disallowed</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.test_more_than_one_argument_actions"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.test_more_than_one_argument_actions">[docs]</a>    <span class="k">def</span> <span class="nf">test_more_than_one_argument_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;store&#39;</span><span class="p">,</span> <span class="s">&#39;append&#39;</span><span class="p">]:</span>

            <span class="c"># nargs=0 is disallowed</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertValueError</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertValueError</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>

            <span class="c"># const is disallowed with non-optional arguments</span>
            <span class="k">for</span> <span class="n">nargs</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;+&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertValueError</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span>
                                      <span class="n">nargs</span><span class="o">=</span><span class="n">nargs</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertValueError</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span>
                                      <span class="n">nargs</span><span class="o">=</span><span class="n">nargs</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.test_required_const_actions"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.test_required_const_actions">[docs]</a>    <span class="k">def</span> <span class="nf">test_required_const_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;store_const&#39;</span><span class="p">,</span> <span class="s">&#39;append_const&#39;</span><span class="p">]:</span>

            <span class="c"># nargs is always disallowed</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.test_parsers_action_missing_params"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.test_parsers_action_missing_params">[docs]</a>    <span class="k">def</span> <span class="nf">test_parsers_action_missing_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">(</span><span class="s">&#39;command&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;parsers&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">(</span><span class="s">&#39;command&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;parsers&#39;</span><span class="p">,</span> <span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">(</span><span class="s">&#39;command&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;parsers&#39;</span><span class="p">,</span>
                             <span class="n">parser_class</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.test_required_positional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.test_required_positional">[docs]</a>    <span class="k">def</span> <span class="nf">test_required_positional</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypeError</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestInvalidArgumentConstructors.test_user_defined_action"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestInvalidArgumentConstructors.test_user_defined_action">[docs]</a>    <span class="k">def</span> <span class="nf">test_user_defined_action</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">class</span> <span class="nc">Success</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="k">class</span> <span class="nc">Action</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">option_strings</span><span class="p">,</span>
                         <span class="n">dest</span><span class="p">,</span>
                         <span class="n">const</span><span class="p">,</span>
                         <span class="n">default</span><span class="p">,</span>
                         <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">dest</span> <span class="o">==</span> <span class="s">&#39;spam&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">const</span> <span class="ow">is</span> <span class="n">Success</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">Success</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="n">Success</span><span class="p">()</span>

            <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
                <span class="k">pass</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">Success</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">,</span> <span class="s">&#39;--spam&#39;</span><span class="p">,</span>
                          <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">Success</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="n">Success</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">Success</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">,</span> <span class="s">&#39;spam&#39;</span><span class="p">,</span>
                          <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">Success</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="n">Success</span><span class="p">)</span>

<span class="c"># ================================</span>
<span class="c"># Actions returned by add_argument</span>
<span class="c"># ================================</span>
</div></div>
<div class="viewcode-block" id="TestActionsReturned"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestActionsReturned">[docs]</a><span class="k">class</span> <span class="nc">TestActionsReturned</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestActionsReturned.test_dest"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestActionsReturned.test_dest">[docs]</a>    <span class="k">def</span> <span class="nf">test_dest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">dest</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-b&#39;</span><span class="p">,</span> <span class="s">&#39;--bar&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">dest</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;-y&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">dest</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestActionsReturned.test_misc"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestActionsReturned.test_misc">[docs]</a>    <span class="k">def</span> <span class="nf">test_misc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
                                     <span class="n">default</span><span class="o">=</span><span class="mi">84</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
                                     <span class="n">help</span><span class="o">=</span><span class="s">&#39;FOO&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;BAR&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;baz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">nargs</span><span class="p">,</span> <span class="s">&#39;?&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">const</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="mi">84</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">choices</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">help</span><span class="p">,</span> <span class="s">&#39;FOO&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">metavar</span><span class="p">,</span> <span class="s">&#39;BAR&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">dest</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span>


<span class="c"># ================================</span>
<span class="c"># Argument conflict handling tests</span>
<span class="c"># ================================</span>
</div></div>
<div class="viewcode-block" id="TestConflictHandling"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestConflictHandling">[docs]</a><span class="k">class</span> <span class="nc">TestConflictHandling</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestConflictHandling.test_bad_type"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestConflictHandling.test_bad_type">[docs]</a>    <span class="k">def</span> <span class="nf">test_bad_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">,</span>
                          <span class="n">conflict_handler</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestConflictHandling.test_conflict_error"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestConflictHandling.test_conflict_error">[docs]</a>    <span class="k">def</span> <span class="nf">test_conflict_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentError</span><span class="p">,</span>
                          <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">,</span> <span class="s">&#39;-x&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--spam&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentError</span><span class="p">,</span>
                          <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">,</span> <span class="s">&#39;--spam&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestConflictHandling.test_resolve_error"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestConflictHandling.test_resolve_error">[docs]</a>    <span class="k">def</span> <span class="nf">test_resolve_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">get_parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">get_parser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">conflict_handler</span><span class="o">=</span><span class="s">&#39;resolve&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;OLD X&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;NEW X&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">format_help</span><span class="p">(),</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">            usage: PROG [-h] [-x X]</span>

<span class="s">            optional arguments:</span>
<span class="s">              -h, --help  show this help message and exit</span>
<span class="s">              -x X        NEW X</span>
<span class="s">            &#39;&#39;&#39;</span><span class="p">))</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--spam&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;OLD_SPAM&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--spam&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;NEW_SPAM&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">format_help</span><span class="p">(),</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">            usage: PROG [-h] [-x X] [--spam NEW_SPAM]</span>

<span class="s">            optional arguments:</span>
<span class="s">              -h, --help       show this help message and exit</span>
<span class="s">              -x X             NEW X</span>
<span class="s">              --spam NEW_SPAM</span>
<span class="s">            &#39;&#39;&#39;</span><span class="p">))</span>


<span class="c"># =============================</span>
<span class="c"># Help and Version option tests</span>
<span class="c"># =============================</span>
</div></div>
<div class="viewcode-block" id="TestOptionalsHelpVersionActions"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsHelpVersionActions">[docs]</a><span class="k">class</span> <span class="nc">TestOptionalsHelpVersionActions</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test the help and version actions&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_get_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ArgumentParserError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ArgumentParserError</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="TestOptionalsHelpVersionActions.assertPrintHelpExit"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsHelpVersionActions.assertPrintHelpExit">[docs]</a>    <span class="k">def</span> <span class="nf">assertPrintHelpExit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="n">args_str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">format_help</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_error</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">,</span> <span class="n">args_str</span><span class="o">.</span><span class="n">split</span><span class="p">())</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestOptionalsHelpVersionActions.assertArgumentParserError"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsHelpVersionActions.assertArgumentParserError">[docs]</a>    <span class="k">def</span> <span class="nf">assertArgumentParserError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ArgumentParserError</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestOptionalsHelpVersionActions.test_version"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsHelpVersionActions.test_version">[docs]</a>    <span class="k">def</span> <span class="nf">test_version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="s">&#39;--version&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPrintHelpExit</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;-h&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPrintHelpExit</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;--help&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="s">&#39;format_version&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestOptionalsHelpVersionActions.test_version_format"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsHelpVersionActions.test_version_format">[docs]</a>    <span class="k">def</span> <span class="nf">test_version_format</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PPP&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="s">&#39;--version&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%(prog)s</span><span class="s"> 3.5&#39;</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_error</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;-v&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">stdout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;PPP 3.5</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestOptionalsHelpVersionActions.test_version_no_help"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsHelpVersionActions.test_version_no_help">[docs]</a>    <span class="k">def</span> <span class="nf">test_version_no_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="s">&#39;--version&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;-h&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;--help&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="s">&#39;format_version&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestOptionalsHelpVersionActions.test_version_action"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsHelpVersionActions.test_version_action">[docs]</a>    <span class="k">def</span> <span class="nf">test_version_action</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;XXX&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-V&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%(prog)s</span><span class="s"> 3.7&#39;</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_error</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;-V&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">stdout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;XXX 3.7</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestOptionalsHelpVersionActions.test_no_help"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsHelpVersionActions.test_no_help">[docs]</a>    <span class="k">def</span> <span class="nf">test_no_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;-h&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;--help&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;-v&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;--version&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestOptionalsHelpVersionActions.test_alternate_help_version"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsHelpVersionActions.test_alternate_help_version">[docs]</a>    <span class="k">def</span> <span class="nf">test_alternate_help_version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;help&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-y&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPrintHelpExit</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;-x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;-v&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertArgumentParserError</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s">&#39;--version&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="s">&#39;format_version&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestOptionalsHelpVersionActions.test_help_version_extra_arguments"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestOptionalsHelpVersionActions.test_help_version_extra_arguments">[docs]</a>    <span class="k">def</span> <span class="nf">test_help_version_extra_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--version&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">)</span>

        <span class="c"># try all combinations of valid prefixes and suffixes</span>
        <span class="n">valid_prefixes</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;-x&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;-x bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz -x&#39;</span><span class="p">]</span>
        <span class="n">valid_suffixes</span> <span class="o">=</span> <span class="n">valid_prefixes</span> <span class="o">+</span> <span class="p">[</span><span class="s">&#39;--bad-option&#39;</span><span class="p">,</span> <span class="s">&#39;foo bar baz&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">valid_prefixes</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">valid_suffixes</span><span class="p">:</span>
                <span class="n">format</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%%</span><span class="s">s </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertPrintHelpExit</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">format</span> <span class="o">%</span> <span class="s">&#39;-h&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertPrintHelpExit</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">format</span> <span class="o">%</span> <span class="s">&#39;--help&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="s">&#39;format_version&#39;</span><span class="p">)</span>


<span class="c"># ======================</span>
<span class="c"># str() and repr() tests</span>
<span class="c"># ======================</span>
</div></div>
<div class="viewcode-block" id="TestStrings"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestStrings">[docs]</a><span class="k">class</span> <span class="nc">TestStrings</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test str()  and repr() on Optionals and Positionals&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestStrings.assertStringEqual"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestStrings.assertStringEqual">[docs]</a>    <span class="k">def</span> <span class="nf">assertStringEqual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">result_string</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">repr</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="n">result_string</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestStrings.test_optional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestStrings.test_optional">[docs]</a>    <span class="k">def</span> <span class="nf">test_optional</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">option</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Action</span><span class="p">(</span>
            <span class="n">option_strings</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="s">&#39;-a&#39;</span><span class="p">,</span> <span class="s">&#39;-b&#39;</span><span class="p">],</span>
            <span class="n">dest</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="s">&#39;int&#39;</span><span class="p">,</span>
            <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
            <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
            <span class="n">help</span><span class="o">=</span><span class="s">&#39;HELP&#39;</span><span class="p">,</span>
            <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;METAVAR&#39;</span><span class="p">)</span>
        <span class="n">string</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;Action(option_strings=[&#39;--foo&#39;, &#39;-a&#39;, &#39;-b&#39;], dest=&#39;b&#39;, &quot;</span>
            <span class="s">&quot;nargs=&#39;+&#39;, const=None, default=42, type=&#39;int&#39;, &quot;</span>
            <span class="s">&quot;choices=[1, 2, 3], help=&#39;HELP&#39;, metavar=&#39;METAVAR&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertStringEqual</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestStrings.test_argument"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestStrings.test_argument">[docs]</a>    <span class="k">def</span> <span class="nf">test_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Action</span><span class="p">(</span>
            <span class="n">option_strings</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">dest</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
            <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span>
            <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">],</span>
            <span class="n">help</span><span class="o">=</span><span class="s">&#39;H HH H&#39;</span><span class="p">,</span>
            <span class="n">metavar</span><span class="o">=</span><span class="s">&#39;MV MV MV&#39;</span><span class="p">)</span>
        <span class="n">string</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;Action(option_strings=[], dest=&#39;x&#39;, nargs=&#39;?&#39;, &quot;</span>
            <span class="s">&quot;const=None, default=2.5, type=</span><span class="si">%r</span><span class="s">, choices=[0.5, 1.5, 2.5], &quot;</span>
            <span class="s">&quot;help=&#39;H HH H&#39;, metavar=&#39;MV MV MV&#39;)&quot;</span> <span class="o">%</span> <span class="nb">float</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertStringEqual</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestStrings.test_namespace"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestStrings.test_namespace">[docs]</a>    <span class="k">def</span> <span class="nf">test_namespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">)</span>
        <span class="n">string</span> <span class="o">=</span> <span class="s">&quot;Namespace(bar=&#39;spam&#39;, foo=42)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertStringEqual</span><span class="p">(</span><span class="n">ns</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestStrings.test_parser"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestStrings.test_parser">[docs]</a>    <span class="k">def</span> <span class="nf">test_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">)</span>
        <span class="n">string</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;ArgumentParser(prog=&#39;PROG&#39;, usage=None, description=None, &quot;</span>
            <span class="s">&quot;formatter_class=</span><span class="si">%r</span><span class="s">, conflict_handler=&#39;error&#39;, &quot;</span>
            <span class="s">&quot;add_help=True)&quot;</span> <span class="o">%</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertStringEqual</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>

<span class="c"># ===============</span>
<span class="c"># Namespace tests</span>
<span class="c"># ===============</span>
</div></div>
<div class="viewcode-block" id="TestNamespace"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestNamespace">[docs]</a><span class="k">class</span> <span class="nc">TestNamespace</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestNamespace.test_constructor"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestNamespace.test_constructor">[docs]</a>    <span class="k">def</span> <span class="nf">test_constructor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">,</span> <span class="n">ns</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>

        <span class="n">ns</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s">&#39;spam&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="s">&#39;spam&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestNamespace.test_equality"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestNamespace.test_equality">[docs]</a>    <span class="k">def</span> <span class="nf">test_equality</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ns1</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">ns2</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">ns3</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">ns4</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ns1</span><span class="p">,</span> <span class="n">ns2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">ns1</span><span class="p">,</span> <span class="n">ns3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">ns1</span><span class="p">,</span> <span class="n">ns4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">ns2</span><span class="p">,</span> <span class="n">ns3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">ns2</span><span class="p">,</span> <span class="n">ns4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">ns1</span> <span class="o">!=</span> <span class="n">ns3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">ns1</span> <span class="o">!=</span> <span class="n">ns4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">ns2</span> <span class="o">!=</span> <span class="n">ns3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">ns2</span> <span class="o">!=</span> <span class="n">ns4</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestNamespace.test_equality_returns_notimplemeted"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestNamespace.test_equality_returns_notimplemeted">[docs]</a>    <span class="k">def</span> <span class="nf">test_equality_returns_notimplemeted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># See issue 21481</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="bp">NotImplemented</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">__ne__</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="bp">NotImplemented</span><span class="p">)</span>


<span class="c"># ===================</span>
<span class="c"># File encoding tests</span>
<span class="c"># ===================</span>
</div></div>
<div class="viewcode-block" id="TestEncoding"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestEncoding">[docs]</a><span class="k">class</span> <span class="nc">TestEncoding</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">_test_module_encoding</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="n">path</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">+=</span> <span class="s">&quot;.py&quot;</span>
        <span class="k">with</span> <span class="n">codecs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="s">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<div class="viewcode-block" id="TestEncoding.test_argparse_module_encoding"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestEncoding.test_argparse_module_encoding">[docs]</a>    <span class="k">def</span> <span class="nf">test_argparse_module_encoding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_module_encoding</span><span class="p">(</span><span class="n">argparse</span><span class="o">.</span><span class="n">__file__</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestEncoding.test_test_argparse_module_encoding"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestEncoding.test_test_argparse_module_encoding">[docs]</a>    <span class="k">def</span> <span class="nf">test_test_argparse_module_encoding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_module_encoding</span><span class="p">(</span><span class="n">__file__</span><span class="p">)</span>

<span class="c"># ===================</span>
<span class="c"># ArgumentError tests</span>
<span class="c"># ===================</span>
</div></div>
<div class="viewcode-block" id="TestArgumentError"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestArgumentError">[docs]</a><span class="k">class</span> <span class="nc">TestArgumentError</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestArgumentError.test_argument_error"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestArgumentError.test_argument_error">[docs]</a>    <span class="k">def</span> <span class="nf">test_argument_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;my error here&quot;</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentError</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">),</span> <span class="n">msg</span><span class="p">)</span>

<span class="c"># =======================</span>
<span class="c"># ArgumentTypeError tests</span>
<span class="c"># =======================</span>
</div></div>
<div class="viewcode-block" id="TestArgumentTypeError"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestArgumentTypeError">[docs]</a><span class="k">class</span> <span class="nc">TestArgumentTypeError</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestArgumentTypeError.test_argument_type_error"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestArgumentTypeError.test_argument_type_error">[docs]</a>    <span class="k">def</span> <span class="nf">test_argument_type_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">spam</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentTypeError</span><span class="p">(</span><span class="s">&#39;spam!&#39;</span><span class="p">)</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">spam</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s">&#39;XXX&#39;</span><span class="p">])</span>
        <span class="k">except</span> <span class="n">ArgumentParserError</span><span class="p">:</span>
            <span class="n">expected</span> <span class="o">=</span> <span class="s">&#39;usage: PROG x</span><span class="se">\n</span><span class="s">PROG: error: argument x: spam!</span><span class="se">\n</span><span class="s">&#39;</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">stderr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">()</span>

<span class="c"># =========================</span>
<span class="c"># MessageContentError tests</span>
<span class="c"># =========================</span>
</div></div>
<div class="viewcode-block" id="TestMessageContentError"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMessageContentError">[docs]</a><span class="k">class</span> <span class="nc">TestMessageContentError</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestMessageContentError.test_missing_argument_name_in_message"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMessageContentError.test_missing_argument_name_in_message">[docs]</a>    <span class="k">def</span> <span class="nf">test_missing_argument_name_in_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">usage</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;req_pos&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-req_opt&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;need_one&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ArgumentParserError</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([])</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRegex</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;req_pos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRegex</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;req_opt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRegex</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;need_one&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ArgumentParserError</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s">&#39;myXargument&#39;</span><span class="p">])</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;req_pos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRegex</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;req_opt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRegex</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;need_one&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ArgumentParserError</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s">&#39;myXargument&#39;</span><span class="p">,</span> <span class="s">&#39;-req_opt=1&#39;</span><span class="p">])</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;req_pos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;req_opt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRegex</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;need_one&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMessageContentError.test_optional_optional_not_in_message"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMessageContentError.test_optional_optional_not_in_message">[docs]</a>    <span class="k">def</span> <span class="nf">test_optional_optional_not_in_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">usage</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;req_pos&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--req_opt&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--opt_opt&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span>
                            <span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ArgumentParserError</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([])</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRegex</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;req_pos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRegex</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;req_opt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;opt_opt&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ArgumentParserError</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s">&#39;--req_opt=1&#39;</span><span class="p">])</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRegex</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;req_pos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;req_opt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;opt_opt&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestMessageContentError.test_optional_positional_not_in_message"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestMessageContentError.test_optional_positional_not_in_message">[docs]</a>    <span class="k">def</span> <span class="nf">test_optional_positional_not_in_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ErrorRaisingArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s">&#39;PROG&#39;</span><span class="p">,</span> <span class="n">usage</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;req_pos&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;optional_positional&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;eggs&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ArgumentParserError</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([])</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRegex</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;req_pos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;optional_positional&#39;</span><span class="p">)</span>


<span class="c"># ================================================</span>
<span class="c"># Check that the type function is called only once</span>
<span class="c"># ================================================</span>
</div></div>
<div class="viewcode-block" id="TestTypeFunctionCallOnlyOnce"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeFunctionCallOnlyOnce">[docs]</a><span class="k">class</span> <span class="nc">TestTypeFunctionCallOnlyOnce</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestTypeFunctionCallOnlyOnce.test_type_function_call_only_once"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeFunctionCallOnlyOnce.test_type_function_call_only_once">[docs]</a>    <span class="k">def</span> <span class="nf">test_type_function_call_only_once</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">spam</span><span class="p">(</span><span class="n">string_to_convert</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">string_to_convert</span><span class="p">,</span> <span class="s">&#39;spam!&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s">&#39;foo_converted&#39;</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">spam</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s">&#39;--foo spam!&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;foo_converted&#39;</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>

<span class="c"># ==================================================================</span>
<span class="c"># Check semantics regarding the default argument and type conversion</span>
<span class="c"># ==================================================================</span>
</div></div>
<div class="viewcode-block" id="TestTypeFunctionCalledOnDefault"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeFunctionCalledOnDefault">[docs]</a><span class="k">class</span> <span class="nc">TestTypeFunctionCalledOnDefault</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestTypeFunctionCalledOnDefault.test_type_function_call_with_non_string_default"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeFunctionCalledOnDefault.test_type_function_call_with_non_string_default">[docs]</a>    <span class="k">def</span> <span class="nf">test_type_function_call_with_non_string_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">spam</span><span class="p">(</span><span class="n">int_to_convert</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">int_to_convert</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span> <span class="s">&#39;foo_converted&#39;</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">spam</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([])</span>
        <span class="c"># foo should *not* be converted because its default is not a string.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTypeFunctionCalledOnDefault.test_type_function_call_with_string_default"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeFunctionCalledOnDefault.test_type_function_call_with_string_default">[docs]</a>    <span class="k">def</span> <span class="nf">test_type_function_call_with_string_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">spam</span><span class="p">(</span><span class="n">int_to_convert</span><span class="p">):</span>
            <span class="k">return</span> <span class="s">&#39;foo_converted&#39;</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">spam</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([])</span>
        <span class="c"># foo is converted because its default is a string.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;foo_converted&#39;</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTypeFunctionCalledOnDefault.test_no_double_type_conversion_of_default"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeFunctionCalledOnDefault.test_no_double_type_conversion_of_default">[docs]</a>    <span class="k">def</span> <span class="nf">test_no_double_type_conversion_of_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">extend</span><span class="p">(</span><span class="n">str_to_convert</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">str_to_convert</span> <span class="o">+</span> <span class="s">&#39;*&#39;</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--test&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">extend</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([])</span>
        <span class="c"># The test argument will be two stars, one coming from the default</span>
        <span class="c"># value and one coming from the type conversion being called exactly</span>
        <span class="c"># once.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">test</span><span class="o">=</span><span class="s">&#39;**&#39;</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestTypeFunctionCalledOnDefault.test_issue_15906"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestTypeFunctionCalledOnDefault.test_issue_15906">[docs]</a>    <span class="k">def</span> <span class="nf">test_issue_15906</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue #15906: When action=&#39;append&#39;, type=str, default=[] are</span>
        <span class="c"># providing, the dest value was the string representation &quot;[]&quot; when it</span>
        <span class="c"># should have been an empty list.</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--test&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                            <span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">test</span><span class="p">,</span> <span class="p">[])</span>

<span class="c"># ======================</span>
<span class="c"># parse_known_args tests</span>
<span class="c"># ======================</span>
</div></div>
<div class="viewcode-block" id="TestParseKnownArgs"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParseKnownArgs">[docs]</a><span class="k">class</span> <span class="nc">TestParseKnownArgs</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestParseKnownArgs.test_arguments_tuple"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParseKnownArgs.test_arguments_tuple">[docs]</a>    <span class="k">def</span> <span class="nf">test_arguments_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(())</span>
</div>
<div class="viewcode-block" id="TestParseKnownArgs.test_arguments_list"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParseKnownArgs.test_arguments_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_arguments_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([])</span>
</div>
<div class="viewcode-block" id="TestParseKnownArgs.test_arguments_tuple_positional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParseKnownArgs.test_arguments_tuple_positional">[docs]</a>    <span class="k">def</span> <span class="nf">test_arguments_tuple_positional</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">((</span><span class="s">&#39;x&#39;</span><span class="p">,))</span>
</div>
<div class="viewcode-block" id="TestParseKnownArgs.test_arguments_list_positional"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParseKnownArgs.test_arguments_list_positional">[docs]</a>    <span class="k">def</span> <span class="nf">test_arguments_list_positional</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s">&#39;x&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParseKnownArgs.test_optionals"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParseKnownArgs.test_optionals">[docs]</a>    <span class="k">def</span> <span class="nf">test_optionals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--foo&#39;</span><span class="p">)</span>
        <span class="n">args</span><span class="p">,</span> <span class="n">extras</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">(</span><span class="s">&#39;--foo F --bar --baz&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;F&#39;</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="s">&#39;--bar&#39;</span><span class="p">,</span> <span class="s">&#39;--baz&#39;</span><span class="p">],</span> <span class="n">extras</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParseKnownArgs.test_mixed"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestParseKnownArgs.test_mixed">[docs]</a>    <span class="k">def</span> <span class="nf">test_mixed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;--spam&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&#39;badger&#39;</span><span class="p">)</span>

        <span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;B&quot;</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">,</span> <span class="s">&quot;--foo&quot;</span><span class="p">,</span> <span class="s">&quot;-v&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;4&quot;</span><span class="p">]</span>
        <span class="n">args</span><span class="p">,</span> <span class="n">extras</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">NS</span><span class="p">(</span><span class="n">v</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">badger</span><span class="o">=</span><span class="s">&quot;B&quot;</span><span class="p">),</span> <span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="s">&quot;C&quot;</span><span class="p">,</span> <span class="s">&quot;--foo&quot;</span><span class="p">,</span> <span class="s">&quot;4&quot;</span><span class="p">],</span> <span class="n">extras</span><span class="p">)</span>

<span class="c"># ==========================</span>
<span class="c"># add_argument metavar tests</span>
<span class="c"># ==========================</span>
</div></div>
<div class="viewcode-block" id="TestAddArgumentMetavar"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar">[docs]</a><span class="k">class</span> <span class="nc">TestAddArgumentMetavar</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="n">EXPECTED_MESSAGE</span> <span class="o">=</span> <span class="s">&quot;length of metavar tuple does not match nargs&quot;</span>

<div class="viewcode-block" id="TestAddArgumentMetavar.do_test_no_exception"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.do_test_no_exception">[docs]</a>    <span class="k">def</span> <span class="nf">do_test_no_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nargs</span><span class="p">,</span> <span class="n">metavar</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&quot;--foo&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="n">nargs</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="n">metavar</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.do_test_exception"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.do_test_exception">[docs]</a>    <span class="k">def</span> <span class="nf">do_test_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nargs</span><span class="p">,</span> <span class="n">metavar</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&quot;--foo&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="n">nargs</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="n">metavar</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">EXPECTED_MESSAGE</span><span class="p">)</span>

    <span class="c"># Unit tests for different values of metavar when nargs=None</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_None_metavar_string"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_None_metavar_string">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_None_metavar_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_None_metavar_length0"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_None_metavar_length0">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_None_metavar_length0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="nb">tuple</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_None_metavar_length1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_None_metavar_length1">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_None_metavar_length1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_None_metavar_length2"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_None_metavar_length2">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_None_metavar_length2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_None_metavar_length3"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_None_metavar_length3">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_None_metavar_length3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">))</span>

    <span class="c"># Unit tests for different values of metavar when nargs=?</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_optional_metavar_string"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_optional_metavar_string">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_optional_metavar_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;?&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_optional_metavar_length0"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_optional_metavar_length0">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_optional_metavar_length0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;?&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="nb">tuple</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_optional_metavar_length1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_optional_metavar_length1">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_optional_metavar_length1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;?&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_optional_metavar_length2"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_optional_metavar_length2">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_optional_metavar_length2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;?&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_optional_metavar_length3"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_optional_metavar_length3">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_optional_metavar_length3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;?&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">))</span>

    <span class="c"># Unit tests for different values of metavar when nargs=*</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_zeroormore_metavar_string"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_zeroormore_metavar_string">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_zeroormore_metavar_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_zeroormore_metavar_length0"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_zeroormore_metavar_length0">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_zeroormore_metavar_length0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="nb">tuple</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_zeroormore_metavar_length1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_zeroormore_metavar_length1">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_zeroormore_metavar_length1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_zeroormore_metavar_length2"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_zeroormore_metavar_length2">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_zeroormore_metavar_length2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_zeroormore_metavar_length3"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_zeroormore_metavar_length3">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_zeroormore_metavar_length3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">))</span>

    <span class="c"># Unit tests for different values of metavar when nargs=+</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_oneormore_metavar_string"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_oneormore_metavar_string">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_oneormore_metavar_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;+&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_oneormore_metavar_length0"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_oneormore_metavar_length0">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_oneormore_metavar_length0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;+&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="nb">tuple</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_oneormore_metavar_length1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_oneormore_metavar_length1">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_oneormore_metavar_length1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;+&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_oneormore_metavar_length2"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_oneormore_metavar_length2">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_oneormore_metavar_length2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;+&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_oneormore_metavar_length3"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_oneormore_metavar_length3">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_oneormore_metavar_length3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;+&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">))</span>

    <span class="c"># Unit tests for different values of metavar when nargs=...</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_remainder_metavar_string"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_remainder_metavar_string">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_remainder_metavar_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;...&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_remainder_metavar_length0"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_remainder_metavar_length0">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_remainder_metavar_length0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;...&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="nb">tuple</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_remainder_metavar_length1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_remainder_metavar_length1">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_remainder_metavar_length1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;...&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_remainder_metavar_length2"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_remainder_metavar_length2">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_remainder_metavar_length2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;...&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_remainder_metavar_length3"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_remainder_metavar_length3">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_remainder_metavar_length3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;...&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">))</span>

    <span class="c"># Unit tests for different values of metavar when nargs=A...</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_parser_metavar_string"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_parser_metavar_string">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_parser_metavar_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;A...&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_parser_metavar_length0"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_parser_metavar_length0">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_parser_metavar_length0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;A...&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="nb">tuple</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_parser_metavar_length1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_parser_metavar_length1">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_parser_metavar_length1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;A...&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_parser_metavar_length2"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_parser_metavar_length2">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_parser_metavar_length2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;A...&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_parser_metavar_length3"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_parser_metavar_length3">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_parser_metavar_length3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s">&quot;A...&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">))</span>

    <span class="c"># Unit tests for different values of metavar when nargs=1</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_1_metavar_string"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_1_metavar_string">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_1_metavar_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_1_metavar_length0"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_1_metavar_length0">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_1_metavar_length0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="nb">tuple</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_1_metavar_length1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_1_metavar_length1">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_1_metavar_length1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_1_metavar_length2"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_1_metavar_length2">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_1_metavar_length2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_1_metavar_length3"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_1_metavar_length3">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_1_metavar_length3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">))</span>

    <span class="c"># Unit tests for different values of metavar when nargs=2</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_2_metavar_string"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_2_metavar_string">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_2_metavar_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_2_metavar_length0"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_2_metavar_length0">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_2_metavar_length0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="nb">tuple</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_2_metavar_length1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_2_metavar_length1">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_2_metavar_length1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_2_metavar_length2"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_2_metavar_length2">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_2_metavar_length2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_2_metavar_length3"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_2_metavar_length3">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_2_metavar_length3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">))</span>

    <span class="c"># Unit tests for different values of metavar when nargs=3</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_3_metavar_string"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_3_metavar_string">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_3_metavar_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_3_metavar_length0"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_3_metavar_length0">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_3_metavar_length0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="nb">tuple</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_3_metavar_length1"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_3_metavar_length1">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_3_metavar_length1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_3_metavar_length2"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_3_metavar_length2">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_3_metavar_length2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestAddArgumentMetavar.test_nargs_3_metavar_length3"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestAddArgumentMetavar.test_nargs_3_metavar_length3">[docs]</a>    <span class="k">def</span> <span class="nf">test_nargs_3_metavar_length3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_test_no_exception</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">))</span>

<span class="c"># ============================</span>
<span class="c"># from argparse import * tests</span>
<span class="c"># ============================</span>
</div></div>
<div class="viewcode-block" id="TestImportStar"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestImportStar">[docs]</a><span class="k">class</span> <span class="nc">TestImportStar</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestImportStar.test"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestImportStar.test">[docs]</a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">argparse</span><span class="o">.</span><span class="n">__all__</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">argparse</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestImportStar.test_all_exports_everything_but_modules"><a class="viewcode-back" href="../../test.html#test.test_argparse.TestImportStar.test_all_exports_everything_but_modules">[docs]</a>    <span class="k">def</span> <span class="nf">test_all_exports_everything_but_modules</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">name</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="n">argparse</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&quot;_&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">name</span> <span class="o">==</span> <span class="s">&#39;ngettext&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismodule</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">items</span><span class="p">),</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">argparse</span><span class="o">.</span><span class="n">__all__</span><span class="p">))</span>
</div></div>
<div class="viewcode-block" id="test_main"><a class="viewcode-back" href="../../test.html#test.test_argparse.test_main">[docs]</a><span class="k">def</span> <span class="nf">test_main</span><span class="p">():</span>
    <span class="n">support</span><span class="o">.</span><span class="n">run_unittest</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
    <span class="c"># Remove global references to avoid looking like we have refleaks.</span>
    <span class="n">RFile</span><span class="o">.</span><span class="n">seen</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">WFile</span><span class="o">.</span><span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>


</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">test_main</span><span class="p">()</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Weldon Henson.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>