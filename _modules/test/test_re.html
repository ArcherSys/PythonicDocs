

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>test.test_re &mdash; ArcherBashPYDocs 1.0.0. documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ArcherBashPYDocs 1.0.0. documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> ArcherBashPYDocs</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="simple">
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ArcherBashPYDocs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>test.test_re</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for test.test_re</h1><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">test.support</span> <span class="kn">import</span> <span class="n">verbose</span><span class="p">,</span> <span class="n">run_unittest</span><span class="p">,</span> <span class="n">gc_collect</span><span class="p">,</span> <span class="n">bigmemtest</span><span class="p">,</span> <span class="n">_2G</span><span class="p">,</span> \
        <span class="n">cpython_only</span><span class="p">,</span> <span class="n">captured_stdout</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">Scanner</span>
<span class="kn">import</span> <span class="nn">sre_compile</span>
<span class="kn">import</span> <span class="nn">sre_constants</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">string</span>
<span class="kn">import</span> <span class="nn">traceback</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">weakref</span> <span class="kn">import</span> <span class="n">proxy</span>

<span class="c"># Misc tests from Tim Peters&#39; re.doc</span>

<span class="c"># WARNING: Don&#39;t change details in these tests if you don&#39;t know</span>
<span class="c"># what you&#39;re doing. Some of these tests were carefully modeled to</span>
<span class="c"># cover most of the code.</span>

<div class="viewcode-block" id="S"><a class="viewcode-back" href="../../test.html#test.test_re.S">[docs]</a><span class="k">class</span> <span class="nc">S</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">S</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__getitem__</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="B"><a class="viewcode-back" href="../../test.html#test.test_re.B">[docs]</a><span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="nb">bytes</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">B</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__getitem__</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests">[docs]</a><span class="k">class</span> <span class="nc">ReTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="ReTests.assertTypedEqual"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.assertTypedEqual">[docs]</a>    <span class="k">def</span> <span class="nf">assertTypedEqual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actual</span><span class="p">,</span> <span class="n">expect</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">expect</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">recurse</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">expect</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expect</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
                <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">expect</span><span class="p">):</span>
                    <span class="n">recurse</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">actual</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">expect</span><span class="p">),</span> <span class="n">msg</span><span class="p">)</span>
        <span class="n">recurse</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">expect</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_keep_buffer"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_keep_buffer">[docs]</a>    <span class="k">def</span> <span class="nf">test_keep_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># See bug 14212</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">it</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">BufferError</span><span class="p">):</span>
            <span class="n">b</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;x&#39;</span><span class="o">*</span><span class="mi">400</span><span class="p">)</span>
        <span class="nb">list</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">it</span>
        <span class="n">gc_collect</span><span class="p">()</span>
        <span class="n">b</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;x&#39;</span><span class="o">*</span><span class="mi">400</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_weakref"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_weakref">[docs]</a>    <span class="k">def</span> <span class="nf">test_weakref</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;QabbbcR&#39;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;ab+c&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">proxy</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;QabbbcR&#39;</span><span class="p">),</span> <span class="n">y</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;QabbbcR&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_search_star_plus"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_search_star_plus">[docs]</a>    <span class="k">def</span> <span class="nf">test_search_star_plus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;x*&#39;</span><span class="p">,</span> <span class="s">&#39;axx&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;x*&#39;</span><span class="p">,</span> <span class="s">&#39;axx&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;x+&#39;</span><span class="p">,</span> <span class="s">&#39;axx&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;x+&#39;</span><span class="p">,</span> <span class="s">&#39;axx&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;aaa&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;a*&#39;</span><span class="p">,</span> <span class="s">&#39;xxx&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;a*&#39;</span><span class="p">,</span> <span class="s">&#39;xxx&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;x*&#39;</span><span class="p">,</span> <span class="s">&#39;xxxa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;x*&#39;</span><span class="p">,</span> <span class="s">&#39;xxxa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;a+&#39;</span><span class="p">,</span> <span class="s">&#39;xxx&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.bump_num"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.bump_num">[docs]</a>    <span class="k">def</span> <span class="nf">bump_num</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matchobj</span><span class="p">):</span>
        <span class="n">int_value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">matchobj</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">int_value</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_basic_re_sub"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_basic_re_sub">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic_re_sub</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;xyz&#39;</span><span class="p">),</span> <span class="s">&#39;xaz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">S</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="n">S</span><span class="p">(</span><span class="s">&#39;xyz&#39;</span><span class="p">)),</span> <span class="s">&#39;xaz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;xyz&#39;</span><span class="p">),</span> <span class="n">b</span><span class="s">&#39;xaz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">B</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="n">B</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;xyz&#39;</span><span class="p">)),</span> <span class="n">b</span><span class="s">&#39;xaz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;xyz&#39;</span><span class="p">)),</span> <span class="n">b</span><span class="s">&#39;xaz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">memoryview</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="n">memoryview</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;xyz&#39;</span><span class="p">)),</span> <span class="n">b</span><span class="s">&#39;xaz&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;</span><span class="se">\xe0</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\u0430</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\U0001d49c</span><span class="s">&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;x</span><span class="si">%s</span><span class="s">z&#39;</span> <span class="o">%</span> <span class="n">y</span><span class="p">),</span> <span class="s">&#39;xaz&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&quot;(?i)b+&quot;</span><span class="p">,</span> <span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="s">&quot;bbbb BBBB&quot;</span><span class="p">),</span> <span class="s">&#39;x x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&#39;\d+&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bump_num</span><span class="p">,</span> <span class="s">&#39;08.2 -2 23x99y&#39;</span><span class="p">),</span>
                         <span class="s">&#39;9.3 -3 24x100y&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&#39;\d+&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bump_num</span><span class="p">,</span> <span class="s">&#39;08.2 -2 23x99y&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                         <span class="s">&#39;9.3 -3 23x99y&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="s">r&quot;\n&quot;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\\</span><span class="s">n&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">,</span> <span class="s">r&quot;\n&quot;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">r&quot;\1\1&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;(.)&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;(.)&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;(.)&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="n">s</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="n">s</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;(?P&lt;a&gt;x)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&lt;a&gt;\g&lt;a&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">),</span> <span class="s">&#39;xxxx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;(?P&lt;a&gt;x)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&lt;a&gt;\g&lt;1&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">),</span> <span class="s">&#39;xxxx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;(?P&lt;unk&gt;x)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&lt;unk&gt;\g&lt;unk&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">),</span> <span class="s">&#39;xxxx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;(?P&lt;unk&gt;x)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&lt;1&gt;\g&lt;1&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">),</span> <span class="s">&#39;xxxx&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">r&#39;\t\n\v\r\f\a\b\B\Z\a\A\w\W\s\S\d\D&#39;</span><span class="p">,</span><span class="s">&#39;a&#39;</span><span class="p">),</span>
                         <span class="s">&#39;</span><span class="se">\t\n\v\r\f\a\b\\</span><span class="s">B</span><span class="se">\\</span><span class="s">Z</span><span class="se">\a\\</span><span class="s">A</span><span class="se">\\</span><span class="s">w</span><span class="se">\\</span><span class="s">W</span><span class="se">\\</span><span class="s">s</span><span class="se">\\</span><span class="s">S</span><span class="se">\\</span><span class="s">d</span><span class="se">\\</span><span class="s">D&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\t\n\v\r\f\a</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\t\n\v\r\f\a</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\t\n\v\r\f\a</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">7</span><span class="p">)))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;^\s*&#39;</span><span class="p">,</span> <span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="s">&#39;test&#39;</span><span class="p">),</span> <span class="s">&#39;Xtest&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_449964"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_449964">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_449964</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># fails for group followed by other escape</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&#39;(?P&lt;unk&gt;x)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&lt;1&gt;\g&lt;1&gt;</span><span class="se">\\</span><span class="s">b&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">),</span>
                         <span class="s">&#39;xx</span><span class="se">\b</span><span class="s">xx</span><span class="se">\b</span><span class="s">&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_449000"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_449000">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_449000</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test for sub() on escaped characters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&#39;\r\n&#39;</span><span class="p">,</span> <span class="s">r&#39;\n&#39;</span><span class="p">,</span> <span class="s">&#39;abc</span><span class="se">\r\n</span><span class="s">def</span><span class="se">\r\n</span><span class="s">&#39;</span><span class="p">),</span>
                         <span class="s">&#39;abc</span><span class="se">\n</span><span class="s">def</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\r\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">r&#39;\n&#39;</span><span class="p">,</span> <span class="s">&#39;abc</span><span class="se">\r\n</span><span class="s">def</span><span class="se">\r\n</span><span class="s">&#39;</span><span class="p">),</span>
                         <span class="s">&#39;abc</span><span class="se">\n</span><span class="s">def</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&#39;\r\n&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;abc</span><span class="se">\r\n</span><span class="s">def</span><span class="se">\r\n</span><span class="s">&#39;</span><span class="p">),</span>
                         <span class="s">&#39;abc</span><span class="se">\n</span><span class="s">def</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\r\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;abc</span><span class="se">\r\n</span><span class="s">def</span><span class="se">\r\n</span><span class="s">&#39;</span><span class="p">),</span>
                         <span class="s">&#39;abc</span><span class="se">\n</span><span class="s">def</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_1661"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_1661">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_1661</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Verify that flags do not get silently ignored with compiled patterns</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_3629"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_3629">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_3629</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># A regex that triggered a bug in the sre-code validator</span>
        <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;(?P&lt;quote&gt;)(?(quote))&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_sub_template_numeric_escape"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_sub_template_numeric_escape">[docs]</a>    <span class="k">def</span> <span class="nf">test_sub_template_numeric_escape</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># bug 776311 and friends</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\0&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\0</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\000&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\000</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\001&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\001</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\008&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\0</span><span class="s">&#39;</span> <span class="o">+</span> <span class="s">&#39;8&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\009&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\0</span><span class="s">&#39;</span> <span class="o">+</span> <span class="s">&#39;9&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\111&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\111</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\117&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\117</span><span class="s">&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\1111&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\111</span><span class="s">1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\1111&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\111</span><span class="s">&#39;</span> <span class="o">+</span> <span class="s">&#39;1&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\00&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\x00</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\07&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\x07</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\08&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\0</span><span class="s">&#39;</span> <span class="o">+</span> <span class="s">&#39;8&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\09&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\0</span><span class="s">&#39;</span> <span class="o">+</span> <span class="s">&#39;9&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\0a&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\0</span><span class="s">&#39;</span> <span class="o">+</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\400&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\0</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\777&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\377</span><span class="s">&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\1&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\8&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\9&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\11&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\18&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\1a&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\90&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\99&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\118&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span> <span class="c"># r&#39;\11&#39; + &#39;8&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\11a&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\181&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span> <span class="c"># r&#39;\18&#39; + &#39;1&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">r&#39;\800&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span> <span class="c"># r&#39;\80&#39; + &#39;0&#39;</span>

        <span class="c"># in python2.3 (etc), these loop endlessly in sre_parser.py</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;(((((((((((x)))))))))))&#39;</span><span class="p">,</span> <span class="s">r&#39;\11&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;((((((((((y))))))))))(.)&#39;</span><span class="p">,</span> <span class="s">r&#39;\118&#39;</span><span class="p">,</span> <span class="s">&#39;xyz&#39;</span><span class="p">),</span>
                         <span class="s">&#39;xz8&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;((((((((((y))))))))))(.)&#39;</span><span class="p">,</span> <span class="s">r&#39;\11a&#39;</span><span class="p">,</span> <span class="s">&#39;xyz&#39;</span><span class="p">),</span>
                         <span class="s">&#39;xza&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_qualified_re_sub"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_qualified_re_sub">[docs]</a>    <span class="k">def</span> <span class="nf">test_qualified_re_sub</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;aaaaa&#39;</span><span class="p">),</span> <span class="s">&#39;bbbbb&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;aaaaa&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s">&#39;baaaa&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_114660"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_114660">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_114660</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&#39;(\S)\s+(\S)&#39;</span><span class="p">,</span> <span class="s">r&#39;\1 \2&#39;</span><span class="p">,</span> <span class="s">&#39;hello  there&#39;</span><span class="p">),</span>
                         <span class="s">&#39;hello there&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_462270"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_462270">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_462270</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test for empty sub() behaviour, see SF bug #462270</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x*&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39;abxd&#39;</span><span class="p">),</span> <span class="s">&#39;-a-b-d-&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;x+&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39;abxd&#39;</span><span class="p">),</span> <span class="s">&#39;ab-d&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_symbolic_groups"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_symbolic_groups">[docs]</a>    <span class="k">def</span> <span class="nf">test_symbolic_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?P&lt;a&gt;x)(?P=a)(?(a)y)&#39;</span><span class="p">)</span>
        <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?P&lt;a1&gt;x)(?P=a1)(?(a1)y)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?P&lt;a&gt;)(?P&lt;a&gt;)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?Px)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?P=)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?P=1)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?P=a)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?P=a1)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?P=a.)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?P&lt;)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?P&lt;&gt;)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?P&lt;1&gt;)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?P&lt;a.&gt;)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?())&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?(a))&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?(1a))&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?(a.))&#39;</span><span class="p">)</span>
        <span class="c"># New valid/invalid identifiers in Python 3</span>
        <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?P&lt;&gt;x)(?P=)(?()y)&#39;</span><span class="p">)</span>
        <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?P&lt;&gt;x)(?P=)(?()y)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?P&lt;&gt;x)&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_symbolic_refs"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_symbolic_refs">[docs]</a>    <span class="k">def</span> <span class="nf">test_symbolic_refs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;(?P&lt;a&gt;x)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&lt;a&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;(?P&lt;a&gt;x)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&lt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;(?P&lt;a&gt;x)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;(?P&lt;a&gt;x)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&lt;a a&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;(?P&lt;a&gt;x)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&lt;&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;(?P&lt;a&gt;x)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&lt;1a1&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;(?P&lt;a&gt;x)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&lt;ab&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;(?P&lt;a&gt;x)|(?P&lt;b&gt;y)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&lt;b&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;(?P&lt;a&gt;x)|(?P&lt;b&gt;y)&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\\</span><span class="s">2&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;(?P&lt;a&gt;x)&#39;</span><span class="p">,</span> <span class="s">&#39;\g&lt;-1&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
        <span class="c"># New valid/invalid identifiers in Python 3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;(?P&lt;&gt;x)&#39;</span><span class="p">,</span> <span class="s">r&#39;\g&lt;&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">),</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;(?P&lt;&gt;x)&#39;</span><span class="p">,</span> <span class="s">r&#39;\g&lt;&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">),</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;(?P&lt;a&gt;x)&#39;</span><span class="p">,</span> <span class="s">r&#39;\g&lt;&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;xx&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_re_subn"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_re_subn">[docs]</a>    <span class="k">def</span> <span class="nf">test_re_subn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">subn</span><span class="p">(</span><span class="s">&quot;(?i)b+&quot;</span><span class="p">,</span> <span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="s">&quot;bbbb BBBB&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;x x&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">subn</span><span class="p">(</span><span class="s">&quot;b+&quot;</span><span class="p">,</span> <span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="s">&quot;bbbb BBBB&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;x BBBB&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">subn</span><span class="p">(</span><span class="s">&quot;b+&quot;</span><span class="p">,</span> <span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="s">&quot;xyz&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;xyz&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">subn</span><span class="p">(</span><span class="s">&quot;b*&quot;</span><span class="p">,</span> <span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="s">&quot;xyz&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;xxxyxzx&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">subn</span><span class="p">(</span><span class="s">&quot;b*&quot;</span><span class="p">,</span> <span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="s">&quot;xyz&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;xxxyz&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_re_split"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_re_split">[docs]</a>    <span class="k">def</span> <span class="nf">test_re_split</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="s">&quot;:a:b::c&quot;</span><span class="p">,</span> <span class="n">S</span><span class="p">(</span><span class="s">&quot;:a:b::c&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span>
                                  <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;:*&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span>
                                  <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;(:*)&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span>
                                  <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;::&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="p">(</span><span class="n">b</span><span class="s">&quot;:a:b::c&quot;</span><span class="p">,</span> <span class="n">B</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;:a:b::c&quot;</span><span class="p">),</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;:a:b::c&quot;</span><span class="p">),</span>
                       <span class="n">memoryview</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;:a:b::c&quot;</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span>
                                  <span class="p">[</span><span class="n">b</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;c&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;:*&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span>
                                  <span class="p">[</span><span class="n">b</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;c&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;(:*)&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span>
                                  <span class="p">[</span><span class="n">b</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;::&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;c&#39;</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;</span><span class="se">\xe0\xdf\xe7</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\u0430\u0431\u0432</span><span class="s">&quot;</span><span class="p">,</span>
                        <span class="s">&quot;</span><span class="se">\U0001d49c\U0001d49e\U0001d4b5</span><span class="s">&quot;</span><span class="p">):</span>
            <span class="n">string</span> <span class="o">=</span> <span class="s">&quot;:</span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">::</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;:*&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;(:*)&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span>
                             <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s">&#39;::&#39;</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;(?::*)&quot;</span><span class="p">,</span> <span class="s">&quot;:a:b::c&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;(:)*&quot;</span><span class="p">,</span> <span class="s">&quot;:a:b::c&quot;</span><span class="p">),</span>
                         <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;([b:]+)&quot;</span><span class="p">,</span> <span class="s">&quot;:a:b::c&quot;</span><span class="p">),</span>
                         <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;:b::&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;(b)|(:+)&quot;</span><span class="p">,</span> <span class="s">&quot;:a:b::c&quot;</span><span class="p">),</span>
                         <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                          <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;::&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;(?:b)|(?::+)&quot;</span><span class="p">,</span> <span class="s">&quot;:a:b::c&quot;</span><span class="p">),</span>
                         <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="ReTests.test_qualified_re_split"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_qualified_re_split">[docs]</a>    <span class="k">def</span> <span class="nf">test_qualified_re_split</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="s">&quot;:a:b::c&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b::c&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="s">&#39;a:b:c:d&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c:d&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;(:)&quot;</span><span class="p">,</span> <span class="s">&quot;:a:b::c&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                         <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="s">&#39;b::c&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;(:*)&quot;</span><span class="p">,</span> <span class="s">&quot;:a:b::c&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                         <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="s">&#39;b::c&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="ReTests.test_re_findall"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_re_findall">[docs]</a>    <span class="k">def</span> <span class="nf">test_re_findall</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&quot;:+&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">),</span> <span class="p">[])</span>
        <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="s">&quot;a:b::c:::d&quot;</span><span class="p">,</span> <span class="n">S</span><span class="p">(</span><span class="s">&quot;a:b::c:::d&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&quot;:+&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span>
                                  <span class="p">[</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="s">&quot;::&quot;</span><span class="p">,</span> <span class="s">&quot;:::&quot;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&quot;(:+)&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span>
                                  <span class="p">[</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="s">&quot;::&quot;</span><span class="p">,</span> <span class="s">&quot;:::&quot;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&quot;(:)(:*)&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span>
                                  <span class="p">[(</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="s">&quot;:&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="s">&quot;::&quot;</span><span class="p">)])</span>
        <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="p">(</span><span class="n">b</span><span class="s">&quot;a:b::c:::d&quot;</span><span class="p">,</span> <span class="n">B</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;a:b::c:::d&quot;</span><span class="p">),</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;a:b::c:::d&quot;</span><span class="p">),</span>
                       <span class="n">memoryview</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;a:b::c:::d&quot;</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;:+&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span>
                                  <span class="p">[</span><span class="n">b</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;::&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;:::&quot;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;(:+)&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span>
                                  <span class="p">[</span><span class="n">b</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;::&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;:::&quot;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTypedEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;(:)(:*)&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span>
                                  <span class="p">[(</span><span class="n">b</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">b</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;:&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">b</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;::&quot;</span><span class="p">)])</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;</span><span class="se">\xe0</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\u0430</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\U0001d49c</span><span class="s">&quot;</span><span class="p">):</span>
            <span class="n">xx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span>
            <span class="n">xxx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">3</span>
            <span class="n">string</span> <span class="o">=</span> <span class="s">&quot;a</span><span class="si">%s</span><span class="s">b</span><span class="si">%s</span><span class="s">c</span><span class="si">%s</span><span class="s">d&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">xx</span><span class="p">,</span> <span class="n">xxx</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">+&quot;</span> <span class="o">%</span> <span class="n">x</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">xx</span><span class="p">,</span> <span class="n">xxx</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&quot;(</span><span class="si">%s</span><span class="s">+)&quot;</span> <span class="o">%</span> <span class="n">x</span><span class="p">,</span> <span class="n">string</span><span class="p">),</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">xx</span><span class="p">,</span> <span class="n">xxx</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&quot;(</span><span class="si">%s</span><span class="s">)(</span><span class="si">%s</span><span class="s">*)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">),</span> <span class="n">string</span><span class="p">),</span>
                             <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">xx</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_117612"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_117612">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_117612</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">r&quot;(a|(b))&quot;</span><span class="p">,</span> <span class="s">&quot;aba&quot;</span><span class="p">),</span>
                         <span class="p">[(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">),(</span><span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">),(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="ReTests.test_re_match"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_re_match">[docs]</a>    <span class="k">def</span> <span class="nf">test_re_match</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">S</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span> <span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(a)&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span> <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(a)&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(a)&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(a)&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">B</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="n">memoryview</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span> <span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;(a)&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span> <span class="p">(</span><span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">,))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;(a)&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;(a)&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;(a)&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;</span><span class="se">\xe0</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\u0430</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\U0001d49c</span><span class="s">&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span> <span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span> <span class="p">(</span><span class="n">a</span><span class="p">,))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">))</span>

        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;((a)|(b))(c)?&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span> <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;ac&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span> <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;bc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;bc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">))</span>

        <span class="c"># A single group</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(a)&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">))</span>

        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?:(?P&lt;a1&gt;a)|(?P&lt;b2&gt;b))(?P&lt;c3&gt;c)?&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">&#39;a1&#39;</span><span class="p">,</span> <span class="s">&#39;b2&#39;</span><span class="p">,</span> <span class="s">&#39;c3&#39;</span><span class="p">),</span>
                         <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;ac&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b2&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_re_fullmatch"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_re_fullmatch">[docs]</a>    <span class="k">def</span> <span class="nf">test_re_fullmatch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue 16203: Proposal: add re.fullmatch() method.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="s">&quot;ab&quot;</span><span class="p">,</span> <span class="n">S</span><span class="p">(</span><span class="s">&quot;ab&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;a|ab&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="n">b</span><span class="s">&quot;ab&quot;</span><span class="p">,</span> <span class="n">B</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;ab&quot;</span><span class="p">),</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;ab&quot;</span><span class="p">),</span> <span class="n">memoryview</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;ab&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;a|ab&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="s">&quot;</span><span class="se">\xe0\xdf</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\u0430\u0431</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\U0001d49c\U0001d49e</span><span class="s">&quot;</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="s">r&quot;</span><span class="si">%s</span><span class="s">|</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;.*?$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;.*?&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;a.*?b&quot;</span><span class="p">,</span> <span class="s">&quot;ab&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;a.*?b&quot;</span><span class="p">,</span> <span class="s">&quot;abb&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;a.*?b&quot;</span><span class="p">,</span> <span class="s">&quot;axxb&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;a+&quot;</span><span class="p">,</span> <span class="s">&quot;ab&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;abc$&quot;</span><span class="p">,</span> <span class="s">&quot;abc</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;abc\Z&quot;</span><span class="p">,</span> <span class="s">&quot;abc</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;(?m)abc$&quot;</span><span class="p">,</span> <span class="s">&quot;abc</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;ab(?=c)cd&quot;</span><span class="p">,</span> <span class="s">&quot;abcd&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;ab(?&lt;=b)cd&quot;</span><span class="p">,</span> <span class="s">&quot;abcd&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">r&quot;(?=a|ab)ab&quot;</span><span class="p">,</span> <span class="s">&quot;ab&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&quot;bc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">&quot;abcd&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">endpos</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&quot;.*?$&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">&quot;abcd&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">endpos</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&quot;.*?&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">&quot;abcd&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">endpos</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_re_groupref_exists"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_re_groupref_exists">[docs]</a>    <span class="k">def</span> <span class="nf">test_re_groupref_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^(\()?([^()]+)(?(1)\))$&#39;</span><span class="p">,</span> <span class="s">&#39;(a)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;(&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^(\()?([^()]+)(?(1)\))$&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^(\()?([^()]+)(?(1)\))$&#39;</span><span class="p">,</span> <span class="s">&#39;a)&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^(\()?([^()]+)(?(1)\))$&#39;</span><span class="p">,</span> <span class="s">&#39;(a&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^(?:(a)|c)((?(1)b|d))$&#39;</span><span class="p">,</span> <span class="s">&#39;ab&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^(?:(a)|c)((?(1)b|d))$&#39;</span><span class="p">,</span> <span class="s">&#39;cd&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^(?:(a)|c)((?(1)|d))$&#39;</span><span class="p">,</span> <span class="s">&#39;cd&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^(?:(a)|c)((?(1)|d))$&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))</span>

        <span class="c"># Tests for bug #1177831: exercise groups other than the first group</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?P&lt;g1&gt;a)(?P&lt;g2&gt;b)?((?(g2)c|d))&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;ad&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;abd&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;ac&#39;</span><span class="p">))</span>

</div>
<div class="viewcode-block" id="ReTests.test_re_groupref"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_re_groupref">[docs]</a>    <span class="k">def</span> <span class="nf">test_re_groupref</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;^(\|)?([^()]+)\1$&#39;</span><span class="p">,</span> <span class="s">&#39;|a|&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;|&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;^(\|)?([^()]+)\1?$&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;^(\|)?([^()]+)\1$&#39;</span><span class="p">,</span> <span class="s">&#39;a|&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;^(\|)?([^()]+)\1$&#39;</span><span class="p">,</span> <span class="s">&#39;|a&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;^(?:(a)|c)(\1)$&#39;</span><span class="p">,</span> <span class="s">&#39;aa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;^(?:(a)|c)(\1)?$&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_groupdict"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_groupdict">[docs]</a>    <span class="k">def</span> <span class="nf">test_groupdict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(?P&lt;first&gt;first) (?P&lt;second&gt;second)&#39;</span><span class="p">,</span>
                                  <span class="s">&#39;first second&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groupdict</span><span class="p">(),</span>
                         <span class="p">{</span><span class="s">&#39;first&#39;</span><span class="p">:</span><span class="s">&#39;first&#39;</span><span class="p">,</span> <span class="s">&#39;second&#39;</span><span class="p">:</span><span class="s">&#39;second&#39;</span><span class="p">})</span>
</div>
<div class="viewcode-block" id="ReTests.test_expand"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_expand">[docs]</a>    <span class="k">def</span> <span class="nf">test_expand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;(?P&lt;first&gt;first) (?P&lt;second&gt;second)&quot;</span><span class="p">,</span>
                                  <span class="s">&quot;first second&quot;</span><span class="p">)</span>
                                  <span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="s">r&quot;\2 \1 \g&lt;second&gt; \g&lt;first&gt;&quot;</span><span class="p">),</span>
                         <span class="s">&quot;second first second first&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_repeat_minmax"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_repeat_minmax">[docs]</a>    <span class="k">def</span> <span class="nf">test_repeat_minmax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^(\w){1}$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^(\w){1}?$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^(\w){1,2}$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^(\w){1,2}?$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^(\w){3}$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;c&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^(\w){1,3}$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;c&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^(\w){1,4}$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;c&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^(\w){3,4}?$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;c&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^(\w){3}?$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;c&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^(\w){1,3}?$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;c&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^(\w){1,4}?$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;c&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^(\w){3,4}?$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;c&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{1}$&quot;</span><span class="p">,</span> <span class="s">&quot;xxx&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{1}?$&quot;</span><span class="p">,</span> <span class="s">&quot;xxx&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{1,2}$&quot;</span><span class="p">,</span> <span class="s">&quot;xxx&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{1,2}?$&quot;</span><span class="p">,</span> <span class="s">&quot;xxx&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{3}$&quot;</span><span class="p">,</span> <span class="s">&quot;xxx&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{1,3}$&quot;</span><span class="p">,</span> <span class="s">&quot;xxx&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{1,4}$&quot;</span><span class="p">,</span> <span class="s">&quot;xxx&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{3,4}?$&quot;</span><span class="p">,</span> <span class="s">&quot;xxx&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{3}?$&quot;</span><span class="p">,</span> <span class="s">&quot;xxx&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{1,3}?$&quot;</span><span class="p">,</span> <span class="s">&quot;xxx&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{1,4}?$&quot;</span><span class="p">,</span> <span class="s">&quot;xxx&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{3,4}?$&quot;</span><span class="p">,</span> <span class="s">&quot;xxx&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{}$&quot;</span><span class="p">,</span> <span class="s">&quot;xxx&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;^x{}$&quot;</span><span class="p">,</span> <span class="s">&quot;x{}&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_getattr"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_getattr">[docs]</a>    <span class="k">def</span> <span class="nf">test_getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;(?i)(a)(b)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pattern</span><span class="p">,</span> <span class="s">&quot;(?i)(a)(b)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;(?i)(a)(b)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">flags</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">U</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;(?i)(a)(b)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;(?i)(a)(b)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">groupindex</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;(?i)(?P&lt;first&gt;a)(?P&lt;other&gt;b)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">groupindex</span><span class="p">,</span>
                         <span class="p">{</span><span class="s">&#39;first&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;other&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;(a)&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;(a)&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">endpos</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;(a)&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;(a)&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">regs</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;(a)&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">re</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_special_escapes"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_special_escapes">[docs]</a>    <span class="k">def</span> <span class="nf">test_special_escapes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\b(b.)\b&quot;</span><span class="p">,</span>
                                   <span class="s">&quot;abcd abc bcd bx&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;bx&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\B(b.)\B&quot;</span><span class="p">,</span>
                                   <span class="s">&quot;abc bcd bc abxd&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;bx&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\b(b.)\b&quot;</span><span class="p">,</span>
                                   <span class="s">&quot;abcd abc bcd bx&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">ASCII</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;bx&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\B(b.)\B&quot;</span><span class="p">,</span>
                                   <span class="s">&quot;abc bcd bc abxd&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">ASCII</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;bx&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\b(b.)\b&quot;</span><span class="p">,</span>
                                   <span class="s">&quot;abcd abc bcd bx&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">LOCALE</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;bx&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\B(b.)\B&quot;</span><span class="p">,</span>
                                   <span class="s">&quot;abc bcd bc abxd&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">LOCALE</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;bx&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;^abc$&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">abc</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;^\Aabc\Z$&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;^\Aabc\Z$&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">abc</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;</span><span class="se">\b</span><span class="s">(b.)</span><span class="se">\b</span><span class="s">&quot;</span><span class="p">,</span>
                                   <span class="n">b</span><span class="s">&quot;abcd abc bcd bx&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">b</span><span class="s">&quot;bx&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;\B(b.)\B&quot;</span><span class="p">,</span>
                                   <span class="n">b</span><span class="s">&quot;abc bcd bc abxd&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">b</span><span class="s">&quot;bx&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;</span><span class="se">\b</span><span class="s">(b.)</span><span class="se">\b</span><span class="s">&quot;</span><span class="p">,</span>
                                   <span class="n">b</span><span class="s">&quot;abcd abc bcd bx&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">LOCALE</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">b</span><span class="s">&quot;bx&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;\B(b.)\B&quot;</span><span class="p">,</span>
                                   <span class="n">b</span><span class="s">&quot;abc bcd bc abxd&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">LOCALE</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">b</span><span class="s">&quot;bx&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;^abc$&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">abc</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">b</span><span class="s">&quot;abc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;^\Aabc\Z$&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">b</span><span class="s">&quot;abc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;^\Aabc\Z$&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">abc</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\d\D\w\W\s\S&quot;</span><span class="p">,</span>
                                   <span class="s">&quot;1aa! a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&quot;1aa! a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;\d\D\w\W\s\S&quot;</span><span class="p">,</span>
                                   <span class="n">b</span><span class="s">&quot;1aa! a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">b</span><span class="s">&quot;1aa! a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\d\D\w\W\s\S&quot;</span><span class="p">,</span>
                                   <span class="s">&quot;1aa! a&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">ASCII</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&quot;1aa! a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\d\D\w\W\s\S&quot;</span><span class="p">,</span>
                                   <span class="s">&quot;1aa! a&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">LOCALE</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&quot;1aa! a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;\d\D\w\W\s\S&quot;</span><span class="p">,</span>
                                   <span class="n">b</span><span class="s">&quot;1aa! a&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">LOCALE</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">b</span><span class="s">&quot;1aa! a&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_string_boundaries"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_string_boundaries">[docs]</a>    <span class="k">def</span> <span class="nf">test_string_boundaries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># See http://bugs.python.org/issue10713</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\b(abc)\b&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                         <span class="s">&quot;abc&quot;</span><span class="p">)</span>
        <span class="c"># There&#39;s a word boundary at the start of a string.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\b&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">))</span>
        <span class="c"># A non-empty string includes a non-boundary zero-length match.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\B&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">))</span>
        <span class="c"># There is no non-boundary match at the start of a string.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\B&quot;</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">))</span>
        <span class="c"># However, an empty string contains no word boundaries, and also no</span>
        <span class="c"># non-boundaries.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\B&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="c"># This one is questionable and different from the perlre behaviour,</span>
        <span class="c"># but describes current behavior.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\b&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="c"># A single word-character string has two boundaries, but no</span>
        <span class="c"># non-boundary gaps.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">r&quot;\b&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">r&quot;\B&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c"># If there are no words, there are no boundaries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">r&quot;\b&quot;</span><span class="p">,</span> <span class="s">&quot; &quot;</span><span class="p">)),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">r&quot;\b&quot;</span><span class="p">,</span> <span class="s">&quot;   &quot;</span><span class="p">)),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c"># Can match around the whitespace.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">r&quot;\B&quot;</span><span class="p">,</span> <span class="s">&quot; &quot;</span><span class="p">)),</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bigcharset"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bigcharset">[docs]</a>    <span class="k">def</span> <span class="nf">test_bigcharset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;([</span><span class="se">\u2222\u2223</span><span class="s">])&quot;</span><span class="p">,</span>
                                  <span class="s">&quot;</span><span class="se">\u2222</span><span class="s">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\u2222</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="s">&#39;[</span><span class="si">%s</span><span class="s">]&#39;</span> <span class="o">%</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">chr</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">16</span><span class="p">,</span> <span class="mi">255</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\uff01</span><span class="s">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(),</span> <span class="s">&quot;</span><span class="se">\uff01</span><span class="s">&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_big_codesize"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_big_codesize">[docs]</a>    <span class="k">def</span> <span class="nf">test_big_codesize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue #1160</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s">&#39;</span><span class="si">%d</span><span class="s">&#39;</span><span class="o">%</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">))))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;1000&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;9999&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_anyall"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_anyall">[docs]</a>    <span class="k">def</span> <span class="nf">test_anyall</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;a.b&quot;</span><span class="p">,</span> <span class="s">&quot;a</span><span class="se">\n</span><span class="s">b&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                         <span class="s">&quot;a</span><span class="se">\n</span><span class="s">b&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;a.*b&quot;</span><span class="p">,</span> <span class="s">&quot;a</span><span class="se">\n\n</span><span class="s">b&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                         <span class="s">&quot;a</span><span class="se">\n\n</span><span class="s">b&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_non_consuming"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_non_consuming">[docs]</a>    <span class="k">def</span> <span class="nf">test_non_consuming</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;(a(?=\s[^a]))&quot;</span><span class="p">,</span> <span class="s">&quot;a b&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;(a(?=\s[^a]*))&quot;</span><span class="p">,</span> <span class="s">&quot;a b&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;(a(?=\s[abc]))&quot;</span><span class="p">,</span> <span class="s">&quot;a b&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;(a(?=\s[abc]*))&quot;</span><span class="p">,</span> <span class="s">&quot;a bc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;(a)(?=\s\1)&quot;</span><span class="p">,</span> <span class="s">&quot;a a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;(a)(?=\s\1*)&quot;</span><span class="p">,</span> <span class="s">&quot;a aa&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;(a)(?=\s(abc|a))&quot;</span><span class="p">,</span> <span class="s">&quot;a a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;(a(?!\s[^a]))&quot;</span><span class="p">,</span> <span class="s">&quot;a a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;(a(?!\s[abc]))&quot;</span><span class="p">,</span> <span class="s">&quot;a d&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;(a)(?!\s\1)&quot;</span><span class="p">,</span> <span class="s">&quot;a b&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;(a)(?!\s(abc|a))&quot;</span><span class="p">,</span> <span class="s">&quot;a b&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_ignore_case"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_ignore_case">[docs]</a>    <span class="k">def</span> <span class="nf">test_ignore_case</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="s">&quot;ABC&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&quot;ABC&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;ABC&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">b</span><span class="s">&quot;ABC&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;(a\s[^a])&quot;</span><span class="p">,</span> <span class="s">&quot;a b&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a b&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;(a\s[^a]*)&quot;</span><span class="p">,</span> <span class="s">&quot;a bb&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a bb&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;(a\s[abc])&quot;</span><span class="p">,</span> <span class="s">&quot;a b&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a b&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;(a\s[abc]*)&quot;</span><span class="p">,</span> <span class="s">&quot;a bb&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a bb&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;((a)\s\2)&quot;</span><span class="p">,</span> <span class="s">&quot;a a&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;((a)\s\2*)&quot;</span><span class="p">,</span> <span class="s">&quot;a aa&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a aa&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;((a)\s(abc|a))&quot;</span><span class="p">,</span> <span class="s">&quot;a a&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;((a)\s(abc|a)*)&quot;</span><span class="p">,</span> <span class="s">&quot;a aa&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;a aa&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_category"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_category">[docs]</a>    <span class="k">def</span> <span class="nf">test_category</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;(\s)&quot;</span><span class="p">,</span> <span class="s">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot; &quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_getlower"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_getlower">[docs]</a>    <span class="k">def</span> <span class="nf">test_getlower</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">_sre</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">_sre</span><span class="o">.</span><span class="n">getlower</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">),</span> <span class="mi">0</span><span class="p">),</span> <span class="nb">ord</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">_sre</span><span class="o">.</span><span class="n">getlower</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">),</span> <span class="n">re</span><span class="o">.</span><span class="n">LOCALE</span><span class="p">),</span> <span class="nb">ord</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">_sre</span><span class="o">.</span><span class="n">getlower</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">),</span> <span class="n">re</span><span class="o">.</span><span class="n">UNICODE</span><span class="p">),</span> <span class="nb">ord</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="s">&quot;ABC&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&quot;ABC&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;ABC&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">b</span><span class="s">&quot;ABC&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_not_literal"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_not_literal">[docs]</a>    <span class="k">def</span> <span class="nf">test_not_literal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&quot;\s([^a])&quot;</span><span class="p">,</span> <span class="s">&quot; b&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;b&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&quot;\s([^a]*)&quot;</span><span class="p">,</span> <span class="s">&quot; bb&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;bb&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_search_coverage"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_search_coverage">[docs]</a>    <span class="k">def</span> <span class="nf">test_search_coverage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&quot;\s(b)&quot;</span><span class="p">,</span> <span class="s">&quot; b&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;b&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&quot;a\s&quot;</span><span class="p">,</span> <span class="s">&quot;a &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&quot;a &quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.assertMatch"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.assertMatch">[docs]</a>    <span class="k">def</span> <span class="nf">assertMatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">span</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">matcher</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">span</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># the pattern matches the whole text</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">text</span>
            <span class="n">span</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">match</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">span</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;If match is not None, span should be specified &#39;</span>
                             <span class="s">&#39;(and vice versa).&#39;</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">matcher</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(),</span> <span class="n">match</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="n">span</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_re_escape"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_re_escape">[docs]</a>    <span class="k">def</span> <span class="nf">test_re_escape</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">alnum_chars</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">ascii_letters</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span> <span class="o">+</span> <span class="s">&#39;_&#39;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">256</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">alnum_chars</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">c</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s">&#39;</span><span class="se">\x00</span><span class="s">&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\\</span><span class="s">000&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span> <span class="o">+</span> <span class="n">c</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertMatch</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertMatch</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">p</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_re_escape_byte"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_re_escape_byte">[docs]</a>    <span class="k">def</span> <span class="nf">test_re_escape_byte</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">alnum_chars</span> <span class="o">=</span> <span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_letters</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span> <span class="o">+</span> <span class="s">&#39;_&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">256</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">alnum_chars</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">b</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">b</span><span class="s">&#39;</span><span class="se">\\</span><span class="s">000&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">b</span><span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertMatch</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertMatch</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">p</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_re_escape_non_ascii"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_re_escape_non_ascii">[docs]</a>    <span class="k">def</span> <span class="nf">test_re_escape_non_ascii</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;xxx</span><span class="se">\u2620\u2620\u2620</span><span class="s">xxx&#39;</span>
        <span class="n">s_escaped</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">s_escaped</span><span class="p">,</span> <span class="s">&#39;xxx</span><span class="se">\\\u2620\\\u2620\\\u2620</span><span class="s">xxx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertMatch</span><span class="p">(</span><span class="n">s_escaped</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertMatch</span><span class="p">(</span><span class="s">&#39;.</span><span class="si">%s</span><span class="s">+.&#39;</span> <span class="o">%</span> <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\u2620</span><span class="s">&#39;</span><span class="p">),</span> <span class="n">s</span><span class="p">,</span>
                         <span class="s">&#39;x</span><span class="se">\u2620\u2620\u2620</span><span class="s">x&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_re_escape_non_ascii_bytes"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_re_escape_non_ascii_bytes">[docs]</a>    <span class="k">def</span> <span class="nf">test_re_escape_non_ascii_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s">&#39;y</span><span class="se">\u2620</span><span class="s">y</span><span class="se">\u2620</span><span class="s">y&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="n">b_escaped</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">b_escaped</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;y</span><span class="se">\\\xe2\\\x98\\\xa0</span><span class="s">y</span><span class="se">\\\xe2\\\x98\\\xa0</span><span class="s">y&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertMatch</span><span class="p">(</span><span class="n">b_escaped</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\u2620</span><span class="s">&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">)),</span> <span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_pickling"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_pickling">[docs]</a>    <span class="k">def</span> <span class="nf">test_pickling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">pickle</span>
        <span class="n">oldpat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;a(?:b|(c|e){1,2}?|d)+?(.)&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">UNICODE</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">proto</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">HIGHEST_PROTOCOL</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">pickled</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">oldpat</span><span class="p">,</span> <span class="n">proto</span><span class="p">)</span>
            <span class="n">newpat</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickled</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">newpat</span><span class="p">,</span> <span class="n">oldpat</span><span class="p">)</span>
        <span class="c"># current pickle expects the _compile() reconstructor in re module</span>
        <span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">_compile</span>
</div>
<div class="viewcode-block" id="ReTests.test_constants"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_constants">[docs]</a>    <span class="k">def</span> <span class="nf">test_constants</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">L</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">LOCALE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">M</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_flags"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_flags">[docs]</a>    <span class="k">def</span> <span class="nf">test_flags</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">flag</span> <span class="ow">in</span> <span class="p">[</span><span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">L</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;^pattern$&#39;</span><span class="p">,</span> <span class="n">flag</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_sre_character_literals"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_sre_character_literals">[docs]</a>    <span class="k">def</span> <span class="nf">test_sre_character_literals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">127</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">256</span><span class="p">,</span> <span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x10000</span><span class="p">,</span> <span class="mh">0x10FFFF</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">256</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\</span><span class="si">%03o</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\</span><span class="si">%03o</span><span class="s">0&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;0&quot;</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\</span><span class="si">%03o</span><span class="s">8&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;8&quot;</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\x</span><span class="si">%02x</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\x</span><span class="si">%02x</span><span class="s">0&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;0&quot;</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\x</span><span class="si">%02x</span><span class="s">z&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;z&quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mh">0x10000</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\u</span><span class="si">%04x</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\u</span><span class="si">%04x</span><span class="s">0&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;0&quot;</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\u</span><span class="si">%04x</span><span class="s">z&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;z&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\U</span><span class="si">%08x</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\U</span><span class="si">%08x</span><span class="s">0&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;0&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\U</span><span class="si">%08x</span><span class="s">z&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;z&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\0&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\000</span><span class="s">&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\08&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\000</span><span class="s">8&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\01&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\001</span><span class="s">&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\018&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\001</span><span class="s">8&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;\567&quot;</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">0</span><span class="n">o167</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">r&quot;\911&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">r&quot;\x1&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">r&quot;\x1z&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">r&quot;\u123&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">r&quot;\u123z&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">r&quot;\U0001234&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">r&quot;\U0001234z&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">r&quot;\U00110000&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_sre_character_class_literals"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_sre_character_class_literals">[docs]</a>    <span class="k">def</span> <span class="nf">test_sre_character_class_literals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">127</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">256</span><span class="p">,</span> <span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x10000</span><span class="p">,</span> <span class="mh">0x10FFFF</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">256</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\</span><span class="si">%o</span><span class="s">]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\</span><span class="si">%o</span><span class="s">8]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\</span><span class="si">%03o</span><span class="s">]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\</span><span class="si">%03o</span><span class="s">0]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\</span><span class="si">%03o</span><span class="s">8]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\x</span><span class="si">%02x</span><span class="s">]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\x</span><span class="si">%02x</span><span class="s">0]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\x</span><span class="si">%02x</span><span class="s">z]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mh">0x10000</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\u</span><span class="si">%04x</span><span class="s">]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\u</span><span class="si">%04x</span><span class="s">0]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\u</span><span class="si">%04x</span><span class="s">z]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\U</span><span class="si">%08x</span><span class="s">]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\U</span><span class="si">%08x</span><span class="s">0]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;0&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\U</span><span class="si">%08x</span><span class="s">z]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;z&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;[\U0001d49c-\U0001d4b5]&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\U0001d49e</span><span class="s">&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">r&quot;[\911]&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">r&quot;[\x1z]&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">r&quot;[\u123z]&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">r&quot;[\U0001234z]&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">r&quot;[\U00110000]&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_sre_byte_literals"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_sre_byte_literals">[docs]</a>    <span class="k">def</span> <span class="nf">test_sre_byte_literals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">127</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">255</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;\</span><span class="si">%03o</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;\</span><span class="si">%03o</span><span class="s">0&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="n">b</span><span class="s">&quot;0&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;\</span><span class="si">%03o</span><span class="s">8&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="n">b</span><span class="s">&quot;8&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;\x</span><span class="si">%02x</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;\x</span><span class="si">%02x</span><span class="s">0&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="n">b</span><span class="s">&quot;0&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;\x</span><span class="si">%02x</span><span class="s">z&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="n">b</span><span class="s">&quot;z&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;\u&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;u&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;\U&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;U&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;</span><span class="se">\0</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;</span><span class="se">\000</span><span class="s">&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;</span><span class="se">\0</span><span class="s">8&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;</span><span class="se">\000</span><span class="s">8&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;</span><span class="se">\01</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;</span><span class="se">\001</span><span class="s">&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;</span><span class="se">\01</span><span class="s">8&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;</span><span class="se">\001</span><span class="s">8&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;</span><span class="se">\567</span><span class="s">&quot;</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">([</span><span class="mi">0</span><span class="n">o167</span><span class="p">])))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="n">br</span><span class="s">&quot;\911&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="n">br</span><span class="s">&quot;\x1&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="n">br</span><span class="s">&quot;\x1z&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_sre_byte_class_literals"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_sre_byte_class_literals">[docs]</a>    <span class="k">def</span> <span class="nf">test_sre_byte_class_literals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">127</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">255</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;[\</span><span class="si">%o</span><span class="s">]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;[\</span><span class="si">%o</span><span class="s">8]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;[\</span><span class="si">%03o</span><span class="s">]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;[\</span><span class="si">%03o</span><span class="s">0]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;[\</span><span class="si">%03o</span><span class="s">8]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;[\x</span><span class="si">%02x</span><span class="s">]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;[\x</span><span class="si">%02x</span><span class="s">0]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">((</span><span class="s">r&quot;[\x</span><span class="si">%02x</span><span class="s">z]&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">i</span><span class="p">])))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;[\u]&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;u&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">br</span><span class="s">&quot;[\U]&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;U&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="n">br</span><span class="s">&quot;[\911]&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="n">br</span><span class="s">&quot;[\x1z]&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_113254"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_113254">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_113254</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;(a)|(b)&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;(a)|(b)&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;(a)|(b)&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_527371"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_527371">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_527371</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># bug described in patches 527371/672491</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;(a)?a&#39;</span><span class="p">,</span><span class="s">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lastindex</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;(a)(b)?b&#39;</span><span class="p">,</span><span class="s">&#39;ab&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lastindex</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;(?P&lt;a&gt;a)(?P&lt;b&gt;b)?b&#39;</span><span class="p">,</span><span class="s">&#39;ab&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lastgroup</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;(?P&lt;a&gt;a(b))&quot;</span><span class="p">,</span> <span class="s">&quot;ab&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lastgroup</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;((a))&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lastindex</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_545855"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_545855">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_545855</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># bug 545855 -- This pattern failed to cause a compile error as it</span>
        <span class="c"># should, instead provoking a TypeError.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;foo[a-&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_418626"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_418626">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_418626</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># bugs 418626 at al. -- Testing Greg Chapman&#39;s addition of op code</span>
        <span class="c"># SRE_OP_MIN_REPEAT_ONE for eliminating recursion on simple uses of</span>
        <span class="c"># pattern &#39;*?&#39; on a long string.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;.*?c&#39;</span><span class="p">,</span> <span class="mi">10000</span><span class="o">*</span><span class="s">&#39;ab&#39;</span><span class="o">+</span><span class="s">&#39;cd&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">20001</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;.*?cd&#39;</span><span class="p">,</span> <span class="mi">5000</span><span class="o">*</span><span class="s">&#39;ab&#39;</span><span class="o">+</span><span class="s">&#39;c&#39;</span><span class="o">+</span><span class="mi">5000</span><span class="o">*</span><span class="s">&#39;ab&#39;</span><span class="o">+</span><span class="s">&#39;cde&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                         <span class="mi">20003</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;.*?cd&#39;</span><span class="p">,</span> <span class="mi">20000</span><span class="o">*</span><span class="s">&#39;abc&#39;</span><span class="o">+</span><span class="s">&#39;de&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">60001</span><span class="p">)</span>
        <span class="c"># non-simple &#39;*?&#39; still used to hit the recursion limit, before the</span>
        <span class="c"># non-recursive scheme was implemented.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;(a|b)*?c&#39;</span><span class="p">,</span> <span class="mi">10000</span><span class="o">*</span><span class="s">&#39;ab&#39;</span><span class="o">+</span><span class="s">&#39;cd&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">20001</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_612074"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_612074">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_612074</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pat</span><span class="o">=</span><span class="s">&quot;[&quot;</span><span class="o">+</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\u2039</span><span class="s">&quot;</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;]&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pat</span><span class="p">)</span> <span class="ow">and</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_stack_overflow"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_stack_overflow">[docs]</a>    <span class="k">def</span> <span class="nf">test_stack_overflow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># nasty cases that used to overflow the straightforward recursive</span>
        <span class="c"># implementation of repeated groups.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(x)*&#39;</span><span class="p">,</span> <span class="mi">50000</span><span class="o">*</span><span class="s">&#39;x&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(x)*y&#39;</span><span class="p">,</span> <span class="mi">50000</span><span class="o">*</span><span class="s">&#39;x&#39;</span><span class="o">+</span><span class="s">&#39;y&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(x)*?y&#39;</span><span class="p">,</span> <span class="mi">50000</span><span class="o">*</span><span class="s">&#39;x&#39;</span><span class="o">+</span><span class="s">&#39;y&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_unlimited_zero_width_repeat"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_unlimited_zero_width_repeat">[docs]</a>    <span class="k">def</span> <span class="nf">test_unlimited_zero_width_repeat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue #9669</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;(?:a?)*y&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;(?:a?)+y&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;(?:a?){2,}y&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;(?:a?)*?y&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;(?:a?)+?y&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;(?:a?){2,}?y&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_scanner"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_scanner">[docs]</a>    <span class="k">def</span> <span class="nf">test_scanner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">s_ident</span><span class="p">(</span><span class="n">scanner</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span> <span class="k">return</span> <span class="n">token</span>
        <span class="k">def</span> <span class="nf">s_operator</span><span class="p">(</span><span class="n">scanner</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span> <span class="k">return</span> <span class="s">&quot;op</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">token</span>
        <span class="k">def</span> <span class="nf">s_float</span><span class="p">(</span><span class="n">scanner</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span> <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">s_int</span><span class="p">(</span><span class="n">scanner</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span> <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>

        <span class="n">scanner</span> <span class="o">=</span> <span class="n">Scanner</span><span class="p">([</span>
            <span class="p">(</span><span class="s">r&quot;[a-zA-Z_]\w*&quot;</span><span class="p">,</span> <span class="n">s_ident</span><span class="p">),</span>
            <span class="p">(</span><span class="s">r&quot;\d+\.\d*&quot;</span><span class="p">,</span> <span class="n">s_float</span><span class="p">),</span>
            <span class="p">(</span><span class="s">r&quot;\d+&quot;</span><span class="p">,</span> <span class="n">s_int</span><span class="p">),</span>
            <span class="p">(</span><span class="s">r&quot;=|\+|-|\*|/&quot;</span><span class="p">,</span> <span class="n">s_operator</span><span class="p">),</span>
            <span class="p">(</span><span class="s">r&quot;\s+&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span>
            <span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">scanner</span><span class="o">.</span><span class="n">scanner</span><span class="o">.</span><span class="n">scanner</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pattern</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">scanner</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s">&quot;sum = 3*foo + 312.50 + bar&quot;</span><span class="p">),</span>
                         <span class="p">([</span><span class="s">&#39;sum&#39;</span><span class="p">,</span> <span class="s">&#39;op=&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#39;op*&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;op+&#39;</span><span class="p">,</span> <span class="mf">312.5</span><span class="p">,</span>
                           <span class="s">&#39;op+&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_448951"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_448951">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_448951</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># bug 448951 (similar to 429357, but with single char match)</span>
        <span class="c"># (Also test greedy matches.)</span>
        <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="s">&#39;&#39;</span><span class="p">,</span><span class="s">&#39;?&#39;</span><span class="p">,</span><span class="s">&#39;*&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;((.</span><span class="si">%s</span><span class="s">):)?z&#39;</span><span class="o">%</span><span class="n">op</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                             <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;((.</span><span class="si">%s</span><span class="s">):)?z&#39;</span><span class="o">%</span><span class="n">op</span><span class="p">,</span> <span class="s">&#39;a:z&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                             <span class="p">(</span><span class="s">&#39;a:&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_725106"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_725106">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_725106</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># capturing groups in alternatives in repeats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^((a)|b)*&#39;</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^(([ab])|c)*&#39;</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^((d)|[ab])*&#39;</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^((a)c|[ab])*&#39;</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^((a)|b)*?c&#39;</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^(([ab])|c)*?d&#39;</span><span class="p">,</span> <span class="s">&#39;abcd&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^((d)|[ab])*?c&#39;</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^((a)c|[ab])*?c&#39;</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_725149"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_725149">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_725149</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># mark_stack_base restoring before restoring marks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(a)(?:(?=(b)*)c)*&#39;</span><span class="p">,</span> <span class="s">&#39;abb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;(a)((?!(b)*))*&#39;</span><span class="p">,</span> <span class="s">&#39;abb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span>
                         <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_764548"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_764548">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_764548</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># bug 764548, re.compile() barfs on str/unicode subclasses</span>
        <span class="k">class</span> <span class="nc">my_unicode</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">my_unicode</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;xyz&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_finditer"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_finditer">[docs]</a>    <span class="k">def</span> <span class="nf">test_finditer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">iter</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="s">r&quot;:+&quot;</span><span class="p">,</span> <span class="s">&quot;a:b::c:::d&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">item</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">],</span>
                         <span class="p">[</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="s">&quot;::&quot;</span><span class="p">,</span> <span class="s">&quot;:::&quot;</span><span class="p">])</span>

        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&quot;:+&quot;</span><span class="p">)</span>
        <span class="nb">iter</span> <span class="o">=</span> <span class="n">pat</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="s">&quot;a:b::c:::d&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">item</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">],</span>
                         <span class="p">[</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="s">&quot;::&quot;</span><span class="p">,</span> <span class="s">&quot;:::&quot;</span><span class="p">])</span>

        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&quot;:+&quot;</span><span class="p">)</span>
        <span class="nb">iter</span> <span class="o">=</span> <span class="n">pat</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="s">&quot;a:b::c:::d&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">endpos</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">item</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">],</span>
                         <span class="p">[</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="s">&quot;::&quot;</span><span class="p">,</span> <span class="s">&quot;:::&quot;</span><span class="p">])</span>

        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&quot;:+&quot;</span><span class="p">)</span>
        <span class="nb">iter</span> <span class="o">=</span> <span class="n">pat</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="s">&quot;a:b::c:::d&quot;</span><span class="p">,</span> <span class="n">endpos</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">item</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">],</span>
                         <span class="p">[</span><span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="s">&quot;::&quot;</span><span class="p">,</span> <span class="s">&quot;:::&quot;</span><span class="p">])</span>

        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&quot;:+&quot;</span><span class="p">)</span>
        <span class="nb">iter</span> <span class="o">=</span> <span class="n">pat</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="s">&quot;a:b::c:::d&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">endpos</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">item</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">],</span>
                         <span class="p">[</span><span class="s">&quot;::&quot;</span><span class="p">,</span> <span class="s">&quot;::&quot;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_926075"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_926075">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_926075</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNot</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;bug_926075&#39;</span><span class="p">),</span>
                         <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;bug_926075&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_931848"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_931848">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_931848</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="s">&quot;[</span><span class="se">\u002E\u3002\uFF0E\uFF61</span><span class="s">]&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;a.b.c&quot;</span><span class="p">),</span>
                         <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_581080"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_581080">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_581080</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">iter</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="s">r&quot;\s&quot;</span><span class="p">,</span> <span class="s">&quot;a b&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="nb">iter</span><span class="p">)</span>

        <span class="n">scanner</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&quot;\s&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">scanner</span><span class="p">(</span><span class="s">&quot;a b&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">scanner</span><span class="o">.</span><span class="n">search</span><span class="p">()</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">scanner</span><span class="o">.</span><span class="n">search</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_817234"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_817234">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_817234</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">iter</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="s">r&quot;.*&quot;</span><span class="p">,</span> <span class="s">&quot;asdf&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="nb">iter</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_6561"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_6561">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_6561</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># &#39;\d&#39; should match characters in Unicode category &#39;Nd&#39;</span>
        <span class="c"># (Number, Decimal Digit), but not those in &#39;Nl&#39; (Number,</span>
        <span class="c"># Letter) or &#39;No&#39; (Number, Other).</span>
        <span class="n">decimal_digits</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;</span><span class="se">\u0037</span><span class="s">&#39;</span><span class="p">,</span> <span class="c"># &#39;\N{DIGIT SEVEN}&#39;, category &#39;Nd&#39;</span>
            <span class="s">&#39;</span><span class="se">\u0e58</span><span class="s">&#39;</span><span class="p">,</span> <span class="c"># &#39;\N{THAI DIGIT SIX}&#39;, category &#39;Nd&#39;</span>
            <span class="s">&#39;</span><span class="se">\uff10</span><span class="s">&#39;</span><span class="p">,</span> <span class="c"># &#39;\N{FULLWIDTH DIGIT ZERO}&#39;, category &#39;Nd&#39;</span>
            <span class="p">]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">decimal_digits</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^\d$&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">x</span><span class="p">)</span>

        <span class="n">not_decimal_digits</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;</span><span class="se">\u2165</span><span class="s">&#39;</span><span class="p">,</span> <span class="c"># &#39;\N{ROMAN NUMERAL SIX}&#39;, category &#39;Nl&#39;</span>
            <span class="s">&#39;</span><span class="se">\u3039</span><span class="s">&#39;</span><span class="p">,</span> <span class="c"># &#39;\N{HANGZHOU NUMERAL TWENTY}&#39;, category &#39;Nl&#39;</span>
            <span class="s">&#39;</span><span class="se">\u2082</span><span class="s">&#39;</span><span class="p">,</span> <span class="c"># &#39;\N{SUBSCRIPT TWO}&#39;, category &#39;No&#39;</span>
            <span class="s">&#39;</span><span class="se">\u32b4</span><span class="s">&#39;</span><span class="p">,</span> <span class="c"># &#39;\N{CIRCLED NUMBER THIRTY NINE}&#39;, category &#39;No&#39;</span>
            <span class="p">]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">not_decimal_digits</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;^\d$&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_empty_array"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_empty_array">[docs]</a>    <span class="k">def</span> <span class="nf">test_empty_array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># SF buf 1647541</span>
        <span class="kn">import</span> <span class="nn">array</span>
        <span class="k">for</span> <span class="n">typecode</span> <span class="ow">in</span> <span class="s">&#39;bBuhHiIlLfd&#39;</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">typecode</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;bla&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">(),</span> <span class="p">())</span>
</div>
<div class="viewcode-block" id="ReTests.test_inline_flags"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_inline_flags">[docs]</a>    <span class="k">def</span> <span class="nf">test_inline_flags</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Bug #1700</span>
        <span class="n">upper_char</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mh">0x1ea0</span><span class="p">)</span> <span class="c"># Latin Capital Letter A with Dot Bellow</span>
        <span class="n">lower_char</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mh">0x1ea1</span><span class="p">)</span> <span class="c"># Latin Small Letter A with Dot Bellow</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">upper_char</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">U</span><span class="p">)</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">lower_char</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">lower_char</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">U</span><span class="p">)</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">upper_char</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?i)&#39;</span> <span class="o">+</span> <span class="n">upper_char</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">U</span><span class="p">)</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">lower_char</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?i)&#39;</span> <span class="o">+</span> <span class="n">lower_char</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">U</span><span class="p">)</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">upper_char</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?iu)&#39;</span> <span class="o">+</span> <span class="n">upper_char</span><span class="p">)</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">lower_char</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?iu)&#39;</span> <span class="o">+</span> <span class="n">lower_char</span><span class="p">)</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">upper_char</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_dollar_matches_twice"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_dollar_matches_twice">[docs]</a>    <span class="k">def</span> <span class="nf">test_dollar_matches_twice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;$ matches the end of string, and just before the terminating </span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;$&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;#&#39;</span><span class="p">,</span> <span class="s">&#39;a</span><span class="se">\n</span><span class="s">b</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">),</span> <span class="s">&#39;a</span><span class="se">\n</span><span class="s">b#</span><span class="se">\n</span><span class="s">#&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;#&#39;</span><span class="p">,</span> <span class="s">&#39;a</span><span class="se">\n</span><span class="s">b</span><span class="se">\n</span><span class="s">c&#39;</span><span class="p">),</span> <span class="s">&#39;a</span><span class="se">\n</span><span class="s">b</span><span class="se">\n</span><span class="s">c#&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;#&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">),</span> <span class="s">&#39;#</span><span class="se">\n</span><span class="s">#&#39;</span><span class="p">)</span>

        <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;$&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;#&#39;</span><span class="p">,</span> <span class="s">&#39;a</span><span class="se">\n</span><span class="s">b</span><span class="se">\n</span><span class="s">&#39;</span> <span class="p">),</span> <span class="s">&#39;a#</span><span class="se">\n</span><span class="s">b#</span><span class="se">\n</span><span class="s">#&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;#&#39;</span><span class="p">,</span> <span class="s">&#39;a</span><span class="se">\n</span><span class="s">b</span><span class="se">\n</span><span class="s">c&#39;</span><span class="p">),</span> <span class="s">&#39;a#</span><span class="se">\n</span><span class="s">b#</span><span class="se">\n</span><span class="s">c#&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;#&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">),</span> <span class="s">&#39;#</span><span class="se">\n</span><span class="s">#&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bytes_str_mixing"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bytes_str_mixing">[docs]</a>    <span class="k">def</span> <span class="nf">test_bytes_str_mixing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Mixing str and bytes is disallowed</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)</span>
        <span class="n">bpat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;b&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">bpat</span><span class="o">.</span><span class="n">match</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">pat</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">pat</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;c&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">pat</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;c&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">bpat</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">bpat</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;c&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">bpat</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_ascii_and_unicode_flag"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_ascii_and_unicode_flag">[docs]</a>    <span class="k">def</span> <span class="nf">test_ascii_and_unicode_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># String patterns</span>
        <span class="k">for</span> <span class="n">flags</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">UNICODE</span><span class="p">):</span>
            <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\xc0</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">flags</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\xe0</span><span class="s">&#39;</span><span class="p">))</span>
            <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;\w&#39;</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\xe0</span><span class="s">&#39;</span><span class="p">))</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\xc0</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">ASCII</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\xe0</span><span class="s">&#39;</span><span class="p">))</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?a)</span><span class="se">\xc0</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\xe0</span><span class="s">&#39;</span><span class="p">))</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;\w&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">ASCII</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\xe0</span><span class="s">&#39;</span><span class="p">))</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?a)\w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\xe0</span><span class="s">&#39;</span><span class="p">))</span>
        <span class="c"># Bytes patterns</span>
        <span class="k">for</span> <span class="n">flags</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">ASCII</span><span class="p">):</span>
            <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;</span><span class="se">\xc0</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">flags</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;</span><span class="se">\xe0</span><span class="s">&#39;</span><span class="p">))</span>
            <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;\w&#39;</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;</span><span class="se">\xe0</span><span class="s">&#39;</span><span class="p">))</span>
        <span class="c"># Incompatibilities</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;\w&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">UNICODE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;(?u)\w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;\w&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">UNICODE</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">ASCII</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?u)\w&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">ASCII</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?a)\w&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">UNICODE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&#39;(?au)\w&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_6509"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_6509">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_6509</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Replacement strings of both types must parse properly.</span>
        <span class="c"># all strings</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;a(\w)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;b</span><span class="se">\\</span><span class="s">1&#39;</span><span class="p">,</span> <span class="s">&#39;ac&#39;</span><span class="p">),</span> <span class="s">&#39;bc&#39;</span><span class="p">)</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;a(.)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;b</span><span class="se">\\</span><span class="s">1&#39;</span><span class="p">,</span> <span class="s">&#39;a</span><span class="se">\u1234</span><span class="s">&#39;</span><span class="p">),</span> <span class="s">&#39;b</span><span class="se">\u1234</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;..&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="s">&#39;str&#39;</span><span class="p">,</span> <span class="s">&#39;a5&#39;</span><span class="p">),</span> <span class="s">&#39;str&#39;</span><span class="p">)</span>

        <span class="c"># all bytes</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;a(\w)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;b</span><span class="se">\\</span><span class="s">1&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;ac&#39;</span><span class="p">),</span> <span class="n">b</span><span class="s">&#39;bc&#39;</span><span class="p">)</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;a(.)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;b</span><span class="se">\\</span><span class="s">1&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;a</span><span class="se">\xCD</span><span class="s">&#39;</span><span class="p">),</span> <span class="n">b</span><span class="s">&#39;b</span><span class="se">\xCD</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;..&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pat</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="n">b</span><span class="s">&#39;bytes&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;a5&#39;</span><span class="p">),</span> <span class="n">b</span><span class="s">&#39;bytes&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_dealloc"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_dealloc">[docs]</a>    <span class="k">def</span> <span class="nf">test_dealloc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># issue 3299: check for segfault in debug build</span>
        <span class="kn">import</span> <span class="nn">_sre</span>
        <span class="c"># the overflow limit is different on wide and narrow builds and it</span>
        <span class="c"># depends on the definition of SRE_CODE (see sre.h).</span>
        <span class="c"># 2**128 should be big enough to overflow on both. For smaller values</span>
        <span class="c"># a RuntimeError is raised instead of OverflowError.</span>
        <span class="n">long_overflow</span> <span class="o">=</span> <span class="mi">2</span><span class="o">**</span><span class="mi">128</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">_sre</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="n">long_overflow</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">_sre</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="p">{},</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[])</span>
</div>
<div class="viewcode-block" id="ReTests.test_search_dot_unicode"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_search_dot_unicode">[docs]</a>    <span class="k">def</span> <span class="nf">test_search_dot_unicode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&quot;123.*-&quot;</span><span class="p">,</span> <span class="s">&#39;123abc-&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&quot;123.*-&quot;</span><span class="p">,</span> <span class="s">&#39;123</span><span class="se">\xe9</span><span class="s">-&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&quot;123.*-&quot;</span><span class="p">,</span> <span class="s">&#39;123</span><span class="se">\u20ac</span><span class="s">-&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&quot;123.*-&quot;</span><span class="p">,</span> <span class="s">&#39;123</span><span class="se">\U0010ffff</span><span class="s">-&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&quot;123.*-&quot;</span><span class="p">,</span> <span class="s">&#39;123</span><span class="se">\xe9\u20ac\U0010ffff</span><span class="s">-&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_compile"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_compile">[docs]</a>    <span class="k">def</span> <span class="nf">test_compile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test return value when given string and pattern as parameter</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;random pattern&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">_pattern_type</span><span class="p">)</span>
        <span class="n">same_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">same_pattern</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">_pattern_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">same_pattern</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
        <span class="c"># Test behaviour when not given a string or pattern as parameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_13899"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_13899">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_13899</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue #13899: re pattern r&quot;[\A]&quot; should work like &quot;A&quot; but matches</span>
        <span class="c"># nothing. Ditto B and Z.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">r&#39;[\A\B\b\C\Z]&#39;</span><span class="p">,</span> <span class="s">&#39;AB</span><span class="se">\b</span><span class="s">CZ&#39;</span><span class="p">),</span>
                         <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\b</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;Z&#39;</span><span class="p">])</span>
</div>
    <span class="nd">@bigmemtest</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">_2G</span><span class="p">,</span> <span class="n">memuse</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_large_search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="c"># Issue #10182: indices were 32-bit-truncated.</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="n">size</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;$&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">start</span><span class="p">(),</span> <span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">size</span><span class="p">)</span>

    <span class="c"># The huge memuse is because of re.sub() using a list and a join()</span>
    <span class="c"># to create the replacement result.</span>
    <span class="nd">@bigmemtest</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">_2G</span><span class="p">,</span> <span class="n">memuse</span><span class="o">=</span><span class="mi">16</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_large_subn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="c"># Issue #10182: indices were 32-bit-truncated.</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="n">size</span>
        <span class="n">r</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">subn</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<div class="viewcode-block" id="ReTests.test_bug_16688"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_16688">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_16688</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue 16688: Backreferences make case-insensitive regex fail on</span>
        <span class="c"># non-ASCII strings.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">r&quot;(?i)(a)\1&quot;</span><span class="p">,</span> <span class="s">&quot;aa </span><span class="se">\u0100</span><span class="s">&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;(?s).{1,3}&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\u0100\u0100</span><span class="s">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_repeat_minmax_overflow"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_repeat_minmax_overflow">[docs]</a>    <span class="k">def</span> <span class="nf">test_repeat_minmax_overflow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue #13169</span>
        <span class="n">string</span> <span class="o">=</span> <span class="s">&quot;x&quot;</span> <span class="o">*</span> <span class="mi">100000</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;.{65535}&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">65535</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;.{,65535}&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">65535</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;.{65535,}?&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">65535</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;.{65536}&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">65536</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;.{,65536}&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">65536</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;.{65536,}?&quot;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">65536</span><span class="p">))</span>
        <span class="c"># 2**128 should be big enough to overflow both SRE_CODE and Py_ssize_t.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">r&quot;.{</span><span class="si">%d</span><span class="s">}&quot;</span> <span class="o">%</span> <span class="mi">2</span><span class="o">**</span><span class="mi">128</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">r&quot;.{,</span><span class="si">%d</span><span class="s">}&quot;</span> <span class="o">%</span> <span class="mi">2</span><span class="o">**</span><span class="mi">128</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">r&quot;.{</span><span class="si">%d</span><span class="s">,}?&quot;</span> <span class="o">%</span> <span class="mi">2</span><span class="o">**</span><span class="mi">128</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">r&quot;.{</span><span class="si">%d</span><span class="s">,</span><span class="si">%d</span><span class="s">}&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">129</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">128</span><span class="p">))</span>
</div>
    <span class="nd">@cpython_only</span>
<div class="viewcode-block" id="ReTests.test_repeat_minmax_overflow_maxrepeat"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_repeat_minmax_overflow_maxrepeat">[docs]</a>    <span class="k">def</span> <span class="nf">test_repeat_minmax_overflow_maxrepeat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">_sre</span> <span class="kn">import</span> <span class="n">MAXREPEAT</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">skipTest</span><span class="p">(</span><span class="s">&#39;requires _sre.MAXREPEAT constant&#39;</span><span class="p">)</span>
        <span class="n">string</span> <span class="o">=</span> <span class="s">&quot;x&quot;</span> <span class="o">*</span> <span class="mi">100000</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;.{</span><span class="si">%d</span><span class="s">}&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">MAXREPEAT</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">string</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;.{,</span><span class="si">%d</span><span class="s">}&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">MAXREPEAT</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span>
                         <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100000</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&quot;.{</span><span class="si">%d</span><span class="s">,}?&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">MAXREPEAT</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">string</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">r&quot;.{</span><span class="si">%d</span><span class="s">}&quot;</span> <span class="o">%</span> <span class="n">MAXREPEAT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">r&quot;.{,</span><span class="si">%d</span><span class="s">}&quot;</span> <span class="o">%</span> <span class="n">MAXREPEAT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">,</span> <span class="s">r&quot;.{</span><span class="si">%d</span><span class="s">,}?&quot;</span> <span class="o">%</span> <span class="n">MAXREPEAT</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_backref_group_name_in_exception"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_backref_group_name_in_exception">[docs]</a>    <span class="k">def</span> <span class="nf">test_backref_group_name_in_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue 17341: Poor error message when compiling invalid regex</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegex</span><span class="p">(</span><span class="n">sre_constants</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="s">&#39;&lt;foo&gt;&#39;</span><span class="p">):</span>
            <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?P=&lt;foo&gt;)&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_group_name_in_exception"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_group_name_in_exception">[docs]</a>    <span class="k">def</span> <span class="nf">test_group_name_in_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue 17341: Poor error message when compiling invalid regex</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegex</span><span class="p">(</span><span class="n">sre_constants</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="s">&#39;\?foo&#39;</span><span class="p">):</span>
            <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;(?P&lt;?foo&gt;)&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_issue17998"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_issue17998">[docs]</a>    <span class="k">def</span> <span class="nf">test_issue17998</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">reps</span> <span class="ow">in</span> <span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="s">&#39;{1}&#39;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;?&#39;</span><span class="p">:</span>
                <span class="n">pattern</span> <span class="o">=</span> <span class="s">&#39;.&#39;</span> <span class="o">+</span> <span class="n">reps</span> <span class="o">+</span> <span class="n">mod</span> <span class="o">+</span> <span class="s">&#39;yz&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">S</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;xyz&#39;</span><span class="p">),</span>
                                 <span class="p">[</span><span class="s">&#39;xyz&#39;</span><span class="p">],</span> <span class="n">msg</span><span class="o">=</span><span class="n">pattern</span><span class="p">)</span>
                <span class="n">pattern</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">S</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;xyz&#39;</span><span class="p">),</span>
                                 <span class="p">[</span><span class="n">b</span><span class="s">&#39;xyz&#39;</span><span class="p">],</span> <span class="n">msg</span><span class="o">=</span><span class="n">pattern</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_match_repr"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_match_repr">[docs]</a>    <span class="k">def</span> <span class="nf">test_match_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="s">&#39;[abracadabra]&#39;</span><span class="p">,</span> <span class="n">S</span><span class="p">(</span><span class="s">&#39;[abracadabra]&#39;</span><span class="p">):</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&#39;(.+)(.*?)\1&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">m</span><span class="p">),</span> <span class="s">&quot;&lt;</span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s"> object; &quot;</span>
                             <span class="s">&quot;span=(1, 12), match=&#39;abracadabra&#39;&gt;&quot;</span> <span class="o">%</span>
                             <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="o">.</span><span class="n">__module__</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="o">.</span><span class="n">__qualname__</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="p">(</span><span class="n">b</span><span class="s">&#39;[abracadabra]&#39;</span><span class="p">,</span> <span class="n">B</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;[abracadabra]&#39;</span><span class="p">),</span>
                       <span class="nb">bytearray</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;[abracadabra]&#39;</span><span class="p">),</span>
                       <span class="n">memoryview</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;[abracadabra]&#39;</span><span class="p">)):</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">rb</span><span class="s">&#39;(.+)(.*?)</span><span class="se">\1</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">m</span><span class="p">),</span> <span class="s">&quot;&lt;</span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s"> object; &quot;</span>
                             <span class="s">&quot;span=(1, 12), match=b&#39;abracadabra&#39;&gt;&quot;</span> <span class="o">%</span>
                             <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="o">.</span><span class="n">__module__</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="o">.</span><span class="n">__qualname__</span><span class="p">))</span>

        <span class="n">first</span><span class="p">,</span> <span class="n">second</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="s">&quot;(aa)|(bb)&quot;</span><span class="p">,</span> <span class="s">&quot;aa bb&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">first</span><span class="p">),</span> <span class="s">&quot;&lt;</span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s"> object; &quot;</span>
                         <span class="s">&quot;span=(0, 2), match=&#39;aa&#39;&gt;&quot;</span> <span class="o">%</span>
                         <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">second</span><span class="p">)</span><span class="o">.</span><span class="n">__module__</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">first</span><span class="p">)</span><span class="o">.</span><span class="n">__qualname__</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">second</span><span class="p">),</span> <span class="s">&quot;&lt;</span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s"> object; &quot;</span>
                         <span class="s">&quot;span=(3, 5), match=&#39;bb&#39;&gt;&quot;</span> <span class="o">%</span>
                         <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">second</span><span class="p">)</span><span class="o">.</span><span class="n">__module__</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">second</span><span class="p">)</span><span class="o">.</span><span class="n">__qualname__</span><span class="p">))</span>

</div>
<div class="viewcode-block" id="ReTests.test_bug_2537"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_2537">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_2537</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># issue 2537: empty submatches</span>
        <span class="k">for</span> <span class="n">outer_op</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;{0,}&#39;</span><span class="p">,</span> <span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="s">&#39;{1,187}&#39;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">inner_op</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;{0,}&#39;</span><span class="p">,</span> <span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;?&#39;</span><span class="p">):</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;^((x|y)</span><span class="si">%s</span><span class="s">)</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inner_op</span><span class="p">,</span> <span class="n">outer_op</span><span class="p">))</span>
                <span class="n">m</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;xyyzy&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&quot;xyy&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="s">&quot;y&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ReTests.test_debug_flag"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_debug_flag">[docs]</a>    <span class="k">def</span> <span class="nf">test_debug_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">captured_stdout</span><span class="p">()</span> <span class="k">as</span> <span class="n">out</span><span class="p">:</span>
            <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(),</span>
                         <span class="p">[</span><span class="s">&#39;literal 102 &#39;</span><span class="p">,</span> <span class="s">&#39;literal 111 &#39;</span><span class="p">,</span> <span class="s">&#39;literal 111 &#39;</span><span class="p">])</span>
        <span class="c"># Debug output is output again even a second time (bypassing</span>
        <span class="c"># the cache -- issue #20426).</span>
        <span class="k">with</span> <span class="n">captured_stdout</span><span class="p">()</span> <span class="k">as</span> <span class="n">out</span><span class="p">:</span>
            <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(),</span>
                         <span class="p">[</span><span class="s">&#39;literal 102 &#39;</span><span class="p">,</span> <span class="s">&#39;literal 111 &#39;</span><span class="p">,</span> <span class="s">&#39;literal 111 &#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="ReTests.test_keyword_parameters"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_keyword_parameters">[docs]</a>    <span class="k">def</span> <span class="nf">test_keyword_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue #20283: Accepting the string keyword parameter.</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&#39;(ab)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s">&#39;abracadabra&#39;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">endpos</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">pat</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s">&#39;abracadabra&#39;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">endpos</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">pat</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s">&#39;abracadabra&#39;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">endpos</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">pat</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s">&#39;abracadabra&#39;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">endpos</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;ab&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">pat</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s">&#39;abracadabra&#39;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
            <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;ab&#39;</span><span class="p">,</span> <span class="s">&#39;racadabra&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">pat</span><span class="o">.</span><span class="n">scanner</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s">&#39;abracadabra&#39;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">endpos</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">search</span><span class="p">()</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span>
            <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ReTests.test_bug_20998"><a class="viewcode-back" href="../../test.html#test.test_re.ReTests.test_bug_20998">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_20998</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue #20998: Fullmatch of repeated single character pattern</span>
        <span class="c"># with ignore case.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="s">&#39;[a-c]+&#39;</span><span class="p">,</span> <span class="s">&#39;ABC&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

</div></div>
<div class="viewcode-block" id="PatternReprTests"><a class="viewcode-back" href="../../test.html#test.test_re.PatternReprTests">[docs]</a><span class="k">class</span> <span class="nc">PatternReprTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="PatternReprTests.check"><a class="viewcode-back" href="../../test.html#test.test_re.PatternReprTests.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">)),</span> <span class="n">expected</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PatternReprTests.check_flags"><a class="viewcode-back" href="../../test.html#test.test_re.PatternReprTests.check_flags">[docs]</a>    <span class="k">def</span> <span class="nf">check_flags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">flags</span><span class="p">)),</span> <span class="n">expected</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PatternReprTests.test_without_flags"><a class="viewcode-back" href="../../test.html#test.test_re.PatternReprTests.test_without_flags">[docs]</a>    <span class="k">def</span> <span class="nf">test_without_flags</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s">&#39;random pattern&#39;</span><span class="p">,</span>
                   <span class="s">&quot;re.compile(&#39;random pattern&#39;)&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PatternReprTests.test_single_flag"><a class="viewcode-back" href="../../test.html#test.test_re.PatternReprTests.test_single_flag">[docs]</a>    <span class="k">def</span> <span class="nf">test_single_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_flags</span><span class="p">(</span><span class="s">&#39;random pattern&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">,</span>
            <span class="s">&quot;re.compile(&#39;random pattern&#39;, re.IGNORECASE)&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PatternReprTests.test_multiple_flags"><a class="viewcode-back" href="../../test.html#test.test_re.PatternReprTests.test_multiple_flags">[docs]</a>    <span class="k">def</span> <span class="nf">test_multiple_flags</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_flags</span><span class="p">(</span><span class="s">&#39;random pattern&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="o">|</span><span class="n">re</span><span class="o">.</span><span class="n">S</span><span class="o">|</span><span class="n">re</span><span class="o">.</span><span class="n">X</span><span class="p">,</span>
            <span class="s">&quot;re.compile(&#39;random pattern&#39;, &quot;</span>
            <span class="s">&quot;re.IGNORECASE|re.DOTALL|re.VERBOSE)&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PatternReprTests.test_unicode_flag"><a class="viewcode-back" href="../../test.html#test.test_re.PatternReprTests.test_unicode_flag">[docs]</a>    <span class="k">def</span> <span class="nf">test_unicode_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_flags</span><span class="p">(</span><span class="s">&#39;random pattern&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">U</span><span class="p">,</span>
                         <span class="s">&quot;re.compile(&#39;random pattern&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_flags</span><span class="p">(</span><span class="s">&#39;random pattern&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="o">|</span><span class="n">re</span><span class="o">.</span><span class="n">S</span><span class="o">|</span><span class="n">re</span><span class="o">.</span><span class="n">U</span><span class="p">,</span>
                         <span class="s">&quot;re.compile(&#39;random pattern&#39;, &quot;</span>
                         <span class="s">&quot;re.IGNORECASE|re.DOTALL)&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PatternReprTests.test_inline_flags"><a class="viewcode-back" href="../../test.html#test.test_re.PatternReprTests.test_inline_flags">[docs]</a>    <span class="k">def</span> <span class="nf">test_inline_flags</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s">&#39;(?i)pattern&#39;</span><span class="p">,</span>
                   <span class="s">&quot;re.compile(&#39;(?i)pattern&#39;, re.IGNORECASE)&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PatternReprTests.test_unknown_flags"><a class="viewcode-back" href="../../test.html#test.test_re.PatternReprTests.test_unknown_flags">[docs]</a>    <span class="k">def</span> <span class="nf">test_unknown_flags</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_flags</span><span class="p">(</span><span class="s">&#39;random pattern&#39;</span><span class="p">,</span> <span class="mh">0x123000</span><span class="p">,</span>
                         <span class="s">&quot;re.compile(&#39;random pattern&#39;, 0x123000)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_flags</span><span class="p">(</span><span class="s">&#39;random pattern&#39;</span><span class="p">,</span> <span class="mh">0x123000</span><span class="o">|</span><span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">,</span>
            <span class="s">&quot;re.compile(&#39;random pattern&#39;, re.IGNORECASE|0x123000)&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PatternReprTests.test_bytes"><a class="viewcode-back" href="../../test.html#test.test_re.PatternReprTests.test_bytes">[docs]</a>    <span class="k">def</span> <span class="nf">test_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;bytes pattern&#39;</span><span class="p">,</span>
                   <span class="s">&quot;re.compile(b&#39;bytes pattern&#39;)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_flags</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;bytes pattern&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">A</span><span class="p">,</span>
                         <span class="s">&quot;re.compile(b&#39;bytes pattern&#39;, re.ASCII)&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PatternReprTests.test_quotes"><a class="viewcode-back" href="../../test.html#test.test_re.PatternReprTests.test_quotes">[docs]</a>    <span class="k">def</span> <span class="nf">test_quotes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s">&#39;random &quot;double quoted&quot; pattern&#39;</span><span class="p">,</span>
            <span class="sd">&#39;&#39;&#39;re.compile(&#39;random &quot;double quoted&quot; pattern&#39;)&#39;&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s">&quot;random &#39;single quoted&#39; pattern&quot;</span><span class="p">,</span>
            <span class="sd">&#39;&#39;&#39;re.compile(&quot;random &#39;single quoted&#39; pattern&quot;)&#39;&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s">&#39;&#39;&#39;both &#39;single&#39; and &quot;double&quot; quotes&#39;&#39;&#39;</span><span class="p">,</span>
            <span class="sd">&#39;&#39;&#39;re.compile(&#39;both \\&#39;single\\&#39; and &quot;double&quot; quotes&#39;)&#39;&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PatternReprTests.test_long_pattern"><a class="viewcode-back" href="../../test.html#test.test_re.PatternReprTests.test_long_pattern">[docs]</a>    <span class="k">def</span> <span class="nf">test_long_pattern</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="s">&#39;Very </span><span class="si">%s</span><span class="s">pattern&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s">&#39;long &#39;</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertLess</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="mi">300</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">[:</span><span class="mi">30</span><span class="p">],</span> <span class="s">&quot;re.compile(&#39;Very long long lon&quot;</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertLess</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="mi">300</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">[:</span><span class="mi">30</span><span class="p">],</span> <span class="s">&quot;re.compile(&#39;Very long long lon&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="o">-</span><span class="mi">16</span><span class="p">:],</span> <span class="s">&quot;, re.IGNORECASE)&quot;</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="ImplementationTest"><a class="viewcode-back" href="../../test.html#test.test_re.ImplementationTest">[docs]</a><span class="k">class</span> <span class="nc">ImplementationTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test implementation details of the re module.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ImplementationTest.test_overlap_table"><a class="viewcode-back" href="../../test.html#test.test_re.ImplementationTest.test_overlap_table">[docs]</a>    <span class="k">def</span> <span class="nf">test_overlap_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">sre_compile</span><span class="o">.</span><span class="n">_generate_overlap_table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">),</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">),</span> <span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="s">&quot;abcd&quot;</span><span class="p">),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="s">&quot;aaaa&quot;</span><span class="p">),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="s">&quot;ababba&quot;</span><span class="p">),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="s">&quot;abcabdac&quot;</span><span class="p">),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

</div></div>
<div class="viewcode-block" id="run_re_tests"><a class="viewcode-back" href="../../test.html#test.test_re.run_re_tests">[docs]</a><span class="k">def</span> <span class="nf">run_re_tests</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">test.re_tests</span> <span class="kn">import</span> <span class="n">tests</span><span class="p">,</span> <span class="n">SUCCEED</span><span class="p">,</span> <span class="n">FAIL</span><span class="p">,</span> <span class="n">SYNTAX_ERROR</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Running re_tests test suite&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c"># To save time, only run the first and last 10 tests</span>
        <span class="c">#tests = tests[:10] + tests[-10:]</span>
        <span class="k">pass</span>

    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tests</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="n">s</span> <span class="o">=</span> <span class="n">outcome</span> <span class="o">=</span> <span class="n">repl</span> <span class="o">=</span> <span class="n">expected</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">pattern</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">outcome</span><span class="p">,</span> <span class="n">repl</span><span class="p">,</span> <span class="n">expected</span> <span class="o">=</span> <span class="n">t</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">pattern</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">outcome</span> <span class="o">=</span> <span class="n">t</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Test tuples should have 3 or 5 fields&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">outcome</span> <span class="o">==</span> <span class="n">SYNTAX_ERROR</span><span class="p">:</span> <span class="k">pass</span>  <span class="c"># Expected a syntax error</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">&#39;=== Syntax error:&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">KeyboardInterrupt</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&#39;*** Unexpected error ***&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">re</span><span class="o">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">msg</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">&#39;=== Unexpected exception&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">outcome</span> <span class="o">==</span> <span class="n">SYNTAX_ERROR</span><span class="p">:</span>
                <span class="c"># This should have been a syntax error; forget it.</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">outcome</span> <span class="o">==</span> <span class="n">FAIL</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="k">pass</span>   <span class="c"># No match, as expected</span>
                <span class="k">else</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="s">&#39;=== Succeeded incorrectly&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">outcome</span> <span class="o">==</span> <span class="n">SUCCEED</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="c"># Matched, as expected, so now we compute the</span>
                    <span class="c"># result string and compare it to our expected result.</span>
                    <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">span</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">vardict</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;found&#39;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                             <span class="s">&#39;groups&#39;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">group</span><span class="p">(),</span>
                             <span class="s">&#39;flags&#39;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">re</span><span class="o">.</span><span class="n">flags</span><span class="p">}</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">gi</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                            <span class="c"># Special hack because else the string concat fails:</span>
                            <span class="k">if</span> <span class="n">gi</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                                <span class="n">gi</span> <span class="o">=</span> <span class="s">&quot;None&quot;</span>
                        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                            <span class="n">gi</span> <span class="o">=</span> <span class="s">&quot;Error&quot;</span>
                        <span class="n">vardict</span><span class="p">[</span><span class="s">&#39;g</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">gi</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">re</span><span class="o">.</span><span class="n">groupindex</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">gi</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">gi</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                                <span class="n">gi</span> <span class="o">=</span> <span class="s">&quot;None&quot;</span>
                        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                            <span class="n">gi</span> <span class="o">=</span> <span class="s">&quot;Error&quot;</span>
                        <span class="n">vardict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">gi</span>
                    <span class="n">repl</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">repl</span><span class="p">,</span> <span class="n">vardict</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">repl</span> <span class="o">!=</span> <span class="n">expected</span><span class="p">:</span>
                        <span class="k">print</span><span class="p">(</span><span class="s">&#39;=== grouping error&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">&#39; &#39;</span><span class="p">)</span>
                        <span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">repl</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; should be &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">expected</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s">&#39;=== Failed incorrectly&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

                <span class="c"># Try the match with both pattern and string converted to</span>
                <span class="c"># bytes, and check that it still succeeds.</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">bpat</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="s">&quot;ascii&quot;</span><span class="p">)</span>
                    <span class="n">bs</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;ascii&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">UnicodeEncodeError</span><span class="p">:</span>
                    <span class="c"># skip non-ascii tests</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">bpat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">bpat</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                        <span class="k">print</span><span class="p">(</span><span class="s">&#39;=== Fails on bytes pattern compile&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bytes_result</span> <span class="o">=</span> <span class="n">bpat</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">bs</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">bytes_result</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                            <span class="k">print</span><span class="p">(</span><span class="s">&#39;=== Fails on bytes pattern match&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

                <span class="c"># Try the match with the search area limited to the extent</span>
                <span class="c"># of the match and see if it still succeeds.  \B will</span>
                <span class="c"># break (because it won&#39;t match at the end or start of a</span>
                <span class="c"># string), so we&#39;ll ignore patterns that feature it.</span>

                <span class="k">if</span> <span class="n">pattern</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;</span><span class="se">\\</span><span class="s">B&#39;</span> <span class="ow">and</span> <span class="n">pattern</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">!=</span> <span class="s">&#39;</span><span class="se">\\</span><span class="s">B&#39;</span> \
                               <span class="ow">and</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">obj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">result</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="k">print</span><span class="p">(</span><span class="s">&#39;=== Failed on range-limited match&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

                <span class="c"># Try the match with IGNORECASE enabled, and check that it</span>
                <span class="c"># still succeeds.</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s">&#39;=== Fails on case-insensitive match&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

                <span class="c"># Try the match with LOCALE enabled, and check that it</span>
                <span class="c"># still succeeds.</span>
                <span class="k">if</span> <span class="s">&#39;(?u)&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pattern</span><span class="p">:</span>
                    <span class="n">obj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">LOCALE</span><span class="p">)</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="k">print</span><span class="p">(</span><span class="s">&#39;=== Fails on locale-sensitive match&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

                <span class="c"># Try the match with UNICODE locale enabled, and check</span>
                <span class="c"># that it still succeeds.</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">UNICODE</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s">&#39;=== Fails on unicode-sensitive match&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="test_main"><a class="viewcode-back" href="../../test.html#test.test_re.test_main">[docs]</a><span class="k">def</span> <span class="nf">test_main</span><span class="p">():</span>
    <span class="n">run_unittest</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
    <span class="n">run_re_tests</span><span class="p">()</span>
</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">test_main</span><span class="p">()</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Weldon Henson.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>