

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>test.test_minidom &mdash; ArcherBashPYDocs 1.0.0. documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ArcherBashPYDocs 1.0.0. documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> ArcherBashPYDocs</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="simple">
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ArcherBashPYDocs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>test.test_minidom</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for test.test_minidom</h1><div class="highlight"><pre>
<span class="c"># test for xml.dom.minidom</span>

<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">from</span> <span class="nn">test.support</span> <span class="kn">import</span> <span class="n">run_unittest</span><span class="p">,</span> <span class="n">findfile</span>
<span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">import</span> <span class="nn">xml.dom.minidom</span>

<span class="kn">from</span> <span class="nn">xml.dom.minidom</span> <span class="kn">import</span> <span class="n">parse</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Document</span><span class="p">,</span> <span class="n">parseString</span>
<span class="kn">from</span> <span class="nn">xml.dom.minidom</span> <span class="kn">import</span> <span class="n">getDOMImplementation</span>


<span class="n">tstfile</span> <span class="o">=</span> <span class="n">findfile</span><span class="p">(</span><span class="s">&quot;test.xml&quot;</span><span class="p">,</span> <span class="n">subdir</span><span class="o">=</span><span class="s">&quot;xmltestdata&quot;</span><span class="p">)</span>

<span class="c"># The tests of DocumentType importing use these helpers to construct</span>
<span class="c"># the documents to work with, since not all DOM builders actually</span>
<span class="c"># create the DocumentType nodes.</span>
<div class="viewcode-block" id="create_doc_without_doctype"><a class="viewcode-back" href="../../test.html#test.test_minidom.create_doc_without_doctype">[docs]</a><span class="k">def</span> <span class="nf">create_doc_without_doctype</span><span class="p">(</span><span class="n">doctype</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">getDOMImplementation</span><span class="p">()</span><span class="o">.</span><span class="n">createDocument</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&quot;doc&quot;</span><span class="p">,</span> <span class="n">doctype</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="create_nonempty_doctype"><a class="viewcode-back" href="../../test.html#test.test_minidom.create_nonempty_doctype">[docs]</a><span class="k">def</span> <span class="nf">create_nonempty_doctype</span><span class="p">():</span>
    <span class="n">doctype</span> <span class="o">=</span> <span class="n">getDOMImplementation</span><span class="p">()</span><span class="o">.</span><span class="n">createDocumentType</span><span class="p">(</span><span class="s">&quot;doc&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="n">doctype</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">_seq</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">doctype</span><span class="o">.</span><span class="n">notations</span><span class="o">.</span><span class="n">_seq</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">notation</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">minidom</span><span class="o">.</span><span class="n">Notation</span><span class="p">(</span><span class="s">&quot;my-notation&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span>
                                        <span class="s">&quot;http://xml.python.org/notations/my&quot;</span><span class="p">)</span>
    <span class="n">doctype</span><span class="o">.</span><span class="n">notations</span><span class="o">.</span><span class="n">_seq</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">notation</span><span class="p">)</span>
    <span class="n">entity</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">minidom</span><span class="o">.</span><span class="n">Entity</span><span class="p">(</span><span class="s">&quot;my-entity&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span>
                                    <span class="s">&quot;http://xml.python.org/entities/my&quot;</span><span class="p">,</span>
                                    <span class="s">&quot;my-notation&quot;</span><span class="p">)</span>
    <span class="n">entity</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="s">&quot;1.0&quot;</span>
    <span class="n">entity</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="s">&quot;utf-8&quot;</span>
    <span class="n">entity</span><span class="o">.</span><span class="n">actualEncoding</span> <span class="o">=</span> <span class="s">&quot;us-ascii&quot;</span>
    <span class="n">doctype</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">_seq</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">doctype</span>
</div>
<div class="viewcode-block" id="create_doc_with_doctype"><a class="viewcode-back" href="../../test.html#test.test_minidom.create_doc_with_doctype">[docs]</a><span class="k">def</span> <span class="nf">create_doc_with_doctype</span><span class="p">():</span>
    <span class="n">doctype</span> <span class="o">=</span> <span class="n">create_nonempty_doctype</span><span class="p">()</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="n">create_doc_without_doctype</span><span class="p">(</span><span class="n">doctype</span><span class="p">)</span>
    <span class="n">doctype</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">ownerDocument</span> <span class="o">=</span> <span class="n">doc</span>
    <span class="n">doctype</span><span class="o">.</span><span class="n">notations</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">ownerDocument</span> <span class="o">=</span> <span class="n">doc</span>
    <span class="k">return</span> <span class="n">doc</span>
</div>
<div class="viewcode-block" id="MinidomTest"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest">[docs]</a><span class="k">class</span> <span class="nc">MinidomTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="MinidomTest.confirm"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.confirm">[docs]</a>    <span class="k">def</span> <span class="nf">confirm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">testname</span> <span class="o">=</span> <span class="s">&quot;Test&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">testname</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.checkWholeText"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.checkWholeText">[docs]</a>    <span class="k">def</span> <span class="nf">checkWholeText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">wholeText</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">t</span> <span class="o">==</span> <span class="n">s</span><span class="p">,</span> <span class="s">&quot;looking for </span><span class="si">%r</span><span class="s">, found </span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">t</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="MinidomTest.testParseFromFile"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testParseFromFile">[docs]</a>    <span class="k">def</span> <span class="nf">testParseFromFile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tstfile</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
            <span class="n">dom</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
            <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">dom</span><span class="p">,</span> <span class="n">Document</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="MinidomTest.testGetElementsByTagName"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testGetElementsByTagName">[docs]</a>    <span class="k">def</span> <span class="nf">testGetElementsByTagName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">tstfile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;LI&quot;</span><span class="p">)</span> <span class="o">==</span> \
                <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;LI&quot;</span><span class="p">))</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testInsertBefore"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testInsertBefore">[docs]</a>    <span class="k">def</span> <span class="nf">testInsertBefore</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc&gt;&lt;foo/&gt;&lt;/doc&gt;&quot;</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">nelem</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;element&quot;</span><span class="p">)</span>
        <span class="n">root</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">nelem</span><span class="p">,</span> <span class="n">elem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="n">nelem</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="ow">is</span> <span class="n">nelem</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">elem</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="ow">is</span> <span class="n">elem</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span> <span class="ow">is</span> <span class="n">nelem</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span> <span class="ow">is</span> <span class="n">elem</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">toxml</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;&lt;doc&gt;&lt;element/&gt;&lt;foo/&gt;&lt;/doc&gt;&quot;</span>
                <span class="p">,</span> <span class="s">&quot;testInsertBefore -- node properly placed in tree&quot;</span><span class="p">)</span>
        <span class="n">nelem</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;element&quot;</span><span class="p">)</span>
        <span class="n">root</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">nelem</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">3</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">elem</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="ow">is</span> <span class="n">elem</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">is</span> <span class="n">nelem</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="ow">is</span> <span class="n">nelem</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span> <span class="ow">is</span> <span class="n">nelem</span>
                <span class="ow">and</span> <span class="n">nelem</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="n">elem</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">toxml</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;&lt;doc&gt;&lt;element/&gt;&lt;foo/&gt;&lt;element/&gt;&lt;/doc&gt;&quot;</span>
                <span class="p">,</span> <span class="s">&quot;testInsertBefore -- node properly placed in tree&quot;</span><span class="p">)</span>
        <span class="n">nelem2</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">)</span>
        <span class="n">root</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">nelem2</span><span class="p">,</span> <span class="n">nelem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">4</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">is</span> <span class="n">nelem2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="ow">is</span> <span class="n">nelem2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="n">nelem</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="ow">is</span> <span class="n">nelem</span>
                <span class="ow">and</span> <span class="n">nelem2</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="n">nelem</span>
                <span class="ow">and</span> <span class="n">nelem</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="n">nelem2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">toxml</span><span class="p">()</span> <span class="o">==</span>
                <span class="s">&quot;&lt;doc&gt;&lt;element/&gt;&lt;foo/&gt;&lt;bar/&gt;&lt;element/&gt;&lt;/doc&gt;&quot;</span>
                <span class="p">,</span> <span class="s">&quot;testInsertBefore -- node properly placed in tree&quot;</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_create_fragment_test_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;original&quot;</span><span class="p">)</span>
        <span class="n">c1</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
        <span class="n">c2</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">)</span>
        <span class="n">c3</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;bat&quot;</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">orig</span><span class="p">)</span>
        <span class="n">frag</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">createDocumentFragment</span><span class="p">()</span>
        <span class="n">frag</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>
        <span class="n">frag</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span>
        <span class="n">frag</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">c3</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dom</span><span class="p">,</span> <span class="n">orig</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">,</span> <span class="n">frag</span>

<div class="viewcode-block" id="MinidomTest.testInsertBeforeFragment"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testInsertBeforeFragment">[docs]</a>    <span class="k">def</span> <span class="nf">testInsertBeforeFragment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span><span class="p">,</span> <span class="n">orig</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">,</span> <span class="n">frag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_fragment_test_nodes</span><span class="p">()</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">frag</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span>
                     <span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">),</span>
                     <span class="s">&quot;insertBefore(&lt;fragment&gt;, None)&quot;</span><span class="p">)</span>
        <span class="n">frag</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>

        <span class="n">dom</span><span class="p">,</span> <span class="n">orig</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">,</span> <span class="n">frag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_fragment_test_nodes</span><span class="p">()</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">frag</span><span class="p">,</span> <span class="n">orig</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span>
                     <span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">,</span> <span class="n">orig</span><span class="p">),</span>
                     <span class="s">&quot;insertBefore(&lt;fragment&gt;, orig)&quot;</span><span class="p">)</span>
        <span class="n">frag</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAppendChild"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAppendChild">[docs]</a>    <span class="k">def</span> <span class="nf">testAppendChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">tstfile</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createComment</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="s">&quot;#comment&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="s">&quot;Hello&quot;</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAppendChildFragment"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAppendChildFragment">[docs]</a>    <span class="k">def</span> <span class="nf">testAppendChildFragment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span><span class="p">,</span> <span class="n">orig</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">,</span> <span class="n">frag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_fragment_test_nodes</span><span class="p">()</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">frag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span>
                     <span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">),</span>
                     <span class="s">&quot;appendChild(&lt;fragment&gt;)&quot;</span><span class="p">)</span>
        <span class="n">frag</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testReplaceChildFragment"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testReplaceChildFragment">[docs]</a>    <span class="k">def</span> <span class="nf">testReplaceChildFragment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span><span class="p">,</span> <span class="n">orig</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">,</span> <span class="n">frag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_fragment_test_nodes</span><span class="p">()</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">replaceChild</span><span class="p">(</span><span class="n">frag</span><span class="p">,</span> <span class="n">orig</span><span class="p">)</span>
        <span class="n">orig</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">),</span>
                <span class="s">&quot;replaceChild(&lt;fragment&gt;)&quot;</span><span class="p">)</span>
        <span class="n">frag</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testLegalChildren"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testLegalChildren">[docs]</a>    <span class="k">def</span> <span class="nf">testLegalChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&#39;element&#39;</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">HierarchyRequestErr</span><span class="p">,</span> <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

        <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">HierarchyRequestErr</span><span class="p">,</span> <span class="n">dom</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span>
                          <span class="n">elem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">HierarchyRequestErr</span><span class="p">,</span> <span class="n">dom</span><span class="o">.</span><span class="n">replaceChild</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span>
                          <span class="n">elem</span><span class="p">)</span>

        <span class="n">nodemap</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">HierarchyRequestErr</span><span class="p">,</span> <span class="n">nodemap</span><span class="o">.</span><span class="n">setNamedItem</span><span class="p">,</span>
                          <span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">HierarchyRequestErr</span><span class="p">,</span> <span class="n">nodemap</span><span class="o">.</span><span class="n">setNamedItemNS</span><span class="p">,</span>
                          <span class="n">text</span><span class="p">)</span>

        <span class="n">elem</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testNamedNodeMapSetItem"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testNamedNodeMapSetItem">[docs]</a>    <span class="k">def</span> <span class="nf">testNamedNodeMapSetItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&#39;element&#39;</span><span class="p">)</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attributes</span>
        <span class="n">attrs</span><span class="p">[</span><span class="s">&quot;foo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;bar&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ownerDocument</span> <span class="ow">is</span> <span class="n">dom</span><span class="p">,</span>
                <span class="s">&quot;NamedNodeMap.__setitem__() sets ownerDocument&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ownerElement</span> <span class="ow">is</span> <span class="n">elem</span><span class="p">,</span>
                <span class="s">&quot;NamedNodeMap.__setitem__() sets ownerElement&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;bar&quot;</span><span class="p">,</span>
                <span class="s">&quot;NamedNodeMap.__setitem__() sets value&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">nodeValue</span> <span class="o">==</span> <span class="s">&quot;bar&quot;</span><span class="p">,</span>
                <span class="s">&quot;NamedNodeMap.__setitem__() sets nodeValue&quot;</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testNonZero"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testNonZero">[docs]</a>    <span class="k">def</span> <span class="nf">testNonZero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">tstfile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">dom</span><span class="p">)</span><span class="c"># should not be zero</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createComment</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="ow">not</span> <span class="n">dom</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testUnlink"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testUnlink">[docs]</a>    <span class="k">def</span> <span class="nf">testUnlink</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">tstfile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testContext"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testContext">[docs]</a>    <span class="k">def</span> <span class="nf">testContext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">parse</span><span class="p">(</span><span class="n">tstfile</span><span class="p">)</span> <span class="k">as</span> <span class="n">dom</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testElement"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testElement">[docs]</a>    <span class="k">def</span> <span class="nf">testElement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAAA"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAAA">[docs]</a>    <span class="k">def</span> <span class="nf">testAAA</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;abc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">el</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">el</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;jam2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">toxml</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;&lt;abc spam=&quot;jam2&quot;/&gt;&#39;</span><span class="p">,</span> <span class="s">&quot;testAAA&quot;</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">el</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ownerDocument</span> <span class="ow">is</span> <span class="n">dom</span><span class="p">,</span>
                <span class="s">&quot;setAttribute() sets ownerDocument&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ownerElement</span> <span class="ow">is</span> <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="p">,</span>
                <span class="s">&quot;setAttribute() sets ownerElement&quot;</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAAB"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAAB">[docs]</a>    <span class="k">def</span> <span class="nf">testAAB</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;abc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">el</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">el</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;jam&quot;</span><span class="p">)</span>
        <span class="n">el</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;jam2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">toxml</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;&lt;abc spam=&quot;jam2&quot;/&gt;&#39;</span><span class="p">,</span> <span class="s">&quot;testAAB&quot;</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAddAttr"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAddAttr">[docs]</a>    <span class="k">def</span> <span class="nf">testAddAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">child</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">))</span>

        <span class="n">child</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;def&quot;</span><span class="p">,</span> <span class="s">&quot;ghi&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;def&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&quot;ghi&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;def&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;ghi&quot;</span><span class="p">)</span>

        <span class="n">child</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;jkl&quot;</span><span class="p">,</span> <span class="s">&quot;mno&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;jkl&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&quot;mno&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;jkl&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;mno&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>

        <span class="n">child</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;def&quot;</span><span class="p">,</span> <span class="s">&quot;newval&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;def&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&quot;newval&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;def&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;newval&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testDeleteAttr"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testDeleteAttr">[docs]</a>    <span class="k">def</span> <span class="nf">testDeleteAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">child</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">child</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;def&quot;</span><span class="p">,</span> <span class="s">&quot;ghi&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;def&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testRemoveAttr"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testRemoveAttr">[docs]</a>    <span class="k">def</span> <span class="nf">testRemoveAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">child</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">))</span>

        <span class="n">child</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;def&quot;</span><span class="p">,</span> <span class="s">&quot;ghi&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">NotFoundErr</span><span class="p">,</span> <span class="n">child</span><span class="o">.</span><span class="n">removeAttribute</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">)</span>
        <span class="n">child</span><span class="o">.</span><span class="n">removeAttribute</span><span class="p">(</span><span class="s">&quot;def&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testRemoveAttrNS"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testRemoveAttrNS">[docs]</a>    <span class="k">def</span> <span class="nf">testRemoveAttrNS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">child</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span>
                <span class="n">dom</span><span class="o">.</span><span class="n">createElementNS</span><span class="p">(</span><span class="s">&quot;http://www.python.org&quot;</span><span class="p">,</span> <span class="s">&quot;python:abc&quot;</span><span class="p">))</span>
        <span class="n">child</span><span class="o">.</span><span class="n">setAttributeNS</span><span class="p">(</span><span class="s">&quot;http://www.w3.org&quot;</span><span class="p">,</span> <span class="s">&quot;xmlns:python&quot;</span><span class="p">,</span>
                                                <span class="s">&quot;http://www.python.org&quot;</span><span class="p">)</span>
        <span class="n">child</span><span class="o">.</span><span class="n">setAttributeNS</span><span class="p">(</span><span class="s">&quot;http://www.python.org&quot;</span><span class="p">,</span> <span class="s">&quot;python:abcattr&quot;</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">NotFoundErr</span><span class="p">,</span> <span class="n">child</span><span class="o">.</span><span class="n">removeAttributeNS</span><span class="p">,</span>
            <span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;http://www.python.org&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">child</span><span class="o">.</span><span class="n">removeAttributeNS</span><span class="p">(</span><span class="s">&quot;http://www.python.org&quot;</span><span class="p">,</span> <span class="s">&quot;abcattr&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testRemoveAttributeNode"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testRemoveAttributeNode">[docs]</a>    <span class="k">def</span> <span class="nf">testRemoveAttributeNode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">child</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">))</span>
        <span class="n">child</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;jam&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">NotFoundErr</span><span class="p">,</span> <span class="n">child</span><span class="o">.</span><span class="n">removeAttributeNode</span><span class="p">,</span>
            <span class="bp">None</span><span class="p">)</span>
        <span class="n">child</span><span class="o">.</span><span class="n">removeAttributeNode</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="ow">and</span> <span class="n">child</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span>
        <span class="n">dom2</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">child2</span> <span class="o">=</span> <span class="n">dom2</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom2</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">))</span>
        <span class="n">node2</span> <span class="o">=</span> <span class="n">child2</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">NotFoundErr</span><span class="p">,</span> <span class="n">child2</span><span class="o">.</span><span class="n">removeAttributeNode</span><span class="p">,</span>
            <span class="n">node2</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testHasAttribute"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testHasAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">testHasAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">child</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">))</span>
        <span class="n">child</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;jam&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="MinidomTest.testChangeAttr"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testChangeAttr">[docs]</a>    <span class="k">def</span> <span class="nf">testChangeAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;abc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">el</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">el</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;jam&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">el</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;bam&quot;</span><span class="p">)</span>
        <span class="c"># Set this attribute to be an ID and make sure that doesn&#39;t change</span>
        <span class="c"># when changing the value:</span>
        <span class="n">el</span><span class="o">.</span><span class="n">setIdAttribute</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;bam&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">nodeValue</span> <span class="o">==</span> <span class="s">&quot;bam&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&quot;bam&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;ham&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;ham&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">nodeValue</span> <span class="o">==</span> <span class="s">&quot;ham&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&quot;ham&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="n">el</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;spam2&quot;</span><span class="p">,</span> <span class="s">&quot;bam&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;ham&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">nodeValue</span> <span class="o">==</span> <span class="s">&quot;ham&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&quot;ham&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;bam&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">nodeValue</span> <span class="o">==</span> <span class="s">&quot;bam&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;spam2&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&quot;bam&quot;</span><span class="p">)</span>
        <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;bam2&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;ham&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">nodeValue</span> <span class="o">==</span> <span class="s">&quot;ham&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&quot;ham&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;bam2&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;spam2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">nodeValue</span> <span class="o">==</span> <span class="s">&quot;bam2&quot;</span>
                <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;spam2&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&quot;bam2&quot;</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testGetAttrList"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testGetAttrList">[docs]</a>    <span class="k">def</span> <span class="nf">testGetAttrList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testGetAttrValues"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testGetAttrValues">[docs]</a>    <span class="k">def</span> <span class="nf">testGetAttrValues</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testGetAttrLength"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testGetAttrLength">[docs]</a>    <span class="k">def</span> <span class="nf">testGetAttrLength</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testGetAttribute"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testGetAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">testGetAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">child</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span>
            <span class="n">dom</span><span class="o">.</span><span class="n">createElementNS</span><span class="p">(</span><span class="s">&quot;http://www.python.org&quot;</span><span class="p">,</span> <span class="s">&quot;python:abc&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&#39;missing&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testGetAttributeNS"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testGetAttributeNS">[docs]</a>    <span class="k">def</span> <span class="nf">testGetAttributeNS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">child</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span>
                <span class="n">dom</span><span class="o">.</span><span class="n">createElementNS</span><span class="p">(</span><span class="s">&quot;http://www.python.org&quot;</span><span class="p">,</span> <span class="s">&quot;python:abc&quot;</span><span class="p">))</span>
        <span class="n">child</span><span class="o">.</span><span class="n">setAttributeNS</span><span class="p">(</span><span class="s">&quot;http://www.w3.org&quot;</span><span class="p">,</span> <span class="s">&quot;xmlns:python&quot;</span><span class="p">,</span>
                                                <span class="s">&quot;http://www.python.org&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">getAttributeNS</span><span class="p">(</span><span class="s">&quot;http://www.w3.org&quot;</span><span class="p">,</span> <span class="s">&quot;python&quot;</span><span class="p">),</span>
            <span class="s">&#39;http://www.python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">getAttributeNS</span><span class="p">(</span><span class="s">&quot;http://www.w3.org&quot;</span><span class="p">,</span> <span class="s">&quot;other&quot;</span><span class="p">),</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="n">child2</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">child2</span><span class="o">.</span><span class="n">getAttributeNS</span><span class="p">(</span><span class="s">&quot;http://www.python.org&quot;</span><span class="p">,</span> <span class="s">&quot;missing&quot;</span><span class="p">),</span>
                         <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testGetAttributeNode"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testGetAttributeNode">[docs]</a>    <span class="k">def</span> <span class="nf">testGetAttributeNode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testGetElementsByTagNameNS"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testGetElementsByTagNameNS">[docs]</a>    <span class="k">def</span> <span class="nf">testGetElementsByTagNameNS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span><span class="o">=</span><span class="s">&quot;&quot;&quot;&lt;foo xmlns:minidom=&#39;http://pyxml.sf.net/minidom&#39;&gt;</span>
<span class="s">        &lt;minidom:myelem/&gt;</span>
<span class="s">        &lt;/foo&gt;&quot;&quot;&quot;</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="n">elems</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">getElementsByTagNameNS</span><span class="p">(</span><span class="s">&quot;http://pyxml.sf.net/minidom&quot;</span><span class="p">,</span>
                                           <span class="s">&quot;myelem&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">elems</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">==</span> <span class="s">&quot;http://pyxml.sf.net/minidom&quot;</span>
                <span class="ow">and</span> <span class="n">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;myelem&quot;</span>
                <span class="ow">and</span> <span class="n">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">prefix</span> <span class="o">==</span> <span class="s">&quot;minidom&quot;</span>
                <span class="ow">and</span> <span class="n">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s">&quot;minidom:myelem&quot;</span>
                <span class="ow">and</span> <span class="n">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="s">&quot;minidom:myelem&quot;</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.get_empty_nodelist_from_elements_by_tagName_ns_helper"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.get_empty_nodelist_from_elements_by_tagName_ns_helper">[docs]</a>    <span class="k">def</span> <span class="nf">get_empty_nodelist_from_elements_by_tagName_ns_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="n">nsuri</span><span class="p">,</span>
                                                              <span class="n">lname</span><span class="p">):</span>
        <span class="n">nodelist</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">getElementsByTagNameNS</span><span class="p">(</span><span class="n">nsuri</span><span class="p">,</span> <span class="n">lname</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nodelist</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testGetEmptyNodeListFromElementsByTagNameNS"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testGetEmptyNodeListFromElementsByTagNameNS">[docs]</a>    <span class="k">def</span> <span class="nf">testGetEmptyNodeListFromElementsByTagNameNS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&#39;&lt;doc/&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_empty_nodelist_from_elements_by_tagName_ns_helper</span><span class="p">(</span>
            <span class="n">doc</span><span class="p">,</span> <span class="s">&#39;http://xml.python.org/namespaces/a&#39;</span><span class="p">,</span> <span class="s">&#39;localname&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_empty_nodelist_from_elements_by_tagName_ns_helper</span><span class="p">(</span>
            <span class="n">doc</span><span class="p">,</span> <span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;splat&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_empty_nodelist_from_elements_by_tagName_ns_helper</span><span class="p">(</span>
            <span class="n">doc</span><span class="p">,</span> <span class="s">&#39;http://xml.python.org/namespaces/a&#39;</span><span class="p">,</span> <span class="s">&#39;*&#39;</span><span class="p">)</span>

        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&#39;&lt;doc xmlns=&quot;http://xml.python.org/splat&quot;&gt;&lt;e/&gt;&lt;/doc&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_empty_nodelist_from_elements_by_tagName_ns_helper</span><span class="p">(</span>
            <span class="n">doc</span><span class="p">,</span> <span class="s">&quot;http://xml.python.org/splat&quot;</span><span class="p">,</span> <span class="s">&quot;not-there&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_empty_nodelist_from_elements_by_tagName_ns_helper</span><span class="p">(</span>
            <span class="n">doc</span><span class="p">,</span> <span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="s">&quot;not-there&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_empty_nodelist_from_elements_by_tagName_ns_helper</span><span class="p">(</span>
            <span class="n">doc</span><span class="p">,</span> <span class="s">&quot;http://somewhere.else.net/not-there&quot;</span><span class="p">,</span> <span class="s">&quot;e&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testElementReprAndStr"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testElementReprAndStr">[docs]</a>    <span class="k">def</span> <span class="nf">testElementReprAndStr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">el</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">))</span>
        <span class="n">string1</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
        <span class="n">string2</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">string1</span> <span class="o">==</span> <span class="n">string2</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testElementReprAndStrUnicode"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testElementReprAndStrUnicode">[docs]</a>    <span class="k">def</span> <span class="nf">testElementReprAndStrUnicode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">el</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">))</span>
        <span class="n">string1</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
        <span class="n">string2</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">string1</span> <span class="o">==</span> <span class="n">string2</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testElementReprAndStrUnicodeNS"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testElementReprAndStrUnicodeNS">[docs]</a>    <span class="k">def</span> <span class="nf">testElementReprAndStrUnicodeNS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">el</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span>
            <span class="n">dom</span><span class="o">.</span><span class="n">createElementNS</span><span class="p">(</span><span class="s">&quot;http://www.slashdot.org&quot;</span><span class="p">,</span> <span class="s">&quot;slash:abc&quot;</span><span class="p">))</span>
        <span class="n">string1</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
        <span class="n">string2</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">string1</span> <span class="o">==</span> <span class="n">string2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="s">&quot;slash:abc&quot;</span> <span class="ow">in</span> <span class="n">string1</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAttributeRepr"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAttributeRepr">[docs]</a>    <span class="k">def</span> <span class="nf">testAttributeRepr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">el</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">))</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">el</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="s">&quot;def&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="o">==</span> <span class="nb">repr</span><span class="p">(</span><span class="n">node</span><span class="p">))</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testTextNodeRepr"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testTextNodeRepr">[docs]</a>    <span class="k">def</span> <span class="nf">testTextNodeRepr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testWriteXML"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testWriteXML">[docs]</a>    <span class="k">def</span> <span class="nf">testWriteXML</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">str</span> <span class="o">=</span> <span class="s">&#39;&lt;?xml version=&quot;1.0&quot; ?&gt;&lt;a b=&quot;c&quot;/&gt;&#39;</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">domstr</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">toxml</span><span class="p">()</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">str</span> <span class="o">==</span> <span class="n">domstr</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAltNewline"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAltNewline">[docs]</a>    <span class="k">def</span> <span class="nf">testAltNewline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">str</span> <span class="o">=</span> <span class="s">&#39;&lt;?xml version=&quot;1.0&quot; ?&gt;</span><span class="se">\n</span><span class="s">&lt;a b=&quot;c&quot;/&gt;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">domstr</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">(</span><span class="n">newl</span><span class="o">=</span><span class="s">&quot;</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">domstr</span> <span class="o">==</span> <span class="nb">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="MinidomTest.test_toprettyxml_with_text_nodes"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.test_toprettyxml_with_text_nodes">[docs]</a>    <span class="k">def</span> <span class="nf">test_toprettyxml_with_text_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># see issue #4147, text nodes are not indented</span>
        <span class="n">decl</span> <span class="o">=</span> <span class="s">&#39;&lt;?xml version=&quot;1.0&quot; ?&gt;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parseString</span><span class="p">(</span><span class="s">&#39;&lt;B&gt;A&lt;/B&gt;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">(),</span>
                         <span class="n">decl</span> <span class="o">+</span> <span class="s">&#39;&lt;B&gt;A&lt;/B&gt;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parseString</span><span class="p">(</span><span class="s">&#39;&lt;C&gt;A&lt;B&gt;A&lt;/B&gt;&lt;/C&gt;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">(),</span>
                         <span class="n">decl</span> <span class="o">+</span> <span class="s">&#39;&lt;C&gt;</span><span class="se">\n\t</span><span class="s">A</span><span class="se">\n\t</span><span class="s">&lt;B&gt;A&lt;/B&gt;</span><span class="se">\n</span><span class="s">&lt;/C&gt;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parseString</span><span class="p">(</span><span class="s">&#39;&lt;C&gt;&lt;B&gt;A&lt;/B&gt;A&lt;/C&gt;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">(),</span>
                         <span class="n">decl</span> <span class="o">+</span> <span class="s">&#39;&lt;C&gt;</span><span class="se">\n\t</span><span class="s">&lt;B&gt;A&lt;/B&gt;</span><span class="se">\n\t</span><span class="s">A</span><span class="se">\n</span><span class="s">&lt;/C&gt;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parseString</span><span class="p">(</span><span class="s">&#39;&lt;C&gt;&lt;B&gt;A&lt;/B&gt;&lt;B&gt;A&lt;/B&gt;&lt;/C&gt;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">(),</span>
                         <span class="n">decl</span> <span class="o">+</span> <span class="s">&#39;&lt;C&gt;</span><span class="se">\n\t</span><span class="s">&lt;B&gt;A&lt;/B&gt;</span><span class="se">\n\t</span><span class="s">&lt;B&gt;A&lt;/B&gt;</span><span class="se">\n</span><span class="s">&lt;/C&gt;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parseString</span><span class="p">(</span><span class="s">&#39;&lt;C&gt;&lt;B&gt;A&lt;/B&gt;A&lt;B&gt;A&lt;/B&gt;&lt;/C&gt;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">(),</span>
                         <span class="n">decl</span> <span class="o">+</span> <span class="s">&#39;&lt;C&gt;</span><span class="se">\n\t</span><span class="s">&lt;B&gt;A&lt;/B&gt;</span><span class="se">\n\t</span><span class="s">A</span><span class="se">\n\t</span><span class="s">&lt;B&gt;A&lt;/B&gt;</span><span class="se">\n</span><span class="s">&lt;/C&gt;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.test_toprettyxml_with_adjacent_text_nodes"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.test_toprettyxml_with_adjacent_text_nodes">[docs]</a>    <span class="k">def</span> <span class="nf">test_toprettyxml_with_adjacent_text_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># see issue #4147, adjacent text nodes are indented normally</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&#39;elem&#39;</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&#39;TEXT&#39;</span><span class="p">))</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&#39;TEXT&#39;</span><span class="p">))</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
        <span class="n">decl</span> <span class="o">=</span> <span class="s">&#39;&lt;?xml version=&quot;1.0&quot; ?&gt;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">(),</span>
                         <span class="n">decl</span> <span class="o">+</span> <span class="s">&#39;&lt;elem&gt;</span><span class="se">\n\t</span><span class="s">TEXT</span><span class="se">\n\t</span><span class="s">TEXT</span><span class="se">\n</span><span class="s">&lt;/elem&gt;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.test_toprettyxml_preserves_content_of_text_node"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.test_toprettyxml_preserves_content_of_text_node">[docs]</a>    <span class="k">def</span> <span class="nf">test_toprettyxml_preserves_content_of_text_node</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># see issue #4147</span>
        <span class="k">for</span> <span class="nb">str</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;&lt;B&gt;A&lt;/B&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;&lt;A&gt;&lt;B&gt;C&lt;/B&gt;&lt;/A&gt;&#39;</span><span class="p">):</span>
            <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
            <span class="n">dom2</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="n">dom</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
                <span class="n">dom</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">toxml</span><span class="p">(),</span>
                <span class="n">dom2</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">toxml</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="MinidomTest.testProcessingInstruction"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testProcessingInstruction">[docs]</a>    <span class="k">def</span> <span class="nf">testProcessingInstruction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&#39;&lt;e&gt;&lt;?mypi </span><span class="se">\t\n</span><span class="s"> data </span><span class="se">\t\n</span><span class="s"> ?&gt;&lt;/e&gt;&#39;</span><span class="p">)</span>
        <span class="n">pi</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">firstChild</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">pi</span><span class="o">.</span><span class="n">target</span> <span class="o">==</span> <span class="s">&quot;mypi&quot;</span>
                <span class="ow">and</span> <span class="n">pi</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="s">&quot;data </span><span class="se">\t\n</span><span class="s"> &quot;</span>
                <span class="ow">and</span> <span class="n">pi</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="s">&quot;mypi&quot;</span>
                <span class="ow">and</span> <span class="n">pi</span><span class="o">.</span><span class="n">nodeType</span> <span class="o">==</span> <span class="n">Node</span><span class="o">.</span><span class="n">PROCESSING_INSTRUCTION_NODE</span>
                <span class="ow">and</span> <span class="n">pi</span><span class="o">.</span><span class="n">attributes</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">pi</span><span class="o">.</span><span class="n">hasChildNodes</span><span class="p">()</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">pi</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="ow">and</span> <span class="n">pi</span><span class="o">.</span><span class="n">firstChild</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">pi</span><span class="o">.</span><span class="n">lastChild</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">pi</span><span class="o">.</span><span class="n">localName</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">pi</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">==</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testProcessingInstructionRepr"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testProcessingInstructionRepr">[docs]</a>    <span class="k">def</span> <span class="nf">testProcessingInstructionRepr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testTextRepr"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testTextRepr">[docs]</a>    <span class="k">def</span> <span class="nf">testTextRepr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testWriteText"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testWriteText">[docs]</a>    <span class="k">def</span> <span class="nf">testWriteText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testDocumentElement"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testDocumentElement">[docs]</a>    <span class="k">def</span> <span class="nf">testDocumentElement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testTooManyDocumentElements"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testTooManyDocumentElements">[docs]</a>    <span class="k">def</span> <span class="nf">testTooManyDocumentElements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;extra&quot;</span><span class="p">)</span>
        <span class="c"># Should raise an exception when adding an extra document element.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">HierarchyRequestErr</span><span class="p">,</span> <span class="n">doc</span><span class="o">.</span><span class="n">appendChild</span><span class="p">,</span> <span class="n">elem</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testCreateElementNS"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testCreateElementNS">[docs]</a>    <span class="k">def</span> <span class="nf">testCreateElementNS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testCreateAttributeNS"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testCreateAttributeNS">[docs]</a>    <span class="k">def</span> <span class="nf">testCreateAttributeNS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testParse"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testParse">[docs]</a>    <span class="k">def</span> <span class="nf">testParse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testParseString"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testParseString">[docs]</a>    <span class="k">def</span> <span class="nf">testParseString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testComment"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testComment">[docs]</a>    <span class="k">def</span> <span class="nf">testComment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAttrListItem"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAttrListItem">[docs]</a>    <span class="k">def</span> <span class="nf">testAttrListItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAttrListItems"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAttrListItems">[docs]</a>    <span class="k">def</span> <span class="nf">testAttrListItems</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAttrListItemNS"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAttrListItemNS">[docs]</a>    <span class="k">def</span> <span class="nf">testAttrListItemNS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAttrListKeys"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAttrListKeys">[docs]</a>    <span class="k">def</span> <span class="nf">testAttrListKeys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAttrListKeysNS"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAttrListKeysNS">[docs]</a>    <span class="k">def</span> <span class="nf">testAttrListKeysNS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testRemoveNamedItem"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testRemoveNamedItem">[docs]</a>    <span class="k">def</span> <span class="nf">testRemoveNamedItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc a=&#39;&#39;/&gt;&quot;</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">attributes</span>
        <span class="n">a1</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="n">a2</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">removeNamedItem</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">a1</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">a2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">NotFoundErr</span><span class="p">,</span> <span class="n">attrs</span><span class="o">.</span><span class="n">removeNamedItem</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testRemoveNamedItemNS"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testRemoveNamedItemNS">[docs]</a>    <span class="k">def</span> <span class="nf">testRemoveNamedItemNS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc xmlns:a=&#39;http://xml.python.org/&#39; a:b=&#39;&#39;/&gt;&quot;</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">attributes</span>
        <span class="n">a1</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getAttributeNodeNS</span><span class="p">(</span><span class="s">&quot;http://xml.python.org/&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">)</span>
        <span class="n">a2</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">removeNamedItemNS</span><span class="p">(</span><span class="s">&quot;http://xml.python.org/&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">a1</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">a2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">NotFoundErr</span><span class="p">,</span> <span class="n">attrs</span><span class="o">.</span><span class="n">removeNamedItemNS</span><span class="p">,</span>
                          <span class="s">&quot;http://xml.python.org/&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAttrListValues"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAttrListValues">[docs]</a>    <span class="k">def</span> <span class="nf">testAttrListValues</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAttrListLength"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAttrListLength">[docs]</a>    <span class="k">def</span> <span class="nf">testAttrListLength</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAttrList__getitem__"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAttrList__getitem__">[docs]</a>    <span class="k">def</span> <span class="nf">testAttrList__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testAttrList__setitem__"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testAttrList__setitem__">[docs]</a>    <span class="k">def</span> <span class="nf">testAttrList__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testSetAttrValueandNodeValue"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testSetAttrValueandNodeValue">[docs]</a>    <span class="k">def</span> <span class="nf">testSetAttrValueandNodeValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testParseElement"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testParseElement">[docs]</a>    <span class="k">def</span> <span class="nf">testParseElement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testParseAttributes"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testParseAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">testParseAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testParseElementNamespaces"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testParseElementNamespaces">[docs]</a>    <span class="k">def</span> <span class="nf">testParseElementNamespaces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testParseAttributeNamespaces"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testParseAttributeNamespaces">[docs]</a>    <span class="k">def</span> <span class="nf">testParseAttributeNamespaces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testParseProcessingInstructions"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testParseProcessingInstructions">[docs]</a>    <span class="k">def</span> <span class="nf">testParseProcessingInstructions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testChildNodes"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testChildNodes">[docs]</a>    <span class="k">def</span> <span class="nf">testChildNodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testFirstChild"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testFirstChild">[docs]</a>    <span class="k">def</span> <span class="nf">testFirstChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="MinidomTest.testHasChildNodes"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testHasChildNodes">[docs]</a>    <span class="k">def</span> <span class="nf">testHasChildNodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc&gt;&lt;foo/&gt;&lt;/doc&gt;&quot;</span><span class="p">)</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">hasChildNodes</span><span class="p">())</span>
        <span class="n">dom2</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">doc2</span> <span class="o">=</span> <span class="n">dom2</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">doc2</span><span class="o">.</span><span class="n">hasChildNodes</span><span class="p">())</span>
</div>
    <span class="k">def</span> <span class="nf">_testCloneElementCopiesAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">test</span><span class="p">):</span>
        <span class="n">attrs1</span> <span class="o">=</span> <span class="n">e1</span><span class="o">.</span><span class="n">attributes</span>
        <span class="n">attrs2</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">attributes</span>
        <span class="n">keys1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">attrs1</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">keys2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">attrs2</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">keys1</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">keys2</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">keys1</span> <span class="o">==</span> <span class="n">keys2</span><span class="p">,</span> <span class="s">&quot;clone of element has same attribute keys&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">keys1</span><span class="p">)):</span>
            <span class="n">a1</span> <span class="o">=</span> <span class="n">attrs1</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">a2</span> <span class="o">=</span> <span class="n">attrs2</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">a1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a2</span>
                    <span class="ow">and</span> <span class="n">a1</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">a2</span><span class="o">.</span><span class="n">value</span>
                    <span class="ow">and</span> <span class="n">a1</span><span class="o">.</span><span class="n">nodeValue</span> <span class="o">==</span> <span class="n">a2</span><span class="o">.</span><span class="n">nodeValue</span>
                    <span class="ow">and</span> <span class="n">a1</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">==</span> <span class="n">a2</span><span class="o">.</span><span class="n">namespaceURI</span>
                    <span class="ow">and</span> <span class="n">a1</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="n">a2</span><span class="o">.</span><span class="n">localName</span>
                    <span class="p">,</span> <span class="s">&quot;clone of attribute node has proper attribute values&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">a2</span><span class="o">.</span><span class="n">ownerElement</span> <span class="ow">is</span> <span class="n">e2</span><span class="p">,</span>
                    <span class="s">&quot;clone of attribute node correctly owned&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setupCloneElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deep</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc attr=&#39;value&#39;&gt;&lt;foo/&gt;&lt;/doc&gt;&quot;</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">cloneNode</span><span class="p">(</span><span class="n">deep</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_testCloneElementCopiesAttributes</span><span class="p">(</span>
            <span class="n">root</span><span class="p">,</span> <span class="n">clone</span><span class="p">,</span> <span class="s">&quot;testCloneElement&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="n">deep</span> <span class="ow">and</span> <span class="s">&quot;Deep&quot;</span> <span class="ow">or</span> <span class="s">&quot;Shallow&quot;</span><span class="p">))</span>
        <span class="c"># mutilate the original so shared data is detected</span>
        <span class="n">root</span><span class="o">.</span><span class="n">tagName</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">=</span> <span class="s">&quot;MODIFIED&quot;</span>
        <span class="n">root</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;attr&quot;</span><span class="p">,</span> <span class="s">&quot;NEW VALUE&quot;</span><span class="p">)</span>
        <span class="n">root</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;added&quot;</span><span class="p">,</span> <span class="s">&quot;VALUE&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dom</span><span class="p">,</span> <span class="n">clone</span>

<div class="viewcode-block" id="MinidomTest.testCloneElementShallow"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testCloneElementShallow">[docs]</a>    <span class="k">def</span> <span class="nf">testCloneElementShallow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span><span class="p">,</span> <span class="n">clone</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_setupCloneElement</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">toxml</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;&lt;doc attr=&quot;value&quot;/&gt;&#39;</span>
                <span class="p">,</span> <span class="s">&quot;testCloneElementShallow&quot;</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testCloneElementDeep"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testCloneElementDeep">[docs]</a>    <span class="k">def</span> <span class="nf">testCloneElementDeep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span><span class="p">,</span> <span class="n">clone</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_setupCloneElement</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">toxml</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;&lt;doc attr=&quot;value&quot;&gt;&lt;foo/&gt;&lt;/doc&gt;&#39;</span>
                <span class="p">,</span> <span class="s">&quot;testCloneElementDeep&quot;</span><span class="p">)</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testCloneDocumentShallow"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testCloneDocumentShallow">[docs]</a>    <span class="k">def</span> <span class="nf">testCloneDocumentShallow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;?xml version=&#39;1.0&#39;?&gt;</span><span class="se">\n</span><span class="s">&quot;</span>
                    <span class="s">&quot;&lt;!-- comment --&gt;&quot;</span>
                    <span class="s">&quot;&lt;!DOCTYPE doc [</span><span class="se">\n</span><span class="s">&quot;</span>
                    <span class="s">&quot;&lt;!NOTATION notation SYSTEM &#39;http://xml.python.org/&#39;&gt;</span><span class="se">\n</span><span class="s">&quot;</span>
                    <span class="s">&quot;]&gt;</span><span class="se">\n</span><span class="s">&quot;</span>
                    <span class="s">&quot;&lt;doc attr=&#39;value&#39;/&gt;&quot;</span><span class="p">)</span>
        <span class="n">doc2</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">cloneNode</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">doc2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&quot;testCloneDocumentShallow:&quot;</span>
                <span class="s">&quot; shallow cloning of documents makes no sense!&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testCloneDocumentDeep"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testCloneDocumentDeep">[docs]</a>    <span class="k">def</span> <span class="nf">testCloneDocumentDeep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;?xml version=&#39;1.0&#39;?&gt;</span><span class="se">\n</span><span class="s">&quot;</span>
                    <span class="s">&quot;&lt;!-- comment --&gt;&quot;</span>
                    <span class="s">&quot;&lt;!DOCTYPE doc [</span><span class="se">\n</span><span class="s">&quot;</span>
                    <span class="s">&quot;&lt;!NOTATION notation SYSTEM &#39;http://xml.python.org/&#39;&gt;</span><span class="se">\n</span><span class="s">&quot;</span>
                    <span class="s">&quot;]&gt;</span><span class="se">\n</span><span class="s">&quot;</span>
                    <span class="s">&quot;&lt;doc attr=&#39;value&#39;/&gt;&quot;</span><span class="p">)</span>
        <span class="n">doc2</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">cloneNode</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="ow">not</span> <span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc2</span><span class="p">)</span> <span class="ow">or</span> <span class="n">doc2</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="p">)),</span>
                <span class="s">&quot;testCloneDocumentDeep: document objects not distinct&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">doc2</span><span class="o">.</span><span class="n">childNodes</span><span class="p">),</span>
                <span class="s">&quot;testCloneDocumentDeep: wrong number of Document children&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">doc2</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">nodeType</span> <span class="o">==</span> <span class="n">Node</span><span class="o">.</span><span class="n">ELEMENT_NODE</span><span class="p">,</span>
                <span class="s">&quot;testCloneDocumentDeep: documentElement not an ELEMENT_NODE&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">doc2</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">ownerDocument</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc2</span><span class="p">),</span>
            <span class="s">&quot;testCloneDocumentDeep: documentElement owner is not new document&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="ow">not</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc2</span><span class="o">.</span><span class="n">documentElement</span><span class="p">),</span>
                <span class="s">&quot;testCloneDocumentDeep: documentElement should not be shared&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">doc</span><span class="o">.</span><span class="n">doctype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># check the doctype iff the original DOM maintained it</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">doc2</span><span class="o">.</span><span class="n">doctype</span><span class="o">.</span><span class="n">nodeType</span> <span class="o">==</span> <span class="n">Node</span><span class="o">.</span><span class="n">DOCUMENT_TYPE_NODE</span><span class="p">,</span>
                    <span class="s">&quot;testCloneDocumentDeep: doctype not a DOCUMENT_TYPE_NODE&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">doc2</span><span class="o">.</span><span class="n">doctype</span><span class="o">.</span><span class="n">ownerDocument</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc2</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="ow">not</span> <span class="n">doc</span><span class="o">.</span><span class="n">doctype</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc2</span><span class="o">.</span><span class="n">doctype</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="MinidomTest.testCloneDocumentTypeDeepOk"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testCloneDocumentTypeDeepOk">[docs]</a>    <span class="k">def</span> <span class="nf">testCloneDocumentTypeDeepOk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doctype</span> <span class="o">=</span> <span class="n">create_nonempty_doctype</span><span class="p">()</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="n">doctype</span><span class="o">.</span><span class="n">cloneNode</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">clone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="n">doctype</span><span class="o">.</span><span class="n">nodeName</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">doctype</span><span class="o">.</span><span class="n">name</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">publicId</span> <span class="o">==</span> <span class="n">doctype</span><span class="o">.</span><span class="n">publicId</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">systemId</span> <span class="o">==</span> <span class="n">doctype</span><span class="o">.</span><span class="n">systemId</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">doctype</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">entities</span><span class="p">))</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">notations</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">doctype</span><span class="o">.</span><span class="n">notations</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">notations</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">notations</span><span class="p">))</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">doctype</span><span class="o">.</span><span class="n">entities</span><span class="p">)):</span>
            <span class="n">se</span> <span class="o">=</span> <span class="n">doctype</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">ce</span> <span class="o">=</span> <span class="n">clone</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">((</span><span class="ow">not</span> <span class="n">se</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">ce</span><span class="p">))</span>
                    <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">ce</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">se</span><span class="p">))</span>
                    <span class="ow">and</span> <span class="n">ce</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="n">se</span><span class="o">.</span><span class="n">nodeName</span>
                    <span class="ow">and</span> <span class="n">ce</span><span class="o">.</span><span class="n">notationName</span> <span class="o">==</span> <span class="n">se</span><span class="o">.</span><span class="n">notationName</span>
                    <span class="ow">and</span> <span class="n">ce</span><span class="o">.</span><span class="n">publicId</span> <span class="o">==</span> <span class="n">se</span><span class="o">.</span><span class="n">publicId</span>
                    <span class="ow">and</span> <span class="n">ce</span><span class="o">.</span><span class="n">systemId</span> <span class="o">==</span> <span class="n">se</span><span class="o">.</span><span class="n">systemId</span>
                    <span class="ow">and</span> <span class="n">ce</span><span class="o">.</span><span class="n">encoding</span> <span class="o">==</span> <span class="n">se</span><span class="o">.</span><span class="n">encoding</span>
                    <span class="ow">and</span> <span class="n">ce</span><span class="o">.</span><span class="n">actualEncoding</span> <span class="o">==</span> <span class="n">se</span><span class="o">.</span><span class="n">actualEncoding</span>
                    <span class="ow">and</span> <span class="n">ce</span><span class="o">.</span><span class="n">version</span> <span class="o">==</span> <span class="n">se</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">doctype</span><span class="o">.</span><span class="n">notations</span><span class="p">)):</span>
            <span class="n">sn</span> <span class="o">=</span> <span class="n">doctype</span><span class="o">.</span><span class="n">notations</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">cn</span> <span class="o">=</span> <span class="n">clone</span><span class="o">.</span><span class="n">notations</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">((</span><span class="ow">not</span> <span class="n">sn</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">cn</span><span class="p">))</span>
                    <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">cn</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">sn</span><span class="p">))</span>
                    <span class="ow">and</span> <span class="n">cn</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="n">sn</span><span class="o">.</span><span class="n">nodeName</span>
                    <span class="ow">and</span> <span class="n">cn</span><span class="o">.</span><span class="n">publicId</span> <span class="o">==</span> <span class="n">sn</span><span class="o">.</span><span class="n">publicId</span>
                    <span class="ow">and</span> <span class="n">cn</span><span class="o">.</span><span class="n">systemId</span> <span class="o">==</span> <span class="n">sn</span><span class="o">.</span><span class="n">systemId</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testCloneDocumentTypeDeepNotOk"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testCloneDocumentTypeDeepNotOk">[docs]</a>    <span class="k">def</span> <span class="nf">testCloneDocumentTypeDeepNotOk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">create_doc_with_doctype</span><span class="p">()</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">doctype</span><span class="o">.</span><span class="n">cloneNode</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">clone</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&quot;testCloneDocumentTypeDeepNotOk&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testCloneDocumentTypeShallowOk"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testCloneDocumentTypeShallowOk">[docs]</a>    <span class="k">def</span> <span class="nf">testCloneDocumentTypeShallowOk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doctype</span> <span class="o">=</span> <span class="n">create_nonempty_doctype</span><span class="p">()</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="n">doctype</span><span class="o">.</span><span class="n">cloneNode</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">clone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="n">doctype</span><span class="o">.</span><span class="n">nodeName</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">doctype</span><span class="o">.</span><span class="n">name</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">publicId</span> <span class="o">==</span> <span class="n">doctype</span><span class="o">.</span><span class="n">publicId</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">systemId</span> <span class="o">==</span> <span class="n">doctype</span><span class="o">.</span><span class="n">systemId</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">notations</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">notations</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testCloneDocumentTypeShallowNotOk"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testCloneDocumentTypeShallowNotOk">[docs]</a>    <span class="k">def</span> <span class="nf">testCloneDocumentTypeShallowNotOk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">create_doc_with_doctype</span><span class="p">()</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">doctype</span><span class="o">.</span><span class="n">cloneNode</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">clone</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&quot;testCloneDocumentTypeShallowNotOk&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.check_import_document"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.check_import_document">[docs]</a>    <span class="k">def</span> <span class="nf">check_import_document</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deep</span><span class="p">,</span> <span class="n">testName</span><span class="p">):</span>
        <span class="n">doc1</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">doc2</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">NotSupportedErr</span><span class="p">,</span> <span class="n">doc1</span><span class="o">.</span><span class="n">importNode</span><span class="p">,</span> <span class="n">doc2</span><span class="p">,</span> <span class="n">deep</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testImportDocumentShallow"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testImportDocumentShallow">[docs]</a>    <span class="k">def</span> <span class="nf">testImportDocumentShallow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_import_document</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;testImportDocumentShallow&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testImportDocumentDeep"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testImportDocumentDeep">[docs]</a>    <span class="k">def</span> <span class="nf">testImportDocumentDeep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_import_document</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;testImportDocumentDeep&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testImportDocumentTypeShallow"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testImportDocumentTypeShallow">[docs]</a>    <span class="k">def</span> <span class="nf">testImportDocumentTypeShallow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">src</span> <span class="o">=</span> <span class="n">create_doc_with_doctype</span><span class="p">()</span>
        <span class="n">target</span> <span class="o">=</span> <span class="n">create_doc_without_doctype</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">NotSupportedErr</span><span class="p">,</span> <span class="n">target</span><span class="o">.</span><span class="n">importNode</span><span class="p">,</span>
                          <span class="n">src</span><span class="o">.</span><span class="n">doctype</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testImportDocumentTypeDeep"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testImportDocumentTypeDeep">[docs]</a>    <span class="k">def</span> <span class="nf">testImportDocumentTypeDeep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">src</span> <span class="o">=</span> <span class="n">create_doc_with_doctype</span><span class="p">()</span>
        <span class="n">target</span> <span class="o">=</span> <span class="n">create_doc_without_doctype</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">NotSupportedErr</span><span class="p">,</span> <span class="n">target</span><span class="o">.</span><span class="n">importNode</span><span class="p">,</span>
                          <span class="n">src</span><span class="o">.</span><span class="n">doctype</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c"># Testing attribute clones uses a helper, and should always be deep,</span>
    <span class="c"># even if the argument to cloneNode is false.</span></div>
<div class="viewcode-block" id="MinidomTest.check_clone_attribute"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.check_clone_attribute">[docs]</a>    <span class="k">def</span> <span class="nf">check_clone_attribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deep</span><span class="p">,</span> <span class="n">testName</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc attr=&#39;value&#39;/&gt;&quot;</span><span class="p">)</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;attr&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">cloneNode</span><span class="p">(</span><span class="n">deep</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="ow">not</span> <span class="n">clone</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">clone</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">ownerElement</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">,</span>
                <span class="n">testName</span> <span class="o">+</span> <span class="s">&quot;: ownerElement should be None&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">ownerDocument</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">ownerDocument</span><span class="p">),</span>
                <span class="n">testName</span> <span class="o">+</span> <span class="s">&quot;: ownerDocument does not match&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">specified</span><span class="p">,</span>
                <span class="n">testName</span> <span class="o">+</span> <span class="s">&quot;: cloned attribute must have specified == True&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testCloneAttributeShallow"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testCloneAttributeShallow">[docs]</a>    <span class="k">def</span> <span class="nf">testCloneAttributeShallow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_clone_attribute</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;testCloneAttributeShallow&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testCloneAttributeDeep"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testCloneAttributeDeep">[docs]</a>    <span class="k">def</span> <span class="nf">testCloneAttributeDeep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_clone_attribute</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;testCloneAttributeDeep&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.check_clone_pi"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.check_clone_pi">[docs]</a>    <span class="k">def</span> <span class="nf">check_clone_pi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deep</span><span class="p">,</span> <span class="n">testName</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;?target data?&gt;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">pi</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">firstChild</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pi</span><span class="o">.</span><span class="n">nodeType</span><span class="p">,</span> <span class="n">Node</span><span class="o">.</span><span class="n">PROCESSING_INSTRUCTION_NODE</span><span class="p">)</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="n">pi</span><span class="o">.</span><span class="n">cloneNode</span><span class="p">(</span><span class="n">deep</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">clone</span><span class="o">.</span><span class="n">target</span> <span class="o">==</span> <span class="n">pi</span><span class="o">.</span><span class="n">target</span>
                <span class="ow">and</span> <span class="n">clone</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="n">pi</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testClonePIShallow"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testClonePIShallow">[docs]</a>    <span class="k">def</span> <span class="nf">testClonePIShallow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_clone_pi</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;testClonePIShallow&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testClonePIDeep"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testClonePIDeep">[docs]</a>    <span class="k">def</span> <span class="nf">testClonePIDeep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_clone_pi</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;testClonePIDeep&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testNormalize"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testNormalize">[docs]</a>    <span class="k">def</span> <span class="nf">testNormalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;first&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;second&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span>
                <span class="s">&quot;testNormalize -- preparation&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span> <span class="ow">is</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="s">&quot;firstsecond&quot;</span>
                <span class="p">,</span> <span class="s">&quot;testNormalize -- result&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>

        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s">&quot;testNormalize -- single empty node removed&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testNormalizeCombineAndNextSibling"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testNormalizeCombineAndNextSibling">[docs]</a>    <span class="k">def</span> <span class="nf">testNormalizeCombineAndNextSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;first&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;second&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;i&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span>
                <span class="s">&quot;testNormalizeCombineAndNextSibling -- preparation&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="s">&quot;firstsecond&quot;</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="p">,</span> <span class="s">&quot;testNormalizeCombinedAndNextSibling -- result&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testNormalizeDeleteWithPrevSibling"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testNormalizeDeleteWithPrevSibling">[docs]</a>    <span class="k">def</span> <span class="nf">testNormalizeDeleteWithPrevSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;first&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span>
                <span class="s">&quot;testNormalizeDeleteWithPrevSibling -- preparation&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="s">&quot;first&quot;</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span> <span class="ow">is</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="p">,</span> <span class="s">&quot;testNormalizeDeleteWithPrevSibling -- result&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testNormalizeDeleteWithNextSibling"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testNormalizeDeleteWithNextSibling">[docs]</a>    <span class="k">def</span> <span class="nf">testNormalizeDeleteWithNextSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;second&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span>
                <span class="s">&quot;testNormalizeDeleteWithNextSibling -- preparation&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="s">&quot;second&quot;</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span> <span class="ow">is</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="p">,</span> <span class="s">&quot;testNormalizeDeleteWithNextSibling -- result&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testNormalizeDeleteWithTwoNonTextSiblings"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testNormalizeDeleteWithTwoNonTextSiblings">[docs]</a>    <span class="k">def</span> <span class="nf">testNormalizeDeleteWithTwoNonTextSiblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;i&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;i&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span>
                <span class="s">&quot;testNormalizeDeleteWithTwoSiblings -- preparation&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="p">,</span> <span class="s">&quot;testNormalizeDeleteWithTwoSiblings -- result&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testNormalizeDeleteAndCombine"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testNormalizeDeleteAndCombine">[docs]</a>    <span class="k">def</span> <span class="nf">testNormalizeDeleteAndCombine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;second&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;fourth&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">5</span><span class="p">,</span>
                <span class="s">&quot;testNormalizeDeleteAndCombine -- preparation&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span> <span class="ow">is</span> <span class="n">root</span><span class="o">.</span><span class="n">lastChild</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="s">&quot;secondfourth&quot;</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="p">,</span> <span class="s">&quot;testNormalizeDeleteAndCombine -- result&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testNormalizeRecursion"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testNormalizeRecursion">[docs]</a>    <span class="k">def</span> <span class="nf">testNormalizeRecursion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc&gt;&quot;</span>
                            <span class="s">&quot;&lt;o&gt;&quot;</span>
                              <span class="s">&quot;&lt;i/&gt;&quot;</span>
                              <span class="s">&quot;t&quot;</span>
                              <span class="c">#</span>
                              <span class="c">#x</span>
                            <span class="s">&quot;&lt;/o&gt;&quot;</span>
                            <span class="s">&quot;&lt;o&gt;&quot;</span>
                              <span class="s">&quot;&lt;o&gt;&quot;</span>
                                <span class="s">&quot;t2&quot;</span>
                                <span class="c">#x2</span>
                              <span class="s">&quot;&lt;/o&gt;&quot;</span>
                              <span class="s">&quot;t3&quot;</span>
                              <span class="c">#x3</span>
                            <span class="s">&quot;&lt;/o&gt;&quot;</span>
                            <span class="c">#</span>
                          <span class="s">&quot;&lt;/doc&gt;&quot;</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;x2&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;x3&quot;</span><span class="p">))</span>
        <span class="n">root</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">3</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">4</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">3</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="p">,</span> <span class="s">&quot;testNormalize2 -- preparation&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">2</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="p">,</span> <span class="s">&quot;testNormalize2 -- childNodes lengths&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="s">&quot;tx&quot;</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="s">&quot;t2x2&quot;</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="s">&quot;t3x3&quot;</span>
                <span class="p">,</span> <span class="s">&quot;testNormalize2 -- joined text fields&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">previousSibling</span>
                        <span class="ow">is</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">nextSibling</span>
                        <span class="ow">is</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">previousSibling</span>
                        <span class="ow">is</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">nextSibling</span>
                        <span class="ow">is</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="p">,</span> <span class="s">&quot;testNormalize2 -- sibling pointers&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="MinidomTest.testBug0777884"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testBug0777884">[docs]</a>    <span class="k">def</span> <span class="nf">testBug0777884</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;o&gt;text&lt;/o&gt;&quot;</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">nodeType</span><span class="p">,</span> <span class="n">Node</span><span class="o">.</span><span class="n">TEXT_NODE</span><span class="p">)</span>
        <span class="c"># Should run quietly, doing nothing.</span>
        <span class="n">text</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testBug1433694"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testBug1433694">[docs]</a>    <span class="k">def</span> <span class="nf">testBug1433694</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;o&gt;&lt;i/&gt;t&lt;/o&gt;&quot;</span><span class="p">)</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">node</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">nodeValue</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="n">node</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">,</span>
                     <span class="s">&quot;Final child&#39;s .nextSibling should be None&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testSiblings"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testSiblings">[docs]</a>    <span class="k">def</span> <span class="nf">testSiblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc&gt;&lt;?pi?&gt;text?&lt;elm/&gt;&lt;/doc&gt;&quot;</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="p">(</span><span class="n">pi</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">elm</span><span class="p">)</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">pi</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="n">text</span> <span class="ow">and</span>
                <span class="n">pi</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span>
                <span class="n">text</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="n">elm</span> <span class="ow">and</span>
                <span class="n">text</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="n">pi</span> <span class="ow">and</span>
                <span class="n">elm</span><span class="o">.</span><span class="n">nextSibling</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span>
                <span class="n">elm</span><span class="o">.</span><span class="n">previousSibling</span> <span class="ow">is</span> <span class="n">text</span><span class="p">,</span> <span class="s">&quot;testSiblings&quot;</span><span class="p">)</span>

        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testParents"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testParents">[docs]</a>    <span class="k">def</span> <span class="nf">testParents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span>
            <span class="s">&quot;&lt;doc&gt;&lt;elm1&gt;&lt;elm2/&gt;&lt;elm2&gt;&lt;elm3/&gt;&lt;/elm2&gt;&lt;/elm1&gt;&lt;/doc&gt;&quot;</span><span class="p">)</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">elm1</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="p">(</span><span class="n">elm2a</span><span class="p">,</span> <span class="n">elm2b</span><span class="p">)</span> <span class="o">=</span> <span class="n">elm1</span><span class="o">.</span><span class="n">childNodes</span>
        <span class="n">elm3</span> <span class="o">=</span> <span class="n">elm2b</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="n">doc</span> <span class="ow">and</span>
                <span class="n">elm1</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="n">root</span> <span class="ow">and</span>
                <span class="n">elm2a</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="n">elm1</span> <span class="ow">and</span>
                <span class="n">elm2b</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="n">elm1</span> <span class="ow">and</span>
                <span class="n">elm3</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="n">elm2b</span><span class="p">,</span> <span class="s">&quot;testParents&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testNodeListItem"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testNodeListItem">[docs]</a>    <span class="k">def</span> <span class="nf">testNodeListItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc&gt;&lt;e/&gt;&lt;e/&gt;&lt;/doc&gt;&quot;</span><span class="p">)</span>
        <span class="n">children</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">childNodes</span>
        <span class="n">docelem</span> <span class="o">=</span> <span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="n">children</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">children</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">docelem</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="ow">is</span> <span class="n">docelem</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="ow">and</span> <span class="n">docelem</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="ow">is</span> <span class="n">docelem</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="ow">and</span> <span class="n">docelem</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">childNodes</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&quot;test NodeList.item()&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testEncodings"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testEncodings">[docs]</a>    <span class="k">def</span> <span class="nf">testEncodings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&#39;&lt;foo&gt;&amp;#x20ac;&lt;/foo&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">toxml</span><span class="p">(),</span>
                         <span class="s">&#39;&lt;?xml version=&quot;1.0&quot; ?&gt;&lt;foo&gt;</span><span class="se">\u20ac</span><span class="s">&lt;/foo&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">toxml</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">),</span>
            <span class="n">b</span><span class="s">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;foo&gt;</span><span class="se">\xe2\x82\xac</span><span class="s">&lt;/foo&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">toxml</span><span class="p">(</span><span class="s">&#39;iso-8859-15&#39;</span><span class="p">),</span>
            <span class="n">b</span><span class="s">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-15&quot;?&gt;&lt;foo&gt;</span><span class="se">\xa4</span><span class="s">&lt;/foo&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">toxml</span><span class="p">(</span><span class="s">&#39;us-ascii&#39;</span><span class="p">),</span>
            <span class="n">b</span><span class="s">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;us-ascii&quot;?&gt;&lt;foo&gt;&amp;#8364;&lt;/foo&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">toxml</span><span class="p">(</span><span class="s">&#39;utf-16&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-16&quot;?&gt;&#39;</span>
            <span class="s">&#39;&lt;foo&gt;</span><span class="se">\u20ac</span><span class="s">&lt;/foo&gt;&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-16&#39;</span><span class="p">))</span>

        <span class="c"># Verify that character decoding errors raise exceptions instead</span>
        <span class="c"># of crashing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="n">parseString</span><span class="p">,</span>
                <span class="n">b</span><span class="s">&#39;&lt;fran</span><span class="se">\xe7</span><span class="s">ais&gt;Comment </span><span class="se">\xe7</span><span class="s">a va ? Tr</span><span class="se">\xe8</span><span class="s">s bien ?&lt;/fran</span><span class="se">\xe7</span><span class="s">ais&gt;&#39;</span><span class="p">)</span>

        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.UserDataHandler"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.UserDataHandler">[docs]</a>    <span class="k">class</span> <span class="nc">UserDataHandler</span><span class="p">:</span>
        <span class="n">called</span> <span class="o">=</span> <span class="mi">0</span>
<div class="viewcode-block" id="MinidomTest.UserDataHandler.handle"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.UserDataHandler.handle">[docs]</a>        <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">):</span>
            <span class="n">dst</span><span class="o">.</span><span class="n">setUserData</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">data</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="n">src</span><span class="o">.</span><span class="n">setUserData</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">called</span> <span class="o">=</span> <span class="mi">1</span>
</div></div>
<div class="viewcode-block" id="MinidomTest.testUserData"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testUserData">[docs]</a>    <span class="k">def</span> <span class="nf">testUserData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">Document</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">getUserData</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span>
        <span class="n">n</span><span class="o">.</span><span class="n">setUserData</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">getUserData</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span>
        <span class="n">n</span><span class="o">.</span><span class="n">setUserData</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
        <span class="n">n</span><span class="o">.</span><span class="n">setUserData</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">getUserData</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">12</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">getUserData</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">13</span><span class="p">)</span>
        <span class="n">n</span><span class="o">.</span><span class="n">setUserData</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">getUserData</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">getUserData</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">13</span><span class="p">)</span>

        <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">UserDataHandler</span><span class="p">()</span>
        <span class="n">n</span><span class="o">.</span><span class="n">setUserData</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">cloneNode</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">handler</span><span class="o">.</span><span class="n">called</span>
                <span class="ow">and</span> <span class="n">n</span><span class="o">.</span><span class="n">getUserData</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">getUserData</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">13</span><span class="p">)</span>
        <span class="n">n</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="n">dom</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.checkRenameNodeSharedConstraints"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.checkRenameNodeSharedConstraints">[docs]</a>    <span class="k">def</span> <span class="nf">checkRenameNodeSharedConstraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="c"># Make sure illegal NS usage is detected:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">NamespaceErr</span><span class="p">,</span> <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span>
                          <span class="s">&quot;http://xml.python.org/ns&quot;</span><span class="p">,</span> <span class="s">&quot;xmlns:foo&quot;</span><span class="p">)</span>
        <span class="n">doc2</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">WrongDocumentErr</span><span class="p">,</span> <span class="n">doc2</span><span class="o">.</span><span class="n">renameNode</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span>
                          <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testRenameAttribute"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testRenameAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">testRenameAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc a=&#39;v&#39;/&gt;&quot;</span><span class="p">)</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">attrmap</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attributes</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>

        <span class="c"># Simple renaming</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&quot;b&quot;</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="s">&quot;b&quot;</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">localName</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">==</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;v&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">attrmap</span><span class="p">[</span><span class="s">&quot;b&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">ownerDocument</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">ownerElement</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">elem</span><span class="p">))</span>

        <span class="c"># Rename to have a namespace, no prefix</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="s">&quot;http://xml.python.org/ns&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&quot;c&quot;</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="s">&quot;c&quot;</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;c&quot;</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">==</span> <span class="s">&quot;http://xml.python.org/ns&quot;</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;v&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;c&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNodeNS</span><span class="p">(</span>
                    <span class="s">&quot;http://xml.python.org/ns&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">attrmap</span><span class="p">[</span><span class="s">&quot;c&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">attrmap</span><span class="p">[(</span><span class="s">&quot;http://xml.python.org/ns&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">)]</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">))</span>

        <span class="c"># Rename to have a namespace, with prefix</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="s">&quot;http://xml.python.org/ns2&quot;</span><span class="p">,</span> <span class="s">&quot;p:d&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&quot;p:d&quot;</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="s">&quot;p:d&quot;</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;d&quot;</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">==</span> <span class="s">&quot;http://xml.python.org/ns2&quot;</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">prefix</span> <span class="o">==</span> <span class="s">&quot;p&quot;</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;v&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;c&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNodeNS</span><span class="p">(</span>
                    <span class="s">&quot;http://xml.python.org/ns&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;p:d&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNodeNS</span><span class="p">(</span>
                    <span class="s">&quot;http://xml.python.org/ns2&quot;</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">attrmap</span><span class="p">[</span><span class="s">&quot;p:d&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">attrmap</span><span class="p">[(</span><span class="s">&quot;http://xml.python.org/ns2&quot;</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">)]</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">))</span>

        <span class="c"># Rename back to a simple non-NS node</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">,</span> <span class="s">&quot;e&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&quot;e&quot;</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="s">&quot;e&quot;</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">localName</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">==</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&quot;v&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;c&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;p:d&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNodeNS</span><span class="p">(</span>
                    <span class="s">&quot;http://xml.python.org/ns&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;e&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">attrmap</span><span class="p">[</span><span class="s">&quot;e&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">attr</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">NamespaceErr</span><span class="p">,</span> <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span>
                          <span class="s">&quot;http://xml.python.org/ns&quot;</span><span class="p">,</span> <span class="s">&quot;xmlns&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkRenameNodeSharedConstraints</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testRenameElement"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testRenameElement">[docs]</a>    <span class="k">def</span> <span class="nf">testRenameElement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc/&gt;&quot;</span><span class="p">)</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>

        <span class="c"># Simple renaming</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s">&quot;a&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="s">&quot;a&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">localName</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">==</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">ownerDocument</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span>

        <span class="c"># Rename to have a namespace, no prefix</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="s">&quot;http://xml.python.org/ns&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s">&quot;b&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="s">&quot;b&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;b&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">==</span> <span class="s">&quot;http://xml.python.org/ns&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">ownerDocument</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span>

        <span class="c"># Rename to have a namespace, with prefix</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="s">&quot;http://xml.python.org/ns2&quot;</span><span class="p">,</span> <span class="s">&quot;p:c&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s">&quot;p:c&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="s">&quot;p:c&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">localName</span> <span class="o">==</span> <span class="s">&quot;c&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">==</span> <span class="s">&quot;http://xml.python.org/ns2&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">prefix</span> <span class="o">==</span> <span class="s">&quot;p&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">ownerDocument</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span>

        <span class="c"># Rename back to a simple non-NS node</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s">&quot;d&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="s">&quot;d&quot;</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">localName</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">==</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">ownerDocument</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">checkRenameNodeSharedConstraints</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">elem</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testRenameOther"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testRenameOther">[docs]</a>    <span class="k">def</span> <span class="nf">testRenameOther</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># We have to create a comment node explicitly since not all DOM</span>
        <span class="c"># builders used with minidom add comments to the DOM.</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">minidom</span><span class="o">.</span><span class="n">getDOMImplementation</span><span class="p">()</span><span class="o">.</span><span class="n">createDocument</span><span class="p">(</span>
            <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">,</span> <span class="s">&quot;e&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">createComment</span><span class="p">(</span><span class="s">&quot;comment&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">NotSupportedErr</span><span class="p">,</span> <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span>
                          <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MinidomTest.testWholeText"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testWholeText">[docs]</a>    <span class="k">def</span> <span class="nf">testWholeText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc&gt;a&lt;/doc&gt;&quot;</span><span class="p">)</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">nodeType</span><span class="p">,</span> <span class="n">Node</span><span class="o">.</span><span class="n">TEXT_NODE</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="s">&quot;ab&quot;</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createCDATASection</span><span class="p">(</span><span class="s">&quot;c&quot;</span><span class="p">),</span> <span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="s">&quot;cab&quot;</span><span class="p">)</span>

        <span class="c"># make sure we don&#39;t cross other nodes</span>
        <span class="n">splitter</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">createComment</span><span class="p">(</span><span class="s">&quot;comment&quot;</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">splitter</span><span class="p">)</span>
        <span class="n">text2</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;d&quot;</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">text2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="s">&quot;cab&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text2</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">)</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">replaceChild</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">splitter</span><span class="p">)</span>
        <span class="n">splitter</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="s">&quot;cab&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text2</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">)</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">createProcessingInstruction</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span> <span class="s">&quot;z&quot;</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">replaceChild</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">splitter</span><span class="p">)</span>
        <span class="n">splitter</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="s">&quot;cab&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text2</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">)</span>

        <span class="n">elem</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="n">splitter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="s">&quot;cabd&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text2</span><span class="p">,</span> <span class="s">&quot;cabd&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testPatch1094164"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testPatch1094164">[docs]</a>    <span class="k">def</span> <span class="nf">testPatch1094164</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc&gt;&lt;e/&gt;&lt;/doc&gt;&quot;</span><span class="p">)</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">firstChild</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="n">elem</span><span class="p">,</span> <span class="s">&quot;Before replaceChild()&quot;</span><span class="p">)</span>
        <span class="c"># Check that replacing a child with itself leaves the tree unchanged</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">replaceChild</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="n">elem</span><span class="p">,</span> <span class="s">&quot;After replaceChild()&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testReplaceWholeText"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testReplaceWholeText">[docs]</a>    <span class="k">def</span> <span class="nf">testReplaceWholeText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">setup</span><span class="p">():</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc&gt;a&lt;e/&gt;d&lt;/doc&gt;&quot;</span><span class="p">)</span>
            <span class="n">elem</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
            <span class="n">text1</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">firstChild</span>
            <span class="n">text2</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">lastChild</span>
            <span class="n">splitter</span> <span class="o">=</span> <span class="n">text1</span><span class="o">.</span><span class="n">nextSibling</span>
            <span class="n">elem</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">),</span> <span class="n">splitter</span><span class="p">)</span>
            <span class="n">elem</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createCDATASection</span><span class="p">(</span><span class="s">&quot;c&quot;</span><span class="p">),</span> <span class="n">text1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">doc</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">text1</span><span class="p">,</span> <span class="n">splitter</span><span class="p">,</span> <span class="n">text2</span>

        <span class="n">doc</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">text1</span><span class="p">,</span> <span class="n">splitter</span><span class="p">,</span> <span class="n">text2</span> <span class="o">=</span> <span class="n">setup</span><span class="p">()</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text1</span><span class="o">.</span><span class="n">replaceWholeText</span><span class="p">(</span><span class="s">&quot;new content&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="s">&quot;new content&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text2</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span>

        <span class="n">doc</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">text1</span><span class="p">,</span> <span class="n">splitter</span><span class="p">,</span> <span class="n">text2</span> <span class="o">=</span> <span class="n">setup</span><span class="p">()</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text2</span><span class="o">.</span><span class="n">replaceWholeText</span><span class="p">(</span><span class="s">&quot;new content&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="s">&quot;new content&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="s">&quot;cab&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span>

        <span class="n">doc</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">text1</span><span class="p">,</span> <span class="n">splitter</span><span class="p">,</span> <span class="n">text2</span> <span class="o">=</span> <span class="n">setup</span><span class="p">()</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text1</span><span class="o">.</span><span class="n">replaceWholeText</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkWholeText</span><span class="p">(</span><span class="n">text2</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">text</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testSchemaType"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testSchemaType">[docs]</a>    <span class="k">def</span> <span class="nf">testSchemaType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span>
            <span class="s">&quot;&lt;!DOCTYPE doc [</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="s">&quot;  &lt;!ENTITY e1 SYSTEM &#39;http://xml.python.org/e1&#39;&gt;</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="s">&quot;  &lt;!ENTITY e2 SYSTEM &#39;http://xml.python.org/e2&#39;&gt;</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="s">&quot;  &lt;!ATTLIST doc id   ID       #IMPLIED </span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="s">&quot;                ref  IDREF    #IMPLIED </span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="s">&quot;                refs IDREFS   #IMPLIED </span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="s">&quot;                enum (a|b)    #IMPLIED </span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="s">&quot;                ent  ENTITY   #IMPLIED </span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="s">&quot;                ents ENTITIES #IMPLIED </span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="s">&quot;                nm   NMTOKEN  #IMPLIED </span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="s">&quot;                nms  NMTOKENS #IMPLIED </span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="s">&quot;                text CDATA    #IMPLIED </span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="s">&quot;    &gt;</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="s">&quot;]&gt;&lt;doc id=&#39;name&#39; notid=&#39;name&#39; text=&#39;splat!&#39; enum=&#39;b&#39;&quot;</span>
            <span class="s">&quot;       ref=&#39;name&#39; refs=&#39;name name&#39; ent=&#39;e1&#39; ents=&#39;e1 e2&#39;&quot;</span>
            <span class="s">&quot;       nm=&#39;123&#39; nms=&#39;123 abc&#39; /&gt;&quot;</span><span class="p">)</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="c"># We don&#39;t want to rely on any specific loader at this point, so</span>
        <span class="c"># just make sure we can get to all the names, and that the</span>
        <span class="c"># DTD-based namespace is right.  The names can vary by loader</span>
        <span class="c"># since each supports a different level of DTD information.</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">schemaType</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">t</span><span class="o">.</span><span class="n">namespace</span> <span class="o">==</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">)</span>
        <span class="n">names</span> <span class="o">=</span> <span class="s">&quot;id notid text enum ref refs ent ents nm nms&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">schemaType</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s">&quot;name&quot;</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="n">t</span><span class="o">.</span><span class="n">namespace</span> <span class="o">==</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testSetIdAttribute"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testSetIdAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">testSetIdAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc a1=&#39;v&#39; a2=&#39;w&#39;/&gt;&quot;</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">a1</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;a1&quot;</span><span class="p">)</span>
        <span class="n">a2</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getAttributeNode</span><span class="p">(</span><span class="s">&quot;a2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;v&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">a1</span><span class="o">.</span><span class="n">isId</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="n">e</span><span class="o">.</span><span class="n">setIdAttribute</span><span class="p">(</span><span class="s">&quot;a1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;v&quot;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">a1</span><span class="o">.</span><span class="n">isId</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="n">e</span><span class="o">.</span><span class="n">setIdAttribute</span><span class="p">(</span><span class="s">&quot;a2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;v&quot;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;w&quot;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">a1</span><span class="o">.</span><span class="n">isId</span>
                <span class="ow">and</span> <span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="c"># replace the a1 node; the new node should *not* be an ID</span>
        <span class="n">a3</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">createAttribute</span><span class="p">(</span><span class="s">&quot;a1&quot;</span><span class="p">)</span>
        <span class="n">a3</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;v&quot;</span>
        <span class="n">e</span><span class="o">.</span><span class="n">setAttributeNode</span><span class="p">(</span><span class="n">a3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;v&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;w&quot;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">a1</span><span class="o">.</span><span class="n">isId</span>
                <span class="ow">and</span> <span class="n">a2</span><span class="o">.</span><span class="n">isId</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">a3</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="c"># renaming an attribute should not affect its ID-ness:</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">,</span> <span class="s">&quot;an&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;w&quot;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testSetIdAttributeNS"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testSetIdAttributeNS">[docs]</a>    <span class="k">def</span> <span class="nf">testSetIdAttributeNS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">NS1</span> <span class="o">=</span> <span class="s">&quot;http://xml.python.org/ns1&quot;</span>
        <span class="n">NS2</span> <span class="o">=</span> <span class="s">&quot;http://xml.python.org/ns2&quot;</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc&quot;</span>
                          <span class="s">&quot; xmlns:ns1=&#39;&quot;</span> <span class="o">+</span> <span class="n">NS1</span> <span class="o">+</span> <span class="s">&quot;&#39;&quot;</span>
                          <span class="s">&quot; xmlns:ns2=&#39;&quot;</span> <span class="o">+</span> <span class="n">NS2</span> <span class="o">+</span> <span class="s">&quot;&#39;&quot;</span>
                          <span class="s">&quot; ns1:a1=&#39;v&#39; ns2:a2=&#39;w&#39;/&gt;&quot;</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">a1</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getAttributeNodeNS</span><span class="p">(</span><span class="n">NS1</span><span class="p">,</span> <span class="s">&quot;a1&quot;</span><span class="p">)</span>
        <span class="n">a2</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getAttributeNodeNS</span><span class="p">(</span><span class="n">NS2</span><span class="p">,</span> <span class="s">&quot;a2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;v&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">a1</span><span class="o">.</span><span class="n">isId</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="n">e</span><span class="o">.</span><span class="n">setIdAttributeNS</span><span class="p">(</span><span class="n">NS1</span><span class="p">,</span> <span class="s">&quot;a1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;v&quot;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">a1</span><span class="o">.</span><span class="n">isId</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="n">e</span><span class="o">.</span><span class="n">setIdAttributeNS</span><span class="p">(</span><span class="n">NS2</span><span class="p">,</span> <span class="s">&quot;a2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;v&quot;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;w&quot;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">a1</span><span class="o">.</span><span class="n">isId</span>
                <span class="ow">and</span> <span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="c"># replace the a1 node; the new node should *not* be an ID</span>
        <span class="n">a3</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">createAttributeNS</span><span class="p">(</span><span class="n">NS1</span><span class="p">,</span> <span class="s">&quot;a1&quot;</span><span class="p">)</span>
        <span class="n">a3</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;v&quot;</span>
        <span class="n">e</span><span class="o">.</span><span class="n">setAttributeNode</span><span class="p">(</span><span class="n">a3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;w&quot;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="ow">not</span> <span class="n">a1</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="ow">not</span> <span class="n">a3</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;v&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span>
        <span class="c"># renaming an attribute should not affect its ID-ness:</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">,</span> <span class="s">&quot;an&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;w&quot;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testSetIdAttributeNode"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testSetIdAttributeNode">[docs]</a>    <span class="k">def</span> <span class="nf">testSetIdAttributeNode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">NS1</span> <span class="o">=</span> <span class="s">&quot;http://xml.python.org/ns1&quot;</span>
        <span class="n">NS2</span> <span class="o">=</span> <span class="s">&quot;http://xml.python.org/ns2&quot;</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;doc&quot;</span>
                          <span class="s">&quot; xmlns:ns1=&#39;&quot;</span> <span class="o">+</span> <span class="n">NS1</span> <span class="o">+</span> <span class="s">&quot;&#39;&quot;</span>
                          <span class="s">&quot; xmlns:ns2=&#39;&quot;</span> <span class="o">+</span> <span class="n">NS2</span> <span class="o">+</span> <span class="s">&quot;&#39;&quot;</span>
                          <span class="s">&quot; ns1:a1=&#39;v&#39; ns2:a2=&#39;w&#39;/&gt;&quot;</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span>
        <span class="n">a1</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getAttributeNodeNS</span><span class="p">(</span><span class="n">NS1</span><span class="p">,</span> <span class="s">&quot;a1&quot;</span><span class="p">)</span>
        <span class="n">a2</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getAttributeNodeNS</span><span class="p">(</span><span class="n">NS2</span><span class="p">,</span> <span class="s">&quot;a2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;v&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">a1</span><span class="o">.</span><span class="n">isId</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="n">e</span><span class="o">.</span><span class="n">setIdAttributeNode</span><span class="p">(</span><span class="n">a1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;v&quot;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">a1</span><span class="o">.</span><span class="n">isId</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="n">e</span><span class="o">.</span><span class="n">setIdAttributeNode</span><span class="p">(</span><span class="n">a2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;v&quot;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;w&quot;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">a1</span><span class="o">.</span><span class="n">isId</span>
                <span class="ow">and</span> <span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="c"># replace the a1 node; the new node should *not* be an ID</span>
        <span class="n">a3</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">createAttributeNS</span><span class="p">(</span><span class="n">NS1</span><span class="p">,</span> <span class="s">&quot;a1&quot;</span><span class="p">)</span>
        <span class="n">a3</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;v&quot;</span>
        <span class="n">e</span><span class="o">.</span><span class="n">setAttributeNode</span><span class="p">(</span><span class="n">a3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;w&quot;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="ow">not</span> <span class="n">a1</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="ow">not</span> <span class="n">a3</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;v&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span>
        <span class="c"># renaming an attribute should not affect its ID-ness:</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">renameNode</span><span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">,</span> <span class="s">&quot;an&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;w&quot;</span><span class="p">))</span>
                <span class="ow">and</span> <span class="n">a2</span><span class="o">.</span><span class="n">isId</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testPickledDocument"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testPickledDocument">[docs]</a>    <span class="k">def</span> <span class="nf">testPickledDocument</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;us-ascii&#39;?&gt;</span><span class="se">\n</span><span class="s">&quot;</span>
                    <span class="s">&quot;&lt;!DOCTYPE doc PUBLIC &#39;http://xml.python.org/public&#39;&quot;</span>
                    <span class="s">&quot; &#39;http://xml.python.org/system&#39; [</span><span class="se">\n</span><span class="s">&quot;</span>
                    <span class="s">&quot;  &lt;!ELEMENT e EMPTY&gt;</span><span class="se">\n</span><span class="s">&quot;</span>
                    <span class="s">&quot;  &lt;!ENTITY ent SYSTEM &#39;http://xml.python.org/entity&#39;&gt;</span><span class="se">\n</span><span class="s">&quot;</span>
                    <span class="s">&quot;]&gt;&lt;doc attr=&#39;value&#39;&gt; text</span><span class="se">\n</span><span class="s">&quot;</span>
                    <span class="s">&quot;&lt;?pi sample?&gt; &lt;!-- comment --&gt; &lt;e/&gt; &lt;/doc&gt;&quot;</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
        <span class="n">doc2</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">stack</span> <span class="o">=</span> <span class="p">[(</span><span class="n">doc</span><span class="p">,</span> <span class="n">doc2</span><span class="p">)]</span>
        <span class="k">while</span> <span class="n">stack</span><span class="p">:</span>
            <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">n1</span><span class="o">.</span><span class="n">nodeType</span> <span class="o">==</span> <span class="n">n2</span><span class="o">.</span><span class="n">nodeType</span>
                    <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">n1</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">n2</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="n">n1</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="n">n2</span><span class="o">.</span><span class="n">nodeName</span>
                    <span class="ow">and</span> <span class="ow">not</span> <span class="n">n1</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">n2</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="ow">not</span> <span class="n">n2</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">n1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">n1</span><span class="o">.</span><span class="n">nodeType</span> <span class="o">==</span> <span class="n">Node</span><span class="o">.</span><span class="n">DOCUMENT_TYPE_NODE</span><span class="p">:</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">n1</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">n2</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">n1</span><span class="o">.</span><span class="n">notations</span><span class="p">)</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">n2</span><span class="o">.</span><span class="n">notations</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">n1</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">n2</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span>
                        <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">n1</span><span class="o">.</span><span class="n">notations</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">n2</span><span class="o">.</span><span class="n">notations</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">n1</span><span class="o">.</span><span class="n">notations</span><span class="p">)):</span>
                    <span class="c"># XXX this loop body doesn&#39;t seem to be executed?</span>
                    <span class="n">no1</span> <span class="o">=</span> <span class="n">n1</span><span class="o">.</span><span class="n">notations</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="n">no2</span> <span class="o">=</span> <span class="n">n1</span><span class="o">.</span><span class="n">notations</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">no1</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">no2</span><span class="o">.</span><span class="n">name</span>
                            <span class="ow">and</span> <span class="n">no1</span><span class="o">.</span><span class="n">publicId</span> <span class="o">==</span> <span class="n">no2</span><span class="o">.</span><span class="n">publicId</span>
                            <span class="ow">and</span> <span class="n">no1</span><span class="o">.</span><span class="n">systemId</span> <span class="o">==</span> <span class="n">no2</span><span class="o">.</span><span class="n">systemId</span><span class="p">)</span>
                    <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">no1</span><span class="p">,</span> <span class="n">no2</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">n1</span><span class="o">.</span><span class="n">entities</span><span class="p">)):</span>
                    <span class="n">e1</span> <span class="o">=</span> <span class="n">n1</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="n">e2</span> <span class="o">=</span> <span class="n">n2</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">notationName</span> <span class="o">==</span> <span class="n">e2</span><span class="o">.</span><span class="n">notationName</span>
                            <span class="ow">and</span> <span class="n">e1</span><span class="o">.</span><span class="n">publicId</span> <span class="o">==</span> <span class="n">e2</span><span class="o">.</span><span class="n">publicId</span>
                            <span class="ow">and</span> <span class="n">e1</span><span class="o">.</span><span class="n">systemId</span> <span class="o">==</span> <span class="n">e2</span><span class="o">.</span><span class="n">systemId</span><span class="p">)</span>
                    <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">n1</span><span class="o">.</span><span class="n">nodeType</span> <span class="o">!=</span> <span class="n">Node</span><span class="o">.</span><span class="n">DOCUMENT_NODE</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">n1</span><span class="o">.</span><span class="n">ownerDocument</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
                        <span class="ow">and</span> <span class="n">n2</span><span class="o">.</span><span class="n">ownerDocument</span><span class="o">.</span><span class="n">isSameNode</span><span class="p">(</span><span class="n">doc2</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">n1</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)):</span>
                <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">n1</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">n2</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
</div>
<div class="viewcode-block" id="MinidomTest.testSerializeCommentNodeWithDoubleHyphen"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testSerializeCommentNodeWithDoubleHyphen">[docs]</a>    <span class="k">def</span> <span class="nf">testSerializeCommentNodeWithDoubleHyphen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">create_doc_without_doctype</span><span class="p">()</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">createComment</span><span class="p">(</span><span class="s">&quot;foo--bar&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">doc</span><span class="o">.</span><span class="n">toxml</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="MinidomTest.testEmptyXMLNSValue"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testEmptyXMLNSValue">[docs]</a>    <span class="k">def</span> <span class="nf">testEmptyXMLNSValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="s">&quot;&lt;element xmlns=&#39;&#39;&gt;</span><span class="se">\n</span><span class="s">&quot;</span>
                          <span class="s">&quot;&lt;foo/&gt;</span><span class="se">\n</span><span class="s">&lt;/element&gt;&quot;</span><span class="p">)</span>
        <span class="n">doc2</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">toxml</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">doc2</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">==</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">EMPTY_NAMESPACE</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testExceptionOnSpacesInXMLNSValue"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testExceptionOnSpacesInXMLNSValue">[docs]</a>    <span class="k">def</span> <span class="nf">testExceptionOnSpacesInXMLNSValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegex</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="s">&#39;Unsupported syntax&#39;</span><span class="p">):</span>
            <span class="n">parseString</span><span class="p">(</span><span class="s">&#39;&lt;element xmlns:abc=&quot;http:abc.com/de f g/hi/j k&quot;&gt;&lt;abc:foo /&gt;&lt;/element&gt;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testDocRemoveChild"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testDocRemoveChild">[docs]</a>    <span class="k">def</span> <span class="nf">testDocRemoveChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">tstfile</span><span class="p">)</span>
        <span class="n">title_tag</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;TITLE&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span> <span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">NotFoundErr</span><span class="p">,</span> <span class="n">doc</span><span class="o">.</span><span class="n">removeChild</span><span class="p">,</span> <span class="n">title_tag</span><span class="p">)</span>
        <span class="n">num_children_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">num_children_after</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">num_children_after</span> <span class="o">==</span> <span class="n">num_children_before</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MinidomTest.testProcessingInstructionNameError"><a class="viewcode-back" href="../../test.html#test.test_minidom.MinidomTest.testProcessingInstructionNameError">[docs]</a>    <span class="k">def</span> <span class="nf">testProcessingInstructionNameError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># wrong variable in .nodeValue property will</span>
        <span class="c"># lead to &quot;NameError: name &#39;data&#39; is not defined&quot;</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">tstfile</span><span class="p">)</span>
        <span class="n">pi</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">createProcessingInstruction</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span> <span class="s">&quot;z&quot;</span><span class="p">)</span>
        <span class="n">pi</span><span class="o">.</span><span class="n">nodeValue</span> <span class="o">=</span> <span class="s">&quot;crash&quot;</span>
</div></div>
<div class="viewcode-block" id="test_main"><a class="viewcode-back" href="../../test.html#test.test_minidom.test_main">[docs]</a><span class="k">def</span> <span class="nf">test_main</span><span class="p">():</span>
    <span class="n">run_unittest</span><span class="p">(</span><span class="n">MinidomTest</span><span class="p">)</span>
</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">test_main</span><span class="p">()</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Weldon Henson.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>