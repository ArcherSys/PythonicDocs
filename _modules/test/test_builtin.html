

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>test.test_builtin &mdash; ArcherBashPYDocs 1.0.0. documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ArcherBashPYDocs 1.0.0. documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> ArcherBashPYDocs</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="simple">
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ArcherBashPYDocs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>test.test_builtin</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for test.test_builtin</h1><div class="highlight"><pre>
<span class="c"># Python test set -- built-in functions</span>

<span class="kn">import</span> <span class="nn">ast</span>
<span class="kn">import</span> <span class="nn">builtins</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">locale</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">traceback</span>
<span class="kn">import</span> <span class="nn">types</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">neg</span>
<span class="kn">from</span> <span class="nn">test.support</span> <span class="kn">import</span> <span class="n">TESTFN</span><span class="p">,</span> <span class="n">unlink</span><span class="p">,</span>  <span class="n">run_unittest</span><span class="p">,</span> <span class="n">check_warnings</span>
<span class="kn">from</span> <span class="nn">test.script_helper</span> <span class="kn">import</span> <span class="n">assert_python_ok</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pty</span><span class="o">,</span> <span class="nn">signal</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">pty</span> <span class="o">=</span> <span class="n">signal</span> <span class="o">=</span> <span class="bp">None</span>


<div class="viewcode-block" id="Squares"><a class="viewcode-back" href="../../test.html#test.test_builtin.Squares">[docs]</a><span class="k">class</span> <span class="nc">Squares</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">max</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">=</span> <span class="nb">max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sofar</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sofar</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">IndexError</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sofar</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="n">i</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sofar</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sofar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="StrSquares"><a class="viewcode-back" href="../../test.html#test.test_builtin.StrSquares">[docs]</a><span class="k">class</span> <span class="nc">StrSquares</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">max</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">=</span> <span class="nb">max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sofar</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sofar</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sofar</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="n">i</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sofar</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="p">))</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sofar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="BitBucket"><a class="viewcode-back" href="../../test.html#test.test_builtin.BitBucket">[docs]</a><span class="k">class</span> <span class="nc">BitBucket</span><span class="p">:</span>
<div class="viewcode-block" id="BitBucket.write"><a class="viewcode-back" href="../../test.html#test.test_builtin.BitBucket.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="k">pass</span>
</div></div>
<span class="n">test_conv_no_sign</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;9&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;10&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;99&#39;</span><span class="p">,</span> <span class="mi">99</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;100&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;314&#39;</span><span class="p">,</span> <span class="mi">314</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39; 314&#39;</span><span class="p">,</span> <span class="mi">314</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;314 &#39;</span><span class="p">,</span> <span class="mi">314</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;  </span><span class="se">\t\t</span><span class="s">  314  </span><span class="se">\t\t</span><span class="s">  &#39;</span><span class="p">,</span> <span class="mi">314</span><span class="p">),</span>
        <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="p">),</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;  1x&#39;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;  1  &#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;  1</span><span class="se">\02</span><span class="s">  &#39;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;  </span><span class="se">\t\t</span><span class="s">  &#39;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span>
        <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;</span><span class="se">\u0663\u0661\u0664</span><span class="s"> &#39;</span><span class="p">,</span><span class="s">&#39;raw-unicode-escape&#39;</span><span class="p">),</span> <span class="mi">314</span><span class="p">),</span>
        <span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0x200</span><span class="p">),</span> <span class="ne">ValueError</span><span class="p">),</span>
<span class="p">]</span>

<span class="n">test_conv_sign</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;9&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;10&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;99&#39;</span><span class="p">,</span> <span class="mi">99</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;100&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;314&#39;</span><span class="p">,</span> <span class="mi">314</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39; 314&#39;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;314 &#39;</span><span class="p">,</span> <span class="mi">314</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;  </span><span class="se">\t\t</span><span class="s">  314  </span><span class="se">\t\t</span><span class="s">  &#39;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span>
        <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="p">),</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;  1x&#39;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;  1  &#39;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;  1</span><span class="se">\02</span><span class="s">  &#39;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;  </span><span class="se">\t\t</span><span class="s">  &#39;</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span>
        <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;</span><span class="se">\u0663\u0661\u0664</span><span class="s"> &#39;</span><span class="p">,</span><span class="s">&#39;raw-unicode-escape&#39;</span><span class="p">),</span> <span class="mi">314</span><span class="p">),</span>
        <span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0x200</span><span class="p">),</span> <span class="ne">ValueError</span><span class="p">),</span>
<span class="p">]</span>

<div class="viewcode-block" id="TestFailingBool"><a class="viewcode-back" href="../../test.html#test.test_builtin.TestFailingBool">[docs]</a><span class="k">class</span> <span class="nc">TestFailingBool</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span>
</div>
<div class="viewcode-block" id="TestFailingIter"><a class="viewcode-back" href="../../test.html#test.test_builtin.TestFailingIter">[docs]</a><span class="k">class</span> <span class="nc">TestFailingIter</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span>
</div>
<div class="viewcode-block" id="filter_char"><a class="viewcode-back" href="../../test.html#test.test_builtin.filter_char">[docs]</a><span class="k">def</span> <span class="nf">filter_char</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">ord</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">ord</span><span class="p">(</span><span class="s">&quot;d&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="map_char"><a class="viewcode-back" href="../../test.html#test.test_builtin.map_char">[docs]</a><span class="k">def</span> <span class="nf">map_char</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">chr</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest">[docs]</a><span class="k">class</span> <span class="nc">BuiltinTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c"># Helper to check picklability</span>
<div class="viewcode-block" id="BuiltinTest.check_iter_pickle"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.check_iter_pickle">[docs]</a>    <span class="k">def</span> <span class="nf">check_iter_pickle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">it</span><span class="p">,</span> <span class="n">seq</span><span class="p">):</span>
        <span class="n">itorg</span> <span class="o">=</span> <span class="n">it</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
        <span class="n">it</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">itorg</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">it</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="n">seq</span><span class="p">)</span>

        <span class="c">#test the iterator after dropping one from it</span>
        <span class="n">it</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
        <span class="n">it</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="n">seq</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_import"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_import">[docs]</a>    <span class="k">def</span> <span class="nf">test_import</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">__import__</span><span class="p">(</span><span class="s">&#39;sys&#39;</span><span class="p">)</span>
        <span class="nb">__import__</span><span class="p">(</span><span class="s">&#39;time&#39;</span><span class="p">)</span>
        <span class="nb">__import__</span><span class="p">(</span><span class="s">&#39;string&#39;</span><span class="p">)</span>
        <span class="nb">__import__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;sys&#39;</span><span class="p">)</span>
        <span class="nb">__import__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ImportError</span><span class="p">,</span> <span class="nb">__import__</span><span class="p">,</span> <span class="s">&#39;spamspam&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">__import__</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">__import__</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">__import__</span><span class="p">,</span> <span class="s">&#39;sys&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;sys&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_abs"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_abs">[docs]</a>    <span class="k">def</span> <span class="nf">test_abs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># int</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="mi">1234</span><span class="p">),</span> <span class="mi">1234</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="o">-</span><span class="mi">1234</span><span class="p">),</span> <span class="mi">1234</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="o">-</span><span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c"># float</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="mf">3.14</span><span class="p">),</span> <span class="mf">3.14</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="o">-</span><span class="mf">3.14</span><span class="p">),</span> <span class="mf">3.14</span><span class="p">)</span>
        <span class="c"># str</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">abs</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="c"># bool</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">True</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">False</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c"># other</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">abs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">abs</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">class</span> <span class="nc">AbsClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="o">-</span><span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">AbsClass</span><span class="p">()),</span> <span class="o">-</span><span class="mi">5</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_all"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_all">[docs]</a>    <span class="k">def</span> <span class="nf">test_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">all</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]),</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">all</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mi">6</span><span class="p">]),</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">,</span> <span class="nb">all</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="n">TestFailingBool</span><span class="p">(),</span> <span class="mi">6</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">,</span> <span class="nb">all</span><span class="p">,</span> <span class="n">TestFailingIter</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">all</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>               <span class="c"># Non-iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">all</span><span class="p">)</span>                   <span class="c"># No args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">all</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[])</span>    <span class="c"># Too many args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">all</span><span class="p">([]),</span> <span class="bp">True</span><span class="p">)</span>                     <span class="c"># Empty iterator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">all</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">TestFailingBool</span><span class="p">()]),</span> <span class="bp">False</span><span class="p">)</span><span class="c"># Short-circuit</span>
        <span class="n">S</span> <span class="o">=</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">all</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">42</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">S</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
        <span class="n">S</span> <span class="o">=</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">60</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">all</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">42</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">S</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_any"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_any">[docs]</a>    <span class="k">def</span> <span class="nf">test_any</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">any</span><span class="p">([</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">]),</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">any</span><span class="p">([</span><span class="bp">None</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="bp">None</span><span class="p">]),</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">,</span> <span class="nb">any</span><span class="p">,</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="n">TestFailingBool</span><span class="p">(),</span> <span class="mi">6</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">,</span> <span class="nb">any</span><span class="p">,</span> <span class="n">TestFailingIter</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">any</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>               <span class="c"># Non-iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">any</span><span class="p">)</span>                   <span class="c"># No args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">any</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[])</span>    <span class="c"># Too many args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">any</span><span class="p">([]),</span> <span class="bp">False</span><span class="p">)</span>                    <span class="c"># Empty iterator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">any</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="n">TestFailingBool</span><span class="p">()]),</span> <span class="bp">True</span><span class="p">)</span> <span class="c"># Short-circuit</span>
        <span class="n">S</span> <span class="o">=</span> <span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">any</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">42</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">S</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
        <span class="n">S</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">any</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">42</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">S</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_ascii"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_ascii">[docs]</a>    <span class="k">def</span> <span class="nf">test_ascii</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ascii</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\&#39;\&#39;</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ascii</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ascii</span><span class="p">(()),</span> <span class="s">&#39;()&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ascii</span><span class="p">([]),</span> <span class="s">&#39;[]&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ascii</span><span class="p">({}),</span> <span class="s">&#39;{}&#39;</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ascii</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="s">&#39;[[...]]&#39;</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ascii</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="s">&#39;{0: {...}}&#39;</span><span class="p">)</span>
        <span class="c"># Advanced checks for unicode strings</span>
        <span class="k">def</span> <span class="nf">_check_uni</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ascii</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="n">_check_uni</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">)</span>
        <span class="n">_check_uni</span><span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">)</span>
        <span class="n">_check_uni</span><span class="p">(</span><span class="s">&#39;&quot;</span><span class="se">\&#39;</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">_check_uni</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\0</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">_check_uni</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\r\n\t</span><span class="s"> .&#39;</span><span class="p">)</span>
        <span class="c"># Unprintable non-ASCII characters</span>
        <span class="n">_check_uni</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\x85</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">_check_uni</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\u1fff</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">_check_uni</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\U00012fff</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="c"># Lone surrogates</span>
        <span class="n">_check_uni</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\ud800</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">_check_uni</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\udfff</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="c"># Issue #9804: surrogates should be joined even for printable</span>
        <span class="c"># wide characters (UCS-2 builds).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ascii</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\U0001d121</span><span class="s">&#39;</span><span class="p">),</span> <span class="s">&quot;&#39;</span><span class="se">\\</span><span class="s">U0001d121&#39;&quot;</span><span class="p">)</span>
        <span class="c"># All together</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&#39;</span><span class="se">\0\&quot;\n\r\t</span><span class="s"> abcd</span><span class="se">\x85</span><span class="s">Ã©</span><span class="se">\U00012fff\uD800\U0001D121</span><span class="s">xxx.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ascii</span><span class="p">(</span><span class="n">s</span><span class="p">),</span>
            <span class="sd">r&quot;&quot;&quot;&#39;\&#39;\x00&quot;\n\r\t abcd\x85\xe9\U00012fff\ud800\U0001d121xxx.&#39;&quot;&quot;&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_neg"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_neg">[docs]</a>    <span class="k">def</span> <span class="nf">test_neg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_callable"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_callable">[docs]</a>    <span class="k">def</span> <span class="nf">test_callable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="nb">len</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="nb">callable</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="n">__builtins__</span><span class="p">))</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">():</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>

        <span class="k">class</span> <span class="nc">C1</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="n">C1</span><span class="p">))</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">C1</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">meth</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>

        <span class="c"># __call__ is looked up on the class, not the instance</span>
        <span class="n">c</span><span class="o">.</span><span class="n">__call__</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
        <span class="n">c</span><span class="o">.</span><span class="n">__call__</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
        <span class="k">del</span> <span class="n">c</span><span class="o">.</span><span class="n">__call__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>

        <span class="k">class</span> <span class="nc">C2</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">c2</span> <span class="o">=</span> <span class="n">C2</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="n">c2</span><span class="p">))</span>
        <span class="n">c2</span><span class="o">.</span><span class="n">__call__</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="n">c2</span><span class="p">))</span>
        <span class="k">class</span> <span class="nc">C3</span><span class="p">(</span><span class="n">C2</span><span class="p">):</span> <span class="k">pass</span>
        <span class="n">c3</span> <span class="o">=</span> <span class="n">C3</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">callable</span><span class="p">(</span><span class="n">c3</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_chr"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_chr">[docs]</a>    <span class="k">def</span> <span class="nf">test_chr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mi">65</span><span class="p">),</span> <span class="s">&#39;A&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mi">97</span><span class="p">),</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0xff</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\xff</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">chr</span><span class="p">,</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">24</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">maxunicode</span><span class="p">),</span>
                         <span class="nb">str</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\\</span><span class="s">U0010ffff&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&quot;ascii&quot;</span><span class="p">),</span> <span class="s">&#39;unicode-escape&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">chr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0x0000FFFF</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\U0000FFFF</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0x00010000</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\U00010000</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0x00010001</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\U00010001</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0x000FFFFE</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\U000FFFFE</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0x000FFFFF</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\U000FFFFF</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0x00100000</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\U00100000</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0x00100001</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\U00100001</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0x0010FFFE</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\U0010FFFE</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0x0010FFFF</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\U0010FFFF</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">chr</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">chr</span><span class="p">,</span> <span class="mh">0x00110000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">((</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span> <span class="nb">chr</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">32</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_cmp"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_cmp">[docs]</a>    <span class="k">def</span> <span class="nf">test_cmp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">builtins</span><span class="p">,</span> <span class="s">&quot;cmp&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_compile"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_compile">[docs]</a>    <span class="k">def</span> <span class="nf">test_compile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">compile</span><span class="p">(</span><span class="s">&#39;print(1)</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;exec&#39;</span><span class="p">)</span>
        <span class="n">bom</span> <span class="o">=</span> <span class="n">b</span><span class="s">&#39;</span><span class="se">\xef\xbb\xbf</span><span class="s">&#39;</span>
        <span class="nb">compile</span><span class="p">(</span><span class="n">bom</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;print(1)</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;exec&#39;</span><span class="p">)</span>
        <span class="nb">compile</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s">&#39;pass&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;exec&#39;</span><span class="p">)</span>
        <span class="nb">compile</span><span class="p">(</span><span class="n">dont_inherit</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s">&#39;0&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;eval&#39;</span><span class="p">)</span>
        <span class="nb">compile</span><span class="p">(</span><span class="s">&#39;pass&#39;</span><span class="p">,</span> <span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="n">dont_inherit</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;exec&#39;</span><span class="p">)</span>
        <span class="nb">compile</span><span class="p">(</span><span class="n">memoryview</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;text&quot;</span><span class="p">),</span> <span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="s">&quot;exec&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">compile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">compile</span><span class="p">,</span> <span class="s">&#39;print(42)</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;&lt;string&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;badmode&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">compile</span><span class="p">,</span> <span class="s">&#39;print(42)</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;&lt;string&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;single&#39;</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">compile</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="s">&#39;exec&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">compile</span><span class="p">,</span> <span class="s">&#39;pass&#39;</span><span class="p">,</span> <span class="s">&#39;?&#39;</span><span class="p">,</span> <span class="s">&#39;exec&#39;</span><span class="p">,</span>
                          <span class="n">mode</span><span class="o">=</span><span class="s">&#39;eval&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s">&#39;0&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&#39;tmp&#39;</span><span class="p">)</span>
        <span class="nb">compile</span><span class="p">(</span><span class="s">&#39;print(&quot;</span><span class="se">\xe5</span><span class="s">&quot;)</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;exec&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">compile</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="s">&#39;exec&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">compile</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="s">&#39;a = 1&#39;</span><span class="p">),</span> <span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="s">&#39;bad&#39;</span><span class="p">)</span>

        <span class="c"># test the optimize argument</span>

        <span class="n">codestr</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;def f():</span>
<span class="s">        &quot;&quot;&quot;doc&quot;&quot;&quot;</span>
<span class="s">        try:</span>
<span class="s">            assert False</span>
<span class="s">        except AssertionError:</span>
<span class="s">            return (True, f.__doc__)</span>
<span class="s">        else:</span>
<span class="s">            return (False, f.__doc__)</span>
<span class="s">        &#39;&#39;&#39;</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">():</span> <span class="s">&quot;&quot;&quot;doc&quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">__debug__</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">__doc__</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="s">&#39;doc&#39;</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="s">&#39;doc&#39;</span><span class="p">),</span>
                  <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">None</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">optval</span><span class="p">,</span> <span class="n">debugval</span><span class="p">,</span> <span class="n">docstring</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="c"># test both direct compilation and compilation via AST</span>
            <span class="n">codeobjs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">codeobjs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">compile</span><span class="p">(</span><span class="n">codestr</span><span class="p">,</span> <span class="s">&quot;&lt;test&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;exec&quot;</span><span class="p">,</span> <span class="n">optimize</span><span class="o">=</span><span class="n">optval</span><span class="p">))</span>
            <span class="n">tree</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">codestr</span><span class="p">)</span>
            <span class="n">codeobjs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">compile</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="s">&quot;&lt;test&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;exec&quot;</span><span class="p">,</span> <span class="n">optimize</span><span class="o">=</span><span class="n">optval</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">codeobjs</span><span class="p">:</span>
                <span class="n">ns</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">exec</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">ns</span><span class="p">)</span>
                <span class="n">rv</span> <span class="o">=</span> <span class="n">ns</span><span class="p">[</span><span class="s">&#39;f&#39;</span><span class="p">]()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="p">(</span><span class="n">debugval</span><span class="p">,</span> <span class="n">docstring</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_delattr"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_delattr">[docs]</a>    <span class="k">def</span> <span class="nf">test_delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">spam</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="nb">delattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s">&#39;spam&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">delattr</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_dir"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_dir">[docs]</a>    <span class="k">def</span> <span class="nf">test_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># dir(wrong number of arguments)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>

        <span class="c"># dir() - local scope</span>
        <span class="n">local_var</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&#39;local_var&#39;</span><span class="p">,</span> <span class="nb">dir</span><span class="p">())</span>

        <span class="c"># dir(module)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&#39;exit&#39;</span><span class="p">,</span> <span class="nb">dir</span><span class="p">(</span><span class="n">sys</span><span class="p">))</span>

        <span class="c"># dir(module_with_invalid__dict__)</span>
        <span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">):</span>
            <span class="n">__dict__</span> <span class="o">=</span> <span class="mi">8</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

        <span class="c"># dir(type)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&quot;strip&quot;</span><span class="p">,</span> <span class="nb">dir</span><span class="p">(</span><span class="nb">str</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="s">&quot;__mro__&quot;</span><span class="p">,</span> <span class="nb">dir</span><span class="p">(</span><span class="nb">str</span><span class="p">))</span>

        <span class="c"># dir(obj)</span>
        <span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">7</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">8</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">9</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span> <span class="nb">dir</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>

        <span class="c"># dir(obj_no__dict__)</span>
        <span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="n">__slots__</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&quot;__repr__&quot;</span><span class="p">,</span> <span class="nb">dir</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>

        <span class="c"># dir(obj_no__class__with__dict__)</span>
        <span class="c"># (an ugly trick to cause getattr(f, &quot;__class__&quot;) to fail)</span>
        <span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="n">__slots__</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;__class__&quot;</span><span class="p">,</span> <span class="s">&quot;__dict__&quot;</span><span class="p">]</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bar</span> <span class="o">=</span> <span class="s">&quot;wow&quot;</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="s">&quot;__repr__&quot;</span><span class="p">,</span> <span class="nb">dir</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">,</span> <span class="nb">dir</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>

        <span class="c"># dir(obj_using __dir__)</span>
        <span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__dir__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">[</span><span class="s">&quot;kan&quot;</span><span class="p">,</span> <span class="s">&quot;ga&quot;</span><span class="p">,</span> <span class="s">&quot;roo&quot;</span><span class="p">]</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="s">&quot;ga&quot;</span><span class="p">,</span> <span class="s">&quot;kan&quot;</span><span class="p">,</span> <span class="s">&quot;roo&quot;</span><span class="p">])</span>

        <span class="c"># dir(obj__dir__tuple)</span>
        <span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__dir__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="nb">dir</span><span class="p">(</span><span class="n">Foo</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">res</span> <span class="o">==</span> <span class="p">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">])</span>

        <span class="c"># dir(obj__dir__not_sequence)</span>
        <span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__dir__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="mi">7</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

        <span class="c"># dir(traceback)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">2</span><span class="p">])),</span> <span class="mi">4</span><span class="p">)</span>

        <span class="c"># test that object has a __dir__()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([]</span><span class="o">.</span><span class="n">__dir__</span><span class="p">()),</span> <span class="nb">dir</span><span class="p">([]))</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_divmod"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_divmod">[docs]</a>    <span class="k">def</span> <span class="nf">test_divmod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">divmod</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">divmod</span><span class="p">(</span><span class="o">-</span><span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">divmod</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">divmod</span><span class="p">(</span><span class="o">-</span><span class="mi">12</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">divmod</span><span class="p">(</span><span class="o">-</span><span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">denom</span><span class="p">,</span> <span class="n">exp_result</span> <span class="ow">in</span> <span class="p">[</span> <span class="p">(</span><span class="mf">3.25</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)),</span>
                                        <span class="p">(</span><span class="o">-</span><span class="mf">3.25</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">)),</span>
                                        <span class="p">(</span><span class="mf">3.25</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mf">4.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.75</span><span class="p">)),</span>
                                        <span class="p">(</span><span class="o">-</span><span class="mf">3.25</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.25</span><span class="p">))]:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">denom</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">exp_result</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">exp_result</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">divmod</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_eval"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_eval">[docs]</a>    <span class="k">def</span> <span class="nf">test_eval</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;1+1&#39;</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39; 1+1</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="nb">globals</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
        <span class="nb">locals</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="nb">globals</span><span class="p">)</span> <span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="nb">globals</span><span class="p">,</span> <span class="nb">locals</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="nb">globals</span><span class="p">,</span> <span class="nb">locals</span><span class="p">),</span> <span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="nb">globals</span><span class="p">,</span> <span class="nb">locals</span><span class="p">),</span> <span class="mi">300</span><span class="p">)</span>
        <span class="nb">globals</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
        <span class="nb">locals</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">}</span>
        <span class="n">bom</span> <span class="o">=</span> <span class="n">b</span><span class="s">&#39;</span><span class="se">\xef\xbb\xbf</span><span class="s">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">bom</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="nb">globals</span><span class="p">,</span> <span class="nb">locals</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;&quot;</span><span class="se">\xe5</span><span class="s">&quot;&#39;</span><span class="p">,</span> <span class="nb">globals</span><span class="p">),</span> <span class="s">&quot;</span><span class="se">\xe5</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">,</span> <span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">SyntaxError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">,</span> <span class="n">bom</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">X</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="p">{},</span> <span class="n">X</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_general_eval"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_general_eval">[docs]</a>    <span class="k">def</span> <span class="nf">test_general_eval</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Tests that general mappings can be used for the locals argument</span>

        <span class="k">class</span> <span class="nc">M</span><span class="p">:</span>
            <span class="s">&quot;Test mapping interface versus possible calls from eval().&quot;</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s">&#39;a&#39;</span><span class="p">:</span>
                    <span class="k">return</span> <span class="mi">12</span>
                <span class="k">raise</span> <span class="ne">KeyError</span>
            <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;xyz&#39;</span><span class="p">)</span>

        <span class="n">m</span> <span class="o">=</span> <span class="n">M</span><span class="p">()</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">m</span><span class="p">),</span> <span class="mi">12</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">NameError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;dir()&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">m</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;xyz&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;globals()&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">m</span><span class="p">),</span> <span class="n">g</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;locals()&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">m</span><span class="p">),</span> <span class="n">m</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
        <span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
            <span class="s">&quot;Non-mapping&quot;</span>
            <span class="k">pass</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>

        <span class="c"># Verify that dict subclasses work as well</span>
        <span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s">&#39;a&#39;</span><span class="p">:</span>
                    <span class="k">return</span> <span class="mi">12</span>
                <span class="k">return</span> <span class="nb">dict</span><span class="o">.</span><span class="n">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;xyz&#39;</span><span class="p">)</span>

        <span class="n">d</span> <span class="o">=</span> <span class="n">D</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">d</span><span class="p">),</span> <span class="mi">12</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">NameError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;dir()&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">d</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;xyz&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;globals()&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">d</span><span class="p">),</span> <span class="n">g</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">&#39;locals()&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">d</span><span class="p">),</span> <span class="n">d</span><span class="p">)</span>

        <span class="c"># Verify locals stores (used by list comps)</span>
        <span class="nb">eval</span><span class="p">(</span><span class="s">&#39;[locals() for i in (2,3)]&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
        <span class="nb">eval</span><span class="p">(</span><span class="s">&#39;[locals() for i in (2,3)]&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">UserDict</span><span class="p">())</span>

        <span class="k">class</span> <span class="nc">SpreadSheet</span><span class="p">:</span>
            <span class="s">&quot;Sample application showing nested, calculated lookups.&quot;</span>
            <span class="n">_cells</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">formula</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_cells</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">formula</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cells</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">globals</span><span class="p">(),</span> <span class="bp">self</span><span class="p">)</span>

        <span class="n">ss</span> <span class="o">=</span> <span class="n">SpreadSheet</span><span class="p">()</span>
        <span class="n">ss</span><span class="p">[</span><span class="s">&#39;a1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;5&#39;</span>
        <span class="n">ss</span><span class="p">[</span><span class="s">&#39;a2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;a1*6&#39;</span>
        <span class="n">ss</span><span class="p">[</span><span class="s">&#39;a3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;a2*7&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ss</span><span class="p">[</span><span class="s">&#39;a3&#39;</span><span class="p">],</span> <span class="mi">210</span><span class="p">)</span>

        <span class="c"># Verify that dir() catches a non-list returned by eval</span>
        <span class="c"># SF bug #1004669</span>
        <span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="mi">1</span> <span class="c"># used to be &#39;a&#39; but that&#39;s no longer an error</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">eval</span><span class="p">,</span> <span class="s">&#39;dir()&#39;</span><span class="p">,</span> <span class="nb">globals</span><span class="p">(),</span> <span class="n">C</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_exec"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_exec">[docs]</a>    <span class="k">def</span> <span class="nf">test_exec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">g</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">exec</span><span class="p">(</span><span class="s">&#39;z = 1&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">)</span>
        <span class="k">if</span> <span class="s">&#39;__builtins__&#39;</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">g</span><span class="p">[</span><span class="s">&#39;__builtins__&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

        <span class="k">exec</span><span class="p">(</span><span class="s">&#39;z = 1+1&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">)</span>
        <span class="k">if</span> <span class="s">&#39;__builtins__&#39;</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">g</span><span class="p">[</span><span class="s">&#39;__builtins__&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="n">g</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">l</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">with</span> <span class="n">check_warnings</span><span class="p">():</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s">&quot;ignore&quot;</span><span class="p">,</span> <span class="s">&quot;global statement&quot;</span><span class="p">,</span>
                    <span class="n">module</span><span class="o">=</span><span class="s">&quot;&lt;string&gt;&quot;</span><span class="p">)</span>
            <span class="k">exec</span><span class="p">(</span><span class="s">&#39;global a; a = 1; b = 2&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span>
        <span class="k">if</span> <span class="s">&#39;__builtins__&#39;</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">g</span><span class="p">[</span><span class="s">&#39;__builtins__&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s">&#39;__builtins__&#39;</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">l</span><span class="p">[</span><span class="s">&#39;__builtins__&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">g</span><span class="p">,</span> <span class="n">l</span><span class="p">),</span> <span class="p">({</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}))</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_exec_globals"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_exec_globals">[docs]</a>    <span class="k">def</span> <span class="nf">test_exec_globals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">code</span> <span class="o">=</span> <span class="nb">compile</span><span class="p">(</span><span class="s">&quot;print(&#39;Hello World!&#39;)&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;exec&quot;</span><span class="p">)</span>
        <span class="c"># no builtin function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegex</span><span class="p">(</span><span class="ne">NameError</span><span class="p">,</span> <span class="s">&quot;name &#39;print&#39; is not defined&quot;</span><span class="p">,</span>
                               <span class="k">exec</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;__builtins__&#39;</span><span class="p">:</span> <span class="p">{}})</span>
        <span class="c"># __builtins__ must be a mapping type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span>
                          <span class="k">exec</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;__builtins__&#39;</span><span class="p">:</span> <span class="mi">123</span><span class="p">})</span>

        <span class="c"># no __build_class__ function</span>
        <span class="n">code</span> <span class="o">=</span> <span class="nb">compile</span><span class="p">(</span><span class="s">&quot;class A: pass&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;exec&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegex</span><span class="p">(</span><span class="ne">NameError</span><span class="p">,</span> <span class="s">&quot;__build_class__ not found&quot;</span><span class="p">,</span>
                               <span class="k">exec</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;__builtins__&#39;</span><span class="p">:</span> <span class="p">{}})</span>

        <span class="k">class</span> <span class="nc">frozendict_error</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="k">class</span> <span class="nc">frozendict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">frozendict_error</span><span class="p">(</span><span class="s">&quot;frozendict is readonly&quot;</span><span class="p">)</span>

        <span class="c"># read-only builtins</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">__builtins__</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">):</span>
            <span class="n">frozen_builtins</span> <span class="o">=</span> <span class="n">frozendict</span><span class="p">(</span><span class="n">__builtins__</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">frozen_builtins</span> <span class="o">=</span> <span class="n">frozendict</span><span class="p">(</span><span class="n">__builtins__</span><span class="p">)</span>
        <span class="n">code</span> <span class="o">=</span> <span class="nb">compile</span><span class="p">(</span><span class="s">&quot;__builtins__[&#39;superglobal&#39;]=2; print(superglobal)&quot;</span><span class="p">,</span> <span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="s">&quot;exec&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">frozendict_error</span><span class="p">,</span>
                          <span class="k">exec</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;__builtins__&#39;</span><span class="p">:</span> <span class="n">frozen_builtins</span><span class="p">})</span>

        <span class="c"># read-only globals</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="n">frozendict</span><span class="p">({})</span>
        <span class="n">code</span> <span class="o">=</span> <span class="nb">compile</span><span class="p">(</span><span class="s">&quot;x=1&quot;</span><span class="p">,</span> <span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="s">&quot;exec&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">frozendict_error</span><span class="p">,</span>
                          <span class="k">exec</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">namespace</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_exec_redirected"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_exec_redirected">[docs]</a>    <span class="k">def</span> <span class="nf">test_exec_redirected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">savestdout</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="bp">None</span> <span class="c"># Whatever that cannot flush()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c"># Used to raise SystemError(&#39;error return without exception set&#39;)</span>
            <span class="k">exec</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">savestdout</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_filter"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_filter">[docs]</a>    <span class="k">def</span> <span class="nf">test_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="s">&#39;a&#39;</span> <span class="o">&lt;=</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="s">&#39;Hello World&#39;</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;elloorld&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">])),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">9</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">])),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">Squares</span><span class="p">(</span><span class="mi">10</span><span class="p">))),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">81</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="p">,</span> <span class="n">Squares</span><span class="p">(</span><span class="mi">10</span><span class="p">))),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">81</span><span class="p">])</span>
        <span class="k">def</span> <span class="nf">identity</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="nb">filter</span><span class="p">(</span><span class="n">identity</span><span class="p">,</span> <span class="n">Squares</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span>
        <span class="k">class</span> <span class="nc">BadSeq</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">index</span><span class="o">&lt;</span><span class="mi">4</span><span class="p">:</span>
                    <span class="k">return</span> <span class="mi">42</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="n">BadSeq</span><span class="p">()))</span>
        <span class="k">def</span> <span class="nf">badfunc</span><span class="p">():</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="n">badfunc</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>

        <span class="c"># test bltinmodule.c::filtertuple()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">&gt;=</span><span class="mi">3</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))),</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_filter_pickle"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_filter_pickle">[docs]</a>    <span class="k">def</span> <span class="nf">test_filter_pickle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f1</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">filter_char</span><span class="p">,</span> <span class="s">&quot;abcdeabcde&quot;</span><span class="p">)</span>
        <span class="n">f2</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">filter_char</span><span class="p">,</span> <span class="s">&quot;abcdeabcde&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_iter_pickle</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">f2</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_getattr"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_getattr">[docs]</a>    <span class="k">def</span> <span class="nf">test_getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s">&#39;stdout&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">,</span> <span class="n">sys</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">,</span> <span class="n">sys</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">,</span> <span class="n">sys</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">maxunicode</span><span class="p">))</span>
        <span class="c"># unicode surrogates are not encodable to the default encoding (utf8)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\uDAD1\uD51E</span><span class="s">&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_hasattr"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_hasattr">[docs]</a>    <span class="k">def</span> <span class="nf">test_hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s">&#39;stdout&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">hasattr</span><span class="p">,</span> <span class="n">sys</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">hasattr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">maxunicode</span><span class="p">)))</span>

        <span class="c"># Check that hasattr propagates all exceptions outside of</span>
        <span class="c"># AttributeError.</span>
        <span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">what</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">SystemExit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">SystemExit</span><span class="p">,</span> <span class="nb">hasattr</span><span class="p">,</span> <span class="n">A</span><span class="p">(),</span> <span class="s">&quot;b&quot;</span><span class="p">)</span>
        <span class="k">class</span> <span class="nc">B</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">what</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">hasattr</span><span class="p">,</span> <span class="n">B</span><span class="p">(),</span> <span class="s">&quot;b&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_hash"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_hash">[docs]</a>    <span class="k">def</span> <span class="nf">test_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">hash</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="mf">1.0</span><span class="p">))</span>
        <span class="nb">hash</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;spam&#39;</span><span class="p">))</span>
        <span class="nb">hash</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">():</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">hash</span><span class="p">,</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">hash</span><span class="p">,</span> <span class="p">{})</span>
        <span class="c"># Bug 1536021: Allow hash to return long objects</span>
        <span class="k">class</span> <span class="nc">X</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="mi">2</span><span class="o">**</span><span class="mi">100</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">X</span><span class="p">())),</span> <span class="nb">int</span><span class="p">)</span>
        <span class="k">class</span> <span class="nc">Z</span><span class="p">(</span><span class="nb">int</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">Z</span><span class="p">(</span><span class="mi">42</span><span class="p">)),</span> <span class="nb">hash</span><span class="p">(</span><span class="mi">42</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_hex"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_hex">[docs]</a>    <span class="k">def</span> <span class="nf">test_hex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hex</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span> <span class="s">&#39;0x10&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">hex</span><span class="p">(</span><span class="o">-</span><span class="mi">16</span><span class="p">),</span> <span class="s">&#39;-0x10&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">hex</span><span class="p">,</span> <span class="p">{})</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_id"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_id">[docs]</a>    <span class="k">def</span> <span class="nf">test_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">id</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="nb">id</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="nb">id</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="nb">id</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">)</span>
        <span class="nb">id</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
        <span class="nb">id</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
        <span class="nb">id</span><span class="p">({</span><span class="s">&#39;spam&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;eggs&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;ham&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>

    <span class="c"># Test input() later, alphabetized as if it were raw_input</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_iter"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_iter">[docs]</a>    <span class="k">def</span> <span class="nf">test_iter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">iter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">iter</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="n">lists</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">],</span> <span class="s">&quot;12&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lists</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="s">&#39;1&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="s">&#39;2&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_isinstance"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_isinstance">[docs]</a>    <span class="k">def</span> <span class="nf">test_isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">C</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">class</span> <span class="nc">E</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">D</span><span class="p">()</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">E</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">C</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">C</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">C</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">D</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">E</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">isinstance</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">isinstance</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_issubclass"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_issubclass">[docs]</a>    <span class="k">def</span> <span class="nf">test_issubclass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">C</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">class</span> <span class="nc">E</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">D</span><span class="p">()</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">E</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">C</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">C</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">issubclass</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">E</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">issubclass</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">issubclass</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_len"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_len">[docs]</a>    <span class="k">def</span> <span class="nf">test_len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="s">&#39;123&#39;</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(()),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">({}),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">({</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">class</span> <span class="nc">BadSeq</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">len</span><span class="p">,</span> <span class="n">BadSeq</span><span class="p">())</span>
        <span class="k">class</span> <span class="nc">InvalidLen</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">len</span><span class="p">,</span> <span class="n">InvalidLen</span><span class="p">())</span>
        <span class="k">class</span> <span class="nc">FloatLen</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="mf">4.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">len</span><span class="p">,</span> <span class="n">FloatLen</span><span class="p">())</span>
        <span class="k">class</span> <span class="nc">HugeLen</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OverflowError</span><span class="p">,</span> <span class="nb">len</span><span class="p">,</span> <span class="n">HugeLen</span><span class="p">())</span>
        <span class="k">class</span> <span class="nc">NoLenMethod</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">len</span><span class="p">,</span> <span class="n">NoLenMethod</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_map"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_map">[docs]</a>    <span class="k">def</span> <span class="nf">test_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">))),</span>
            <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">sqrt</span><span class="p">,</span> <span class="n">x</span><span class="p">)),</span> <span class="p">[[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">81</span><span class="p">,</span> <span class="mi">9</span><span class="p">]])),</span>
            <span class="p">[[</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">9.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">])),</span>
            <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">plus</span><span class="p">(</span><span class="o">*</span><span class="n">v</span><span class="p">):</span>
            <span class="n">accu</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span> <span class="n">accu</span> <span class="o">=</span> <span class="n">accu</span> <span class="o">+</span> <span class="n">i</span>
            <span class="k">return</span> <span class="n">accu</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">plus</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">])),</span>
            <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">plus</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">])),</span>
            <span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="o">+</span><span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">plus</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])),</span>
            <span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="mi">4</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="o">+</span><span class="mi">9</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="o">+</span><span class="mi">2</span><span class="o">+</span><span class="mi">0</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">Squares</span><span class="p">(</span><span class="mi">10</span><span class="p">))),</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">81</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="k">def</span> <span class="nf">Max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">b</span>
            <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">a</span>
            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">Max</span><span class="p">,</span> <span class="n">Squares</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">Squares</span><span class="p">(</span><span class="mi">2</span><span class="p">))),</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">map</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">map</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="k">class</span> <span class="nc">BadSeq</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
                <span class="k">yield</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="n">BadSeq</span><span class="p">()))</span>
        <span class="k">def</span> <span class="nf">badfunc</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="n">badfunc</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_map_pickle"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_map_pickle">[docs]</a>    <span class="k">def</span> <span class="nf">test_map_pickle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">m1</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">map_char</span><span class="p">,</span> <span class="s">&quot;Is this the real life?&quot;</span><span class="p">)</span>
        <span class="n">m2</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">map_char</span><span class="p">,</span> <span class="s">&quot;Is this the real life?&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_iter_pickle</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">m2</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_max"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_max">[docs]</a>    <span class="k">def</span> <span class="nf">test_max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="s">&#39;123123&#39;</span><span class="p">),</span> <span class="s">&#39;3&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="mi">3</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">),</span> <span class="mf">3.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">max</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">max</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">max</span><span class="p">,</span> <span class="p">())</span>
        <span class="k">class</span> <span class="nc">BadSeq</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">max</span><span class="p">,</span> <span class="n">BadSeq</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">stmt</span> <span class="ow">in</span> <span class="p">(</span>
            <span class="s">&quot;max(key=int)&quot;</span><span class="p">,</span>                 <span class="c"># no args</span>
            <span class="s">&quot;max(default=None)&quot;</span><span class="p">,</span>
            <span class="s">&quot;max(1, 2, default=None)&quot;</span><span class="p">,</span>      <span class="c"># require container for default</span>
            <span class="s">&quot;max(default=None, key=int)&quot;</span><span class="p">,</span>
            <span class="s">&quot;max(1, key=int)&quot;</span><span class="p">,</span>              <span class="c"># single arg not iterable</span>
            <span class="s">&quot;max(1, 2, keystone=int)&quot;</span><span class="p">,</span>      <span class="c"># wrong keyword</span>
            <span class="s">&quot;max(1, 2, key=int, abc=int)&quot;</span><span class="p">,</span>  <span class="c"># two many keywords</span>
            <span class="s">&quot;max(1, 2, key=1)&quot;</span><span class="p">,</span>             <span class="c"># keyfunc is not callable</span>
            <span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">exec</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="nb">globals</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">((</span><span class="mi">1</span><span class="p">,),</span> <span class="n">key</span><span class="o">=</span><span class="n">neg</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>     <span class="c"># one elem iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="n">neg</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>    <span class="c"># two elem iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">neg</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>     <span class="c"># two elems</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">((),</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>    <span class="c"># zero elem iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">((</span><span class="mi">1</span><span class="p">,),</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>     <span class="c"># one elem iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>    <span class="c"># two elem iterable</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">((),</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">neg</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">neg</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="n">elem</span><span class="p">,</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">__getitem__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">f</span><span class="p">),</span>
                         <span class="nb">sorted</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="n">f</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_min"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_min">[docs]</a>    <span class="k">def</span> <span class="nf">test_min</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="s">&#39;123123&#39;</span><span class="p">),</span> <span class="s">&#39;1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">min</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="p">())</span>
        <span class="k">class</span> <span class="nc">BadSeq</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="n">BadSeq</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">stmt</span> <span class="ow">in</span> <span class="p">(</span>
            <span class="s">&quot;min(key=int)&quot;</span><span class="p">,</span>                 <span class="c"># no args</span>
            <span class="s">&quot;min(default=None)&quot;</span><span class="p">,</span>
            <span class="s">&quot;min(1, 2, default=None)&quot;</span><span class="p">,</span>      <span class="c"># require container for default</span>
            <span class="s">&quot;min(default=None, key=int)&quot;</span><span class="p">,</span>
            <span class="s">&quot;min(1, key=int)&quot;</span><span class="p">,</span>              <span class="c"># single arg not iterable</span>
            <span class="s">&quot;min(1, 2, keystone=int)&quot;</span><span class="p">,</span>      <span class="c"># wrong keyword</span>
            <span class="s">&quot;min(1, 2, key=int, abc=int)&quot;</span><span class="p">,</span>  <span class="c"># two many keywords</span>
            <span class="s">&quot;min(1, 2, key=1)&quot;</span><span class="p">,</span>             <span class="c"># keyfunc is not callable</span>
            <span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">exec</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="nb">globals</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">((</span><span class="mi">1</span><span class="p">,),</span> <span class="n">key</span><span class="o">=</span><span class="n">neg</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>     <span class="c"># one elem iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="n">neg</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>    <span class="c"># two elem iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">neg</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>     <span class="c"># two elems</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">((),</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>    <span class="c"># zero elem iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">((</span><span class="mi">1</span><span class="p">,),</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>     <span class="c"># one elem iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>    <span class="c"># two elem iterable</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">((),</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">neg</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">neg</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="n">elem</span><span class="p">,</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">__getitem__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">f</span><span class="p">),</span>
                         <span class="nb">sorted</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">f</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_next"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_next">[docs]</a>    <span class="k">def</span> <span class="nf">test_next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">it</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">it</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="mi">42</span><span class="p">),</span> <span class="mi">42</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">Iter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">StopIteration</span>

        <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">Iter</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="mi">42</span><span class="p">),</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">it</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">gen</span><span class="p">():</span>
            <span class="k">yield</span> <span class="mi">1</span>
            <span class="k">return</span>

        <span class="n">it</span> <span class="o">=</span> <span class="n">gen</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">it</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="mi">42</span><span class="p">),</span> <span class="mi">42</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_oct"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_oct">[docs]</a>    <span class="k">def</span> <span class="nf">test_oct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">oct</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="s">&#39;0o144&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">oct</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">),</span> <span class="s">&#39;-0o144&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">oct</span><span class="p">,</span> <span class="p">())</span>
</div>
<div class="viewcode-block" id="BuiltinTest.write_testfile"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.write_testfile">[docs]</a>    <span class="k">def</span> <span class="nf">write_testfile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># NB the first 4 lines are also used to test input, below</span>
        <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">TESTFN</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addCleanup</span><span class="p">(</span><span class="n">unlink</span><span class="p">,</span> <span class="n">TESTFN</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">fp</span><span class="p">:</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;1+1</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;The quick brown fox jumps over the lazy dog&#39;</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;.</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;Dear John</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;XXX&#39;</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;YYY&#39;</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_open"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_open">[docs]</a>    <span class="k">def</span> <span class="nf">test_open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_testfile</span><span class="p">()</span>
        <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">TESTFN</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">fp</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">readline</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="s">&#39;1+1</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">readline</span><span class="p">(),</span> <span class="s">&#39;The quick brown fox jumps over the lazy dog.</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">readline</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="s">&#39;Dear&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">readline</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="s">&#39; John</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">300</span><span class="p">),</span> <span class="s">&#39;XXX&#39;</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="s">&#39;YYY&#39;</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_open_default_encoding"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_open_default_encoding">[docs]</a>    <span class="k">def</span> <span class="nf">test_open_default_encoding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">old_environ</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c"># try to get a user preferred encoding different than the current</span>
            <span class="c"># locale encoding to check that open() uses the current locale</span>
            <span class="c"># encoding and not the user preferred encoding</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;LC_ALL&#39;</span><span class="p">,</span> <span class="s">&#39;LANG&#39;</span><span class="p">,</span> <span class="s">&#39;LC_CTYPE&#39;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">write_testfile</span><span class="p">()</span>
            <span class="n">current_locale_encoding</span> <span class="o">=</span> <span class="n">locale</span><span class="o">.</span><span class="n">getpreferredencoding</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">TESTFN</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">fp</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">encoding</span><span class="p">,</span> <span class="n">current_locale_encoding</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">old_environ</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_open_non_inheritable"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_open_non_inheritable">[docs]</a>    <span class="k">def</span> <span class="nf">test_open_non_inheritable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fileobj</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">__file__</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">fileobj</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">get_inheritable</span><span class="p">(</span><span class="n">fileobj</span><span class="o">.</span><span class="n">fileno</span><span class="p">()))</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_ord"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_ord">[docs]</a>    <span class="k">def</span> <span class="nf">test_ord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">),</span> <span class="mi">32</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">),</span> <span class="mi">65</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="mi">97</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\x80</span><span class="s">&#39;</span><span class="p">),</span> <span class="mi">128</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\xff</span><span class="s">&#39;</span><span class="p">),</span> <span class="mi">255</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">b</span><span class="s">&#39; &#39;</span><span class="p">),</span> <span class="mi">32</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;A&#39;</span><span class="p">),</span> <span class="mi">65</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="mi">97</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;</span><span class="se">\x80</span><span class="s">&#39;</span><span class="p">),</span> <span class="mi">128</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;</span><span class="se">\xff</span><span class="s">&#39;</span><span class="p">),</span> <span class="mi">255</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">maxunicode</span><span class="p">)),</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxunicode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">ord</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0x10FFFF</span><span class="p">)),</span> <span class="mh">0x10FFFF</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\U0000FFFF</span><span class="s">&quot;</span><span class="p">),</span> <span class="mh">0x0000FFFF</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\U00010000</span><span class="s">&quot;</span><span class="p">),</span> <span class="mh">0x00010000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\U00010001</span><span class="s">&quot;</span><span class="p">),</span> <span class="mh">0x00010001</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\U000FFFFE</span><span class="s">&quot;</span><span class="p">),</span> <span class="mh">0x000FFFFE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\U000FFFFF</span><span class="s">&quot;</span><span class="p">),</span> <span class="mh">0x000FFFFF</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\U00100000</span><span class="s">&quot;</span><span class="p">),</span> <span class="mh">0x00100000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\U00100001</span><span class="s">&quot;</span><span class="p">),</span> <span class="mh">0x00100001</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\U0010FFFE</span><span class="s">&quot;</span><span class="p">),</span> <span class="mh">0x0010FFFE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\U0010FFFF</span><span class="s">&quot;</span><span class="p">),</span> <span class="mh">0x0010FFFF</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_pow"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_pow">[docs]</a>    <span class="k">def</span> <span class="nf">test_pow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="mi">1024</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span> <span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span> <span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="o">-</span><span class="mi">8</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mf">1.</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="mf">0.</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mf">1.</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="mf">1.</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mf">2.</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mf">1.</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mf">2.</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="mf">1024.</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mf">2.</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span> <span class="mf">1024.</span><span class="o">*</span><span class="mf">1024.</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mf">2.</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span> <span class="mf">1024.</span><span class="o">*</span><span class="mf">1024.</span><span class="o">*</span><span class="mf">1024.</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="o">-</span><span class="mf">2.</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mf">1.</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="o">-</span><span class="mf">2.</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="o">-</span><span class="mf">2.</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="o">-</span><span class="mf">2.</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="mf">4.</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="o">-</span><span class="mf">2.</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="o">-</span><span class="mf">8.</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="mi">1000</span><span class="p">,</span> <span class="mf">1000.0</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">or</span> \
                       <span class="nb">isinstance</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">or</span> \
                       <span class="nb">isinstance</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">pow</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">),</span> <span class="mf">24.0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="mi">1j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">),</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="mf">0.8660254037844386j</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">pow</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">pow</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">pow</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_input"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_input">[docs]</a>    <span class="k">def</span> <span class="nf">test_input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_testfile</span><span class="p">()</span>
        <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">TESTFN</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">savestdin</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span>
        <span class="n">savestdout</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="c"># Eats the echo</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="n">fp</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">BitBucket</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">input</span><span class="p">(),</span> <span class="s">&quot;1+1&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">input</span><span class="p">(),</span> <span class="s">&#39;The quick brown fox jumps over the lazy dog.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">&#39;testing</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">),</span> <span class="s">&#39;Dear John&#39;</span><span class="p">)</span>

            <span class="c"># SF 1535165: don&#39;t segfault on closed stdin</span>
            <span class="c"># sys.stdout must be a regular file for triggering</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">savestdout</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">input</span><span class="p">)</span>

            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">BitBucket</span><span class="p">()</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="s">&quot;NULL</span><span class="se">\0</span><span class="s">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="s">&quot;    &#39;whitespace&#39;&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">input</span><span class="p">(),</span> <span class="s">&quot;    &#39;whitespace&#39;&quot;</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">EOFError</span><span class="p">,</span> <span class="nb">input</span><span class="p">)</span>

            <span class="k">del</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="s">&#39;prompt&#39;</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="s">&#39;prompt&#39;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="n">savestdin</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">savestdout</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
    <span class="nd">@unittest.skipUnless</span><span class="p">(</span><span class="n">pty</span><span class="p">,</span> <span class="s">&quot;the pty and signal modules must be available&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="BuiltinTest.check_input_tty"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.check_input_tty">[docs]</a>    <span class="k">def</span> <span class="nf">check_input_tty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompt</span><span class="p">,</span> <span class="n">terminal_input</span><span class="p">,</span> <span class="n">stdio_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">isatty</span><span class="p">()</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">isatty</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">skipTest</span><span class="p">(</span><span class="s">&quot;stdin and stdout must be ttys&quot;</span><span class="p">)</span>
        <span class="n">r</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">pipe</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">pid</span><span class="p">,</span> <span class="n">fd</span> <span class="o">=</span> <span class="n">pty</span><span class="o">.</span><span class="n">fork</span><span class="p">()</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">skipTest</span><span class="p">(</span><span class="s">&quot;pty.fork() raised {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">pid</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c"># Child</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c"># Make sure we don&#39;t get stuck if there&#39;s a problem</span>
                <span class="n">signal</span><span class="o">.</span><span class="n">alarm</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
                <span class="c"># Check the error handlers are accounted for</span>
                <span class="k">if</span> <span class="n">stdio_encoding</span><span class="p">:</span>
                    <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">TextIOWrapper</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">detach</span><span class="p">(),</span>
                                                 <span class="n">encoding</span><span class="o">=</span><span class="n">stdio_encoding</span><span class="p">,</span>
                                                 <span class="n">errors</span><span class="o">=</span><span class="s">&#39;surrogateescape&#39;</span><span class="p">)</span>
                    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">TextIOWrapper</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">detach</span><span class="p">(),</span>
                                                  <span class="n">encoding</span><span class="o">=</span><span class="n">stdio_encoding</span><span class="p">,</span>
                                                  <span class="n">errors</span><span class="o">=</span><span class="s">&#39;replace&#39;</span><span class="p">)</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">wpipe</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s">&quot;tty =&quot;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">isatty</span><span class="p">()</span> <span class="ow">and</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">isatty</span><span class="p">(),</span> <span class="nb">file</span><span class="o">=</span><span class="n">wpipe</span><span class="p">)</span>
                    <span class="k">print</span><span class="p">(</span><span class="n">ascii</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)),</span> <span class="nb">file</span><span class="o">=</span><span class="n">wpipe</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="c"># We don&#39;t want to return to unittest...</span>
                <span class="n">os</span><span class="o">.</span><span class="n">_exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c"># Parent</span>
        <span class="n">os</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">terminal_input</span> <span class="o">+</span> <span class="n">b</span><span class="s">&quot;</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="c"># Get results from the pipe</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">rpipe</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">rpipe</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
                    <span class="c"># The other end was closed =&gt; the child exited</span>
                    <span class="k">break</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="c"># Check the result was got and corresponds to the user&#39;s terminal input</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c"># Something went wrong, try to get at stderr</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&quot;ascii&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">child_output</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;got </span><span class="si">%d</span><span class="s"> lines in pipe but expected 2, child output was:</span><span class="se">\n</span><span class="si">%s</span><span class="s">&quot;</span>
                          <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">),</span> <span class="n">child_output</span><span class="o">.</span><span class="n">read</span><span class="p">()))</span>
        <span class="n">os</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>
        <span class="c"># Check we did exercise the GNU readline path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">{</span><span class="s">&#39;tty = True&#39;</span><span class="p">,</span> <span class="s">&#39;tty = False&#39;</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;tty = True&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">skipTest</span><span class="p">(</span><span class="s">&quot;standard IO in should have been a tty&quot;</span><span class="p">)</span>
        <span class="n">input_result</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>   <span class="c"># ascii() -&gt; eval() roundtrip</span>
        <span class="k">if</span> <span class="n">stdio_encoding</span><span class="p">:</span>
            <span class="n">expected</span> <span class="o">=</span> <span class="n">terminal_input</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">stdio_encoding</span><span class="p">,</span> <span class="s">&#39;surrogateescape&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">expected</span> <span class="o">=</span> <span class="n">terminal_input</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">encoding</span><span class="p">)</span>  <span class="c"># what else?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">input_result</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_input_tty"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_input_tty">[docs]</a>    <span class="k">def</span> <span class="nf">test_input_tty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test input() functionality when wired to a tty (the code path</span>
        <span class="c"># is different and invokes GNU readline if available).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_input_tty</span><span class="p">(</span><span class="s">&quot;prompt&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;quux&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_input_tty_non_ascii"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_input_tty_non_ascii">[docs]</a>    <span class="k">def</span> <span class="nf">test_input_tty_non_ascii</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Check stdin/stdout encoding is used when invoking GNU readline</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_input_tty</span><span class="p">(</span><span class="s">&quot;promptÃ©&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;quux</span><span class="se">\xe9</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;utf-8&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_input_tty_non_ascii_unicode_errors"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_input_tty_non_ascii_unicode_errors">[docs]</a>    <span class="k">def</span> <span class="nf">test_input_tty_non_ascii_unicode_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Check stdin/stdout error handler is used when invoking GNU readline</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_input_tty</span><span class="p">(</span><span class="s">&quot;promptÃ©&quot;</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;quux</span><span class="se">\xe9</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;ascii&quot;</span><span class="p">)</span>

    <span class="c"># test_int(): see test_int.py for tests of built-in function int().</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_repr"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_repr">[docs]</a>    <span class="k">def</span> <span class="nf">test_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\&#39;\&#39;</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(()),</span> <span class="s">&#39;()&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">([]),</span> <span class="s">&#39;[]&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">({}),</span> <span class="s">&#39;{}&#39;</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="s">&#39;[[...]]&#39;</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="s">&#39;{0: {...}}&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_round"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_round">[docs]</a>    <span class="k">def</span> <span class="nf">test_round</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)),</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">1.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">10.0</span><span class="p">),</span> <span class="mf">10.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">1000000000.0</span><span class="p">),</span> <span class="mf">1000000000.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">1e20</span><span class="p">),</span> <span class="mf">1e20</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">),</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">10.0</span><span class="p">),</span> <span class="o">-</span><span class="mf">10.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">1000000000.0</span><span class="p">),</span> <span class="o">-</span><span class="mf">1000000000.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">1e20</span><span class="p">),</span> <span class="o">-</span><span class="mf">1e20</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">1.1</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">10.1</span><span class="p">),</span> <span class="mf">10.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">1000000000.1</span><span class="p">),</span> <span class="mf">1000000000.0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">1.1</span><span class="p">),</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">10.1</span><span class="p">),</span> <span class="o">-</span><span class="mf">10.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">1000000000.1</span><span class="p">),</span> <span class="o">-</span><span class="mf">1000000000.0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">0.9</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">9.9</span><span class="p">),</span> <span class="mf">10.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">999999999.9</span><span class="p">),</span> <span class="mf">1000000000.0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">0.9</span><span class="p">),</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">9.9</span><span class="p">),</span> <span class="o">-</span><span class="mf">10.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">999999999.9</span><span class="p">),</span> <span class="o">-</span><span class="mf">1000000000.0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">8.0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="o">-</span><span class="mf">10.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">8.0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)),</span> <span class="nb">float</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">8.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span> <span class="nb">float</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">8.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span> <span class="nb">float</span><span class="p">)</span>

        <span class="c"># Check even / odd rounding behaviour</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">5.5</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">6.5</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">5.5</span><span class="p">),</span> <span class="o">-</span><span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mf">6.5</span><span class="p">),</span> <span class="o">-</span><span class="mi">6</span><span class="p">)</span>

        <span class="c"># Check behavior on ints</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span> <span class="mi">8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mi">8</span><span class="p">),</span> <span class="o">-</span><span class="mi">8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)),</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span> <span class="nb">int</span><span class="p">)</span>

        <span class="c"># test new kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">number</span><span class="o">=-</span><span class="mf">8.0</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span> <span class="o">-</span><span class="mf">10.0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">round</span><span class="p">)</span>

        <span class="c"># test generic rounding delegation for reals</span>
        <span class="k">class</span> <span class="nc">TestRound</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__round__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="mi">23</span>

        <span class="k">class</span> <span class="nc">TestNoRound</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">TestRound</span><span class="p">()),</span> <span class="mi">23</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">round</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">round</span><span class="p">,</span> <span class="n">TestNoRound</span><span class="p">())</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">TestNoRound</span><span class="p">()</span>
        <span class="n">t</span><span class="o">.</span><span class="n">__round__</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">round</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">round</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c"># Some versions of glibc for alpha have a bug that affects</span>
    <span class="c"># float -&gt; integer rounding (floor, ceil, rint, round) for</span>
    <span class="c"># values in the range [2**52, 2**53).  See:</span>
    <span class="c">#</span>
    <span class="c">#   http://sources.redhat.com/bugzilla/show_bug.cgi?id=5350</span>
    <span class="c">#</span>
    <span class="c"># We skip this test on Linux/alpha if it would fail.</span></div>
    <span class="n">linux_alpha</span> <span class="o">=</span> <span class="p">(</span><span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;Linux&#39;</span><span class="p">)</span> <span class="ow">and</span>
                   <span class="n">platform</span><span class="o">.</span><span class="n">machine</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;alpha&#39;</span><span class="p">))</span>
    <span class="n">system_round_bug</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="mf">5e15</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="mf">5e15</span><span class="o">+</span><span class="mi">1</span>
    <span class="nd">@unittest.skipIf</span><span class="p">(</span><span class="n">linux_alpha</span> <span class="ow">and</span> <span class="n">system_round_bug</span><span class="p">,</span>
                     <span class="s">&quot;test will fail;  failure is probably due to a &quot;</span>
                     <span class="s">&quot;buggy system round function&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="BuiltinTest.test_round_large"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_round_large">[docs]</a>    <span class="k">def</span> <span class="nf">test_round_large</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue #1869: integral floats should remain unchanged</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">5e15</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="mf">5e15</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">5e15</span><span class="p">),</span> <span class="mf">5e15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">5e15</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="mf">5e15</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">5e15</span><span class="o">+</span><span class="mi">2</span><span class="p">),</span> <span class="mf">5e15</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">5e15</span><span class="o">+</span><span class="mi">3</span><span class="p">),</span> <span class="mf">5e15</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_setattr"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_setattr">[docs]</a>    <span class="k">def</span> <span class="nf">test_setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s">&#39;spam&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">spam</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">setattr</span><span class="p">,</span> <span class="n">sys</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;spam&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">setattr</span><span class="p">)</span>

    <span class="c"># test_str(): see test_unicode.py and test_bytes.py for str() tests.</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_sum"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_sum">[docs]</a>    <span class="k">def</span> <span class="nf">test_sum</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">([]),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">))),</span> <span class="mi">27</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">)))),</span> <span class="mi">27</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">Squares</span><span class="p">(</span><span class="mi">10</span><span class="p">)),</span> <span class="mi">285</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">Squares</span><span class="p">(</span><span class="mi">10</span><span class="p">))),</span> <span class="mi">285</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sum</span><span class="p">([[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">]],</span> <span class="p">[]),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">sum</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">sum</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">sum</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">sum</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">sum</span><span class="p">,</span> <span class="p">[</span><span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;c&#39;</span><span class="p">],</span> <span class="n">b</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;b&#39;</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">sum</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">sum</span><span class="p">,</span> <span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">sum</span><span class="p">,</span> <span class="p">[{</span><span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">}])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">sum</span><span class="p">,</span> <span class="p">[{</span><span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">}]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">})</span>

        <span class="k">class</span> <span class="nc">BadSeq</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">sum</span><span class="p">,</span> <span class="n">BadSeq</span><span class="p">())</span>

        <span class="n">empty</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="nb">sum</span><span class="p">(([</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)),</span> <span class="n">empty</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">empty</span><span class="p">,</span> <span class="p">[])</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_type"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_type">[docs]</a>    <span class="k">def</span> <span class="nf">test_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span>  <span class="nb">type</span><span class="p">(</span><span class="s">&#39;123&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nb">type</span><span class="p">(()))</span>

    <span class="c"># We don&#39;t want self in vars(), so these are static methods</span>
</div>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BuiltinTest.get_vars_f0"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.get_vars_f0">[docs]</a>    <span class="k">def</span> <span class="nf">get_vars_f0</span><span class="p">():</span>
        <span class="k">return</span> <span class="nb">vars</span><span class="p">()</span>
</div>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="BuiltinTest.get_vars_f2"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.get_vars_f2">[docs]</a>    <span class="k">def</span> <span class="nf">get_vars_f2</span><span class="p">():</span>
        <span class="n">BuiltinTest</span><span class="o">.</span><span class="n">get_vars_f0</span><span class="p">()</span>
        <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="nb">vars</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="BuiltinTest.C_get_vars"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.C_get_vars">[docs]</a>    <span class="k">class</span> <span class="nc">C_get_vars</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<div class="viewcode-block" id="BuiltinTest.C_get_vars.getDict"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.C_get_vars.getDict">[docs]</a>        <span class="k">def</span> <span class="nf">getDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span></div>
        <span class="n">__dict__</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">fget</span><span class="o">=</span><span class="n">getDict</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_vars"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_vars">[docs]</a>    <span class="k">def</span> <span class="nf">test_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">vars</span><span class="p">()),</span> <span class="nb">set</span><span class="p">(</span><span class="nb">dir</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">vars</span><span class="p">(</span><span class="n">sys</span><span class="p">)),</span> <span class="nb">set</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="n">sys</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_vars_f0</span><span class="p">(),</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_vars_f2</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">vars</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">vars</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">C_get_vars</span><span class="p">()),</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">})</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_zip"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_zip">[docs]</a>    <span class="k">def</span> <span class="nf">test_zip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)),</span> <span class="n">t</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)),</span> <span class="n">t</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)),</span> <span class="n">t</span><span class="p">)</span>
        <span class="k">class</span> <span class="nc">I</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">IndexError</span>
                <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">I</span><span class="p">())),</span> <span class="n">t</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">()),</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="p">[])),</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">zip</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">class</span> <span class="nc">G</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">zip</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">G</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">,</span> <span class="nb">zip</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">TestFailingIter</span><span class="p">())</span>

        <span class="c"># Make sure zip doesn&#39;t try to allocate a billion elements for the</span>
        <span class="c"># result list when one of its arguments doesn&#39;t say how long it is.</span>
        <span class="c"># A MemoryError is the most likely failure mode.</span>
        <span class="k">class</span> <span class="nc">SequenceWithoutALength</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">IndexError</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">i</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">SequenceWithoutALength</span><span class="p">(),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">30</span><span class="p">))),</span>
            <span class="nb">list</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>
        <span class="p">)</span>

        <span class="k">class</span> <span class="nc">BadSeq</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">i</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="n">BadSeq</span><span class="p">(),</span> <span class="n">BadSeq</span><span class="p">()))</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_zip_pickle"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_zip_pickle">[docs]</a>    <span class="k">def</span> <span class="nf">test_zip_pickle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>
        <span class="n">z1</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_iter_pickle</span><span class="p">(</span><span class="n">z1</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_format"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_format">[docs]</a>    <span class="k">def</span> <span class="nf">test_format</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test the basic machinery of the format() builtin.  Don&#39;t test</span>
        <span class="c">#  the specifics of the various formatters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;3&#39;</span><span class="p">)</span>

        <span class="c"># Returns some classes to use for various tests.  There&#39;s</span>
        <span class="c">#  an old-style version, and a new-style version</span>
        <span class="k">def</span> <span class="nf">classes_new</span><span class="p">():</span>
            <span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
                <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
                <span class="k">def</span> <span class="nf">__format__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_spec</span><span class="p">):</span>
                    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">format_spec</span>
            <span class="k">class</span> <span class="nc">DerivedFromA</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
                <span class="k">pass</span>

            <span class="k">class</span> <span class="nc">Simple</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> <span class="k">pass</span>
            <span class="k">class</span> <span class="nc">DerivedFromSimple</span><span class="p">(</span><span class="n">Simple</span><span class="p">):</span>
                <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
                <span class="k">def</span> <span class="nf">__format__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_spec</span><span class="p">):</span>
                    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">format_spec</span>
            <span class="k">class</span> <span class="nc">DerivedFromSimple2</span><span class="p">(</span><span class="n">DerivedFromSimple</span><span class="p">):</span> <span class="k">pass</span>
            <span class="k">return</span> <span class="n">A</span><span class="p">,</span> <span class="n">DerivedFromA</span><span class="p">,</span> <span class="n">DerivedFromSimple</span><span class="p">,</span> <span class="n">DerivedFromSimple2</span>

        <span class="k">def</span> <span class="nf">class_test</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">DerivedFromA</span><span class="p">,</span> <span class="n">DerivedFromSimple</span><span class="p">,</span> <span class="n">DerivedFromSimple2</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">A</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="s">&#39;spec&#39;</span><span class="p">),</span> <span class="s">&#39;3spec&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">DerivedFromA</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="s">&#39;spec&#39;</span><span class="p">),</span> <span class="s">&#39;4spec&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">DerivedFromSimple</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="s">&#39;abc&#39;</span><span class="p">),</span> <span class="s">&#39;5abc&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">DerivedFromSimple2</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s">&#39;abcdef&#39;</span><span class="p">),</span>
                             <span class="s">&#39;10abcdef&#39;</span><span class="p">)</span>

        <span class="n">class_test</span><span class="p">(</span><span class="o">*</span><span class="n">classes_new</span><span class="p">())</span>

        <span class="k">def</span> <span class="nf">empty_format_spec</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="c"># test that:</span>
            <span class="c">#  format(x, &#39;&#39;) == str(x)</span>
            <span class="c">#  format(x) == str(x)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

        <span class="c"># for builtin types, format(x, &quot;&quot;) == str(x)</span>
        <span class="n">empty_format_spec</span><span class="p">(</span><span class="mi">17</span><span class="o">**</span><span class="mi">13</span><span class="p">)</span>
        <span class="n">empty_format_spec</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="n">empty_format_spec</span><span class="p">(</span><span class="mf">3.1415e104</span><span class="p">)</span>
        <span class="n">empty_format_spec</span><span class="p">(</span><span class="o">-</span><span class="mf">3.1415e104</span><span class="p">)</span>
        <span class="n">empty_format_spec</span><span class="p">(</span><span class="mf">3.1415e-104</span><span class="p">)</span>
        <span class="n">empty_format_spec</span><span class="p">(</span><span class="o">-</span><span class="mf">3.1415e-104</span><span class="p">)</span>
        <span class="n">empty_format_spec</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
        <span class="n">empty_format_spec</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>

        <span class="c"># TypeError because self.__format__ returns the wrong type</span>
        <span class="k">class</span> <span class="nc">BadFormatResult</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__format__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_spec</span><span class="p">):</span>
                <span class="k">return</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">BadFormatResult</span><span class="p">(),</span> <span class="s">&quot;&quot;</span><span class="p">)</span>

        <span class="c"># TypeError because format_spec is not unicode or str</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="nb">object</span><span class="p">(),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="nb">object</span><span class="p">(),</span> <span class="nb">object</span><span class="p">())</span>

        <span class="c"># tests for object.__format__ really belong elsewhere, but</span>
        <span class="c">#  there&#39;s no good place to put them</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span><span class="o">.</span><span class="n">__format__</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;&lt;object object at&#39;</span><span class="p">))</span>

        <span class="c"># first argument to object.__format__ must be string</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">object</span><span class="p">()</span><span class="o">.</span><span class="n">__format__</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">object</span><span class="p">()</span><span class="o">.</span><span class="n">__format__</span><span class="p">,</span> <span class="nb">object</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">object</span><span class="p">()</span><span class="o">.</span><span class="n">__format__</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

        <span class="c"># --------------------------------------------------------------------</span>
        <span class="c"># Issue #7994: object.__format__ with a non-empty format string is</span>
        <span class="c">#  deprecated</span>
        <span class="k">def</span> <span class="nf">test_deprecated_format_string</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">fmt_str</span><span class="p">,</span> <span class="n">should_raise</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">should_raise</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">fmt_str</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">fmt_str</span><span class="p">)</span>

        <span class="n">fmt_strs</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;s&#39;</span><span class="p">]</span>

        <span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__format__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt_str</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">format</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">fmt_str</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">fmt_str</span> <span class="ow">in</span> <span class="n">fmt_strs</span><span class="p">:</span>
            <span class="n">test_deprecated_format_string</span><span class="p">(</span><span class="n">A</span><span class="p">(),</span> <span class="n">fmt_str</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">B</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="k">for</span> <span class="n">cls</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">object</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">fmt_str</span> <span class="ow">in</span> <span class="n">fmt_strs</span><span class="p">:</span>
                <span class="n">test_deprecated_format_string</span><span class="p">(</span><span class="n">cls</span><span class="p">(),</span> <span class="n">fmt_str</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">fmt_str</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c"># --------------------------------------------------------------------</span>

        <span class="c"># make sure we can take a subclass of str as a format spec</span>
        <span class="k">class</span> <span class="nc">DerivedFromStr</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span> <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">DerivedFromStr</span><span class="p">(</span><span class="s">&#39;10&#39;</span><span class="p">)),</span> <span class="s">&#39;         0&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_bin"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_bin">[docs]</a>    <span class="k">def</span> <span class="nf">test_bin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">bin</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&#39;0b0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">bin</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;0b1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">bin</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;-0b1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">bin</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">65</span><span class="p">),</span> <span class="s">&#39;0b1&#39;</span> <span class="o">+</span> <span class="s">&#39;0&#39;</span> <span class="o">*</span> <span class="mi">65</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">bin</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">65</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;0b&#39;</span> <span class="o">+</span> <span class="s">&#39;1&#39;</span> <span class="o">*</span> <span class="mi">65</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">bin</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">65</span><span class="p">)),</span> <span class="s">&#39;-0b1&#39;</span> <span class="o">+</span> <span class="s">&#39;0&#39;</span> <span class="o">*</span> <span class="mi">65</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">bin</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">65</span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span> <span class="s">&#39;-0b&#39;</span> <span class="o">+</span> <span class="s">&#39;1&#39;</span> <span class="o">*</span> <span class="mi">65</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_bytearray_translate"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_bytearray_translate">[docs]</a>    <span class="k">def</span> <span class="nf">test_bytearray_translate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;abc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">translate</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">translate</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;1&quot;</span><span class="o">*</span><span class="mi">256</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BuiltinTest.test_construct_singletons"><a class="viewcode-back" href="../../test.html#test.test_builtin.BuiltinTest.test_construct_singletons">[docs]</a>    <span class="k">def</span> <span class="nf">test_construct_singletons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">const</span> <span class="ow">in</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">Ellipsis</span><span class="p">,</span> <span class="bp">NotImplemented</span><span class="p">:</span>
            <span class="n">tp</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">const</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">tp</span><span class="p">(),</span> <span class="n">const</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">tp</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">tp</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="TestSorted"><a class="viewcode-back" href="../../test.html#test.test_builtin.TestSorted">[docs]</a><span class="k">class</span> <span class="nc">TestSorted</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestSorted.test_basic"><a class="viewcode-back" href="../../test.html#test.test_builtin.TestSorted.test_basic">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
        <span class="n">copy</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:]</span>
        <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">copy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">copy</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span>

        <span class="n">data</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">copy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="o">-</span><span class="n">x</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span>
        <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">copy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestSorted.test_inputtypes"><a class="viewcode-back" href="../../test.html#test.test_builtin.TestSorted.test_inputtypes">[docs]</a>    <span class="k">def</span> <span class="nf">test_inputtypes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;abracadabra&#39;</span>
        <span class="n">types</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">T</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>  <span class="c"># unique letters only</span>
        <span class="n">types</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">,</span> <span class="nb">frozenset</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">T</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestSorted.test_baddecorator"><a class="viewcode-back" href="../../test.html#test.test_builtin.TestSorted.test_baddecorator">[docs]</a>    <span class="k">def</span> <span class="nf">test_baddecorator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="s">&#39;The quick Brown fox Jumped over The lazy Dog&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="ShutdownTest"><a class="viewcode-back" href="../../test.html#test.test_builtin.ShutdownTest">[docs]</a><span class="k">class</span> <span class="nc">ShutdownTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="ShutdownTest.test_cleanup"><a class="viewcode-back" href="../../test.html#test.test_builtin.ShutdownTest.test_cleanup">[docs]</a>    <span class="k">def</span> <span class="nf">test_cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue #19255: builtins are still available at shutdown</span>
        <span class="n">code</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;if 1:</span>
<span class="s">            import builtins</span>
<span class="s">            import sys</span>

<span class="s">            class C:</span>
<span class="s">                def __del__(self):</span>
<span class="s">                    print(&quot;before&quot;)</span>
<span class="s">                    # Check that builtins still exist</span>
<span class="s">                    len(())</span>
<span class="s">                    print(&quot;after&quot;)</span>

<span class="s">            c = C()</span>
<span class="s">            # Make this module survive until builtins and sys are cleaned</span>
<span class="s">            builtins.here = sys.modules[__name__]</span>
<span class="s">            sys.here = sys.modules[__name__]</span>
<span class="s">            # Create a reference loop so that this module needs to go</span>
<span class="s">            # through a GC phase.</span>
<span class="s">            here = sys.modules[__name__]</span>
<span class="s">            &quot;&quot;&quot;</span>
        <span class="c"># Issue #20599: Force ASCII encoding to get a codec implemented in C,</span>
        <span class="c"># otherwise the codec may be unloaded before C.__del__() is called, and</span>
        <span class="c"># so print(&quot;before&quot;) fails because the codec cannot be used to encode</span>
        <span class="c"># &quot;before&quot; to sys.stdout.encoding. For example, on Windows,</span>
        <span class="c"># sys.stdout.encoding is the OEM code page and these code pages are</span>
        <span class="c"># implemented in Python</span>
        <span class="n">rc</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">assert_python_ok</span><span class="p">(</span><span class="s">&quot;-c&quot;</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span>
                                        <span class="n">PYTHONIOENCODING</span><span class="o">=</span><span class="s">&quot;ascii&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="s">&quot;before&quot;</span><span class="p">,</span> <span class="s">&quot;after&quot;</span><span class="p">],</span> <span class="n">out</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">())</span>

</div></div>
<div class="viewcode-block" id="load_tests"><a class="viewcode-back" href="../../test.html#test.test_builtin.load_tests">[docs]</a><span class="k">def</span> <span class="nf">load_tests</span><span class="p">(</span><span class="n">loader</span><span class="p">,</span> <span class="n">tests</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">doctest</span> <span class="kn">import</span> <span class="n">DocTestSuite</span>
    <span class="n">tests</span><span class="o">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">DocTestSuite</span><span class="p">(</span><span class="n">builtins</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">tests</span>
</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Weldon Henson.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>