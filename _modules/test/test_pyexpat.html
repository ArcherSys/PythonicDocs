

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>test.test_pyexpat &mdash; ArcherBashPYDocs 1.0.0. documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ArcherBashPYDocs 1.0.0. documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> ArcherBashPYDocs</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="simple">
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ArcherBashPYDocs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>test.test_pyexpat</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for test.test_pyexpat</h1><div class="highlight"><pre>
<span class="c"># XXX TypeErrors on calling handlers, or on bad return values from a</span>
<span class="c"># handler, are obscure and unhelpful.</span>

<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">from</span> <span class="nn">xml.parsers</span> <span class="kn">import</span> <span class="n">expat</span>
<span class="kn">from</span> <span class="nn">xml.parsers.expat</span> <span class="kn">import</span> <span class="n">errors</span>

<span class="kn">from</span> <span class="nn">test.support</span> <span class="kn">import</span> <span class="n">sortdict</span><span class="p">,</span> <span class="n">run_unittest</span>


<div class="viewcode-block" id="SetAttributeTest"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.SetAttributeTest">[docs]</a><span class="k">class</span> <span class="nc">SetAttributeTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="SetAttributeTest.setUp"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.SetAttributeTest.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">(</span><span class="n">namespace_separator</span><span class="o">=</span><span class="s">&#39;!&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_get_pairs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="p">]</span>
</div>
<div class="viewcode-block" id="SetAttributeTest.test_ordered_attributes"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.SetAttributeTest.test_ordered_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">test_ordered_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_get_pairs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">ordered_attributes</span> <span class="o">=</span> <span class="n">x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">ordered_attributes</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SetAttributeTest.test_specified_attributes"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.SetAttributeTest.test_specified_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">test_specified_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_get_pairs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">specified_attributes</span> <span class="o">=</span> <span class="n">x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">specified_attributes</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

</div></div>
<span class="n">data</span> <span class="o">=</span> <span class="n">b</span><span class="s">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s">&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot; standalone=&quot;no&quot;?&gt;</span>
<span class="s">&lt;?xml-stylesheet href=&quot;stylesheet.css&quot;?&gt;</span>
<span class="s">&lt;!-- comment data --&gt;</span>
<span class="s">&lt;!DOCTYPE quotations SYSTEM &quot;quotations.dtd&quot; [</span>
<span class="s">&lt;!ELEMENT root ANY&gt;</span>
<span class="s">&lt;!ATTLIST root attr1 CDATA #REQUIRED attr2 CDATA #IMPLIED&gt;</span>
<span class="s">&lt;!NOTATION notation SYSTEM &quot;notation.jpeg&quot;&gt;</span>
<span class="s">&lt;!ENTITY acirc &quot;&amp;#226;&quot;&gt;</span>
<span class="s">&lt;!ENTITY external_entity SYSTEM &quot;entity.file&quot;&gt;</span>
<span class="s">&lt;!ENTITY unparsed_entity SYSTEM &quot;entity.file&quot; NDATA notation&gt;</span>
<span class="si">%u</span><span class="s">nparsed_entity;</span>
<span class="s">]&gt;</span>

<span class="s">&lt;root attr1=&quot;value1&quot; attr2=&quot;value2&amp;#8000;&quot;&gt;</span>
<span class="s">&lt;myns:subelement xmlns:myns=&quot;http://www.python.org/namespace&quot;&gt;</span>
<span class="s">     Contents of subelements</span>
<span class="s">&lt;/myns:subelement&gt;</span>
<span class="s">&lt;sub2&gt;&lt;![CDATA[contents of CDATA section]]&gt;&lt;/sub2&gt;</span>
<span class="s">&amp;external_entity;</span>
<span class="s">&amp;skipped_entity;</span>
<span class="se">\xb5</span><span class="s"></span>
<span class="s">&lt;/root&gt;</span>
<span class="s">&#39;&#39;&#39;</span>


<span class="c"># Produce UTF-8 output</span>
<div class="viewcode-block" id="ParseTest"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest">[docs]</a><span class="k">class</span> <span class="nc">ParseTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="ParseTest.Outputter"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter">[docs]</a>    <span class="k">class</span> <span class="nc">Outputter</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="ParseTest.Outputter.StartElementHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.StartElementHandler">[docs]</a>        <span class="k">def</span> <span class="nf">StartElementHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;Start element: &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span>
                            <span class="n">sortdict</span><span class="p">(</span><span class="n">attrs</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.EndElementHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.EndElementHandler">[docs]</a>        <span class="k">def</span> <span class="nf">EndElementHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;End element: &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.CharacterDataHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.CharacterDataHandler">[docs]</a>        <span class="k">def</span> <span class="nf">CharacterDataHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;Character data: &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.ProcessingInstructionHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.ProcessingInstructionHandler">[docs]</a>        <span class="k">def</span> <span class="nf">ProcessingInstructionHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;PI: &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">target</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.StartNamespaceDeclHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.StartNamespaceDeclHandler">[docs]</a>        <span class="k">def</span> <span class="nf">StartNamespaceDeclHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">uri</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;NS decl: &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.EndNamespaceDeclHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.EndNamespaceDeclHandler">[docs]</a>        <span class="k">def</span> <span class="nf">EndNamespaceDeclHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;End of NS decl: &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">prefix</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.StartCdataSectionHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.StartCdataSectionHandler">[docs]</a>        <span class="k">def</span> <span class="nf">StartCdataSectionHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;Start of CDATA section&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.EndCdataSectionHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.EndCdataSectionHandler">[docs]</a>        <span class="k">def</span> <span class="nf">EndCdataSectionHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;End of CDATA section&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.CommentHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.CommentHandler">[docs]</a>        <span class="k">def</span> <span class="nf">CommentHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;Comment: &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.NotationDeclHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.NotationDeclHandler">[docs]</a>        <span class="k">def</span> <span class="nf">NotationDeclHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">sysid</span><span class="p">,</span> <span class="n">pubid</span> <span class="o">=</span> <span class="n">args</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;Notation declared: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">args</span><span class="p">,))</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.UnparsedEntityDeclHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.UnparsedEntityDeclHandler">[docs]</a>        <span class="k">def</span> <span class="nf">UnparsedEntityDeclHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="n">entityName</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">systemId</span><span class="p">,</span> <span class="n">publicId</span><span class="p">,</span> <span class="n">notationName</span> <span class="o">=</span> <span class="n">args</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;Unparsed entity decl: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">args</span><span class="p">,))</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.NotStandaloneHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.NotStandaloneHandler">[docs]</a>        <span class="k">def</span> <span class="nf">NotStandaloneHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;Not standalone&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.ExternalEntityRefHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.ExternalEntityRefHandler">[docs]</a>        <span class="k">def</span> <span class="nf">ExternalEntityRefHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="n">context</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">sysId</span><span class="p">,</span> <span class="n">pubId</span> <span class="o">=</span> <span class="n">args</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;External entity ref: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:],))</span>
            <span class="k">return</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.StartDoctypeDeclHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.StartDoctypeDeclHandler">[docs]</a>        <span class="k">def</span> <span class="nf">StartDoctypeDeclHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;Start doctype&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
            <span class="k">return</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.EndDoctypeDeclHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.EndDoctypeDeclHandler">[docs]</a>        <span class="k">def</span> <span class="nf">EndDoctypeDeclHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;End doctype&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.EntityDeclHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.EntityDeclHandler">[docs]</a>        <span class="k">def</span> <span class="nf">EntityDeclHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;Entity declaration&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
            <span class="k">return</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.XmlDeclHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.XmlDeclHandler">[docs]</a>        <span class="k">def</span> <span class="nf">XmlDeclHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;XML declaration&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
            <span class="k">return</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.ElementDeclHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.ElementDeclHandler">[docs]</a>        <span class="k">def</span> <span class="nf">ElementDeclHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;Element declaration&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
            <span class="k">return</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.AttlistDeclHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.AttlistDeclHandler">[docs]</a>        <span class="k">def</span> <span class="nf">AttlistDeclHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;Attribute list declaration&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
            <span class="k">return</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.SkippedEntityHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.SkippedEntityHandler">[docs]</a>        <span class="k">def</span> <span class="nf">SkippedEntityHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&quot;Skipped entity&quot;</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
            <span class="k">return</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.DefaultHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.DefaultHandler">[docs]</a>        <span class="k">def</span> <span class="nf">DefaultHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">userData</span><span class="p">):</span>
            <span class="k">pass</span>
</div>
<div class="viewcode-block" id="ParseTest.Outputter.DefaultHandlerExpand"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.Outputter.DefaultHandlerExpand">[docs]</a>        <span class="k">def</span> <span class="nf">DefaultHandlerExpand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">userData</span><span class="p">):</span>
            <span class="k">pass</span>
</div></div>
    <span class="n">handler_names</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;StartElementHandler&#39;</span><span class="p">,</span> <span class="s">&#39;EndElementHandler&#39;</span><span class="p">,</span> <span class="s">&#39;CharacterDataHandler&#39;</span><span class="p">,</span>
        <span class="s">&#39;ProcessingInstructionHandler&#39;</span><span class="p">,</span> <span class="s">&#39;UnparsedEntityDeclHandler&#39;</span><span class="p">,</span>
        <span class="s">&#39;NotationDeclHandler&#39;</span><span class="p">,</span> <span class="s">&#39;StartNamespaceDeclHandler&#39;</span><span class="p">,</span>
        <span class="s">&#39;EndNamespaceDeclHandler&#39;</span><span class="p">,</span> <span class="s">&#39;CommentHandler&#39;</span><span class="p">,</span>
        <span class="s">&#39;StartCdataSectionHandler&#39;</span><span class="p">,</span> <span class="s">&#39;EndCdataSectionHandler&#39;</span><span class="p">,</span> <span class="s">&#39;DefaultHandler&#39;</span><span class="p">,</span>
        <span class="s">&#39;DefaultHandlerExpand&#39;</span><span class="p">,</span> <span class="s">&#39;NotStandaloneHandler&#39;</span><span class="p">,</span>
        <span class="s">&#39;ExternalEntityRefHandler&#39;</span><span class="p">,</span> <span class="s">&#39;StartDoctypeDeclHandler&#39;</span><span class="p">,</span>
        <span class="s">&#39;EndDoctypeDeclHandler&#39;</span><span class="p">,</span> <span class="s">&#39;EntityDeclHandler&#39;</span><span class="p">,</span> <span class="s">&#39;XmlDeclHandler&#39;</span><span class="p">,</span>
        <span class="s">&#39;ElementDeclHandler&#39;</span><span class="p">,</span> <span class="s">&#39;AttlistDeclHandler&#39;</span><span class="p">,</span> <span class="s">&#39;SkippedEntityHandler&#39;</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">_hookup_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set each of the callbacks defined on handler and named in</span>
<span class="sd">        self.handler_names on the given parser.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">handler_names</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_verify_parse_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operations</span><span class="p">):</span>
        <span class="n">expected_operations</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;XML declaration&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;1.0&#39;</span><span class="p">,</span> <span class="s">&#39;iso-8859-1&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
            <span class="s">&#39;PI: </span><span class="se">\&#39;</span><span class="s">xml-stylesheet</span><span class="se">\&#39;</span><span class="s"> </span><span class="se">\&#39;</span><span class="s">href=&quot;stylesheet.css&quot;</span><span class="se">\&#39;</span><span class="s">&#39;</span><span class="p">,</span>
            <span class="s">&quot;Comment: &#39; comment data &#39;&quot;</span><span class="p">,</span>
            <span class="s">&quot;Not standalone&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&quot;Start doctype&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;quotations&#39;</span><span class="p">,</span> <span class="s">&#39;quotations.dtd&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;Element declaration&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;root&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="p">()))),</span>
            <span class="p">(</span><span class="s">&#39;Attribute list declaration&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;root&#39;</span><span class="p">,</span> <span class="s">&#39;attr1&#39;</span><span class="p">,</span> <span class="s">&#39;CDATA&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span>
                <span class="mi">1</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;Attribute list declaration&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;root&#39;</span><span class="p">,</span> <span class="s">&#39;attr2&#39;</span><span class="p">,</span> <span class="s">&#39;CDATA&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">)),</span>
            <span class="s">&quot;Notation declared: (&#39;notation&#39;, None, &#39;notation.jpeg&#39;, None)&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Entity declaration&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;acirc&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\xe2</span><span class="s">&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">&#39;Entity declaration&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;external_entity&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;entity.file&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span>
            <span class="s">&quot;Unparsed entity decl: (&#39;unparsed_entity&#39;, None, &#39;entity.file&#39;, None, &#39;notation&#39;)&quot;</span><span class="p">,</span>
            <span class="s">&quot;Not standalone&quot;</span><span class="p">,</span>
            <span class="s">&quot;End doctype&quot;</span><span class="p">,</span>
            <span class="s">&quot;Start element: &#39;root&#39; {&#39;attr1&#39;: &#39;value1&#39;, &#39;attr2&#39;: &#39;value2</span><span class="se">\u1f40</span><span class="s">&#39;}&quot;</span><span class="p">,</span>
            <span class="s">&quot;NS decl: &#39;myns&#39; &#39;http://www.python.org/namespace&#39;&quot;</span><span class="p">,</span>
            <span class="s">&quot;Start element: &#39;http://www.python.org/namespace!subelement&#39; {}&quot;</span><span class="p">,</span>
            <span class="s">&quot;Character data: &#39;Contents of subelements&#39;&quot;</span><span class="p">,</span>
            <span class="s">&quot;End element: &#39;http://www.python.org/namespace!subelement&#39;&quot;</span><span class="p">,</span>
            <span class="s">&quot;End of NS decl: &#39;myns&#39;&quot;</span><span class="p">,</span>
            <span class="s">&quot;Start element: &#39;sub2&#39; {}&quot;</span><span class="p">,</span>
            <span class="s">&#39;Start of CDATA section&#39;</span><span class="p">,</span>
            <span class="s">&quot;Character data: &#39;contents of CDATA section&#39;&quot;</span><span class="p">,</span>
            <span class="s">&#39;End of CDATA section&#39;</span><span class="p">,</span>
            <span class="s">&quot;End element: &#39;sub2&#39;&quot;</span><span class="p">,</span>
            <span class="s">&quot;External entity ref: (None, &#39;entity.file&#39;, None)&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Skipped entity&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;skipped_entity&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
            <span class="s">&quot;Character data: &#39;</span><span class="se">\xb5</span><span class="s">&#39;&quot;</span><span class="p">,</span>
            <span class="s">&quot;End element: &#39;root&#39;&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">operation</span><span class="p">,</span> <span class="n">expected_operation</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">operations</span><span class="p">,</span> <span class="n">expected_operations</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">expected_operation</span><span class="p">)</span>

<div class="viewcode-block" id="ParseTest.test_parse_bytes"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.test_parse_bytes">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Outputter</span><span class="p">()</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">(</span><span class="n">namespace_separator</span><span class="o">=</span><span class="s">&#39;!&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hookup_callbacks</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">operations</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">out</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verify_parse_output</span><span class="p">(</span><span class="n">operations</span><span class="p">)</span>
        <span class="c"># Issue #6697.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\uD800</span><span class="s">&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ParseTest.test_parse_str"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.test_parse_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Outputter</span><span class="p">()</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">(</span><span class="n">namespace_separator</span><span class="o">=</span><span class="s">&#39;!&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hookup_callbacks</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;iso-8859-1&#39;</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">operations</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">out</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verify_parse_output</span><span class="p">(</span><span class="n">operations</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ParseTest.test_parse_file"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.test_parse_file">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Try parsing a file</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Outputter</span><span class="p">()</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">(</span><span class="n">namespace_separator</span><span class="o">=</span><span class="s">&#39;!&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hookup_callbacks</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span>
        <span class="nb">file</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">ParseFile</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>

        <span class="n">operations</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">out</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verify_parse_output</span><span class="p">(</span><span class="n">operations</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ParseTest.test_parse_again"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ParseTest.test_parse_again">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_again</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="nb">file</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">ParseFile</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
        <span class="c"># Issue 6676: ensure a meaningful exception is raised when attempting</span>
        <span class="c"># to parse more than one XML document per xmlparser instance,</span>
        <span class="c"># a limitation of the Expat library.</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">expat</span><span class="o">.</span><span class="n">error</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">ParseFile</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expat</span><span class="o">.</span><span class="n">ErrorString</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">code</span><span class="p">),</span>
                          <span class="n">expat</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">XML_ERROR_FINISHED</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="NamespaceSeparatorTest"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.NamespaceSeparatorTest">[docs]</a><span class="k">class</span> <span class="nc">NamespaceSeparatorTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="NamespaceSeparatorTest.test_legal"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.NamespaceSeparatorTest.test_legal">[docs]</a>    <span class="k">def</span> <span class="nf">test_legal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Tests that make sure we get errors when the namespace_separator value</span>
        <span class="c"># is illegal, and that we don&#39;t for good values:</span>
        <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">(</span><span class="n">namespace_separator</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">(</span><span class="n">namespace_separator</span><span class="o">=</span><span class="s">&#39; &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="NamespaceSeparatorTest.test_illegal"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.NamespaceSeparatorTest.test_illegal">[docs]</a>    <span class="k">def</span> <span class="nf">test_illegal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">(</span><span class="n">namespace_separator</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
                <span class="s">&#39;ParserCreate() argument 2 must be str or None, not int&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">(</span><span class="n">namespace_separator</span><span class="o">=</span><span class="s">&#39;too long&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
                <span class="s">&#39;namespace_separator must be at most one character, omitted, or None&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="NamespaceSeparatorTest.test_zero_length"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.NamespaceSeparatorTest.test_zero_length">[docs]</a>    <span class="k">def</span> <span class="nf">test_zero_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># ParserCreate() needs to accept a namespace_separator of zero length</span>
        <span class="c"># to satisfy the requirements of RDF applications that are required</span>
        <span class="c"># to simply glue together the namespace URI and the localname.  Though</span>
        <span class="c"># considered a wart of the RDF specifications, it needs to be supported.</span>
        <span class="c">#</span>
        <span class="c"># See XML-SIG mailing list thread starting with</span>
        <span class="c"># http://mail.python.org/pipermail/xml-sig/2001-April/005202.html</span>
        <span class="c">#</span>
        <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">(</span><span class="n">namespace_separator</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span> <span class="c"># too short</span>

</div></div>
<div class="viewcode-block" id="InterningTest"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.InterningTest">[docs]</a><span class="k">class</span> <span class="nc">InterningTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="InterningTest.test"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.InterningTest.test">[docs]</a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test the interning machinery.</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="n">L</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">def</span> <span class="nf">collector</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">StartElementHandler</span> <span class="o">=</span> <span class="n">collector</span>
        <span class="n">p</span><span class="o">.</span><span class="n">EndElementHandler</span> <span class="o">=</span> <span class="n">collector</span>
        <span class="n">p</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&lt;e&gt; &lt;e/&gt; &lt;e&gt;&lt;/e&gt; &lt;/e&gt;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">L</span><span class="p">:</span>
            <span class="c"># L should have the same string repeated over and over.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">tag</span> <span class="ow">is</span> <span class="n">entry</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="InterningTest.test_issue9402"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.InterningTest.test_issue9402">[docs]</a>    <span class="k">def</span> <span class="nf">test_issue9402</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># create an ExternalEntityParserCreate with buffer text</span>
        <span class="k">class</span> <span class="nc">ExternalOutputter</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">parser</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parser_result</span> <span class="o">=</span> <span class="bp">None</span>

            <span class="k">def</span> <span class="nf">ExternalEntityRefHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">sysId</span><span class="p">,</span> <span class="n">pubId</span><span class="p">):</span>
                <span class="n">external_parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">ExternalEntityParserCreate</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parser_result</span> <span class="o">=</span> <span class="n">external_parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">return</span> <span class="mi">1</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">(</span><span class="n">namespace_separator</span><span class="o">=</span><span class="s">&#39;!&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">ExternalOutputter</span><span class="p">(</span><span class="n">parser</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">ExternalEntityRefHandler</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">ExternalEntityRefHandler</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">parser_result</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="BufferTextTest"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest">[docs]</a><span class="k">class</span> <span class="nc">BufferTextTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="BufferTextTest.setUp"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stuff</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">CharacterDataHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CharacterDataHandler</span>
</div>
<div class="viewcode-block" id="BufferTextTest.check"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span>
                <span class="s">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s">stuff    = </span><span class="si">%r</span><span class="se">\n</span><span class="s">expected = </span><span class="si">%r</span><span class="s">&quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">expected</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="BufferTextTest.CharacterDataHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.CharacterDataHandler">[docs]</a>    <span class="k">def</span> <span class="nf">CharacterDataHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BufferTextTest.StartElementHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.StartElementHandler">[docs]</a>    <span class="k">def</span> <span class="nf">StartElementHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;&lt;</span><span class="si">%s</span><span class="s">&gt;&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">bt</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;buffer-text&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bt</span> <span class="o">==</span> <span class="s">&quot;yes&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">bt</span> <span class="o">==</span> <span class="s">&quot;no&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span> <span class="o">=</span> <span class="mi">0</span>
</div>
<div class="viewcode-block" id="BufferTextTest.EndElementHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.EndElementHandler">[docs]</a>    <span class="k">def</span> <span class="nf">EndElementHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;&lt;/</span><span class="si">%s</span><span class="s">&gt;&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BufferTextTest.CommentHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.CommentHandler">[docs]</a>    <span class="k">def</span> <span class="nf">CommentHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;&lt;!--</span><span class="si">%s</span><span class="s">--&gt;&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BufferTextTest.setHandlers"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.setHandlers">[docs]</a>    <span class="k">def</span> <span class="nf">setHandlers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handlers</span><span class="o">=</span><span class="p">[]):</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">handlers</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="BufferTextTest.test_default_to_disabled"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.test_default_to_disabled">[docs]</a>    <span class="k">def</span> <span class="nf">test_default_to_disabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BufferTextTest.test_buffering_enabled"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.test_buffering_enabled">[docs]</a>    <span class="k">def</span> <span class="nf">test_buffering_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Make sure buffering is turned on</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&lt;a&gt;1&lt;b/&gt;2&lt;c/&gt;3&lt;/a&gt;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;123&#39;</span><span class="p">],</span>
                         <span class="s">&quot;buffered text not properly collapsed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BufferTextTest.test1"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.test1">[docs]</a>    <span class="k">def</span> <span class="nf">test1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># XXX This test exposes more detail of Expat&#39;s text chunking than we</span>
        <span class="c"># XXX like, but it tests what we need to concisely.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setHandlers</span><span class="p">([</span><span class="s">&quot;StartElementHandler&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&lt;a&gt;1&lt;b buffer-text=&#39;no&#39;/&gt;2</span><span class="se">\n</span><span class="s">3&lt;c buffer-text=&#39;yes&#39;/&gt;4</span><span class="se">\n</span><span class="s">5&lt;/a&gt;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="p">,</span>
                         <span class="p">[</span><span class="s">&quot;&lt;a&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;b&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;c&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;4</span><span class="se">\n</span><span class="s">5&quot;</span><span class="p">],</span>
                         <span class="s">&quot;buffering control not reacting as expected&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BufferTextTest.test2"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.test2">[docs]</a>    <span class="k">def</span> <span class="nf">test2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&lt;a&gt;1&lt;b/&gt;&amp;lt;2&amp;gt;&lt;c/&gt;&amp;#32;</span><span class="se">\n</span><span class="s">&amp;#x20;3&lt;/a&gt;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;1&lt;2&gt; </span><span class="se">\n</span><span class="s"> 3&quot;</span><span class="p">],</span>
                         <span class="s">&quot;buffered text not properly collapsed&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BufferTextTest.test3"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.test3">[docs]</a>    <span class="k">def</span> <span class="nf">test3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setHandlers</span><span class="p">([</span><span class="s">&quot;StartElementHandler&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&lt;a&gt;1&lt;b/&gt;2&lt;c/&gt;3&lt;/a&gt;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;&lt;a&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;b&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;c&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">],</span>
                         <span class="s">&quot;buffered text not properly split&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BufferTextTest.test4"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.test4">[docs]</a>    <span class="k">def</span> <span class="nf">test4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setHandlers</span><span class="p">([</span><span class="s">&quot;StartElementHandler&quot;</span><span class="p">,</span> <span class="s">&quot;EndElementHandler&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">CharacterDataHandler</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&lt;a&gt;1&lt;b/&gt;2&lt;c/&gt;3&lt;/a&gt;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="p">,</span>
                         <span class="p">[</span><span class="s">&quot;&lt;a&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;b&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/b&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;c&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/c&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/a&gt;&quot;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="BufferTextTest.test5"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.test5">[docs]</a>    <span class="k">def</span> <span class="nf">test5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setHandlers</span><span class="p">([</span><span class="s">&quot;StartElementHandler&quot;</span><span class="p">,</span> <span class="s">&quot;EndElementHandler&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&lt;a&gt;1&lt;b&gt;&lt;/b&gt;2&lt;c/&gt;3&lt;/a&gt;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="p">,</span>
            <span class="p">[</span><span class="s">&quot;&lt;a&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;b&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/b&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;c&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/c&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/a&gt;&quot;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="BufferTextTest.test6"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.test6">[docs]</a>    <span class="k">def</span> <span class="nf">test6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setHandlers</span><span class="p">([</span><span class="s">&quot;CommentHandler&quot;</span><span class="p">,</span> <span class="s">&quot;EndElementHandler&quot;</span><span class="p">,</span>
                    <span class="s">&quot;StartElementHandler&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&lt;a&gt;1&lt;b/&gt;2&lt;c&gt;&lt;/c&gt;345&lt;/a&gt; &quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="p">,</span>
            <span class="p">[</span><span class="s">&quot;&lt;a&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;b&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/b&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;c&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/c&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;345&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/a&gt;&quot;</span><span class="p">],</span>
            <span class="s">&quot;buffered text not properly split&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BufferTextTest.test7"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.BufferTextTest.test7">[docs]</a>    <span class="k">def</span> <span class="nf">test7</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setHandlers</span><span class="p">([</span><span class="s">&quot;CommentHandler&quot;</span><span class="p">,</span> <span class="s">&quot;EndElementHandler&quot;</span><span class="p">,</span>
                    <span class="s">&quot;StartElementHandler&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&lt;a&gt;1&lt;b/&gt;2&lt;c&gt;&lt;/c&gt;3&lt;!--abc--&gt;4&lt;!--def--&gt;5&lt;/a&gt; &quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stuff</span><span class="p">,</span>
                         <span class="p">[</span><span class="s">&quot;&lt;a&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;b&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/b&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;c&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/c&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">,</span>
                          <span class="s">&quot;&lt;!--abc--&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;4&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;!--def--&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;5&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;/a&gt;&quot;</span><span class="p">],</span>
                         <span class="s">&quot;buffered text not properly split&quot;</span><span class="p">)</span>


<span class="c"># Test handling of exception from callback:</span></div></div>
<div class="viewcode-block" id="HandlerExceptionTest"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.HandlerExceptionTest">[docs]</a><span class="k">class</span> <span class="nc">HandlerExceptionTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="HandlerExceptionTest.StartElementHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.HandlerExceptionTest.StartElementHandler">[docs]</a>    <span class="k">def</span> <span class="nf">StartElementHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HandlerExceptionTest.test"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.HandlerExceptionTest.test">[docs]</a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">StartElementHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">StartElementHandler</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&lt;a&gt;&lt;b&gt;&lt;c/&gt;&lt;/b&gt;&lt;/a&gt;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;a&#39;</span><span class="p">,</span>
                             <span class="s">&quot;Expected RuntimeError for element &#39;a&#39;, but&quot;</span> <span class="o">+</span> \
                             <span class="s">&quot; found </span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>


<span class="c"># Test Current* members:</span></div></div>
<div class="viewcode-block" id="PositionTest"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.PositionTest">[docs]</a><span class="k">class</span> <span class="nc">PositionTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="PositionTest.StartElementHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.PositionTest.StartElementHandler">[docs]</a>    <span class="k">def</span> <span class="nf">StartElementHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_pos</span><span class="p">(</span><span class="s">&#39;s&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PositionTest.EndElementHandler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.PositionTest.EndElementHandler">[docs]</a>    <span class="k">def</span> <span class="nf">EndElementHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_pos</span><span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PositionTest.check_pos"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.PositionTest.check_pos">[docs]</a>    <span class="k">def</span> <span class="nf">check_pos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">event</span><span class="p">,</span>
               <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">CurrentByteIndex</span><span class="p">,</span>
               <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">CurrentLineNumber</span><span class="p">,</span>
               <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">CurrentColumnNumber</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">upto</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expected_list</span><span class="p">),</span>
                        <span class="s">&#39;too many parser events&#39;</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expected_list</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">upto</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span>
                <span class="s">&#39;Expected position </span><span class="si">%s</span><span class="s">, got position </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">expected</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upto</span> <span class="o">+=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="PositionTest.test"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.PositionTest.test">[docs]</a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">StartElementHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">StartElementHandler</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">EndElementHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EndElementHandler</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upto</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expected_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;s&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;s&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;s&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                              <span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>

        <span class="n">xml</span> <span class="o">=</span> <span class="n">b</span><span class="s">&#39;&lt;a&gt;</span><span class="se">\n</span><span class="s"> &lt;b&gt;</span><span class="se">\n</span><span class="s">  &lt;c/&gt;</span><span class="se">\n</span><span class="s"> &lt;/b&gt;</span><span class="se">\n</span><span class="s">&lt;/a&gt;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="sf1296433Test"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.sf1296433Test">[docs]</a><span class="k">class</span> <span class="nc">sf1296433Test</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="sf1296433Test.test_parse_only_xml_data"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.sf1296433Test.test_parse_only_xml_data">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_only_xml_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># http://python.org/sf/1296433</span>
        <span class="c">#</span>
        <span class="n">xml</span> <span class="o">=</span> <span class="s">&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;iso8859&#39;?&gt;&lt;s&gt;</span><span class="si">%s</span><span class="s">&lt;/s&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">1025</span><span class="p">)</span>
        <span class="c"># this one doesn&#39;t crash</span>
        <span class="c">#xml = &quot;&lt;?xml version=&#39;1.0&#39;?&gt;&lt;s&gt;%s&lt;/s&gt;&quot; % (&#39;a&#39; * 10000)</span>

        <span class="k">class</span> <span class="nc">SpecificException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SpecificException</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">CharacterDataHandler</span> <span class="o">=</span> <span class="n">handler</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">,</span> <span class="n">xml</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;iso8859&#39;</span><span class="p">))</span>
</div></div>
<div class="viewcode-block" id="ChardataBufferTest"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ChardataBufferTest">[docs]</a><span class="k">class</span> <span class="nc">ChardataBufferTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    test setting of chardata buffer size</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ChardataBufferTest.test_1025_bytes"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ChardataBufferTest.test_1025_bytes">[docs]</a>    <span class="k">def</span> <span class="nf">test_1025_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">small_buffer_test</span><span class="p">(</span><span class="mi">1025</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ChardataBufferTest.test_1000_bytes"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ChardataBufferTest.test_1000_bytes">[docs]</a>    <span class="k">def</span> <span class="nf">test_1000_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">small_buffer_test</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ChardataBufferTest.test_wrong_size"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ChardataBufferTest.test_wrong_size">[docs]</a>    <span class="k">def</span> <span class="nf">test_wrong_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span> <span class="o">=</span> <span class="n">size</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ChardataBufferTest.test_unchanged_size"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ChardataBufferTest.test_unchanged_size">[docs]</a>    <span class="k">def</span> <span class="nf">test_unchanged_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xml1</span> <span class="o">=</span> <span class="n">b</span><span class="s">&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;iso8859&#39;?&gt;&lt;s&gt;&quot;</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">512</span>
        <span class="n">xml2</span> <span class="o">=</span> <span class="n">b</span><span class="s">&#39;a&#39;</span><span class="o">*</span><span class="mi">512</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;&lt;/s&gt;&#39;</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">CharacterDataHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">counting_handler</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span> <span class="o">=</span> <span class="mi">512</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c"># Feed 512 bytes of character data: the handler should be called</span>
        <span class="c"># once.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># Reassign to buffer_size, but assign the same size.</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># Try parsing rest of the document</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="ChardataBufferTest.test_disabling_buffer"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ChardataBufferTest.test_disabling_buffer">[docs]</a>    <span class="k">def</span> <span class="nf">test_disabling_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xml1</span> <span class="o">=</span> <span class="n">b</span><span class="s">&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;iso8859&#39;?&gt;&lt;a&gt;&quot;</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">512</span>
        <span class="n">xml2</span> <span class="o">=</span> <span class="n">b</span><span class="s">&#39;b&#39;</span> <span class="o">*</span> <span class="mi">1024</span>
        <span class="n">xml3</span> <span class="o">=</span> <span class="n">b</span><span class="s">&#39;c&#39;</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;&lt;/a&gt;&#39;</span><span class="p">;</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">CharacterDataHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">counting_handler</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span> <span class="o">=</span> <span class="mi">1024</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>

        <span class="c"># Parse one chunk of XML</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># Turn off buffering and parse the next chunk.</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ChardataBufferTest.counting_handler"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ChardataBufferTest.counting_handler">[docs]</a>    <span class="k">def</span> <span class="nf">counting_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="ChardataBufferTest.small_buffer_test"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ChardataBufferTest.small_buffer_test">[docs]</a>    <span class="k">def</span> <span class="nf">small_buffer_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer_len</span><span class="p">):</span>
        <span class="n">xml</span> <span class="o">=</span> <span class="n">b</span><span class="s">&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;iso8859&#39;?&gt;&lt;s&gt;&quot;</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="n">buffer_len</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;&lt;/s&gt;&#39;</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">CharacterDataHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">counting_handler</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span> <span class="o">=</span> <span class="mi">1024</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>
</div>
<div class="viewcode-block" id="ChardataBufferTest.test_change_size_1"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ChardataBufferTest.test_change_size_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_change_size_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xml1</span> <span class="o">=</span> <span class="n">b</span><span class="s">&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;iso8859&#39;?&gt;&lt;a&gt;&lt;s&gt;&quot;</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">1024</span>
        <span class="n">xml2</span> <span class="o">=</span> <span class="n">b</span><span class="s">&#39;aaa&lt;/s&gt;&lt;s&gt;&#39;</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">1025</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;&lt;/s&gt;&lt;/a&gt;&#39;</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">CharacterDataHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">counting_handler</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span> <span class="o">=</span> <span class="mi">1024</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span> <span class="o">*=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span><span class="p">,</span> <span class="mi">2048</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ChardataBufferTest.test_change_size_2"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ChardataBufferTest.test_change_size_2">[docs]</a>    <span class="k">def</span> <span class="nf">test_change_size_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xml1</span> <span class="o">=</span> <span class="n">b</span><span class="s">&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;iso8859&#39;?&gt;&lt;a&gt;a&lt;s&gt;&quot;</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">1023</span>
        <span class="n">xml2</span> <span class="o">=</span> <span class="n">b</span><span class="s">&#39;aaa&lt;/s&gt;&lt;s&gt;&#39;</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">1025</span> <span class="o">+</span> <span class="n">b</span><span class="s">&#39;&lt;/s&gt;&lt;/a&gt;&#39;</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">CharacterDataHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">counting_handler</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_text</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span> <span class="o">=</span> <span class="mi">2048</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span><span class="p">,</span> <span class="mi">2048</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="o">=</span><span class="mi">0</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">buffer_size</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="MalformedInputTest"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.MalformedInputTest">[docs]</a><span class="k">class</span> <span class="nc">MalformedInputTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="MalformedInputTest.test1"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.MalformedInputTest.test1">[docs]</a>    <span class="k">def</span> <span class="nf">test1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xml</span> <span class="o">=</span> <span class="n">b</span><span class="s">&quot;</span><span class="se">\0\r\n</span><span class="s">&quot;</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">expat</span><span class="o">.</span><span class="n">ExpatError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s">&#39;unclosed token: line 2, column 0&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MalformedInputTest.test2"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.MalformedInputTest.test2">[docs]</a>    <span class="k">def</span> <span class="nf">test2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># \xc2\x85 is UTF-8 encoded U+0085 (NEXT LINE)</span>
        <span class="n">xml</span> <span class="o">=</span> <span class="n">b</span><span class="s">&quot;&lt;?xml version</span><span class="se">\xc2\x85</span><span class="s">=&#39;1.0&#39;?&gt;</span><span class="se">\r\n</span><span class="s">&quot;</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">expat</span><span class="o">.</span><span class="n">ExpatError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s">&#39;XML declaration not well-formed: line 1, column 14&#39;</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="ErrorMessageTest"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ErrorMessageTest">[docs]</a><span class="k">class</span> <span class="nc">ErrorMessageTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="ErrorMessageTest.test_codes"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ErrorMessageTest.test_codes">[docs]</a>    <span class="k">def</span> <span class="nf">test_codes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># verify mapping of errors.codes and errors.messages</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">XML_ERROR_SYNTAX</span><span class="p">,</span>
                         <span class="n">errors</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">codes</span><span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">XML_ERROR_SYNTAX</span><span class="p">]])</span>
</div>
<div class="viewcode-block" id="ErrorMessageTest.test_expaterror"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ErrorMessageTest.test_expaterror">[docs]</a>    <span class="k">def</span> <span class="nf">test_expaterror</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xml</span> <span class="o">=</span> <span class="n">b</span><span class="s">&#39;&lt;&#39;</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">expat</span><span class="o">.</span><span class="n">ExpatError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
                             <span class="n">errors</span><span class="o">.</span><span class="n">codes</span><span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">XML_ERROR_UNCLOSED_TOKEN</span><span class="p">])</span>

</div></div>
<div class="viewcode-block" id="ForeignDTDTests"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ForeignDTDTests">[docs]</a><span class="k">class</span> <span class="nc">ForeignDTDTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tests for the UseForeignDTD method of expat parser objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="ForeignDTDTests.test_use_foreign_dtd"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ForeignDTDTests.test_use_foreign_dtd">[docs]</a>    <span class="k">def</span> <span class="nf">test_use_foreign_dtd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If UseForeignDTD is passed True and a document without an external</span>
<span class="sd">        entity reference is parsed, ExternalEntityRefHandler is first called</span>
<span class="sd">        with None for the public and system ids.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">handler_call_args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">def</span> <span class="nf">resolve_entity</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">system_id</span><span class="p">,</span> <span class="n">public_id</span><span class="p">):</span>
            <span class="n">handler_call_args</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">public_id</span><span class="p">,</span> <span class="n">system_id</span><span class="p">))</span>
            <span class="k">return</span> <span class="mi">1</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">UseForeignDTD</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">SetParamEntityParsing</span><span class="p">(</span><span class="n">expat</span><span class="o">.</span><span class="n">XML_PARAM_ENTITY_PARSING_ALWAYS</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">ExternalEntityRefHandler</span> <span class="o">=</span> <span class="n">resolve_entity</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&lt;?xml version=&#39;1.0&#39;?&gt;&lt;element/&gt;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">handler_call_args</span><span class="p">,</span> <span class="p">[(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)])</span>

        <span class="c"># test UseForeignDTD() is equal to UseForeignDTD(True)</span>
        <span class="n">handler_call_args</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">UseForeignDTD</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">SetParamEntityParsing</span><span class="p">(</span><span class="n">expat</span><span class="o">.</span><span class="n">XML_PARAM_ENTITY_PARSING_ALWAYS</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">ExternalEntityRefHandler</span> <span class="o">=</span> <span class="n">resolve_entity</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">b</span><span class="s">&quot;&lt;?xml version=&#39;1.0&#39;?&gt;&lt;element/&gt;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">handler_call_args</span><span class="p">,</span> <span class="p">[(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="ForeignDTDTests.test_ignore_use_foreign_dtd"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.ForeignDTDTests.test_ignore_use_foreign_dtd">[docs]</a>    <span class="k">def</span> <span class="nf">test_ignore_use_foreign_dtd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If UseForeignDTD is passed True and a document with an external</span>
<span class="sd">        entity reference is parsed, ExternalEntityRefHandler is called with</span>
<span class="sd">        the public and system ids from the document.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">handler_call_args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">def</span> <span class="nf">resolve_entity</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">system_id</span><span class="p">,</span> <span class="n">public_id</span><span class="p">):</span>
            <span class="n">handler_call_args</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">public_id</span><span class="p">,</span> <span class="n">system_id</span><span class="p">))</span>
            <span class="k">return</span> <span class="mi">1</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">UseForeignDTD</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">SetParamEntityParsing</span><span class="p">(</span><span class="n">expat</span><span class="o">.</span><span class="n">XML_PARAM_ENTITY_PARSING_ALWAYS</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">ExternalEntityRefHandler</span> <span class="o">=</span> <span class="n">resolve_entity</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span>
            <span class="n">b</span><span class="s">&quot;&lt;?xml version=&#39;1.0&#39;?&gt;&lt;!DOCTYPE foo PUBLIC &#39;bar&#39; &#39;baz&#39;&gt;&lt;element/&gt;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">handler_call_args</span><span class="p">,</span> <span class="p">[(</span><span class="s">&quot;bar&quot;</span><span class="p">,</span> <span class="s">&quot;baz&quot;</span><span class="p">)])</span>

</div></div>
<div class="viewcode-block" id="test_main"><a class="viewcode-back" href="../../test.html#test.test_pyexpat.test_main">[docs]</a><span class="k">def</span> <span class="nf">test_main</span><span class="p">():</span>
    <span class="n">run_unittest</span><span class="p">(</span><span class="n">SetAttributeTest</span><span class="p">,</span>
                 <span class="n">ParseTest</span><span class="p">,</span>
                 <span class="n">NamespaceSeparatorTest</span><span class="p">,</span>
                 <span class="n">InterningTest</span><span class="p">,</span>
                 <span class="n">BufferTextTest</span><span class="p">,</span>
                 <span class="n">HandlerExceptionTest</span><span class="p">,</span>
                 <span class="n">PositionTest</span><span class="p">,</span>
                 <span class="n">sf1296433Test</span><span class="p">,</span>
                 <span class="n">ChardataBufferTest</span><span class="p">,</span>
                 <span class="n">MalformedInputTest</span><span class="p">,</span>
                 <span class="n">ErrorMessageTest</span><span class="p">,</span>
                 <span class="n">ForeignDTDTests</span><span class="p">)</span>
</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">test_main</span><span class="p">()</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Weldon Henson.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>