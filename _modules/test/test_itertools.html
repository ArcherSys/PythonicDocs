

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>test.test_itertools &mdash; ArcherBashPYDocs 1.0.0. documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ArcherBashPYDocs 1.0.0. documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> ArcherBashPYDocs</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="simple">
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ArcherBashPYDocs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>test.test_itertools</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for test.test_itertools</h1><div class="highlight"><pre>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">test</span> <span class="kn">import</span> <span class="n">support</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">weakref</span>
<span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
<span class="kn">from</span> <span class="nn">fractions</span> <span class="kn">import</span> <span class="n">Fraction</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">operator</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="nb">reduce</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">struct</span>
<span class="n">maxsize</span> <span class="o">=</span> <span class="n">support</span><span class="o">.</span><span class="n">MAX_Py_ssize_t</span>
<span class="n">minsize</span> <span class="o">=</span> <span class="o">-</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">1</span>

<div class="viewcode-block" id="lzip"><a class="viewcode-back" href="../../test.html#test.test_itertools.lzip">[docs]</a><span class="k">def</span> <span class="nf">lzip</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="onearg"><a class="viewcode-back" href="../../test.html#test.test_itertools.onearg">[docs]</a><span class="k">def</span> <span class="nf">onearg</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="s">&#39;Test function of one argument&#39;</span>
    <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span>
</div>
<div class="viewcode-block" id="errfunc"><a class="viewcode-back" href="../../test.html#test.test_itertools.errfunc">[docs]</a><span class="k">def</span> <span class="nf">errfunc</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="s">&#39;Test function that raises an error&#39;</span>
    <span class="k">raise</span> <span class="ne">ValueError</span>
</div>
<div class="viewcode-block" id="gen3"><a class="viewcode-back" href="../../test.html#test.test_itertools.gen3">[docs]</a><span class="k">def</span> <span class="nf">gen3</span><span class="p">():</span>
    <span class="s">&#39;Non-restartable source sequence&#39;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">i</span>
</div>
<div class="viewcode-block" id="isEven"><a class="viewcode-back" href="../../test.html#test.test_itertools.isEven">[docs]</a><span class="k">def</span> <span class="nf">isEven</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="s">&#39;Test predicate&#39;</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span>
</div>
<div class="viewcode-block" id="isOdd"><a class="viewcode-back" href="../../test.html#test.test_itertools.isOdd">[docs]</a><span class="k">def</span> <span class="nf">isOdd</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="s">&#39;Test predicate&#39;</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">1</span>
</div>
<div class="viewcode-block" id="tupleize"><a class="viewcode-back" href="../../test.html#test.test_itertools.tupleize">[docs]</a><span class="k">def</span> <span class="nf">tupleize</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">args</span>
</div>
<div class="viewcode-block" id="irange"><a class="viewcode-back" href="../../test.html#test.test_itertools.irange">[docs]</a><span class="k">def</span> <span class="nf">irange</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">i</span>
</div>
<div class="viewcode-block" id="StopNow"><a class="viewcode-back" href="../../test.html#test.test_itertools.StopNow">[docs]</a><span class="k">class</span> <span class="nc">StopNow</span><span class="p">:</span>
    <span class="s">&#39;Class emulating an empty iterable.&#39;</span>
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">StopIteration</span>
</div>
<div class="viewcode-block" id="take"><a class="viewcode-back" href="../../test.html#test.test_itertools.take">[docs]</a><span class="k">def</span> <span class="nf">take</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">seq</span><span class="p">):</span>
    <span class="s">&#39;Convenience function for partially consuming a long of infinite iterable&#39;</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="prod"><a class="viewcode-back" href="../../test.html#test.test_itertools.prod">[docs]</a><span class="k">def</span> <span class="nf">prod</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">mul</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="fact"><a class="viewcode-back" href="../../test.html#test.test_itertools.fact">[docs]</a><span class="k">def</span> <span class="nf">fact</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="s">&#39;Factorial&#39;</span>
    <span class="k">return</span> <span class="n">prod</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>

<span class="c"># root level methods for pickling ability</span></div>
<div class="viewcode-block" id="testR"><a class="viewcode-back" href="../../test.html#test.test_itertools.testR">[docs]</a><span class="k">def</span> <span class="nf">testR</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="testR2"><a class="viewcode-back" href="../../test.html#test.test_itertools.testR2">[docs]</a><span class="k">def</span> <span class="nf">testR2</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="underten"><a class="viewcode-back" href="../../test.html#test.test_itertools.underten">[docs]</a><span class="k">def</span> <span class="nf">underten</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">&lt;</span><span class="mi">10</span>
</div>
<div class="viewcode-block" id="TestBasicOps"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps">[docs]</a><span class="k">class</span> <span class="nc">TestBasicOps</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestBasicOps.pickletest"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.pickletest">[docs]</a>    <span class="k">def</span> <span class="nf">pickletest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">it</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">take</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">compare</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Test that an iterator is the same after pickling, also when part-consumed&quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
            <span class="c"># Recursively expand iterables, within sensible bounds</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;infinite recursion encountered&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">it</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">stop</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">it</span> <span class="c"># can&#39;t expand it</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">expand</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">l</span><span class="p">]</span>

        <span class="c"># Test the initial copy against the original</span>
        <span class="n">dump</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
        <span class="n">i2</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">dump</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">i2</span><span class="p">))</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="n">expand</span><span class="p">(</span><span class="n">i2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">compare</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="n">compare</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

        <span class="c"># Take from the copy, and create another copy and compare them.</span>
        <span class="n">i3</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">dump</span><span class="p">)</span>
        <span class="n">took</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">take</span><span class="p">):</span>
                <span class="nb">next</span><span class="p">(</span><span class="n">i3</span><span class="p">)</span>
                <span class="n">took</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">pass</span> <span class="c">#in case there is less data than &#39;take&#39;</span>
        <span class="n">dump</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">i3</span><span class="p">)</span>
        <span class="n">i4</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">dump</span><span class="p">)</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="n">i3</span><span class="p">),</span> <span class="n">expand</span><span class="p">(</span><span class="n">i4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">compare</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="n">compare</span><span class="p">[</span><span class="n">took</span><span class="p">:])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_accumulate"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_accumulate">[docs]</a>    <span class="k">def</span> <span class="nf">test_accumulate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))),</span>               <span class="c"># one positional arg</span>
                          <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">45</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">(</span><span class="n">iterable</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))),</span>      <span class="c"># kw arg</span>
                          <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">45</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">typ</span> <span class="ow">in</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">Decimal</span><span class="p">,</span> <span class="n">Fraction</span><span class="p">:</span>                 <span class="c"># multiple types</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
                <span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))),</span>
                <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">45</span><span class="p">])))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)),</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;ab&#39;</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">])</span>   <span class="c"># works with non-numeric</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">([])),</span> <span class="p">[])</span>                  <span class="c"># empty iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">([</span><span class="mi">7</span><span class="p">])),</span> <span class="p">[</span><span class="mi">7</span><span class="p">])</span>                <span class="c"># iterable of length one</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">accumulate</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>   <span class="c"># too many args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">accumulate</span><span class="p">)</span>                    <span class="c"># too few args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">accumulate</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>       <span class="c"># unexpected kwd arg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">accumulate</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="p">[]]))</span>     <span class="c"># args that don&#39;t add</span>

        <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">min</span><span class="p">)),</span>
                         <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">max</span><span class="p">)),</span>
                         <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">mul</span><span class="p">)),</span>
                         <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">144</span><span class="p">,</span> <span class="mi">720</span><span class="p">,</span> <span class="mi">5040</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
            <span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">chr</span><span class="p">))</span>                                <span class="c"># unary-operation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">accumulate</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>                      <span class="c"># test pickling</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_chain"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_chain">[docs]</a>    <span class="k">def</span> <span class="nf">test_chain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">chain2</span><span class="p">(</span><span class="o">*</span><span class="n">iterables</span><span class="p">):</span>
            <span class="s">&#39;Pure python version in the docs&#39;</span>
            <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">iterables</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">element</span>

        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">(</span><span class="n">chain</span><span class="p">,</span> <span class="n">chain2</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)),</span> <span class="p">[])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">c</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;abcd&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span><span class="n">c</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_chain_from_iterable"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_chain_from_iterable">[docs]</a>    <span class="k">def</span> <span class="nf">test_chain_from_iterable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">])),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span><span class="s">&#39;abc&#39;</span><span class="p">])),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span><span class="s">&#39;&#39;</span><span class="p">])),</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">])),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;abcd&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_chain_reducible"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_chain_reducible">[docs]</a>    <span class="k">def</span> <span class="nf">test_chain_reducible</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">operators</span> <span class="o">=</span> <span class="p">[</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">,</span>
                     <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">s</span><span class="p">))]</span>
        <span class="k">for</span> <span class="n">oper</span> <span class="ow">in</span> <span class="n">operators</span><span class="p">:</span>
            <span class="n">it</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">oper</span><span class="p">(</span><span class="n">it</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">oper</span><span class="p">(</span><span class="n">it</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;bcdef&#39;</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">oper</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">))),</span> <span class="p">[])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">oper</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">))),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;abcd&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">oper</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">),</span> <span class="n">compare</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_combinations"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_combinations">[docs]</a>    <span class="k">def</span> <span class="nf">test_combinations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">combinations</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">)</span>       <span class="c"># missing r argument</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">combinations</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c"># too many arguments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">combinations</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>        <span class="c"># pool is not iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">combinations</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>  <span class="c"># r is negative</span>

        <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span><span class="n">a</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span><span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">a</span><span class="p">))):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">op</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">))),</span> <span class="p">[])</span>     <span class="c"># r &gt; n</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">op</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="s">&#39;ABCD&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))),</span>
                             <span class="p">[(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">)])</span>
            <span class="n">testIntermediate</span> <span class="o">=</span> <span class="n">combinations</span><span class="p">(</span><span class="s">&#39;ABCD&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="nb">next</span><span class="p">(</span><span class="n">testIntermediate</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">op</span><span class="p">(</span><span class="n">testIntermediate</span><span class="p">)),</span>
                             <span class="p">[(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">)])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">op</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="mi">3</span><span class="p">))),</span>
                             <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)])</span>
            <span class="n">testIntermediate</span> <span class="o">=</span> <span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
            <span class="nb">next</span><span class="p">(</span><span class="n">testIntermediate</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">op</span><span class="p">(</span><span class="n">testIntermediate</span><span class="p">)),</span>
                             <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)])</span>


        <span class="k">def</span> <span class="nf">combinations1</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
            <span class="s">&#39;Pure python version shown in the docs&#39;</span>
            <span class="n">pool</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pool</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">))</span>
            <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">)</span>
            <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">n</span> <span class="o">-</span> <span class="n">r</span><span class="p">:</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span>
                <span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
                    <span class="n">indices</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">combinations2</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
            <span class="s">&#39;Pure python version shown in the docs&#39;</span>
            <span class="n">pool</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pool</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">indices</span> <span class="ow">in</span> <span class="n">permutations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">r</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">indices</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">combinations3</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
            <span class="s">&#39;Pure python version from cwr()&#39;</span>
            <span class="n">pool</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pool</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">indices</span> <span class="ow">in</span> <span class="n">combinations_with_replacement</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">r</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">))</span> <span class="o">==</span> <span class="n">r</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="o">*</span><span class="n">x</span><span class="o">-</span><span class="mi">12</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">2</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">r</span><span class="o">&gt;</span><span class="n">n</span> <span class="k">else</span> <span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="n">fact</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="o">/</span> <span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">r</span><span class="p">))</span> <span class="c"># right number of combs</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>         <span class="c"># no repeats</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>                <span class="c"># lexicographic order</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">r</span><span class="p">)</span>                         <span class="c"># r-length combinations</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">c</span><span class="p">)),</span> <span class="n">r</span><span class="p">)</span>                    <span class="c"># no duplicate elements</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>                <span class="c"># keep original ordering</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">all</span><span class="p">(</span><span class="n">e</span> <span class="ow">in</span> <span class="n">values</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">c</span><span class="p">))</span>           <span class="c"># elements taken from input iterable</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="p">),</span>
                                     <span class="p">[</span><span class="n">e</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">values</span> <span class="k">if</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">c</span><span class="p">])</span>      <span class="c"># comb is a subsequence of the input iterable</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations1</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">r</span><span class="p">)))</span> <span class="c"># matches first pure python version</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations2</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">r</span><span class="p">)))</span> <span class="c"># matches second pure python version</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations3</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">r</span><span class="p">)))</span> <span class="c"># matches second pure python version</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>                 <span class="c"># test pickling</span>

        <span class="c"># Test implementation detail:  tuple re-use</span></div>
    <span class="nd">@support.impl_detail</span><span class="p">(</span><span class="s">&quot;tuple reuse is specific to CPython&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="TestBasicOps.test_combinations_tuple_reuse"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_combinations_tuple_reuse">[docs]</a>    <span class="k">def</span> <span class="nf">test_combinations_tuple_reuse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">combinations</span><span class="p">(</span><span class="s">&#39;abcde&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="s">&#39;abcde&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">))))),</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_combinations_with_replacement"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_combinations_with_replacement">[docs]</a>    <span class="k">def</span> <span class="nf">test_combinations_with_replacement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cwr</span> <span class="o">=</span> <span class="n">combinations_with_replacement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">cwr</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">)</span>       <span class="c"># missing r argument</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">cwr</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c"># too many arguments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">cwr</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>        <span class="c"># pool is not iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">cwr</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>  <span class="c"># r is negative</span>

        <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span><span class="n">a</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span><span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">a</span><span class="p">))):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">op</span><span class="p">(</span><span class="n">cwr</span><span class="p">(</span><span class="s">&#39;ABC&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))),</span>
                             <span class="p">[(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">)])</span>
            <span class="n">testIntermediate</span> <span class="o">=</span> <span class="n">cwr</span><span class="p">(</span><span class="s">&#39;ABC&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="nb">next</span><span class="p">(</span><span class="n">testIntermediate</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">op</span><span class="p">(</span><span class="n">testIntermediate</span><span class="p">)),</span>
                             <span class="p">[(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">)])</span>


        <span class="k">def</span> <span class="nf">cwr1</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
            <span class="s">&#39;Pure python version shown in the docs&#39;</span>
            <span class="c"># number items returned:  (n+r-1)! / r! / (n-1)! when n&gt;0</span>
            <span class="n">pool</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pool</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">n</span> <span class="ow">and</span> <span class="n">r</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">r</span>
            <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">)</span>
            <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span>
                <span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span>
                <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">cwr2</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
            <span class="s">&#39;Pure python version shown in the docs&#39;</span>
            <span class="n">pool</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pool</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">indices</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">repeat</span><span class="o">=</span><span class="n">r</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">indices</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">numcombs</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">n</span><span class="p">:</span>
                <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">r</span> <span class="k">else</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="n">r</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">fact</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="o">/</span> <span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="o">*</span><span class="n">x</span><span class="o">-</span><span class="mi">12</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">2</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cwr</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="n">numcombs</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>           <span class="c"># right number of combs</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>         <span class="c"># no repeats</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>                <span class="c"># lexicographic order</span>

                <span class="n">regular_combs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>           <span class="c"># compare to combs without replacement</span>
                <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">r</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">regular_combs</span><span class="p">)</span>            <span class="c"># cases that should be identical</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">set</span><span class="p">(</span><span class="n">regular_combs</span><span class="p">))</span>     <span class="c"># rest should be supersets of regular combs</span>

                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">r</span><span class="p">)</span>                         <span class="c"># r-length combinations</span>
                    <span class="n">noruns</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">c</span><span class="p">)]</span>                  <span class="c"># combo without consecutive repeats</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">noruns</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">noruns</span><span class="p">)))</span>     <span class="c"># no repeats other than consecutive</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>                <span class="c"># keep original ordering</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">all</span><span class="p">(</span><span class="n">e</span> <span class="ow">in</span> <span class="n">values</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">c</span><span class="p">))</span>           <span class="c"># elements taken from input iterable</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">noruns</span><span class="p">,</span>
                                     <span class="p">[</span><span class="n">e</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">values</span> <span class="k">if</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">c</span><span class="p">])</span>     <span class="c"># comb is a subsequence of the input iterable</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">cwr1</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">r</span><span class="p">)))</span>         <span class="c"># matches first pure python version</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">cwr2</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">r</span><span class="p">)))</span>         <span class="c"># matches second pure python version</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">cwr</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="n">r</span><span class="p">))</span>                          <span class="c"># test pickling</span>

        <span class="c"># Test implementation detail:  tuple re-use</span>
</div>
    <span class="nd">@support.impl_detail</span><span class="p">(</span><span class="s">&quot;tuple reuse is specific to CPython&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="TestBasicOps.test_combinations_with_replacement_tuple_reuse"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_combinations_with_replacement_tuple_reuse">[docs]</a>    <span class="k">def</span> <span class="nf">test_combinations_with_replacement_tuple_reuse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cwr</span> <span class="o">=</span> <span class="n">combinations_with_replacement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">cwr</span><span class="p">(</span><span class="s">&#39;abcde&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">cwr</span><span class="p">(</span><span class="s">&#39;abcde&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">))))),</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_permutations"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_permutations">[docs]</a>    <span class="k">def</span> <span class="nf">test_permutations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">permutations</span><span class="p">)</span>              <span class="c"># too few arguments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">permutations</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c"># too many arguments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">permutations</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>        <span class="c"># pool is not iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">permutations</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>  <span class="c"># r is negative</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">)),</span> <span class="p">[])</span>     <span class="c"># r &gt; n</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">permutations</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;s&#39;</span><span class="p">)</span>  <span class="c"># r is not an int or None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mi">2</span><span class="p">)),</span>
                                           <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)])</span>

        <span class="k">def</span> <span class="nf">permutations1</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
            <span class="s">&#39;Pure python version shown in the docs&#39;</span>
            <span class="n">pool</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pool</span><span class="p">)</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">n</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">r</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
            <span class="n">cycles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">))[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">[:</span><span class="n">r</span><span class="p">])</span>
            <span class="k">while</span> <span class="n">n</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">)):</span>
                    <span class="n">cycles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">cycles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">:]</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">cycles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">i</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">j</span> <span class="o">=</span> <span class="n">cycles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">indices</span><span class="p">[</span><span class="o">-</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="o">-</span><span class="n">j</span><span class="p">],</span> <span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">[:</span><span class="n">r</span><span class="p">])</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span>

        <span class="k">def</span> <span class="nf">permutations2</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
            <span class="s">&#39;Pure python version shown in the docs&#39;</span>
            <span class="n">pool</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pool</span><span class="p">)</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">n</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">r</span>
            <span class="k">for</span> <span class="n">indices</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">repeat</span><span class="o">=</span><span class="n">r</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">))</span> <span class="o">==</span> <span class="n">r</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="o">*</span><span class="n">x</span><span class="o">-</span><span class="mi">12</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">2</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">r</span><span class="o">&gt;</span><span class="n">n</span> <span class="k">else</span> <span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">r</span><span class="p">))</span>      <span class="c"># right number of perms</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>         <span class="c"># no repeats</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>                <span class="c"># lexicographic order</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">r</span><span class="p">)</span>                         <span class="c"># r-length permutations</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">p</span><span class="p">)),</span> <span class="n">r</span><span class="p">)</span>                    <span class="c"># no duplicate elements</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">all</span><span class="p">(</span><span class="n">e</span> <span class="ow">in</span> <span class="n">values</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">p</span><span class="p">))</span>           <span class="c"># elements taken from input iterable</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">permutations1</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">r</span><span class="p">)))</span> <span class="c"># matches first pure python version</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">permutations2</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">r</span><span class="p">)))</span> <span class="c"># matches second pure python version</span>
                <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">None</span><span class="p">)))</span> <span class="c"># test r as None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="n">values</span><span class="p">)))</span>       <span class="c"># test default r</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>                <span class="c"># test pickling</span>
</div>
    <span class="nd">@support.impl_detail</span><span class="p">(</span><span class="s">&quot;tuple reuse is specific to CPython&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="TestBasicOps.test_permutations_tuple_reuse"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_permutations_tuple_reuse">[docs]</a>    <span class="k">def</span> <span class="nf">test_permutations_tuple_reuse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">permutations</span><span class="p">(</span><span class="s">&#39;abcde&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="s">&#39;abcde&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">))))),</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_combinatorics"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_combinatorics">[docs]</a>    <span class="k">def</span> <span class="nf">test_combinatorics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test relationships between product(), permutations(),</span>
        <span class="c"># combinations() and combinations_with_replacement().</span>

        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;ABCDEFG&#39;</span><span class="p">[:</span><span class="n">n</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span>
                <span class="n">prod</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="n">r</span><span class="p">))</span>
                <span class="n">cwr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations_with_replacement</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>
                <span class="n">perm</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>
                <span class="n">comb</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>

                <span class="c"># Check size</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prod</span><span class="p">),</span> <span class="n">n</span><span class="o">**</span><span class="n">r</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cwr</span><span class="p">),</span> <span class="p">(</span><span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="n">r</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">fact</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="o">/</span> <span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="k">if</span> <span class="n">n</span> <span class="k">else</span> <span class="p">(</span><span class="ow">not</span> <span class="n">r</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">perm</span><span class="p">),</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">r</span><span class="o">&gt;</span><span class="n">n</span> <span class="k">else</span> <span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">r</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">comb</span><span class="p">),</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">r</span><span class="o">&gt;</span><span class="n">n</span> <span class="k">else</span> <span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="n">fact</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="o">/</span> <span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">r</span><span class="p">))</span>

                <span class="c"># Check lexicographic order without repeated tuples</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">prod</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">prod</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cwr</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">cwr</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">perm</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">perm</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">comb</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">comb</span><span class="p">)))</span>

                <span class="c"># Check interrelationships</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cwr</span><span class="p">,</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">prod</span> <span class="k">if</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">==</span><span class="nb">list</span><span class="p">(</span><span class="n">t</span><span class="p">)])</span> <span class="c"># cwr: prods which are sorted</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">perm</span><span class="p">,</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">prod</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">t</span><span class="p">))</span><span class="o">==</span><span class="n">r</span><span class="p">])</span>    <span class="c"># perm: prods with no dups</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">comb</span><span class="p">,</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">perm</span> <span class="k">if</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">==</span><span class="nb">list</span><span class="p">(</span><span class="n">t</span><span class="p">)])</span> <span class="c"># comb: perms that are sorted</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">comb</span><span class="p">,</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">cwr</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">t</span><span class="p">))</span><span class="o">==</span><span class="n">r</span><span class="p">])</span>      <span class="c"># comb: cwrs without dups</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">comb</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">cwr</span><span class="p">)</span><span class="o">.</span><span class="n">__contains__</span><span class="p">,</span> <span class="n">perm</span><span class="p">)))</span>     <span class="c"># comb: perm that is a cwr</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">comb</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">perm</span><span class="p">)</span><span class="o">.</span><span class="n">__contains__</span><span class="p">,</span> <span class="n">cwr</span><span class="p">)))</span>     <span class="c"># comb: cwr that is a perm</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">comb</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">cwr</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">perm</span><span class="p">)))</span>            <span class="c"># comb: both a cwr and a perm</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_compress"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_compress">[docs]</a>    <span class="k">def</span> <span class="nf">test_compress</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">compress</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s">&#39;ABCDEF&#39;</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;ACEF&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">compress</span><span class="p">(</span><span class="s">&#39;ABCDEF&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;ACEF&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">compress</span><span class="p">(</span><span class="s">&#39;ABCDEF&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">compress</span><span class="p">(</span><span class="s">&#39;ABCDEF&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;ABCDEF&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">compress</span><span class="p">(</span><span class="s">&#39;ABCDEF&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;AC&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">compress</span><span class="p">(</span><span class="s">&#39;ABC&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;BC&#39;</span><span class="p">))</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">10000</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="n">n</span><span class="p">))</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">repeat</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">compress</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">selectors</span><span class="p">)),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">compress</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>      <span class="c"># 1st arg not iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">compress</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>      <span class="c"># 2nd arg not iterable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">compress</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>            <span class="c"># too few args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">compress</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>      <span class="c"># too many args</span>

        <span class="c"># check copy, deepcopy, pickle</span>
        <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span><span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">a</span><span class="p">))):</span>
            <span class="k">for</span> <span class="n">data</span><span class="p">,</span> <span class="n">selectors</span><span class="p">,</span> <span class="n">result1</span><span class="p">,</span> <span class="n">result2</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="p">(</span><span class="s">&#39;ABCDEF&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="s">&#39;ACEF&#39;</span><span class="p">,</span> <span class="s">&#39;CEF&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;ABCDEF&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;ABCDEF&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="s">&#39;ABCDEF&#39;</span><span class="p">,</span> <span class="s">&#39;BCDEF&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;ABCDEF&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="s">&#39;AC&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;ABC&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="s">&#39;BC&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">),</span>
                <span class="p">]:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">op</span><span class="p">(</span><span class="n">compress</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">))),</span> <span class="nb">list</span><span class="p">(</span><span class="n">result1</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">op</span><span class="p">(</span><span class="n">compress</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">selectors</span><span class="p">))),</span> <span class="nb">list</span><span class="p">(</span><span class="n">result1</span><span class="p">))</span>
                <span class="n">testIntermediate</span> <span class="o">=</span> <span class="n">compress</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">selectors</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">result1</span><span class="p">:</span>
                    <span class="nb">next</span><span class="p">(</span><span class="n">testIntermediate</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">op</span><span class="p">(</span><span class="n">testIntermediate</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="n">result2</span><span class="p">))</span>

</div>
<div class="viewcode-block" id="TestBasicOps.test_count"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_count">[docs]</a>    <span class="k">def</span> <span class="nf">test_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">()),</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="mi">3</span><span class="p">)),</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="mi">3</span><span class="p">))),</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))),</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))),</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">5</span><span class="p">),</span> <span class="mi">10</span><span class="p">)),</span>
                         <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">maxsize</span><span class="o">+</span><span class="mi">5</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="o">-</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">5</span><span class="p">),</span> <span class="mi">10</span><span class="p">)),</span>
                         <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="n">maxsize</span><span class="o">+</span><span class="mi">5</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">maxsize</span><span class="o">+</span><span class="mi">5</span><span class="p">),</span> <span class="mi">3</span><span class="p">)),</span>
                         <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="o">+</span><span class="mi">3</span><span class="o">*</span><span class="p">(</span><span class="n">maxsize</span><span class="o">+</span><span class="mi">5</span><span class="p">),</span> <span class="n">maxsize</span><span class="o">+</span><span class="mi">5</span><span class="p">)))</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;count(3)&#39;</span><span class="p">)</span>
        <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;count(4)&#39;</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="o">-</span><span class="mi">9</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;count(-9)&#39;</span><span class="p">)</span>
        <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="mf">10.25</span><span class="p">)),</span> <span class="s">&#39;count(10.25)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="o">-</span><span class="mi">8</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">+</span><span class="mi">5</span> <span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">+</span><span class="mi">5</span><span class="p">):</span>
            <span class="c"># Test repr</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="s">&#39;count(</span><span class="si">%r</span><span class="s">)&#39;</span><span class="o">.</span><span class="n">__mod__</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">)</span>

        <span class="c"># check copy, deepcopy, pickle</span>
        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">maxsize</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">maxsize</span><span class="o">+</span><span class="mi">5</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">c</span><span class="p">)),</span> <span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">c</span><span class="p">)),</span> <span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

        <span class="c">#check proper internal error handling for large &quot;step&#39; sizes</span>
        <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">maxsize</span><span class="o">+</span><span class="mi">5</span><span class="p">);</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_count_with_stride"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_count_with_stride">[docs]</a>    <span class="k">def</span> <span class="nf">test_count_with_stride</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">step</span><span class="o">=</span><span class="mi">3</span><span class="p">)),</span>
                         <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="n">step</span><span class="o">=-</span><span class="mi">1</span><span class="p">)),</span>
                         <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">count</span><span class="p">(</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="n">take</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="n">maxsize</span><span class="o">+</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">count</span><span class="p">(</span><span class="o">-</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="n">take</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span><span class="o">-</span><span class="n">maxsize</span><span class="o">+</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">3.25</span><span class="o">-</span><span class="mi">4j</span><span class="p">)),</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mf">5.25</span><span class="o">-</span><span class="mi">4j</span><span class="p">,</span> <span class="mf">8.5</span><span class="o">-</span><span class="mi">8j</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">count</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;1.1&#39;</span><span class="p">),</span> <span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;.1&#39;</span><span class="p">))),</span>
                         <span class="p">[</span><span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;1.1&#39;</span><span class="p">),</span> <span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;1.2&#39;</span><span class="p">),</span> <span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;1.3&#39;</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">count</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">))),</span>
                         <span class="p">[</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span><span class="mi">21</span><span class="p">),</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">21</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">count</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">))),</span> <span class="nb">repr</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mf">12.5</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">]))</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;count(3, 5)&#39;</span><span class="p">)</span>
        <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;count(8, 5)&#39;</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;count(-9, 0)&#39;</span><span class="p">)</span>
        <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;count(-9, 0)&#39;</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;count(-9, -3)&#39;</span><span class="p">)</span>
        <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;count(-12, -3)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;count(-12, -3)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="mf">10.5</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">)),</span> <span class="s">&#39;count(10.5, 1.25)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="mf">10.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span> <span class="s">&#39;count(10.5)&#39;</span><span class="p">)</span>           <span class="c"># suppress step=1 when it&#39;s an int</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="mf">10.5</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">)),</span> <span class="s">&#39;count(10.5, 1.0)&#39;</span><span class="p">)</span>   <span class="c"># do show float values lilke 1.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">+</span><span class="mi">5</span> <span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">+</span><span class="mi">5</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span>  <span class="p">(</span><span class="o">-</span><span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">+</span><span class="mi">5</span> <span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="o">+</span><span class="mi">5</span><span class="p">):</span>
                <span class="c"># Test repr</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;count(</span><span class="si">%r</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;count(</span><span class="si">%r</span><span class="s">, </span><span class="si">%r</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_cycle"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_cycle">[docs]</a>    <span class="k">def</span> <span class="nf">test_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">cycle</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;abcabcabca&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">cycle</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)),</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">cycle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">cycle</span><span class="p">(</span><span class="n">gen3</span><span class="p">()),</span><span class="mi">10</span><span class="p">)),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>

        <span class="c"># check copy, deepcopy, pickle</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">cycle</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="c">#simple copy currently not supported, because __reduce__ returns</span>
        <span class="c">#an internal iterator</span>
        <span class="c">#self.assertEqual(take(10, copy.copy(c)), list(&#39;bcabcabcab&#39;))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">c</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;bcabcabcab&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">c</span><span class="p">))),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;bcabcabcab&#39;</span><span class="p">))</span>
        <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">c</span><span class="p">))),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;cabcabcabc&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">cycle</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_groupby"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_groupby">[docs]</a>    <span class="k">def</span> <span class="nf">test_groupby</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Check whether it accepts arguments correctly</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([],</span> <span class="nb">list</span><span class="p">(</span><span class="n">groupby</span><span class="p">([])))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([],</span> <span class="nb">list</span><span class="p">(</span><span class="n">groupby</span><span class="p">([],</span> <span class="n">key</span><span class="o">=</span><span class="nb">id</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">groupby</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="p">[]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">groupby</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">groupby</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

        <span class="c"># Check normal input</span>
        <span class="n">s</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span><span class="mi">21</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">21</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">21</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">22</span><span class="p">),</span>
             <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">22</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">23</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">23</span><span class="p">)]</span>
        <span class="n">dup</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">r</span><span class="p">:</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">elem</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">dup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">dup</span><span class="p">)</span>

        <span class="c"># Check normal pickled</span>
        <span class="n">dup</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">groupby</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">testR</span><span class="p">))):</span>
            <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">elem</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">dup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">dup</span><span class="p">)</span>

        <span class="c"># Check nested case</span>
        <span class="n">dup</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">testR</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">ik</span><span class="p">,</span> <span class="n">ig</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">testR2</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">ig</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">elem</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ik</span><span class="p">,</span> <span class="n">elem</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                    <span class="n">dup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">dup</span><span class="p">)</span>

        <span class="c"># Check nested and pickled</span>
        <span class="n">dup</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">groupby</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">testR</span><span class="p">))):</span>
            <span class="k">for</span> <span class="n">ik</span><span class="p">,</span> <span class="n">ig</span> <span class="ow">in</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">groupby</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">testR2</span><span class="p">))):</span>
                <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">ig</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">elem</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ik</span><span class="p">,</span> <span class="n">elem</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                    <span class="n">dup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">dup</span><span class="p">)</span>


        <span class="c"># Check case where inner iterator is not used</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">testR</span><span class="p">)]</span>
        <span class="n">expectedkeys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">s</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">keys</span><span class="p">),</span> <span class="n">expectedkeys</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">keys</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">expectedkeys</span><span class="p">))</span>

        <span class="c"># Exercise pipes and filters style</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;abracadabra&#39;</span>
        <span class="c"># sort s | uniq</span>
        <span class="n">r</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">))]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">])</span>
        <span class="c"># sort s | uniq -d</span>
        <span class="n">r</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">))</span> <span class="k">if</span> <span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">])</span>
        <span class="c"># sort s | uniq -c</span>
        <span class="n">r</span> <span class="o">=</span> <span class="p">[(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">)),</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">))]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="p">[(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)])</span>
        <span class="c"># sort s | uniq -c | sort -rn | head -3</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">))</span> <span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">))],</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="p">[(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">)])</span>

        <span class="c"># iter.__next__ failure</span>
        <span class="k">class</span> <span class="nc">ExpectedError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">def</span> <span class="nf">delayed_raise</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">yield</span> <span class="s">&#39;yo&#39;</span>
            <span class="k">raise</span> <span class="n">ExpectedError</span>
        <span class="k">def</span> <span class="nf">gulp</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">keyp</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">func</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">keyp</span><span class="p">)]</span>

        <span class="c"># iter.__next__ failure on outer object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ExpectedError</span><span class="p">,</span> <span class="n">gulp</span><span class="p">,</span> <span class="n">delayed_raise</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c"># iter.__next__ failure on inner object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ExpectedError</span><span class="p">,</span> <span class="n">gulp</span><span class="p">,</span> <span class="n">delayed_raise</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

        <span class="c"># __cmp__ failure</span>
        <span class="k">class</span> <span class="nc">DummyCmp</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dst</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">ExpectedError</span>
        <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="n">DummyCmp</span><span class="p">(),</span> <span class="n">DummyCmp</span><span class="p">(),</span> <span class="bp">None</span><span class="p">]</span>

        <span class="c"># __eq__ failure on outer object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ExpectedError</span><span class="p">,</span> <span class="n">gulp</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
        <span class="c"># __eq__ failure on inner object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ExpectedError</span><span class="p">,</span> <span class="n">gulp</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

        <span class="c"># keyfunc failure</span>
        <span class="k">def</span> <span class="nf">keyfunc</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">keyfunc</span><span class="o">.</span><span class="n">skip</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">keyfunc</span><span class="o">.</span><span class="n">skip</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="k">return</span> <span class="n">obj</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ExpectedError</span>

        <span class="c"># keyfunc failure on outer object</span>
        <span class="n">keyfunc</span><span class="o">.</span><span class="n">skip</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ExpectedError</span><span class="p">,</span> <span class="n">gulp</span><span class="p">,</span> <span class="p">[</span><span class="bp">None</span><span class="p">],</span> <span class="n">keyfunc</span><span class="p">)</span>
        <span class="n">keyfunc</span><span class="o">.</span><span class="n">skip</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ExpectedError</span><span class="p">,</span> <span class="n">gulp</span><span class="p">,</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">],</span> <span class="n">keyfunc</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_filter"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_filter">[docs]</a>    <span class="k">def</span> <span class="nf">test_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">))),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">])),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">])),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="n">count</span><span class="p">())),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">isEven</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)))</span>

        <span class="c"># check copy, deepcopy, pickle</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>

        <span class="n">c</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">c</span><span class="p">)),</span> <span class="n">ans</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">c</span><span class="p">)),</span> <span class="n">ans</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">c</span><span class="p">))),</span> <span class="n">ans</span><span class="p">)</span>
        <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">c</span><span class="p">))),</span> <span class="n">ans</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="n">c</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_filterfalse"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_filterfalse">[docs]</a>    <span class="k">def</span> <span class="nf">test_filterfalse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">filterfalse</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">))),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">filterfalse</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">])),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">filterfalse</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">])),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">filterfalse</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="n">count</span><span class="p">())),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">filterfalse</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">filterfalse</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">filterfalse</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">filterfalse</span><span class="p">,</span> <span class="n">isEven</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">filterfalse</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">filterfalse</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_zip"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_zip">[docs]</a>    <span class="k">def</span> <span class="nf">test_zip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># XXX This is rather silly now that builtin zip() calls zip()...</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">())]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">))),</span> <span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))),</span> <span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">,</span> <span class="n">count</span><span class="p">())),</span> <span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">)),</span> <span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">()),</span> <span class="n">lzip</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">zip</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">zip</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">pair</span><span class="p">))</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">)],</span>
                         <span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">pair</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">)],</span>
                         <span class="n">lzip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">))</span>
</div>
    <span class="nd">@support.impl_detail</span><span class="p">(</span><span class="s">&quot;tuple reuse is specific to CPython&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="TestBasicOps.test_zip_tuple_reuse"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_zip_tuple_reuse">[docs]</a>    <span class="k">def</span> <span class="nf">test_zip_tuple_reuse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">ids</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ids</span><span class="p">))</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">))))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">ids</span><span class="p">)),</span> <span class="nb">len</span><span class="p">(</span><span class="n">ids</span><span class="p">))</span>

        <span class="c"># check copy, deepcopy, pickle</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">()))]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>

        <span class="n">ans</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">()))]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>

        <span class="n">ans</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">())))]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>

        <span class="n">testIntermediate</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span><span class="n">count</span><span class="p">())</span>
        <span class="nb">next</span><span class="p">(</span><span class="n">testIntermediate</span><span class="p">)</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">testIntermediate</span><span class="p">))]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="p">[(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="n">count</span><span class="p">()))</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_ziplongest"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_ziplongest">[docs]</a>    <span class="k">def</span> <span class="nf">test_ziplongest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">args</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="p">[</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)],</span>
                <span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="s">&#39;abc&#39;</span><span class="p">],</span>
                <span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2100</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span><span class="mi">3050</span><span class="p">)],</span>
                <span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span><span class="mi">3050</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1200</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1500</span><span class="p">)],</span>
                <span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span><span class="mi">3050</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1200</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1500</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">)],</span>
            <span class="p">]:</span>
            <span class="n">target</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">([</span><span class="n">arg</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="k">else</span> <span class="bp">None</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">])</span>
                      <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">args</span><span class="p">)))]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)),</span> <span class="n">target</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="p">{})),</span> <span class="n">target</span><span class="p">)</span>
            <span class="n">target</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">((</span><span class="n">e</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="s">&#39;X&#39;</span> <span class="ow">or</span> <span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">target</span><span class="p">]</span>   <span class="c"># Replace None fills with &#39;X&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">fillvalue</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">))),</span> <span class="n">target</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="n">zip_longest</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">,</span> <span class="n">count</span><span class="p">())),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))))</span> <span class="c"># take 3 from infinite input</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">()),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">([])),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">([])))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">)))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;defg&#39;</span><span class="p">,</span> <span class="o">**</span><span class="p">{})),</span>
                         <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span><span class="o">+</span><span class="p">[</span><span class="bp">None</span><span class="p">],</span> <span class="s">&#39;defg&#39;</span><span class="p">)))</span> <span class="c"># empty keyword dict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">zip_longest</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">zip_longest</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">stmt</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="s">&quot;zip_longest(&#39;abc&#39;, fv=1)&quot;</span><span class="p">,</span>
            <span class="s">&quot;zip_longest(&#39;abc&#39;, fillvalue=1, bogus_keyword=None)&quot;</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">eval</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="nb">globals</span><span class="p">(),</span> <span class="nb">locals</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;Did not raise Type in:  &#39;</span> <span class="o">+</span> <span class="n">stmt</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">pair</span><span class="p">))</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">zip_longest</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">)],</span>
                         <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">pair</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">zip_longest</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">)],</span>
                         <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">)))</span>
</div>
    <span class="nd">@support.impl_detail</span><span class="p">(</span><span class="s">&quot;tuple reuse is specific to CPython&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="TestBasicOps.test_zip_longest_tuple_reuse"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_zip_longest_tuple_reuse">[docs]</a>    <span class="k">def</span> <span class="nf">test_zip_longest_tuple_reuse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">zip_longest</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">ids</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ids</span><span class="p">))</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">))))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">ids</span><span class="p">)),</span> <span class="nb">len</span><span class="p">(</span><span class="n">ids</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_zip_longest_pickling"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_zip_longest_pickling">[docs]</a>    <span class="k">def</span> <span class="nf">test_zip_longest_pickling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="s">&quot;def&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="s">&quot;defgh&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="s">&quot;defgh&quot;</span><span class="p">,</span> <span class="n">fillvalue</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;defgh&quot;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_bug_7244"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_bug_7244">[docs]</a>    <span class="k">def</span> <span class="nf">test_bug_7244</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">class</span> <span class="nc">Repeater</span><span class="p">:</span>
            <span class="c"># this class is similar to itertools.repeat</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">o</span> <span class="o">=</span> <span class="n">o</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">t</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">e</span> <span class="o">=</span> <span class="n">e</span>
            <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c"># its iterator is itself</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">t</span> <span class="o">-=</span> <span class="mi">1</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">o</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">e</span>

        <span class="c"># Formerly this code in would fail in debug mode</span>
        <span class="c"># with Undetected Error and Stop Iteration</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="n">Repeater</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="ne">StopIteration</span><span class="p">)</span>
        <span class="n">r2</span> <span class="o">=</span> <span class="n">Repeater</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="ne">StopIteration</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">zip_longest</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">fillvalue</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
                <span class="k">with</span> <span class="n">support</span><span class="o">.</span><span class="n">captured_output</span><span class="p">(</span><span class="s">&#39;stdout&#39;</span><span class="p">):</span>
                    <span class="k">print</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">run</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">),</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>

        <span class="c"># Formerly, the RuntimeError would be lost</span>
        <span class="c"># and StopIteration would stop as expected</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="n">Repeater</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="ne">RuntimeError</span><span class="p">)</span>
        <span class="n">r2</span> <span class="o">=</span> <span class="n">Repeater</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="ne">StopIteration</span><span class="p">)</span>
        <span class="n">it</span> <span class="o">=</span> <span class="n">zip_longest</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">fillvalue</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">it</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_product"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_product">[docs]</a>    <span class="k">def</span> <span class="nf">test_product</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">args</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="p">([],</span> <span class="p">[()]),</span>                     <span class="c"># zero iterables</span>
            <span class="p">([</span><span class="s">&#39;ab&#39;</span><span class="p">],</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,)]),</span>     <span class="c"># one iterable</span>
            <span class="p">([</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)],</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)]),</span>     <span class="c"># two iterables</span>
            <span class="p">([</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)],</span> <span class="p">[]),</span>           <span class="c"># first iterable with zero length</span>
            <span class="p">([</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)],</span> <span class="p">[]),</span>           <span class="c"># middle iterable with zero length</span>
            <span class="p">([</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">)],</span> <span class="p">[]),</span>           <span class="c"># last iterable with zero length</span>
            <span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)),</span> <span class="n">result</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span><span class="o">*</span><span class="n">r</span><span class="p">))),</span>
                                 <span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">repeat</span><span class="o">=</span><span class="n">r</span><span class="p">))))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span><span class="o">*</span><span class="mi">6</span><span class="p">))),</span> <span class="mi">7</span><span class="o">**</span><span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">product</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">product1</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
            <span class="n">pools</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span> <span class="o">*</span> <span class="n">kwds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;repeat&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pools</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">yield</span> <span class="p">()</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pool</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">pool</span> <span class="ow">in</span> <span class="n">pools</span><span class="p">):</span>
                <span class="k">return</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span>
            <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">pool</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">pools</span><span class="p">,</span> <span class="n">indices</span><span class="p">))</span>
            <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)):</span>  <span class="c"># right to left</span>
                    <span class="k">if</span> <span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">pools</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
                        <span class="n">indices</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">pool</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">pools</span><span class="p">,</span> <span class="n">indices</span><span class="p">))</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span>

        <span class="k">def</span> <span class="nf">product2</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
            <span class="s">&#39;Pure python version used in docs&#39;</span>
            <span class="n">pools</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span> <span class="o">*</span> <span class="n">kwds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;repeat&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">[[]]</span>
            <span class="k">for</span> <span class="n">pool</span> <span class="ow">in</span> <span class="n">pools</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">result</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">pool</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">prod</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">prod</span><span class="p">)</span>

        <span class="n">argtypes</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
                    <span class="nb">set</span><span class="p">(</span><span class="s">&#39;abcdefg&#39;</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">13</span><span class="p">))]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
            <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">argtypes</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">5</span><span class="p">))]</span>
            <span class="n">expected_len</span> <span class="o">=</span> <span class="n">prod</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))),</span> <span class="n">expected_len</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="n">product1</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="n">product2</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)))</span>
            <span class="n">args</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">iter</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))),</span> <span class="n">expected_len</span><span class="p">)</span>
</div>
    <span class="nd">@support.impl_detail</span><span class="p">(</span><span class="s">&quot;tuple reuse is specific to CPython&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="TestBasicOps.test_product_tuple_reuse"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_product_tuple_reuse">[docs]</a>    <span class="k">def</span> <span class="nf">test_product_tuple_reuse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">product</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">)))),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">))))),</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_product_pickling"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_product_pickling">[docs]</a>    <span class="k">def</span> <span class="nf">test_product_pickling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># check copy, deepcopy, pickle</span>
        <span class="k">for</span> <span class="n">args</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="p">([],</span> <span class="p">[()]),</span>                     <span class="c"># zero iterables</span>
            <span class="p">([</span><span class="s">&#39;ab&#39;</span><span class="p">],</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,)]),</span>     <span class="c"># one iterable</span>
            <span class="p">([</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)],</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)]),</span>     <span class="c"># two iterables</span>
            <span class="p">([</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)],</span> <span class="p">[]),</span>           <span class="c"># first iterable with zero length</span>
            <span class="p">([</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)],</span> <span class="p">[]),</span>           <span class="c"># middle iterable with zero length</span>
            <span class="p">([</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">)],</span> <span class="p">[]),</span>           <span class="c"># last iterable with zero length</span>
            <span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))),</span> <span class="n">result</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))),</span> <span class="n">result</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_repeat"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_repeat">[docs]</a>    <span class="k">def</span> <span class="nf">test_repeat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="nb">object</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">times</span><span class="o">=</span><span class="mi">3</span><span class="p">)),</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lzip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">repeat</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)),</span>
                         <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">repeat</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)),</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">)),</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">repeat</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">repeat</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">repeat</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">0j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="s">&#39;repeat((1+0j))&#39;</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="s">&#39;repeat((1+0j), 5)&#39;</span><span class="p">)</span>
        <span class="nb">list</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="s">&#39;repeat((1+0j), 0)&#39;</span><span class="p">)</span>

        <span class="c"># check copy, deepcopy, pickle</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="nb">object</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">times</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">c</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">c</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="nb">object</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">times</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_repeat_with_negative_times"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_repeat_with_negative_times">[docs]</a>    <span class="k">def</span> <span class="nf">test_repeat_with_negative_times</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)),</span> <span class="s">&quot;repeat(&#39;a&#39;, 0)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)),</span> <span class="s">&quot;repeat(&#39;a&#39;, 0)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">times</span><span class="o">=-</span><span class="mi">1</span><span class="p">)),</span> <span class="s">&quot;repeat(&#39;a&#39;, 0)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">times</span><span class="o">=-</span><span class="mi">2</span><span class="p">)),</span> <span class="s">&quot;repeat(&#39;a&#39;, 0)&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_map"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_map">[docs]</a>    <span class="k">def</span> <span class="nf">test_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">))),</span>
                         <span class="p">[</span><span class="mi">0</span><span class="o">**</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">tupleize</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))),</span>
                         <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">tupleize</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="n">count</span><span class="p">())),</span>
                         <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="nb">map</span><span class="p">(</span><span class="n">tupleize</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="n">count</span><span class="p">())),</span>
                         <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="p">[])),</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">map</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">map</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">neg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="n">errfunc</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="n">onearg</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">]))</span>

        <span class="c"># check copy, deepcopy, pickle</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)]</span>

        <span class="n">c</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">tupleize</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="n">count</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">c</span><span class="p">)),</span> <span class="n">ans</span><span class="p">)</span>

        <span class="n">c</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">tupleize</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="n">count</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">c</span><span class="p">)),</span> <span class="n">ans</span><span class="p">)</span>

        <span class="n">c</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">tupleize</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="n">count</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_starmap"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_starmap">[docs]</a>    <span class="k">def</span> <span class="nf">test_starmap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">starmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">)))),</span>
                         <span class="p">[</span><span class="mi">0</span><span class="o">**</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">starmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="n">count</span><span class="p">(),</span> <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)))),</span>
                         <span class="p">[</span><span class="mi">0</span><span class="o">**</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">starmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="p">[])),</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">starmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="p">[</span><span class="nb">iter</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])])),</span> <span class="p">[</span><span class="mi">4</span><span class="o">**</span><span class="mi">5</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">starmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="p">[</span><span class="bp">None</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">starmap</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">starmap</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)],</span> <span class="s">&#39;extra&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">starmap</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">starmap</span><span class="p">(</span><span class="n">errfunc</span><span class="p">,</span> <span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">starmap</span><span class="p">(</span><span class="n">onearg</span><span class="p">,</span> <span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)]))</span>

        <span class="c"># check copy, deepcopy, pickle</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="o">**</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">3</span><span class="p">]</span>

        <span class="n">c</span> <span class="o">=</span> <span class="n">starmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">c</span><span class="p">)),</span> <span class="n">ans</span><span class="p">)</span>

        <span class="n">c</span> <span class="o">=</span> <span class="n">starmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">c</span><span class="p">)),</span> <span class="n">ans</span><span class="p">)</span>

        <span class="n">c</span> <span class="o">=</span> <span class="n">starmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_islice"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_islice">[docs]</a>    <span class="k">def</span> <span class="nf">test_islice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">args</span> <span class="ow">in</span> <span class="p">[</span>          <span class="c"># islice(args) should agree with range(args)</span>
                <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
                <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
                <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                <span class="p">(</span><span class="mi">20</span><span class="p">,)</span>
                <span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="o">*</span><span class="n">args</span><span class="p">)),</span>
                             <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)))</span>

        <span class="k">for</span> <span class="n">args</span><span class="p">,</span> <span class="n">tgtargs</span> <span class="ow">in</span> <span class="p">[</span>  <span class="c"># Stop when seqn is exhausted</span>
                <span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">))),</span>
                <span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">110</span><span class="p">),</span> <span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">))),</span>
                <span class="p">((</span><span class="mi">110</span><span class="p">,),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,))</span>
                <span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="o">*</span><span class="n">args</span><span class="p">)),</span>
                             <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">*</span><span class="n">tgtargs</span><span class="p">)))</span>

        <span class="c"># Test stop=None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="bp">None</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>

        <span class="c"># Test number of items consumed     SF #1171417</span>
        <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">)))</span>

        <span class="c"># Test invalid arguments</span>
        <span class="n">ra</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">ra</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">count</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">maxsize</span><span class="p">))),</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># Issue #10323:  Less islice in a predictable state</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">count</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">50</span><span class="p">)),</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>

        <span class="c"># check copy, deepcopy, pickle</span>
        <span class="k">for</span> <span class="n">args</span> <span class="ow">in</span> <span class="p">[</span>          <span class="c"># islice(args) should agree with range(args)</span>
                <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
                <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
                <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                <span class="p">(</span><span class="mi">20</span><span class="p">,)</span>
                <span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="o">*</span><span class="n">args</span><span class="p">))),</span>
                             <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="o">*</span><span class="n">args</span><span class="p">))),</span>
                             <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="o">*</span><span class="n">args</span><span class="p">))</span>

        <span class="c"># Issue #21321: check source iterator is not referenced</span>
        <span class="c"># from islice() after the latter has been exhausted</span>
        <span class="n">it</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="n">wr</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
        <span class="n">it</span> <span class="o">=</span> <span class="n">islice</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="n">wr</span><span class="p">())</span>
        <span class="nb">list</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="c"># exhaust the iterator</span>
        <span class="n">support</span><span class="o">.</span><span class="n">gc_collect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">wr</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_takewhile"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_takewhile">[docs]</a>    <span class="k">def</span> <span class="nf">test_takewhile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">takewhile</span><span class="p">(</span><span class="n">underten</span><span class="p">,</span> <span class="n">data</span><span class="p">)),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">takewhile</span><span class="p">(</span><span class="n">underten</span><span class="p">,</span> <span class="p">[])),</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">takewhile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">takewhile</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">takewhile</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)],</span> <span class="s">&#39;extra&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">takewhile</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">takewhile</span><span class="p">(</span><span class="n">errfunc</span><span class="p">,</span> <span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)]))</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">takewhile</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

        <span class="c"># check copy, deepcopy, pickle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">takewhile</span><span class="p">(</span><span class="n">underten</span><span class="p">,</span> <span class="n">data</span><span class="p">))),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">takewhile</span><span class="p">(</span><span class="n">underten</span><span class="p">,</span> <span class="n">data</span><span class="p">))),</span>
                        <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">takewhile</span><span class="p">(</span><span class="n">underten</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_dropwhile"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_dropwhile">[docs]</a>    <span class="k">def</span> <span class="nf">test_dropwhile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">dropwhile</span><span class="p">(</span><span class="n">underten</span><span class="p">,</span> <span class="n">data</span><span class="p">)),</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">dropwhile</span><span class="p">(</span><span class="n">underten</span><span class="p">,</span> <span class="p">[])),</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">dropwhile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">dropwhile</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">dropwhile</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)],</span> <span class="s">&#39;extra&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">dropwhile</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">dropwhile</span><span class="p">(</span><span class="n">errfunc</span><span class="p">,</span> <span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)]))</span>

        <span class="c"># check copy, deepcopy, pickle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">dropwhile</span><span class="p">(</span><span class="n">underten</span><span class="p">,</span> <span class="n">data</span><span class="p">))),</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">dropwhile</span><span class="p">(</span><span class="n">underten</span><span class="p">,</span> <span class="n">data</span><span class="p">))),</span>
                        <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">dropwhile</span><span class="p">(</span><span class="n">underten</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_tee"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_tee">[docs]</a>    <span class="k">def</span> <span class="nf">test_tee</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">200</span>

        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">([])</span>        <span class="c"># test empty iterator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="p">[])</span>

        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="n">irange</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="c"># test 100% interleaved</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lzip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">),</span> <span class="n">lzip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)))</span>

        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="n">irange</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="c"># test 0% interleaved</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)))</span>

        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="n">irange</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="c"># test dealloc of leading iterator</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)))</span>

        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="n">irange</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="c"># test dealloc of trailing iterator</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">n</span><span class="p">)))</span>

        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>   <span class="c"># test randomly interleaved</span>
            <span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">n</span> <span class="o">+</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">n</span>
            <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
            <span class="n">lists</span> <span class="o">=</span> <span class="p">([],</span> <span class="p">[])</span>
            <span class="n">its</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="n">irange</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">order</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">its</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">lists</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lists</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lists</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)))</span>

        <span class="c"># test argument format checking</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">tee</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">tee</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">tee</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">tee</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>

        <span class="c"># tee object should be instantiable</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)(</span><span class="s">&#39;def&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;def&#39;</span><span class="p">))</span>

        <span class="c"># test long-lagged and multi-way split</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">i</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)],</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">2000</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2000</span><span class="p">)))</span>

        <span class="c"># test values of n</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">tee</span><span class="p">,</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;invalid&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">tee</span><span class="p">,</span> <span class="p">[],</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="nb">tuple</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="n">n</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">result</span><span class="p">],</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)]</span><span class="o">*</span><span class="n">n</span><span class="p">)</span>

        <span class="c"># tee pass-through to copyable iterator</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>
        <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">a</span> <span class="ow">is</span> <span class="n">c</span><span class="p">)</span>

        <span class="c"># test tee_new</span>
        <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>
        <span class="n">tnew</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">tnew</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">tnew</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">t3</span> <span class="o">=</span> <span class="n">tnew</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">t2</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">t3</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">))</span>

        <span class="c"># test that tee objects are weak referencable</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">proxy</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="s">&#39;__class__&#39;</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
        <span class="k">del</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ReferenceError</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="s">&#39;__class__&#39;</span><span class="p">)</span>

        <span class="n">ans</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>
        <span class="n">long_ans</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">))</span>

        <span class="c"># check copy</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="n">ans</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">b</span><span class="p">)),</span> <span class="n">ans</span><span class="p">)</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="n">long_ans</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">b</span><span class="p">)),</span> <span class="n">long_ans</span><span class="p">)</span>

        <span class="c"># check partially consumed copy</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>
        <span class="n">take</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="n">ans</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">b</span><span class="p">)),</span> <span class="n">ans</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">ans</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">ans</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">))</span>
        <span class="n">take</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">take</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="n">long_ans</span><span class="p">[</span><span class="mi">100</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">b</span><span class="p">)),</span> <span class="n">long_ans</span><span class="p">[</span><span class="mi">60</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">long_ans</span><span class="p">[</span><span class="mi">100</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">long_ans</span><span class="p">[</span><span class="mi">60</span><span class="p">:])</span>

        <span class="c"># check deepcopy</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="n">ans</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">b</span><span class="p">)),</span> <span class="n">ans</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">ans</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">ans</span><span class="p">)</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="n">long_ans</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">b</span><span class="p">)),</span> <span class="n">long_ans</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">long_ans</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">long_ans</span><span class="p">)</span>

        <span class="c"># check partially consumed deepcopy</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>
        <span class="n">take</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="n">ans</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">b</span><span class="p">)),</span> <span class="n">ans</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">ans</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">ans</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">))</span>
        <span class="n">take</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">take</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="n">long_ans</span><span class="p">[</span><span class="mi">100</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">b</span><span class="p">)),</span> <span class="n">long_ans</span><span class="p">[</span><span class="mi">60</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">long_ans</span><span class="p">[</span><span class="mi">100</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">long_ans</span><span class="p">[</span><span class="mi">60</span><span class="p">:])</span>

        <span class="c"># check pickle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">tee</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)))</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">compare</span><span class="o">=</span><span class="n">ans</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickletest</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">compare</span><span class="o">=</span><span class="n">ans</span><span class="p">)</span>

    <span class="c"># Issue 13454: Crash when deleting backward iterator from tee()</span></div>
<div class="viewcode-block" id="TestBasicOps.test_tee_del_backward"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_tee_del_backward">[docs]</a>    <span class="k">def</span> <span class="nf">test_tee_del_backward</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">forward</span><span class="p">,</span> <span class="n">backward</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="mi">20000000</span><span class="p">))</span>
        <span class="nb">any</span><span class="p">(</span><span class="n">forward</span><span class="p">)</span>  <span class="c"># exhaust the iterator</span>
        <span class="k">del</span> <span class="n">backward</span>
</div>
<div class="viewcode-block" id="TestBasicOps.test_StopIteration"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestBasicOps.test_StopIteration">[docs]</a>    <span class="k">def</span> <span class="nf">test_StopIteration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="nb">zip</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">(</span><span class="n">chain</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="nb">zip</span><span class="p">,</span> <span class="n">groupby</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">f</span><span class="p">([]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">f</span><span class="p">(</span><span class="n">StopNow</span><span class="p">()))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">islice</span><span class="p">([],</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">islice</span><span class="p">(</span><span class="n">StopNow</span><span class="p">(),</span> <span class="bp">None</span><span class="p">))</span>

        <span class="n">p</span><span class="p">,</span> <span class="n">q</span> <span class="o">=</span> <span class="n">tee</span><span class="p">([])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span>
        <span class="n">p</span><span class="p">,</span> <span class="n">q</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="n">StopNow</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">filter</span><span class="p">,</span> <span class="n">filterfalse</span><span class="p">,</span> <span class="nb">map</span><span class="p">,</span> <span class="n">takewhile</span><span class="p">,</span> <span class="n">dropwhile</span><span class="p">,</span> <span class="n">starmap</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">f</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">,</span> <span class="p">[]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">StopIteration</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">f</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">,</span> <span class="n">StopNow</span><span class="p">()))</span>
</div></div>
<div class="viewcode-block" id="TestExamples"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples">[docs]</a><span class="k">class</span> <span class="nc">TestExamples</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestExamples.test_accumulate"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_accumulate">[docs]</a>    <span class="k">def</span> <span class="nf">test_accumulate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_accumulate_reducible"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_accumulate_reducible">[docs]</a>    <span class="k">def</span> <span class="nf">test_accumulate_reducible</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># check copy, deepcopy, pickle</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
        <span class="n">accumulated</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>
        <span class="n">it</span> <span class="o">=</span> <span class="n">accumulate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">it</span><span class="p">))),</span> <span class="n">accumulated</span><span class="p">[:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">it</span><span class="p">))),</span> <span class="n">accumulated</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">it</span><span class="p">)),</span> <span class="n">accumulated</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">it</span><span class="p">)),</span> <span class="n">accumulated</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_chain"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_chain">[docs]</a>    <span class="k">def</span> <span class="nf">test_chain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="s">&#39;ABC&#39;</span><span class="p">,</span> <span class="s">&#39;DEF&#39;</span><span class="p">)),</span> <span class="s">&#39;ABCDEF&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestExamples.test_chain_from_iterable"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_chain_from_iterable">[docs]</a>    <span class="k">def</span> <span class="nf">test_chain_from_iterable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span><span class="s">&#39;ABC&#39;</span><span class="p">,</span> <span class="s">&#39;DEF&#39;</span><span class="p">])),</span> <span class="s">&#39;ABCDEF&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestExamples.test_combinations"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_combinations">[docs]</a>    <span class="k">def</span> <span class="nf">test_combinations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="s">&#39;ABCD&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
                         <span class="p">[(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="mi">3</span><span class="p">)),</span>
                         <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_combinations_with_replacement"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_combinations_with_replacement">[docs]</a>    <span class="k">def</span> <span class="nf">test_combinations_with_replacement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">combinations_with_replacement</span><span class="p">(</span><span class="s">&#39;ABC&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
                         <span class="p">[(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_compress"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_compress">[docs]</a>    <span class="k">def</span> <span class="nf">test_compress</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">compress</span><span class="p">(</span><span class="s">&#39;ABCDEF&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;ACEF&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestExamples.test_count"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_count">[docs]</a>    <span class="k">def</span> <span class="nf">test_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">5</span><span class="p">)),</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_cycle"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_cycle">[docs]</a>    <span class="k">def</span> <span class="nf">test_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">cycle</span><span class="p">(</span><span class="s">&#39;ABCD&#39;</span><span class="p">),</span> <span class="mi">12</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;ABCDABCDABCD&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestExamples.test_dropwhile"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_dropwhile">[docs]</a>    <span class="k">def</span> <span class="nf">test_dropwhile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">dropwhile</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">])),</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_groupby"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_groupby">[docs]</a>    <span class="k">def</span> <span class="nf">test_groupby</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="s">&#39;AAAABBBCCDAABBB&#39;</span><span class="p">)],</span>
                         <span class="nb">list</span><span class="p">(</span><span class="s">&#39;ABCDAB&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([(</span><span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="s">&#39;AAAABBBCCD&#39;</span><span class="p">)],</span>
                         <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;AAAA&#39;</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;BBB&#39;</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;CC&#39;</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_filter"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_filter">[docs]</a>    <span class="k">def</span> <span class="nf">test_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_filterfalse"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_filterfalse">[docs]</a>    <span class="k">def</span> <span class="nf">test_filterfalse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">filterfalse</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_map"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_map">[docs]</a>    <span class="k">def</span> <span class="nf">test_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">pow</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))),</span> <span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1000</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_islice"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_islice">[docs]</a>    <span class="k">def</span> <span class="nf">test_islice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="s">&#39;ABCDEFG&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;AB&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="s">&#39;ABCDEFG&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;CD&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="s">&#39;ABCDEFG&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;CDEFG&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="s">&#39;ABCDEFG&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;ACEG&#39;</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestExamples.test_zip"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_zip">[docs]</a>    <span class="k">def</span> <span class="nf">test_zip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s">&#39;ABCD&#39;</span><span class="p">,</span> <span class="s">&#39;xy&#39;</span><span class="p">)),</span> <span class="p">[(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_zip_longest"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_zip_longest">[docs]</a>    <span class="k">def</span> <span class="nf">test_zip_longest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">(</span><span class="s">&#39;ABCD&#39;</span><span class="p">,</span> <span class="s">&#39;xy&#39;</span><span class="p">,</span> <span class="n">fillvalue</span><span class="o">=</span><span class="s">&#39;-&#39;</span><span class="p">)),</span>
                         <span class="p">[(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_permutations"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_permutations">[docs]</a>    <span class="k">def</span> <span class="nf">test_permutations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="s">&#39;ABCD&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
                         <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="s">&#39;AB AC AD BA BC BD CA CB CD DA DB DC&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))),</span>
                         <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_product"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_product">[docs]</a>    <span class="k">def</span> <span class="nf">test_product</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="s">&#39;ABCD&#39;</span><span class="p">,</span> <span class="s">&#39;xy&#39;</span><span class="p">)),</span>
                         <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="s">&#39;Ax Ay Bx By Cx Cy Dx Dy&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">3</span><span class="p">)),</span>
                        <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
                         <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_repeat"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_repeat">[docs]</a>    <span class="k">def</span> <span class="nf">test_repeat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_stapmap"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_stapmap">[docs]</a>    <span class="k">def</span> <span class="nf">test_stapmap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">starmap</span><span class="p">(</span><span class="nb">pow</span><span class="p">,</span> <span class="p">[(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">)])),</span>
                         <span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1000</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestExamples.test_takewhile"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestExamples.test_takewhile">[docs]</a>    <span class="k">def</span> <span class="nf">test_takewhile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">takewhile</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">])),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>

</div></div>
<div class="viewcode-block" id="TestGC"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC">[docs]</a><span class="k">class</span> <span class="nc">TestGC</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestGC.makecycle"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.makecycle">[docs]</a>    <span class="k">def</span> <span class="nf">makecycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterator</span><span class="p">,</span> <span class="n">container</span><span class="p">):</span>
        <span class="n">container</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
        <span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">container</span><span class="p">,</span> <span class="n">iterator</span>
</div>
<div class="viewcode-block" id="TestGC.test_accumulate"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_accumulate">[docs]</a>    <span class="k">def</span> <span class="nf">test_accumulate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">accumulate</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_chain"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_chain">[docs]</a>    <span class="k">def</span> <span class="nf">test_chain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_chain_from_iterable"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_chain_from_iterable">[docs]</a>    <span class="k">def</span> <span class="nf">test_chain_from_iterable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span><span class="n">a</span><span class="p">]),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_combinations"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_combinations">[docs]</a>    <span class="k">def</span> <span class="nf">test_combinations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">combinations</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_combinations_with_replacement"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_combinations_with_replacement">[docs]</a>    <span class="k">def</span> <span class="nf">test_combinations_with_replacement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">combinations_with_replacement</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_compress"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_compress">[docs]</a>    <span class="k">def</span> <span class="nf">test_compress</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">compress</span><span class="p">(</span><span class="s">&#39;ABCDEF&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_count"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_count">[docs]</a>    <span class="k">def</span> <span class="nf">test_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">Int</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s">&#39;Int&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">a</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="n">Int</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">Int</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_cycle"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_cycle">[docs]</a>    <span class="k">def</span> <span class="nf">test_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">cycle</span><span class="p">([</span><span class="n">a</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_dropwhile"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_dropwhile">[docs]</a>    <span class="k">def</span> <span class="nf">test_dropwhile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">dropwhile</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">]),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_groupby"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_groupby">[docs]</a>    <span class="k">def</span> <span class="nf">test_groupby</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">groupby</span><span class="p">([</span><span class="n">a</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_issue2246"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_issue2246">[docs]</a>    <span class="k">def</span> <span class="nf">test_issue2246</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue 2246 -- the _grouper iterator was not included in GC</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="n">keyfunc</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="n">keyfunc</span><span class="p">):</span>
            <span class="n">keyfunc</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_filter"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_filter">[docs]</a>    <span class="k">def</span> <span class="nf">test_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_filterfalse"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_filterfalse">[docs]</a>    <span class="k">def</span> <span class="nf">test_filterfalse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">filterfalse</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="bp">False</span><span class="p">,</span> <span class="n">a</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_zip"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_zip">[docs]</a>    <span class="k">def</span> <span class="nf">test_zip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="n">a</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_zip_longest"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_zip_longest">[docs]</a>    <span class="k">def</span> <span class="nf">test_zip_longest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">([</span><span class="n">a</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="bp">None</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">([</span><span class="n">a</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span> <span class="n">fillvalue</span><span class="o">=</span><span class="n">b</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_map"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_map">[docs]</a>    <span class="k">def</span> <span class="nf">test_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">,</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_islice"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_islice">[docs]</a>    <span class="k">def</span> <span class="nf">test_islice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">islice</span><span class="p">([</span><span class="n">a</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_permutations"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_permutations">[docs]</a>    <span class="k">def</span> <span class="nf">test_permutations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">permutations</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_product"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_product">[docs]</a>    <span class="k">def</span> <span class="nf">test_product</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">product</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_repeat"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_repeat">[docs]</a>    <span class="k">def</span> <span class="nf">test_repeat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_starmap"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_starmap">[docs]</a>    <span class="k">def</span> <span class="nf">test_starmap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">starmap</span><span class="p">(</span><span class="k">lambda</span> <span class="o">*</span><span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="p">,</span> <span class="p">[(</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="p">)]</span><span class="o">*</span><span class="mi">2</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestGC.test_takewhile"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestGC.test_takewhile">[docs]</a>    <span class="k">def</span> <span class="nf">test_takewhile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makecycle</span><span class="p">(</span><span class="n">takewhile</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">]),</span> <span class="n">a</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="R"><a class="viewcode-back" href="../../test.html#test.test_itertools.R">[docs]</a><span class="k">def</span> <span class="nf">R</span><span class="p">(</span><span class="n">seqn</span><span class="p">):</span>
    <span class="s">&#39;Regular generator&#39;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">seqn</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">i</span>
</div>
<div class="viewcode-block" id="G"><a class="viewcode-back" href="../../test.html#test.test_itertools.G">[docs]</a><span class="k">class</span> <span class="nc">G</span><span class="p">:</span>
    <span class="s">&#39;Sequence using __getitem__&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seqn</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seqn</span> <span class="o">=</span> <span class="n">seqn</span>
    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">seqn</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="I"><a class="viewcode-back" href="../../test.html#test.test_itertools.I">[docs]</a><span class="k">class</span> <span class="nc">I</span><span class="p">:</span>
    <span class="s">&#39;Sequence using iterator protocol&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seqn</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seqn</span> <span class="o">=</span> <span class="n">seqn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seqn</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">StopIteration</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">seqn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">v</span>
</div>
<div class="viewcode-block" id="Ig"><a class="viewcode-back" href="../../test.html#test.test_itertools.Ig">[docs]</a><span class="k">class</span> <span class="nc">Ig</span><span class="p">:</span>
    <span class="s">&#39;Sequence using iterator protocol defined with a generator&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seqn</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seqn</span> <span class="o">=</span> <span class="n">seqn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">seqn</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">val</span>
</div>
<div class="viewcode-block" id="X"><a class="viewcode-back" href="../../test.html#test.test_itertools.X">[docs]</a><span class="k">class</span> <span class="nc">X</span><span class="p">:</span>
    <span class="s">&#39;Missing __getitem__ and __iter__&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seqn</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seqn</span> <span class="o">=</span> <span class="n">seqn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seqn</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">StopIteration</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">seqn</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">v</span>
</div>
<div class="viewcode-block" id="N"><a class="viewcode-back" href="../../test.html#test.test_itertools.N">[docs]</a><span class="k">class</span> <span class="nc">N</span><span class="p">:</span>
    <span class="s">&#39;Iterator missing __next__()&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seqn</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seqn</span> <span class="o">=</span> <span class="n">seqn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="E"><a class="viewcode-back" href="../../test.html#test.test_itertools.E">[docs]</a><span class="k">class</span> <span class="nc">E</span><span class="p">:</span>
    <span class="s">&#39;Test propagation of exceptions&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seqn</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seqn</span> <span class="o">=</span> <span class="n">seqn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="mi">3</span> <span class="o">//</span> <span class="mi">0</span>
</div>
<div class="viewcode-block" id="S"><a class="viewcode-back" href="../../test.html#test.test_itertools.S">[docs]</a><span class="k">class</span> <span class="nc">S</span><span class="p">:</span>
    <span class="s">&#39;Test immediate stop&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seqn</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">StopIteration</span>
</div>
<div class="viewcode-block" id="L"><a class="viewcode-back" href="../../test.html#test.test_itertools.L">[docs]</a><span class="k">def</span> <span class="nf">L</span><span class="p">(</span><span class="n">seqn</span><span class="p">):</span>
    <span class="s">&#39;Test multiple tiers of iterators&#39;</span>
    <span class="k">return</span> <span class="n">chain</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">,</span> <span class="n">R</span><span class="p">(</span><span class="n">Ig</span><span class="p">(</span><span class="n">G</span><span class="p">(</span><span class="n">seqn</span><span class="p">)))))</span>

</div>
<div class="viewcode-block" id="TestVariousIteratorArgs"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs">[docs]</a><span class="k">class</span> <span class="nc">TestVariousIteratorArgs</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestVariousIteratorArgs.test_accumulate"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_accumulate">[docs]</a>    <span class="k">def</span> <span class="nf">test_accumulate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">r</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">15</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span> <span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">(</span><span class="n">S</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">accumulate</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">accumulate</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">accumulate</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_chain"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_chain">[docs]</a>    <span class="k">def</span> <span class="nf">test_chain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;123&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;do&#39;</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2200</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))</span><span class="o">+</span><span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">chain</span><span class="p">(</span><span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">chain</span><span class="p">(</span><span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">chain</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_compress"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_compress">[docs]</a>    <span class="k">def</span> <span class="nf">test_compress</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;123&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;do&#39;</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2200</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">compress</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="p">))),</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">compress</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">compress</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">compress</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_product"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_product">[docs]</a>    <span class="k">def</span> <span class="nf">test_product</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;123&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;do&#39;</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2200</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">product</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">product</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="n">product</span><span class="p">,</span> <span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_cycle"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_cycle">[docs]</a>    <span class="k">def</span> <span class="nf">test_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;123&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;do&#39;</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2200</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="n">tgtlen</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
                <span class="n">expected</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))</span><span class="o">*</span><span class="mi">3</span>
                <span class="n">actual</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">cycle</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)),</span> <span class="n">tgtlen</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">cycle</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_groupby"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_groupby">[docs]</a>    <span class="k">def</span> <span class="nf">test_groupby</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2200</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">sb</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))],</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">groupby</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">groupby</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">groupby</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_filter"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_filter">[docs]</a>    <span class="k">def</span> <span class="nf">test_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2200</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span>
                                 <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">if</span> <span class="n">isEven</span><span class="p">(</span><span class="n">x</span><span class="p">)])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">isEven</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">isEven</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_filterfalse"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_filterfalse">[docs]</a>    <span class="k">def</span> <span class="nf">test_filterfalse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2200</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">filterfalse</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span>
                                 <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">if</span> <span class="n">isOdd</span><span class="p">(</span><span class="n">x</span><span class="p">)])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">filterfalse</span><span class="p">,</span> <span class="n">isEven</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">filterfalse</span><span class="p">,</span> <span class="n">isEven</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">filterfalse</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_zip"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_zip">[docs]</a>    <span class="k">def</span> <span class="nf">test_zip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;123&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;do&#39;</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2200</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span> <span class="n">lzip</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span> <span class="n">lzip</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">zip</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">zip</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_ziplongest"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_ziplongest">[docs]</a>    <span class="k">def</span> <span class="nf">test_ziplongest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;123&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;do&#39;</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2200</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">zip_longest</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">zip_longest</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">zip_longest</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">zip_longest</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_map"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_map">[docs]</a>    <span class="k">def</span> <span class="nf">test_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">onearg</span><span class="p">,</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span>
                                 <span class="p">[</span><span class="n">onearg</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span>
                                 <span class="p">[</span><span class="n">x</span><span class="o">**</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">map</span><span class="p">,</span> <span class="n">onearg</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="nb">map</span><span class="p">,</span> <span class="n">onearg</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="n">onearg</span><span class="p">,</span> <span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_islice"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_islice">[docs]</a>    <span class="k">def</span> <span class="nf">test_islice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;12345&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;do&#39;</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2200</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="mi">2</span><span class="p">)),</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">islice</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="mi">10</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_starmap"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_starmap">[docs]</a>    <span class="k">def</span> <span class="nf">test_starmap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="n">ss</span> <span class="o">=</span> <span class="n">lzip</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">starmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="n">g</span><span class="p">(</span><span class="n">ss</span><span class="p">))),</span>
                                 <span class="p">[</span><span class="n">x</span><span class="o">**</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">starmap</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">ss</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">starmap</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">ss</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">starmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span> <span class="n">E</span><span class="p">(</span><span class="n">ss</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_takewhile"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_takewhile">[docs]</a>    <span class="k">def</span> <span class="nf">test_takewhile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2200</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="n">tgt</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">isEven</span><span class="p">(</span><span class="n">elem</span><span class="p">):</span> <span class="k">break</span>
                    <span class="n">tgt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">takewhile</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span> <span class="n">tgt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">takewhile</span><span class="p">,</span> <span class="n">isEven</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">takewhile</span><span class="p">,</span> <span class="n">isEven</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">takewhile</span><span class="p">(</span><span class="n">isEven</span><span class="p">,</span> <span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_dropwhile"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_dropwhile">[docs]</a>    <span class="k">def</span> <span class="nf">test_dropwhile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2200</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="n">tgt</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">tgt</span> <span class="ow">and</span> <span class="n">isOdd</span><span class="p">(</span><span class="n">elem</span><span class="p">):</span> <span class="k">continue</span>
                    <span class="n">tgt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">dropwhile</span><span class="p">(</span><span class="n">isOdd</span><span class="p">,</span> <span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span> <span class="n">tgt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">dropwhile</span><span class="p">,</span> <span class="n">isOdd</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">dropwhile</span><span class="p">,</span> <span class="n">isOdd</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">dropwhile</span><span class="p">(</span><span class="n">isOdd</span><span class="p">,</span> <span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
</div>
<div class="viewcode-block" id="TestVariousIteratorArgs.test_tee"><a class="viewcode-back" href="../../test.html#test.test_itertools.TestVariousIteratorArgs.test_tee">[docs]</a>    <span class="k">def</span> <span class="nf">test_tee</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;123&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;do&#39;</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2200</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Ig</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="n">it1</span><span class="p">,</span> <span class="n">it2</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">it1</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">it2</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">tee</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">tee</span><span class="p">,</span> <span class="n">N</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">tee</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">))[</span><span class="mi">0</span><span class="p">])</span>
</div></div>
<div class="viewcode-block" id="LengthTransparency"><a class="viewcode-back" href="../../test.html#test.test_itertools.LengthTransparency">[docs]</a><span class="k">class</span> <span class="nc">LengthTransparency</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="LengthTransparency.test_repeat"><a class="viewcode-back" href="../../test.html#test.test_itertools.LengthTransparency.test_repeat">[docs]</a>    <span class="k">def</span> <span class="nf">test_repeat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">length_hint</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="mi">50</span><span class="p">)),</span> <span class="mi">50</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">length_hint</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">length_hint</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="mi">12</span><span class="p">),</span> <span class="mi">12</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="LengthTransparency.test_repeat_with_negative_times"><a class="viewcode-back" href="../../test.html#test.test_itertools.LengthTransparency.test_repeat_with_negative_times">[docs]</a>    <span class="k">def</span> <span class="nf">test_repeat_with_negative_times</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">length_hint</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">length_hint</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">length_hint</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">times</span><span class="o">=-</span><span class="mi">1</span><span class="p">)),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">length_hint</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">times</span><span class="o">=-</span><span class="mi">2</span><span class="p">)),</span> <span class="mi">0</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="RegressionTests"><a class="viewcode-back" href="../../test.html#test.test_itertools.RegressionTests">[docs]</a><span class="k">class</span> <span class="nc">RegressionTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="RegressionTests.test_sf_793826"><a class="viewcode-back" href="../../test.html#test.test_itertools.RegressionTests.test_sf_793826">[docs]</a>    <span class="k">def</span> <span class="nf">test_sf_793826</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Fix Armin Rigo&#39;s successful efforts to wreak havoc</span>

        <span class="k">def</span> <span class="nf">mutatingtuple</span><span class="p">(</span><span class="n">tuple1</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">tuple2</span><span class="p">):</span>
            <span class="c"># this builds a tuple t which is a copy of tuple1,</span>
            <span class="c"># then calls f(t), then mutates t to be equal to tuple2</span>
            <span class="c"># (needs len(tuple1) == len(tuple2)).</span>
            <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">first</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                <span class="k">if</span> <span class="n">first</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">first</span><span class="p">[:]</span>
                    <span class="n">f</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
                <span class="k">return</span> <span class="n">value</span>
            <span class="n">items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">tuple2</span><span class="p">)</span>
            <span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">tuple1</span><span class="p">)</span>
            <span class="n">gen</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">items</span><span class="p">)</span>
            <span class="n">z</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">gen</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">tuple1</span><span class="p">))</span>
            <span class="nb">next</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
            <span class="k">global</span> <span class="n">T</span>
            <span class="n">T</span> <span class="o">=</span> <span class="n">t</span>
            <span class="n">first</span><span class="p">[:]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>

        <span class="n">first</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mutatingtuple</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="n">f</span><span class="p">,</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
        <span class="n">second</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="RegressionTests.test_sf_950057"><a class="viewcode-back" href="../../test.html#test.test_itertools.RegressionTests.test_sf_950057">[docs]</a>    <span class="k">def</span> <span class="nf">test_sf_950057</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Make sure that chain() and cycle() catch exceptions immediately</span>
        <span class="c"># rather than when shifting between input sources</span>

        <span class="k">def</span> <span class="nf">gen1</span><span class="p">():</span>
            <span class="n">hist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">yield</span> <span class="mi">1</span>
            <span class="n">hist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">AssertionError</span>
            <span class="n">hist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">gen2</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="n">hist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">yield</span> <span class="mi">2</span>
            <span class="n">hist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">StopIteration</span>

        <span class="n">hist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">AssertionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">chain</span><span class="p">(</span><span class="n">gen1</span><span class="p">(),</span> <span class="n">gen2</span><span class="p">(</span><span class="bp">False</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">hist</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">hist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">AssertionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">chain</span><span class="p">(</span><span class="n">gen1</span><span class="p">(),</span> <span class="n">gen2</span><span class="p">(</span><span class="bp">True</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">hist</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">hist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">AssertionError</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">cycle</span><span class="p">(</span><span class="n">gen1</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">hist</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
</div></div>
<div class="viewcode-block" id="SubclassWithKwargsTest"><a class="viewcode-back" href="../../test.html#test.test_itertools.SubclassWithKwargsTest">[docs]</a><span class="k">class</span> <span class="nc">SubclassWithKwargsTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="SubclassWithKwargsTest.test_keywords_in_subclass"><a class="viewcode-back" href="../../test.html#test.test_itertools.SubclassWithKwargsTest.test_keywords_in_subclass">[docs]</a>    <span class="k">def</span> <span class="nf">test_keywords_in_subclass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># count is not subclassable...</span>
        <span class="k">for</span> <span class="n">cls</span> <span class="ow">in</span> <span class="p">(</span><span class="n">repeat</span><span class="p">,</span> <span class="nb">zip</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">filterfalse</span><span class="p">,</span> <span class="n">chain</span><span class="p">,</span> <span class="nb">map</span><span class="p">,</span>
                    <span class="n">starmap</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">takewhile</span><span class="p">,</span> <span class="n">dropwhile</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">compress</span><span class="p">):</span>
            <span class="k">class</span> <span class="nc">Subclass</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
                <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newarg</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
                    <span class="n">cls</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">Subclass</span><span class="p">(</span><span class="n">newarg</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="c"># we expect type errors because of wrong argument count</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="s">&quot;does not take keyword arguments&quot;</span><span class="p">,</span> <span class="n">err</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</div></div>
<span class="nd">@support.cpython_only</span>
<div class="viewcode-block" id="SizeofTest"><a class="viewcode-back" href="../../test.html#test.test_itertools.SizeofTest">[docs]</a><span class="k">class</span> <span class="nc">SizeofTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="SizeofTest.setUp"><a class="viewcode-back" href="../../test.html#test.test_itertools.SizeofTest.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">calcsize</span><span class="p">(</span><span class="s">&#39;n&#39;</span><span class="p">)</span>
</div>
    <span class="n">check_sizeof</span> <span class="o">=</span> <span class="n">support</span><span class="o">.</span><span class="n">check_sizeof</span>

<div class="viewcode-block" id="SizeofTest.test_product_sizeof"><a class="viewcode-back" href="../../test.html#test.test_itertools.SizeofTest.test_product_sizeof">[docs]</a>    <span class="k">def</span> <span class="nf">test_product_sizeof</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">basesize</span> <span class="o">=</span> <span class="n">support</span><span class="o">.</span><span class="n">calcobjsize</span><span class="p">(</span><span class="s">&#39;3Pi&#39;</span><span class="p">)</span>
        <span class="n">check</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_sizeof</span>
        <span class="n">check</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="s">&#39;ab&#39;</span><span class="p">,</span> <span class="s">&#39;12&#39;</span><span class="p">),</span> <span class="n">basesize</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span><span class="p">)</span>
        <span class="n">check</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="p">((</span><span class="s">&#39;abc&#39;</span><span class="p">,)</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)),</span> <span class="n">basesize</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SizeofTest.test_combinations_sizeof"><a class="viewcode-back" href="../../test.html#test.test_itertools.SizeofTest.test_combinations_sizeof">[docs]</a>    <span class="k">def</span> <span class="nf">test_combinations_sizeof</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">basesize</span> <span class="o">=</span> <span class="n">support</span><span class="o">.</span><span class="n">calcobjsize</span><span class="p">(</span><span class="s">&#39;3Pni&#39;</span><span class="p">)</span>
        <span class="n">check</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_sizeof</span>
        <span class="n">check</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="s">&#39;abcd&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">basesize</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span><span class="p">)</span>
        <span class="n">check</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">4</span><span class="p">),</span> <span class="n">basesize</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SizeofTest.test_combinations_with_replacement_sizeof"><a class="viewcode-back" href="../../test.html#test.test_itertools.SizeofTest.test_combinations_with_replacement_sizeof">[docs]</a>    <span class="k">def</span> <span class="nf">test_combinations_with_replacement_sizeof</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cwr</span> <span class="o">=</span> <span class="n">combinations_with_replacement</span>
        <span class="n">basesize</span> <span class="o">=</span> <span class="n">support</span><span class="o">.</span><span class="n">calcobjsize</span><span class="p">(</span><span class="s">&#39;3Pni&#39;</span><span class="p">)</span>
        <span class="n">check</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_sizeof</span>
        <span class="n">check</span><span class="p">(</span><span class="n">cwr</span><span class="p">(</span><span class="s">&#39;abcd&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">basesize</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span><span class="p">)</span>
        <span class="n">check</span><span class="p">(</span><span class="n">cwr</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">4</span><span class="p">),</span> <span class="n">basesize</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SizeofTest.test_permutations_sizeof"><a class="viewcode-back" href="../../test.html#test.test_itertools.SizeofTest.test_permutations_sizeof">[docs]</a>    <span class="k">def</span> <span class="nf">test_permutations_sizeof</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">basesize</span> <span class="o">=</span> <span class="n">support</span><span class="o">.</span><span class="n">calcobjsize</span><span class="p">(</span><span class="s">&#39;4Pni&#39;</span><span class="p">)</span>
        <span class="n">check</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_sizeof</span>
        <span class="n">check</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="s">&#39;abcd&#39;</span><span class="p">),</span>
              <span class="n">basesize</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span><span class="p">)</span>
        <span class="n">check</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="s">&#39;abcd&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
              <span class="n">basesize</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span><span class="p">)</span>
        <span class="n">check</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="s">&#39;abcde&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
              <span class="n">basesize</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span><span class="p">)</span>
        <span class="n">check</span><span class="p">(</span><span class="n">permutations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">4</span><span class="p">),</span>
              <span class="n">basesize</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssize_t</span><span class="p">)</span>

</div></div>
<span class="n">libreftest</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot; Doctest for examples in the library reference: libitertools.tex</span>


<span class="s">&gt;&gt;&gt; amounts = [120.15, 764.05, 823.14]</span>
<span class="s">&gt;&gt;&gt; for checknum, amount in zip(count(1200), amounts):</span>
<span class="s">...     print(&#39;Check </span><span class="si">%d</span><span class="s"> is for $</span><span class="si">%.2f</span><span class="s">&#39; % (checknum, amount))</span>
<span class="s">...</span>
<span class="s">Check 1200 is for $120.15</span>
<span class="s">Check 1201 is for $764.05</span>
<span class="s">Check 1202 is for $823.14</span>

<span class="s">&gt;&gt;&gt; import operator</span>
<span class="s">&gt;&gt;&gt; for cube in map(operator.pow, range(1,4), repeat(3)):</span>
<span class="s">...    print(cube)</span>
<span class="s">...</span>
<span class="s">1</span>
<span class="s">8</span>
<span class="s">27</span>

<span class="s">&gt;&gt;&gt; reportlines = [&#39;EuroPython&#39;, &#39;Roster&#39;, &#39;&#39;, &#39;alex&#39;, &#39;&#39;, &#39;laura&#39;, &#39;&#39;, &#39;martin&#39;, &#39;&#39;, &#39;walter&#39;, &#39;&#39;, &#39;samuele&#39;]</span>
<span class="s">&gt;&gt;&gt; for name in islice(reportlines, 3, None, 2):</span>
<span class="s">...    print(name.title())</span>
<span class="s">...</span>
<span class="s">Alex</span>
<span class="s">Laura</span>
<span class="s">Martin</span>
<span class="s">Walter</span>
<span class="s">Samuele</span>

<span class="s">&gt;&gt;&gt; from operator import itemgetter</span>
<span class="s">&gt;&gt;&gt; d = dict(a=1, b=2, c=1, d=2, e=1, f=2, g=3)</span>
<span class="s">&gt;&gt;&gt; di = sorted(sorted(d.items()), key=itemgetter(1))</span>
<span class="s">&gt;&gt;&gt; for k, g in groupby(di, itemgetter(1)):</span>
<span class="s">...     print(k, list(map(itemgetter(0), g)))</span>
<span class="s">...</span>
<span class="s">1 [&#39;a&#39;, &#39;c&#39;, &#39;e&#39;]</span>
<span class="s">2 [&#39;b&#39;, &#39;d&#39;, &#39;f&#39;]</span>
<span class="s">3 [&#39;g&#39;]</span>

<span class="s"># Find runs of consecutive numbers using groupby.  The key to the solution</span>
<span class="s"># is differencing with a range so that consecutive numbers all appear in</span>
<span class="s"># same group.</span>
<span class="s">&gt;&gt;&gt; data = [ 1,  4,5,6, 10, 15,16,17,18, 22, 25,26,27,28]</span>
<span class="s">&gt;&gt;&gt; for k, g in groupby(enumerate(data), lambda t:t[0]-t[1]):</span>
<span class="s">...     print(list(map(operator.itemgetter(1), g)))</span>
<span class="s">...</span>
<span class="s">[1]</span>
<span class="s">[4, 5, 6]</span>
<span class="s">[10]</span>
<span class="s">[15, 16, 17, 18]</span>
<span class="s">[22]</span>
<span class="s">[25, 26, 27, 28]</span>

<span class="s">&gt;&gt;&gt; def take(n, iterable):</span>
<span class="s">...     &quot;Return first n items of the iterable as a list&quot;</span>
<span class="s">...     return list(islice(iterable, n))</span>

<span class="s">&gt;&gt;&gt; def enumerate(iterable, start=0):</span>
<span class="s">...     return zip(count(start), iterable)</span>

<span class="s">&gt;&gt;&gt; def tabulate(function, start=0):</span>
<span class="s">...     &quot;Return function(0), function(1), ...&quot;</span>
<span class="s">...     return map(function, count(start))</span>

<span class="s">&gt;&gt;&gt; def nth(iterable, n, default=None):</span>
<span class="s">...     &quot;Returns the nth item or a default value&quot;</span>
<span class="s">...     return next(islice(iterable, n, None), default)</span>

<span class="s">&gt;&gt;&gt; def quantify(iterable, pred=bool):</span>
<span class="s">...     &quot;Count how many times the predicate is true&quot;</span>
<span class="s">...     return sum(map(pred, iterable))</span>

<span class="s">&gt;&gt;&gt; def padnone(iterable):</span>
<span class="s">...     &quot;Returns the sequence elements and then returns None indefinitely&quot;</span>
<span class="s">...     return chain(iterable, repeat(None))</span>

<span class="s">&gt;&gt;&gt; def ncycles(iterable, n):</span>
<span class="s">...     &quot;Returns the sequence elements n times&quot;</span>
<span class="s">...     return chain(*repeat(iterable, n))</span>

<span class="s">&gt;&gt;&gt; def dotproduct(vec1, vec2):</span>
<span class="s">...     return sum(map(operator.mul, vec1, vec2))</span>

<span class="s">&gt;&gt;&gt; def flatten(listOfLists):</span>
<span class="s">...     return list(chain.from_iterable(listOfLists))</span>

<span class="s">&gt;&gt;&gt; def repeatfunc(func, times=None, *args):</span>
<span class="s">...     &quot;Repeat calls to func with specified arguments.&quot;</span>
<span class="s">...     &quot;   Example:  repeatfunc(random.random)&quot;</span>
<span class="s">...     if times is None:</span>
<span class="s">...         return starmap(func, repeat(args))</span>
<span class="s">...     else:</span>
<span class="s">...         return starmap(func, repeat(args, times))</span>

<span class="s">&gt;&gt;&gt; def pairwise(iterable):</span>
<span class="s">...     &quot;s -&gt; (s0,s1), (s1,s2), (s2, s3), ...&quot;</span>
<span class="s">...     a, b = tee(iterable)</span>
<span class="s">...     try:</span>
<span class="s">...         next(b)</span>
<span class="s">...     except StopIteration:</span>
<span class="s">...         pass</span>
<span class="s">...     return zip(a, b)</span>

<span class="s">&gt;&gt;&gt; def grouper(n, iterable, fillvalue=None):</span>
<span class="s">...     &quot;grouper(3, &#39;ABCDEFG&#39;, &#39;x&#39;) --&gt; ABC DEF Gxx&quot;</span>
<span class="s">...     args = [iter(iterable)] * n</span>
<span class="s">...     return zip_longest(*args, fillvalue=fillvalue)</span>

<span class="s">&gt;&gt;&gt; def roundrobin(*iterables):</span>
<span class="s">...     &quot;roundrobin(&#39;ABC&#39;, &#39;D&#39;, &#39;EF&#39;) --&gt; A D E B F C&quot;</span>
<span class="s">...     # Recipe credited to George Sakkis</span>
<span class="s">...     pending = len(iterables)</span>
<span class="s">...     nexts = cycle(iter(it).__next__ for it in iterables)</span>
<span class="s">...     while pending:</span>
<span class="s">...         try:</span>
<span class="s">...             for next in nexts:</span>
<span class="s">...                 yield next()</span>
<span class="s">...         except StopIteration:</span>
<span class="s">...             pending -= 1</span>
<span class="s">...             nexts = cycle(islice(nexts, pending))</span>

<span class="s">&gt;&gt;&gt; def powerset(iterable):</span>
<span class="s">...     &quot;powerset([1,2,3]) --&gt; () (1,) (2,) (3,) (1,2) (1,3) (2,3) (1,2,3)&quot;</span>
<span class="s">...     s = list(iterable)</span>
<span class="s">...     return chain.from_iterable(combinations(s, r) for r in range(len(s)+1))</span>

<span class="s">&gt;&gt;&gt; def unique_everseen(iterable, key=None):</span>
<span class="s">...     &quot;List unique elements, preserving order. Remember all elements ever seen.&quot;</span>
<span class="s">...     # unique_everseen(&#39;AAAABBBCCDAABBB&#39;) --&gt; A B C D</span>
<span class="s">...     # unique_everseen(&#39;ABBCcAD&#39;, str.lower) --&gt; A B C D</span>
<span class="s">...     seen = set()</span>
<span class="s">...     seen_add = seen.add</span>
<span class="s">...     if key is None:</span>
<span class="s">...         for element in iterable:</span>
<span class="s">...             if element not in seen:</span>
<span class="s">...                 seen_add(element)</span>
<span class="s">...                 yield element</span>
<span class="s">...     else:</span>
<span class="s">...         for element in iterable:</span>
<span class="s">...             k = key(element)</span>
<span class="s">...             if k not in seen:</span>
<span class="s">...                 seen_add(k)</span>
<span class="s">...                 yield element</span>

<span class="s">&gt;&gt;&gt; def unique_justseen(iterable, key=None):</span>
<span class="s">...     &quot;List unique elements, preserving order. Remember only the element just seen.&quot;</span>
<span class="s">...     # unique_justseen(&#39;AAAABBBCCDAABBB&#39;) --&gt; A B C D A B</span>
<span class="s">...     # unique_justseen(&#39;ABBCcAD&#39;, str.lower) --&gt; A B C A D</span>
<span class="s">...     return map(next, map(itemgetter(1), groupby(iterable, key)))</span>

<span class="s">&gt;&gt;&gt; def first_true(iterable, default=False, pred=None):</span>
<span class="s">...     &#39;&#39;&#39;Returns the first true value in the iterable.</span>
<span class="s">...</span>
<span class="s">...     If no true value is found, returns *default*</span>
<span class="s">...</span>
<span class="s">...     If *pred* is not None, returns the first item</span>
<span class="s">...     for which pred(item) is true.</span>
<span class="s">...</span>
<span class="s">...     &#39;&#39;&#39;</span>
<span class="s">...     # first_true([a,b,c], x) --&gt; a or b or c or x</span>
<span class="s">...     # first_true([a,b], x, f) --&gt; a if f(a) else b if f(b) else x</span>
<span class="s">...     return next(filter(pred, iterable), default)</span>

<span class="s">This is not part of the examples but it tests to make sure the definitions</span>
<span class="s">perform as purported.</span>

<span class="s">&gt;&gt;&gt; take(10, count())</span>
<span class="s">[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span>

<span class="s">&gt;&gt;&gt; list(enumerate(&#39;abc&#39;))</span>
<span class="s">[(0, &#39;a&#39;), (1, &#39;b&#39;), (2, &#39;c&#39;)]</span>

<span class="s">&gt;&gt;&gt; list(islice(tabulate(lambda x: 2*x), 4))</span>
<span class="s">[0, 2, 4, 6]</span>

<span class="s">&gt;&gt;&gt; nth(&#39;abcde&#39;, 3)</span>
<span class="s">&#39;d&#39;</span>

<span class="s">&gt;&gt;&gt; nth(&#39;abcde&#39;, 9) is None</span>
<span class="s">True</span>

<span class="s">&gt;&gt;&gt; quantify(range(99), lambda x: x%2==0)</span>
<span class="s">50</span>

<span class="s">&gt;&gt;&gt; a = [[1, 2, 3], [4, 5, 6]]</span>
<span class="s">&gt;&gt;&gt; flatten(a)</span>
<span class="s">[1, 2, 3, 4, 5, 6]</span>

<span class="s">&gt;&gt;&gt; list(repeatfunc(pow, 5, 2, 3))</span>
<span class="s">[8, 8, 8, 8, 8]</span>

<span class="s">&gt;&gt;&gt; import random</span>
<span class="s">&gt;&gt;&gt; take(5, map(int, repeatfunc(random.random)))</span>
<span class="s">[0, 0, 0, 0, 0]</span>

<span class="s">&gt;&gt;&gt; list(pairwise(&#39;abcd&#39;))</span>
<span class="s">[(&#39;a&#39;, &#39;b&#39;), (&#39;b&#39;, &#39;c&#39;), (&#39;c&#39;, &#39;d&#39;)]</span>

<span class="s">&gt;&gt;&gt; list(pairwise([]))</span>
<span class="s">[]</span>

<span class="s">&gt;&gt;&gt; list(pairwise(&#39;a&#39;))</span>
<span class="s">[]</span>

<span class="s">&gt;&gt;&gt; list(islice(padnone(&#39;abc&#39;), 0, 6))</span>
<span class="s">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, None, None, None]</span>

<span class="s">&gt;&gt;&gt; list(ncycles(&#39;abc&#39;, 3))</span>
<span class="s">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span>

<span class="s">&gt;&gt;&gt; dotproduct([1,2,3], [4,5,6])</span>
<span class="s">32</span>

<span class="s">&gt;&gt;&gt; list(grouper(3, &#39;abcdefg&#39;, &#39;x&#39;))</span>
<span class="s">[(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;), (&#39;d&#39;, &#39;e&#39;, &#39;f&#39;), (&#39;g&#39;, &#39;x&#39;, &#39;x&#39;)]</span>

<span class="s">&gt;&gt;&gt; list(roundrobin(&#39;abc&#39;, &#39;d&#39;, &#39;ef&#39;))</span>
<span class="s">[&#39;a&#39;, &#39;d&#39;, &#39;e&#39;, &#39;b&#39;, &#39;f&#39;, &#39;c&#39;]</span>

<span class="s">&gt;&gt;&gt; list(powerset([1,2,3]))</span>
<span class="s">[(), (1,), (2,), (3,), (1, 2), (1, 3), (2, 3), (1, 2, 3)]</span>

<span class="s">&gt;&gt;&gt; all(len(list(powerset(range(n)))) == 2**n for n in range(18))</span>
<span class="s">True</span>

<span class="s">&gt;&gt;&gt; list(powerset(&#39;abcde&#39;)) == sorted(sorted(set(powerset(&#39;abcde&#39;))), key=len)</span>
<span class="s">True</span>

<span class="s">&gt;&gt;&gt; list(unique_everseen(&#39;AAAABBBCCDAABBB&#39;))</span>
<span class="s">[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;]</span>

<span class="s">&gt;&gt;&gt; list(unique_everseen(&#39;ABBCcAD&#39;, str.lower))</span>
<span class="s">[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;]</span>

<span class="s">&gt;&gt;&gt; list(unique_justseen(&#39;AAAABBBCCDAABBB&#39;))</span>
<span class="s">[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;A&#39;, &#39;B&#39;]</span>

<span class="s">&gt;&gt;&gt; list(unique_justseen(&#39;ABBCcAD&#39;, str.lower))</span>
<span class="s">[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;A&#39;, &#39;D&#39;]</span>

<span class="s">&gt;&gt;&gt; first_true(&#39;ABC0DEF1&#39;, &#39;9&#39;, str.isdigit)</span>
<span class="s">&#39;0&#39;</span>

<span class="s">&quot;&quot;&quot;</span>

<span class="n">__test__</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;libreftest&#39;</span> <span class="p">:</span> <span class="n">libreftest</span><span class="p">}</span>

<div class="viewcode-block" id="test_main"><a class="viewcode-back" href="../../test.html#test.test_itertools.test_main">[docs]</a><span class="k">def</span> <span class="nf">test_main</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">test_classes</span> <span class="o">=</span> <span class="p">(</span><span class="n">TestBasicOps</span><span class="p">,</span> <span class="n">TestVariousIteratorArgs</span><span class="p">,</span> <span class="n">TestGC</span><span class="p">,</span>
                    <span class="n">RegressionTests</span><span class="p">,</span> <span class="n">LengthTransparency</span><span class="p">,</span>
                    <span class="n">SubclassWithKwargsTest</span><span class="p">,</span> <span class="n">TestExamples</span><span class="p">,</span>
                    <span class="n">SizeofTest</span><span class="p">)</span>
    <span class="n">support</span><span class="o">.</span><span class="n">run_unittest</span><span class="p">(</span><span class="o">*</span><span class="n">test_classes</span><span class="p">)</span>

    <span class="c"># verify reference counting</span>
    <span class="k">if</span> <span class="n">verbose</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s">&quot;gettotalrefcount&quot;</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">gc</span>
        <span class="n">counts</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">counts</span><span class="p">)):</span>
            <span class="n">support</span><span class="o">.</span><span class="n">run_unittest</span><span class="p">(</span><span class="o">*</span><span class="n">test_classes</span><span class="p">)</span>
            <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
            <span class="n">counts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">gettotalrefcount</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>

    <span class="c"># doctest the examples in the library reference</span>
    <span class="n">support</span><span class="o">.</span><span class="n">run_doctest</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">__name__</span><span class="p">],</span> <span class="n">verbose</span><span class="p">)</span>
</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">test_main</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Weldon Henson.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>