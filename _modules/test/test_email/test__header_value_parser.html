

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>test.test_email.test__header_value_parser &mdash; ArcherBashPYDocs 1.0.0. documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ArcherBashPYDocs 1.0.0. documentation" href="../../../index.html"/>
        <link rel="up" title="test.test_email" href="../test_email.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../../index.html" class="fa fa-home"> ArcherBashPYDocs</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="simple">
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">ArcherBashPYDocs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Module code</a> &raquo;</li>
      
          <li><a href="../test_email.html">test.test_email</a> &raquo;</li>
      
    <li>test.test_email.test__header_value_parser</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for test.test_email.test__header_value_parser</h1><div class="highlight"><pre>
<span class="kn">import</span> <span class="nn">string</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">email</span> <span class="kn">import</span> <span class="n">_header_value_parser</span> <span class="k">as</span> <span class="n">parser</span>
<span class="kn">from</span> <span class="nn">email</span> <span class="kn">import</span> <span class="n">errors</span>
<span class="kn">from</span> <span class="nn">email</span> <span class="kn">import</span> <span class="n">policy</span>
<span class="kn">from</span> <span class="nn">test.test_email</span> <span class="kn">import</span> <span class="n">TestEmailBase</span><span class="p">,</span> <span class="n">parameterize</span>

<div class="viewcode-block" id="TestTokens"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestTokens">[docs]</a><span class="k">class</span> <span class="nc">TestTokens</span><span class="p">(</span><span class="n">TestEmailBase</span><span class="p">):</span>

    <span class="c"># EWWhiteSpaceTerminal</span>

<div class="viewcode-block" id="TestTokens.test_EWWhiteSpaceTerminal"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestTokens.test_EWWhiteSpaceTerminal">[docs]</a>    <span class="k">def</span> <span class="nf">test_EWWhiteSpaceTerminal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">EWWhiteSpaceTerminal</span><span class="p">(</span><span class="s">&#39; </span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;fws&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">&#39; </span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">encoded</span><span class="p">,</span> <span class="s">&#39; </span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>

    <span class="c"># UnstructuredTokenList</span>
</div>
<div class="viewcode-block" id="TestTokens.test_undecodable_bytes_error_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestTokens.test_undecodable_bytes_error_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_undecodable_bytes_error_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">badstr</span> <span class="o">=</span> <span class="n">b</span><span class="s">&quot;le pouf c</span><span class="se">\xaf</span><span class="s">lebre&quot;</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">,</span> <span class="s">&#39;surrogateescape&#39;</span><span class="p">)</span>
        <span class="n">unst</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_unstructured</span><span class="p">(</span><span class="n">badstr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertDefectsEqual</span><span class="p">(</span><span class="n">unst</span><span class="o">.</span><span class="n">all_defects</span><span class="p">,</span> <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">UndecodableBytesDefect</span><span class="p">])</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">unst</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertDefectsEqual</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">all_defects</span><span class="p">,</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertDefectsEqual</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">all_defects</span><span class="p">,</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertDefectsEqual</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">all_defects</span><span class="p">,</span> <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">UndecodableBytesDefect</span><span class="p">])</span>

</div></div>
<div class="viewcode-block" id="TestParserMixin"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParserMixin">[docs]</a><span class="k">class</span> <span class="nc">TestParserMixin</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">_assert_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tl</span><span class="p">,</span> <span class="n">rest</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">defects</span><span class="p">,</span> <span class="n">remainder</span><span class="p">,</span>
                        <span class="n">comments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tl</span><span class="p">),</span> <span class="n">string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tl</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertDefectsEqual</span><span class="p">(</span><span class="n">tl</span><span class="o">.</span><span class="n">all_defects</span><span class="p">,</span> <span class="n">defects</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">rest</span><span class="p">,</span> <span class="n">remainder</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tl</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="n">comments</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">defects</span><span class="p">,</span>
                          <span class="n">remainder</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">tl</span><span class="p">,</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_assert_results</span><span class="p">(</span><span class="n">tl</span><span class="p">,</span> <span class="n">rest</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">defects</span><span class="p">,</span> <span class="n">remainder</span><span class="p">,</span>
                             <span class="n">comments</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tl</span>

    <span class="k">def</span> <span class="nf">_test_parse_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">defects</span><span class="p">,</span>
                             <span class="n">comments</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">tl</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_assert_results</span><span class="p">(</span><span class="n">tl</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">defects</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">comments</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tl</span>

</div>
<div class="viewcode-block" id="TestParser"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser">[docs]</a><span class="k">class</span> <span class="nc">TestParser</span><span class="p">(</span><span class="n">TestParserMixin</span><span class="p">,</span> <span class="n">TestEmailBase</span><span class="p">):</span>

    <span class="c"># _wsp_splitter</span>

    <span class="n">rfc_printable_ascii</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">127</span><span class="p">))</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">)</span>
    <span class="n">rfc_atext_chars</span> <span class="o">=</span> <span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_letters</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span> <span class="o">+</span>
                        <span class="s">&quot;!#$%&amp;</span><span class="se">\&#39;</span><span class="s">*+-/=?^_`{}|~&quot;</span><span class="p">)</span>
    <span class="n">rfc_dtext_chars</span> <span class="o">=</span> <span class="n">rfc_printable_ascii</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">maketrans</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="s">r&#39;\[]&#39;</span><span class="p">))</span>

<div class="viewcode-block" id="TestParser.test__wsp_splitter_one_word"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test__wsp_splitter_one_word">[docs]</a>    <span class="k">def</span> <span class="nf">test__wsp_splitter_one_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">_wsp_splitter</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test__wsp_splitter_two_words"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test__wsp_splitter_two_words">[docs]</a>    <span class="k">def</span> <span class="nf">test__wsp_splitter_two_words</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">_wsp_splitter</span><span class="p">(</span><span class="s">&#39;foo def&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                                               <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;def&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test__wsp_splitter_ws_runs"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test__wsp_splitter_ws_runs">[docs]</a>    <span class="k">def</span> <span class="nf">test__wsp_splitter_ws_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">_wsp_splitter</span><span class="p">(</span><span class="s">&#39;foo </span><span class="se">\t</span><span class="s"> def jik&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                                              <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39; </span><span class="se">\t</span><span class="s"> &#39;</span><span class="p">,</span> <span class="s">&#39;def jik&#39;</span><span class="p">])</span>


    <span class="c"># get_fws</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_fws_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_fws_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_fws_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_fws</span><span class="p">,</span> <span class="s">&#39; </span><span class="se">\t</span><span class="s">  &#39;</span><span class="p">,</span> <span class="s">&#39; </span><span class="se">\t</span><span class="s">  &#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fws</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;fws&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_fws_space"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_fws_space">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_fws_space</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_fws</span><span class="p">,</span> <span class="s">&#39; foo&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_fws_ws_run"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_fws_ws_run">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_fws_ws_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_fws</span><span class="p">,</span> <span class="s">&#39; </span><span class="se">\t</span><span class="s"> foo &#39;</span><span class="p">,</span> <span class="s">&#39; </span><span class="se">\t</span><span class="s"> &#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;foo &#39;</span><span class="p">)</span>

    <span class="c"># get_encoded_word</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_encoded_word_missing_start_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_encoded_word_missing_start_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_encoded_word_missing_start_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_encoded_word</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_encoded_word_missing_end_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_encoded_word_missing_end_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_encoded_word_missing_end_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_encoded_word</span><span class="p">(</span><span class="s">&#39;=?abc&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_encoded_word_missing_middle_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_encoded_word_missing_middle_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_encoded_word_missing_middle_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_encoded_word</span><span class="p">(</span><span class="s">&#39;=?abc?=&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_encoded_word_valid_ew"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_encoded_word_valid_ew">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_encoded_word_valid_ew</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_encoded_word</span><span class="p">,</span>
                         <span class="s">&#39;=?us-ascii?q?this_is_a_test?=  bird&#39;</span><span class="p">,</span>
                         <span class="s">&#39;this is a test&#39;</span><span class="p">,</span>
                         <span class="s">&#39;this is a test&#39;</span><span class="p">,</span>
                         <span class="p">[],</span>
                         <span class="s">&#39;  bird&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_encoded_word_internal_spaces"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_encoded_word_internal_spaces">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_encoded_word_internal_spaces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_encoded_word</span><span class="p">,</span>
                         <span class="s">&#39;=?us-ascii?q?this is a test?=  bird&#39;</span><span class="p">,</span>
                         <span class="s">&#39;this is a test&#39;</span><span class="p">,</span>
                         <span class="s">&#39;this is a test&#39;</span><span class="p">,</span>
                         <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span>
                         <span class="s">&#39;  bird&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_encoded_word_gets_first"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_encoded_word_gets_first">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_encoded_word_gets_first</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_encoded_word</span><span class="p">,</span>
                         <span class="s">&#39;=?us-ascii?q?first?=  =?utf-8?q?second?=&#39;</span><span class="p">,</span>
                         <span class="s">&#39;first&#39;</span><span class="p">,</span>
                         <span class="s">&#39;first&#39;</span><span class="p">,</span>
                         <span class="p">[],</span>
                         <span class="s">&#39;  =?utf-8?q?second?=&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_encoded_word_gets_first_even_if_no_space"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_encoded_word_gets_first_even_if_no_space">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_encoded_word_gets_first_even_if_no_space</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_encoded_word</span><span class="p">,</span>
                         <span class="s">&#39;=?us-ascii?q?first?==?utf-8?q?second?=&#39;</span><span class="p">,</span>
                         <span class="s">&#39;first&#39;</span><span class="p">,</span>
                         <span class="s">&#39;first&#39;</span><span class="p">,</span>
                         <span class="p">[],</span>
                         <span class="s">&#39;=?utf-8?q?second?=&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_encoded_word_sets_extra_attributes"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_encoded_word_sets_extra_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_encoded_word_sets_extra_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ew</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_encoded_word</span><span class="p">,</span>
                         <span class="s">&#39;=?us-ascii*jive?q?first_second?=&#39;</span><span class="p">,</span>
                         <span class="s">&#39;first second&#39;</span><span class="p">,</span>
                         <span class="s">&#39;first second&#39;</span><span class="p">,</span>
                         <span class="p">[],</span>
                         <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ew</span><span class="o">.</span><span class="n">encoded</span><span class="p">,</span> <span class="s">&#39;=?us-ascii*jive?q?first_second?=&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ew</span><span class="o">.</span><span class="n">charset</span><span class="p">,</span> <span class="s">&#39;us-ascii&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ew</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="s">&#39;jive&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_encoded_word_lang_default_is_blank"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_encoded_word_lang_default_is_blank">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_encoded_word_lang_default_is_blank</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ew</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_encoded_word</span><span class="p">,</span>
                         <span class="s">&#39;=?us-ascii?q?first_second?=&#39;</span><span class="p">,</span>
                         <span class="s">&#39;first second&#39;</span><span class="p">,</span>
                         <span class="s">&#39;first second&#39;</span><span class="p">,</span>
                         <span class="p">[],</span>
                         <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ew</span><span class="o">.</span><span class="n">encoded</span><span class="p">,</span> <span class="s">&#39;=?us-ascii?q?first_second?=&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ew</span><span class="o">.</span><span class="n">charset</span><span class="p">,</span> <span class="s">&#39;us-ascii&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ew</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_encoded_word_non_printable_defect"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_encoded_word_non_printable_defect">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_encoded_word_non_printable_defect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_encoded_word</span><span class="p">,</span>
                         <span class="s">&#39;=?us-ascii?q?first</span><span class="se">\x02</span><span class="s">second?=&#39;</span><span class="p">,</span>
                         <span class="s">&#39;first</span><span class="se">\x02</span><span class="s">second&#39;</span><span class="p">,</span>
                         <span class="s">&#39;first</span><span class="se">\x02</span><span class="s">second&#39;</span><span class="p">,</span>
                         <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">NonPrintableDefect</span><span class="p">],</span>
                         <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_encoded_word_leading_internal_space"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_encoded_word_leading_internal_space">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_encoded_word_leading_internal_space</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_encoded_word</span><span class="p">,</span>
                        <span class="s">&#39;=?us-ascii?q?=20foo?=&#39;</span><span class="p">,</span>
                        <span class="s">&#39; foo&#39;</span><span class="p">,</span>
                        <span class="s">&#39; foo&#39;</span><span class="p">,</span>
                        <span class="p">[],</span>
                        <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_encoded_word_quopri_utf_escape_follows_cte"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_encoded_word_quopri_utf_escape_follows_cte">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_encoded_word_quopri_utf_escape_follows_cte</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue 18044</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_encoded_word</span><span class="p">,</span>
                        <span class="s">&#39;=?utf-8?q?=C3=89ric?=&#39;</span><span class="p">,</span>
                        <span class="s">&#39;Éric&#39;</span><span class="p">,</span>
                        <span class="s">&#39;Éric&#39;</span><span class="p">,</span>
                        <span class="p">[],</span>
                        <span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="c"># get_unstructured</span>
</div>
    <span class="k">def</span> <span class="nf">_get_unst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_unstructured</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">token</span><span class="p">,</span> <span class="s">&#39;&#39;</span>

<div class="viewcode-block" id="TestParser.test_get_unstructured_null"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_null">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_null</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_one_word"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_one_word">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_one_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_normal_phrase"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_normal_phrase">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_normal_phrase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span> <span class="s">&#39;foo bar bird&#39;</span><span class="p">,</span>
                                         <span class="s">&#39;foo bar bird&#39;</span><span class="p">,</span>
                                         <span class="s">&#39;foo bar bird&#39;</span><span class="p">,</span>
                                         <span class="p">[],</span>
                                         <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_normal_phrase_with_whitespace"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_normal_phrase_with_whitespace">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_normal_phrase_with_whitespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span> <span class="s">&#39;foo </span><span class="se">\t</span><span class="s"> bar      bird&#39;</span><span class="p">,</span>
                                         <span class="s">&#39;foo </span><span class="se">\t</span><span class="s"> bar      bird&#39;</span><span class="p">,</span>
                                         <span class="s">&#39;foo bar bird&#39;</span><span class="p">,</span>
                                         <span class="p">[],</span>
                                         <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_leading_whitespace"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_leading_whitespace">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_leading_whitespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span> <span class="s">&#39;  foo bar&#39;</span><span class="p">,</span>
                                         <span class="s">&#39;  foo bar&#39;</span><span class="p">,</span>
                                         <span class="s">&#39; foo bar&#39;</span><span class="p">,</span>
                                         <span class="p">[],</span>
                                         <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_trailing_whitespace"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_trailing_whitespace">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_trailing_whitespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span> <span class="s">&#39;foo bar  &#39;</span><span class="p">,</span>
                                         <span class="s">&#39;foo bar  &#39;</span><span class="p">,</span>
                                         <span class="s">&#39;foo bar &#39;</span><span class="p">,</span>
                                         <span class="p">[],</span>
                                         <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_leading_and_trailing_whitespace"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_leading_and_trailing_whitespace">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_leading_and_trailing_whitespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span> <span class="s">&#39;  foo bar  &#39;</span><span class="p">,</span>
                                         <span class="s">&#39;  foo bar  &#39;</span><span class="p">,</span>
                                         <span class="s">&#39; foo bar &#39;</span><span class="p">,</span>
                                         <span class="p">[],</span>
                                         <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_one_valid_ew_no_ws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_one_valid_ew_no_ws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_one_valid_ew_no_ws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span> <span class="s">&#39;=?us-ascii?q?bar?=&#39;</span><span class="p">,</span>
                                         <span class="s">&#39;bar&#39;</span><span class="p">,</span>
                                         <span class="s">&#39;bar&#39;</span><span class="p">,</span>
                                         <span class="p">[],</span>
                                         <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_one_ew_trailing_ws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_one_ew_trailing_ws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_one_ew_trailing_ws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span> <span class="s">&#39;=?us-ascii?q?bar?=  &#39;</span><span class="p">,</span>
                                         <span class="s">&#39;bar  &#39;</span><span class="p">,</span>
                                         <span class="s">&#39;bar &#39;</span><span class="p">,</span>
                                         <span class="p">[],</span>
                                         <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_one_valid_ew_trailing_text"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_one_valid_ew_trailing_text">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_one_valid_ew_trailing_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span> <span class="s">&#39;=?us-ascii?q?bar?= bird&#39;</span><span class="p">,</span>
                                         <span class="s">&#39;bar bird&#39;</span><span class="p">,</span>
                                         <span class="s">&#39;bar bird&#39;</span><span class="p">,</span>
                                         <span class="p">[],</span>
                                         <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_phrase_with_ew_in_middle_of_text"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_phrase_with_ew_in_middle_of_text">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_phrase_with_ew_in_middle_of_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span> <span class="s">&#39;foo =?us-ascii?q?bar?= bird&#39;</span><span class="p">,</span>
                                         <span class="s">&#39;foo bar bird&#39;</span><span class="p">,</span>
                                         <span class="s">&#39;foo bar bird&#39;</span><span class="p">,</span>
                                         <span class="p">[],</span>
                                         <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_phrase_with_two_ew"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_phrase_with_two_ew">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_phrase_with_two_ew</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="s">&#39;foo =?us-ascii?q?bar?= =?us-ascii?q?bird?=&#39;</span><span class="p">,</span>
            <span class="s">&#39;foo barbird&#39;</span><span class="p">,</span>
            <span class="s">&#39;foo barbird&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_phrase_with_two_ew_trailing_ws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_phrase_with_two_ew_trailing_ws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_phrase_with_two_ew_trailing_ws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="s">&#39;foo =?us-ascii?q?bar?= =?us-ascii?q?bird?=   &#39;</span><span class="p">,</span>
            <span class="s">&#39;foo barbird   &#39;</span><span class="p">,</span>
            <span class="s">&#39;foo barbird &#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_phrase_with_ew_with_leading_ws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_phrase_with_ew_with_leading_ws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_phrase_with_ew_with_leading_ws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="s">&#39;  =?us-ascii?q?bar?=&#39;</span><span class="p">,</span>
            <span class="s">&#39;  bar&#39;</span><span class="p">,</span>
            <span class="s">&#39; bar&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_phrase_with_two_ew_extra_ws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_phrase_with_two_ew_extra_ws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_phrase_with_two_ew_extra_ws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="s">&#39;foo =?us-ascii?q?bar?= </span><span class="se">\t</span><span class="s">  =?us-ascii?q?bird?=&#39;</span><span class="p">,</span>
            <span class="s">&#39;foo barbird&#39;</span><span class="p">,</span>
            <span class="s">&#39;foo barbird&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_two_ew_extra_ws_trailing_text"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_two_ew_extra_ws_trailing_text">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_two_ew_extra_ws_trailing_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="s">&#39;=?us-ascii?q?test?=   =?us-ascii?q?foo?=  val&#39;</span><span class="p">,</span>
            <span class="s">&#39;testfoo  val&#39;</span><span class="p">,</span>
            <span class="s">&#39;testfoo val&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_ew_with_internal_ws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_ew_with_internal_ws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_ew_with_internal_ws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="s">&#39;=?iso-8859-1?q?hello=20world?=&#39;</span><span class="p">,</span>
            <span class="s">&#39;hello world&#39;</span><span class="p">,</span>
            <span class="s">&#39;hello world&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_ew_with_internal_leading_ws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_ew_with_internal_leading_ws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_ew_with_internal_leading_ws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="s">&#39;   =?us-ascii?q?=20test?=   =?us-ascii?q?=20foo?=  val&#39;</span><span class="p">,</span>
            <span class="s">&#39;    test foo  val&#39;</span><span class="p">,</span>
            <span class="s">&#39;  test foo val&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_invaild_ew"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_invaild_ew">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_invaild_ew</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="s">&#39;=?test val&#39;</span><span class="p">,</span>
            <span class="s">&#39;=?test val&#39;</span><span class="p">,</span>
            <span class="s">&#39;=?test val&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_undecodable_bytes"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_undecodable_bytes">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_undecodable_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="n">b</span><span class="s">&#39;test </span><span class="se">\xAC</span><span class="s">foo  val&#39;</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">,</span> <span class="s">&#39;surrogateescape&#39;</span><span class="p">),</span>
            <span class="s">&#39;test </span><span class="se">\uDCAC</span><span class="s">foo  val&#39;</span><span class="p">,</span>
            <span class="s">&#39;test </span><span class="se">\uDCAC</span><span class="s">foo val&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">UndecodableBytesDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_undecodable_bytes_in_EW"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_undecodable_bytes_in_EW">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_undecodable_bytes_in_EW</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="p">(</span><span class="n">b</span><span class="s">&#39;=?us-ascii?q?=20test?=   =?us-ascii?q?=20</span><span class="se">\xAC</span><span class="s">foo?=&#39;</span>
                <span class="n">b</span><span class="s">&#39;  val&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">,</span> <span class="s">&#39;surrogateescape&#39;</span><span class="p">),</span>
            <span class="s">&#39; test </span><span class="se">\uDCAC</span><span class="s">foo  val&#39;</span><span class="p">,</span>
            <span class="s">&#39; test </span><span class="se">\uDCAC</span><span class="s">foo val&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">UndecodableBytesDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_missing_base64_padding"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_missing_base64_padding">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_missing_base64_padding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="s">&#39;=?utf-8?b?dmk?=&#39;</span><span class="p">,</span>
            <span class="s">&#39;vi&#39;</span><span class="p">,</span>
            <span class="s">&#39;vi&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidBase64PaddingDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_invalid_base64_character"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_invalid_base64_character">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_invalid_base64_character</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="s">&#39;=?utf-8?b?dm</span><span class="se">\x01</span><span class="s">k===?=&#39;</span><span class="p">,</span>
            <span class="s">&#39;vi&#39;</span><span class="p">,</span>
            <span class="s">&#39;vi&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidBase64CharactersDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_invalid_base64_character_and_bad_padding"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_invalid_base64_character_and_bad_padding">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_invalid_base64_character_and_bad_padding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="s">&#39;=?utf-8?b?dm</span><span class="se">\x01</span><span class="s">k?=&#39;</span><span class="p">,</span>
            <span class="s">&#39;vi&#39;</span><span class="p">,</span>
            <span class="s">&#39;vi&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidBase64CharactersDefect</span><span class="p">,</span>
             <span class="n">errors</span><span class="o">.</span><span class="n">InvalidBase64PaddingDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_unstructured_no_whitespace_between_ews"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_unstructured_no_whitespace_between_ews">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_unstructured_no_whitespace_between_ews</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unst</span><span class="p">,</span>
            <span class="s">&#39;=?utf-8?q?foo?==?utf-8?q?bar?=&#39;</span><span class="p">,</span>
            <span class="s">&#39;foobar&#39;</span><span class="p">,</span>
            <span class="s">&#39;foobar&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="c"># get_qp_ctext</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qp_ctext_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qp_ctext_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qp_ctext_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ptext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qp_ctext</span><span class="p">,</span>
                                <span class="s">&#39;foobar&#39;</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ptext</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;ptext&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qp_ctext_all_printables"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qp_ctext_all_printables">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qp_ctext_all_printables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">with_qp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfc_printable_ascii</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\\\\</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">with_qp</span> <span class="o">=</span> <span class="n">with_qp</span><span class="o">.</span>  <span class="n">replace</span><span class="p">(</span><span class="s">&#39;(&#39;</span><span class="p">,</span> <span class="s">r&#39;\(&#39;</span><span class="p">)</span>
        <span class="n">with_qp</span> <span class="o">=</span> <span class="n">with_qp</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;)&#39;</span><span class="p">,</span> <span class="s">r&#39;\)&#39;</span><span class="p">)</span>
        <span class="n">ptext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qp_ctext</span><span class="p">,</span>
                                 <span class="n">with_qp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfc_printable_ascii</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qp_ctext_two_words_gets_first"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qp_ctext_two_words_gets_first">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qp_ctext_two_words_gets_first</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qp_ctext</span><span class="p">,</span>
                        <span class="s">&#39;foo de&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39; de&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qp_ctext_following_wsp_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qp_ctext_following_wsp_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qp_ctext_following_wsp_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qp_ctext</span><span class="p">,</span>
                        <span class="s">&#39;foo </span><span class="se">\t\t</span><span class="s">de&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39; </span><span class="se">\t\t</span><span class="s">de&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qp_ctext_up_to_close_paren_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qp_ctext_up_to_close_paren_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qp_ctext_up_to_close_paren_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qp_ctext</span><span class="p">,</span>
                        <span class="s">&#39;foo)&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;)&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qp_ctext_wsp_before_close_paren_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qp_ctext_wsp_before_close_paren_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qp_ctext_wsp_before_close_paren_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qp_ctext</span><span class="p">,</span>
                        <span class="s">&#39;foo  )&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;  )&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qp_ctext_close_paren_mid_word"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qp_ctext_close_paren_mid_word">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qp_ctext_close_paren_mid_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qp_ctext</span><span class="p">,</span>
                        <span class="s">&#39;foo)bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;)bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qp_ctext_up_to_open_paren_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qp_ctext_up_to_open_paren_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qp_ctext_up_to_open_paren_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qp_ctext</span><span class="p">,</span>
                        <span class="s">&#39;foo(&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;(&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qp_ctext_wsp_before_open_paren_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qp_ctext_wsp_before_open_paren_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qp_ctext_wsp_before_open_paren_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qp_ctext</span><span class="p">,</span>
                        <span class="s">&#39;foo  (&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;  (&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qp_ctext_open_paren_mid_word"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qp_ctext_open_paren_mid_word">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qp_ctext_open_paren_mid_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qp_ctext</span><span class="p">,</span>
                        <span class="s">&#39;foo(bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;(bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qp_ctext_non_printables"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qp_ctext_non_printables">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qp_ctext_non_printables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ptext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qp_ctext</span><span class="p">,</span>
                                <span class="s">&#39;foo</span><span class="se">\x00</span><span class="s">bar)&#39;</span><span class="p">,</span> <span class="s">&#39;foo</span><span class="se">\x00</span><span class="s">bar&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span>
                                <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">NonPrintableDefect</span><span class="p">],</span> <span class="s">&#39;)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ptext</span><span class="o">.</span><span class="n">defects</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">non_printables</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;</span><span class="se">\x00</span><span class="s">&#39;</span><span class="p">)</span>

    <span class="c"># get_qcontent</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qcontent_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qcontent_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qcontent_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ptext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qcontent</span><span class="p">,</span>
                                <span class="s">&#39;foobar&#39;</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ptext</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;ptext&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qcontent_all_printables"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qcontent_all_printables">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qcontent_all_printables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">with_qp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfc_printable_ascii</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\\\\</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">with_qp</span> <span class="o">=</span> <span class="n">with_qp</span><span class="o">.</span>  <span class="n">replace</span><span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s">r&#39;\&quot;&#39;</span><span class="p">)</span>
        <span class="n">ptext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qcontent</span><span class="p">,</span> <span class="n">with_qp</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">rfc_printable_ascii</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">rfc_printable_ascii</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qcontent_two_words_gets_first"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qcontent_two_words_gets_first">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qcontent_two_words_gets_first</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qcontent</span><span class="p">,</span>
                        <span class="s">&#39;foo de&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39; de&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qcontent_following_wsp_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qcontent_following_wsp_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qcontent_following_wsp_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qcontent</span><span class="p">,</span>
                        <span class="s">&#39;foo </span><span class="se">\t\t</span><span class="s">de&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39; </span><span class="se">\t\t</span><span class="s">de&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qcontent_up_to_dquote_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qcontent_up_to_dquote_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qcontent_up_to_dquote_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qcontent</span><span class="p">,</span>
                        <span class="s">&#39;foo&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&quot;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qcontent_wsp_before_close_paren_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qcontent_wsp_before_close_paren_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qcontent_wsp_before_close_paren_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qcontent</span><span class="p">,</span>
                        <span class="s">&#39;foo  &quot;&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;  &quot;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qcontent_close_paren_mid_word"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qcontent_close_paren_mid_word">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qcontent_close_paren_mid_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qcontent</span><span class="p">,</span>
                        <span class="s">&#39;foo&quot;bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&quot;bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_qcontent_non_printables"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_qcontent_non_printables">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_qcontent_non_printables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ptext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_qcontent</span><span class="p">,</span>
                                <span class="s">&#39;foo</span><span class="se">\x00</span><span class="s">fg&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;foo</span><span class="se">\x00</span><span class="s">fg&#39;</span><span class="p">,</span> <span class="s">&#39;foo</span><span class="se">\x00</span><span class="s">fg&#39;</span><span class="p">,</span>
                                <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">NonPrintableDefect</span><span class="p">],</span> <span class="s">&#39;&quot;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ptext</span><span class="o">.</span><span class="n">defects</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">non_printables</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;</span><span class="se">\x00</span><span class="s">&#39;</span><span class="p">)</span>

    <span class="c"># get_atext</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atext_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atext_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atext_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">atext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atext</span><span class="p">,</span>
                                <span class="s">&#39;foobar&#39;</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atext</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;atext&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atext_all_atext"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atext_all_atext">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atext_all_atext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">atext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atext</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfc_atext_chars</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">rfc_atext_chars</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">rfc_atext_chars</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atext_two_words_gets_first"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atext_two_words_gets_first">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atext_two_words_gets_first</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atext</span><span class="p">,</span>
                        <span class="s">&#39;foo bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39; bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atext_following_wsp_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atext_following_wsp_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atext_following_wsp_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atext</span><span class="p">,</span>
                        <span class="s">&#39;foo </span><span class="se">\t\t</span><span class="s">bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39; </span><span class="se">\t\t</span><span class="s">bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atext_up_to_special"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atext_up_to_special">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atext_up_to_special</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atext</span><span class="p">,</span>
                        <span class="s">&#39;foo@bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;@bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atext_non_printables"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atext_non_printables">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atext_non_printables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">atext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atext</span><span class="p">,</span>
                                <span class="s">&#39;foo</span><span class="se">\x00</span><span class="s">bar(&#39;</span><span class="p">,</span> <span class="s">&#39;foo</span><span class="se">\x00</span><span class="s">bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo</span><span class="se">\x00</span><span class="s">bar&#39;</span><span class="p">,</span>
                                <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">NonPrintableDefect</span><span class="p">],</span> <span class="s">&#39;(&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atext</span><span class="o">.</span><span class="n">defects</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">non_printables</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;</span><span class="se">\x00</span><span class="s">&#39;</span><span class="p">)</span>

    <span class="c"># get_bare_quoted_string</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_bare_quoted_string_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_bare_quoted_string_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_bare_quoted_string_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">bqs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_bare_quoted_string</span><span class="p">,</span>
                               <span class="s">&#39;&quot;foo&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;&quot;foo&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">bqs</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;bare-quoted-string&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_bare_quoted_string_must_start_with_dquote"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_bare_quoted_string_must_start_with_dquote">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_bare_quoted_string_must_start_with_dquote</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_bare_quoted_string</span><span class="p">(</span><span class="s">&#39;foo&quot;&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_bare_quoted_string</span><span class="p">(</span><span class="s">&#39;  &quot;foo&quot;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_bare_quoted_string_following_wsp_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_bare_quoted_string_following_wsp_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_bare_quoted_string_following_wsp_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_bare_quoted_string</span><span class="p">,</span>
             <span class="s">&#39;&quot;foo&quot;</span><span class="se">\t</span><span class="s"> bar&#39;</span><span class="p">,</span> <span class="s">&#39;&quot;foo&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s"> bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_bare_quoted_string_multiple_words"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_bare_quoted_string_multiple_words">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_bare_quoted_string_multiple_words</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_bare_quoted_string</span><span class="p">,</span>
             <span class="s">&#39;&quot;foo bar moo&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;&quot;foo bar moo&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;foo bar moo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_bare_quoted_string_multiple_words_wsp_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_bare_quoted_string_multiple_words_wsp_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_bare_quoted_string_multiple_words_wsp_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_bare_quoted_string</span><span class="p">,</span>
             <span class="s">&#39;&quot; foo  moo</span><span class="se">\t</span><span class="s">&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;&quot; foo  moo</span><span class="se">\t</span><span class="s">&quot;&#39;</span><span class="p">,</span> <span class="s">&#39; foo  moo</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_bare_quoted_string_end_dquote_mid_word"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_bare_quoted_string_end_dquote_mid_word">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_bare_quoted_string_end_dquote_mid_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_bare_quoted_string</span><span class="p">,</span>
             <span class="s">&#39;&quot;foo&quot;bar&#39;</span><span class="p">,</span> <span class="s">&#39;&quot;foo&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_bare_quoted_string_quoted_dquote"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_bare_quoted_string_quoted_dquote">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_bare_quoted_string_quoted_dquote</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_bare_quoted_string</span><span class="p">,</span>
             <span class="s">r&#39;&quot;foo\&quot;in&quot;a&#39;</span><span class="p">,</span> <span class="s">r&#39;&quot;foo\&quot;in&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;foo&quot;in&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_bare_quoted_string_non_printables"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_bare_quoted_string_non_printables">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_bare_quoted_string_non_printables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_bare_quoted_string</span><span class="p">,</span>
             <span class="s">&#39;&quot;a</span><span class="se">\x01</span><span class="s">a&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;&quot;a</span><span class="se">\x01</span><span class="s">a&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;a</span><span class="se">\x01</span><span class="s">a&#39;</span><span class="p">,</span>
             <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">NonPrintableDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_bare_quoted_string_no_end_dquote"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_bare_quoted_string_no_end_dquote">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_bare_quoted_string_no_end_dquote</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_bare_quoted_string</span><span class="p">,</span>
             <span class="s">&#39;&quot;foo&#39;</span><span class="p">,</span> <span class="s">&#39;&quot;foo&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span>
             <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_bare_quoted_string</span><span class="p">,</span>
             <span class="s">&#39;&quot;foo &#39;</span><span class="p">,</span> <span class="s">&#39;&quot;foo &quot;&#39;</span><span class="p">,</span> <span class="s">&#39;foo &#39;</span><span class="p">,</span>
             <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_bare_quoted_string_empty_quotes"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_bare_quoted_string_empty_quotes">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_bare_quoted_string_empty_quotes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_bare_quoted_string</span><span class="p">,</span>
            <span class="s">&#39;&quot;&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;&quot;&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="c"># Issue 16983: apply postel&#39;s law to some bad encoding.</span></div>
<div class="viewcode-block" id="TestParser.test_encoded_word_inside_quotes"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_encoded_word_inside_quotes">[docs]</a>    <span class="k">def</span> <span class="nf">test_encoded_word_inside_quotes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_bare_quoted_string</span><span class="p">,</span>
            <span class="s">&#39;&quot;=?utf-8?Q?not_really_valid?=&quot;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;not really valid&quot;&#39;</span><span class="p">,</span>
            <span class="s">&#39;not really valid&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="c"># get_comment</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;(comment)&#39;</span><span class="p">,</span> <span class="s">&#39;(comment)&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;comment&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">comment</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;comment&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_must_start_with_paren"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_must_start_with_paren">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_must_start_with_paren</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">(</span><span class="s">&#39;foo&quot;&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">(</span><span class="s">&#39;  (foo&quot;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_following_wsp_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_following_wsp_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_following_wsp_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;(comment)  </span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;(comment)&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;  </span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;comment&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_multiple_words"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_multiple_words">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_multiple_words</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;(foo bar)  </span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;(foo bar)&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;  </span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo bar&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_multiple_words_wsp_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_multiple_words_wsp_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_multiple_words_wsp_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;( foo  bar</span><span class="se">\t</span><span class="s"> )  </span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;( foo  bar</span><span class="se">\t</span><span class="s"> )&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;  </span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span>
                <span class="p">[</span><span class="s">&#39; foo  bar</span><span class="se">\t</span><span class="s"> &#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_end_paren_mid_word"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_end_paren_mid_word">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_end_paren_mid_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;(foo)bar&#39;</span><span class="p">,</span> <span class="s">&#39;(foo)&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_quoted_parens"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_quoted_parens">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_quoted_parens</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;(foo\) \(\)bar)&#39;</span><span class="p">,</span> <span class="s">&#39;(foo\) \(\)bar)&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo) ()bar&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_non_printable"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_non_printable">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_non_printable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;(foo</span><span class="se">\x7F</span><span class="s">bar)&#39;</span><span class="p">,</span> <span class="s">&#39;(foo</span><span class="se">\x7F</span><span class="s">bar)&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">NonPrintableDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo</span><span class="se">\x7F</span><span class="s">bar&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_no_end_paren"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_no_end_paren">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_no_end_paren</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;(foo bar&#39;</span><span class="p">,</span> <span class="s">&#39;(foo bar)&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo bar&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;(foo bar  &#39;</span><span class="p">,</span> <span class="s">&#39;(foo bar  )&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo bar  &#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_nested_comment"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_nested_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_nested_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;(foo(bar))&#39;</span><span class="p">,</span> <span class="s">&#39;(foo(bar))&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo(bar)&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">comment</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_nested_comment_wsp"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_nested_comment_wsp">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_nested_comment_wsp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;(foo ( bar ) )&#39;</span><span class="p">,</span> <span class="s">&#39;(foo ( bar ) )&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo ( bar ) &#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">comment</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39; bar &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_empty_comment"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_empty_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_empty_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;()&#39;</span><span class="p">,</span> <span class="s">&#39;()&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_multiple_nesting"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_multiple_nesting">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_multiple_nesting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;(((((foo)))))&#39;</span><span class="p">,</span> <span class="s">&#39;(((((foo)))))&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;((((foo))))&#39;</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">comment</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;(&#39;</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;foo&#39;</span><span class="o">+</span><span class="s">&#39;)&#39;</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">comment</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_missing_end_of_nesting"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_missing_end_of_nesting">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_missing_end_of_nesting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;(((((foo)))&#39;</span><span class="p">,</span> <span class="s">&#39;(((((foo)))))&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;((((foo))))&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_comment_qs_in_nested_comment"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_comment_qs_in_nested_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_comment_qs_in_nested_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_comment</span><span class="p">,</span>
            <span class="s">&#39;(foo (b\)))&#39;</span><span class="p">,</span> <span class="s">&#39;(foo (b\)))&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo (b\))&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">comment</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;b)&#39;</span><span class="p">)</span>

    <span class="c"># get_cfws</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_cfws_only_ws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_cfws_only_ws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_cfws_only_ws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_cfws</span><span class="p">,</span>
            <span class="s">&#39;  </span><span class="se">\t</span><span class="s"> </span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;  </span><span class="se">\t</span><span class="s"> </span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cfws</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;cfws&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_cfws_only_comment"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_cfws_only_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_cfws_only_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_cfws</span><span class="p">,</span>
            <span class="s">&#39;(foo)&#39;</span><span class="p">,</span> <span class="s">&#39;(foo)&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cfws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_cfws_only_mixed"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_cfws_only_mixed">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_cfws_only_mixed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_cfws</span><span class="p">,</span>
            <span class="s">&#39; (foo )  ( bar) &#39;</span><span class="p">,</span> <span class="s">&#39; (foo )  ( bar) &#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                <span class="p">[</span><span class="s">&#39;foo &#39;</span><span class="p">,</span> <span class="s">&#39; bar&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cfws</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;foo &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cfws</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39; bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_cfws_ends_at_non_leader"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_cfws_ends_at_non_leader">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_cfws_ends_at_non_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_cfws</span><span class="p">,</span>
            <span class="s">&#39;(foo) bar&#39;</span><span class="p">,</span> <span class="s">&#39;(foo) &#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cfws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_cfws_ends_at_non_printable"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_cfws_ends_at_non_printable">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_cfws_ends_at_non_printable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_cfws</span><span class="p">,</span>
            <span class="s">&#39;(foo) </span><span class="se">\x07</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;(foo) &#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;</span><span class="se">\x07</span><span class="s">&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cfws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_cfws_non_printable_in_comment"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_cfws_non_printable_in_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_cfws_non_printable_in_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_cfws</span><span class="p">,</span>
            <span class="s">&#39;(foo </span><span class="se">\x07</span><span class="s">) &quot;test&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;(foo </span><span class="se">\x07</span><span class="s">) &#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">NonPrintableDefect</span><span class="p">],</span> <span class="s">&#39;&quot;test&quot;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo </span><span class="se">\x07</span><span class="s">&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cfws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;foo </span><span class="se">\x07</span><span class="s">&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_cfws_header_ends_in_comment"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_cfws_header_ends_in_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_cfws_header_ends_in_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_cfws</span><span class="p">,</span>
            <span class="s">&#39;  (foo &#39;</span><span class="p">,</span> <span class="s">&#39;  (foo )&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo &#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cfws</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;foo &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_cfws_multiple_nested_comments"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_cfws_multiple_nested_comments">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_cfws_multiple_nested_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_cfws</span><span class="p">,</span>
            <span class="s">&#39;(foo (bar)) ((a)(a))&#39;</span><span class="p">,</span> <span class="s">&#39;(foo (bar)) ((a)(a))&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="p">[],</span>
                <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo (bar)&#39;</span><span class="p">,</span> <span class="s">&#39;(a)(a)&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cfws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo (bar)&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cfws</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;(a)(a)&#39;</span><span class="p">])</span>

    <span class="c"># get_quoted_string</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_quoted_string_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_quoted_string_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_quoted_string_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_quoted_string</span><span class="p">,</span>
            <span class="s">&#39;&quot;bob&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;&quot;bob&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;bob&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;quoted-string&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">quoted_value</span><span class="p">,</span> <span class="s">&#39;&quot;bob&quot;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;bob&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_quoted_string_with_wsp"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_quoted_string_with_wsp">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_quoted_string_with_wsp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_quoted_string</span><span class="p">,</span>
            <span class="s">&#39;</span><span class="se">\t</span><span class="s"> &quot;bob&quot;  &#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s"> &quot;bob&quot;  &#39;</span><span class="p">,</span> <span class="s">&#39; bob &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">quoted_value</span><span class="p">,</span> <span class="s">&#39; &quot;bob&quot; &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;bob&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_quoted_string_with_comments_and_wsp"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_quoted_string_with_comments_and_wsp">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_quoted_string_with_comments_and_wsp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_quoted_string</span><span class="p">,</span>
            <span class="s">&#39; (foo) &quot;bob&quot;(bar)&#39;</span><span class="p">,</span> <span class="s">&#39; (foo) &quot;bob&quot;(bar)&#39;</span><span class="p">,</span> <span class="s">&#39; bob &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;bob&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">quoted_value</span><span class="p">,</span> <span class="s">&#39; &quot;bob&quot; &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_quoted_string_with_multiple_comments"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_quoted_string_with_multiple_comments">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_quoted_string_with_multiple_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_quoted_string</span><span class="p">,</span>
            <span class="s">&#39; (foo) (bar) &quot;bob&quot;(bird)&#39;</span><span class="p">,</span> <span class="s">&#39; (foo) (bar) &quot;bob&quot;(bird)&#39;</span><span class="p">,</span> <span class="s">&#39; bob &#39;</span><span class="p">,</span>
                <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;bird&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;bob&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">quoted_value</span><span class="p">,</span> <span class="s">&#39; &quot;bob&quot; &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_quoted_string_non_printable_in_comment"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_quoted_string_non_printable_in_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_quoted_string_non_printable_in_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_quoted_string</span><span class="p">,</span>
            <span class="s">&#39; (</span><span class="se">\x0A</span><span class="s">) &quot;bob&quot;&#39;</span><span class="p">,</span> <span class="s">&#39; (</span><span class="se">\x0A</span><span class="s">) &quot;bob&quot;&#39;</span><span class="p">,</span> <span class="s">&#39; bob&#39;</span><span class="p">,</span>
                <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">NonPrintableDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;</span><span class="se">\x0A</span><span class="s">&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;bob&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">quoted_value</span><span class="p">,</span> <span class="s">&#39; &quot;bob&quot;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_quoted_string_non_printable_in_qcontent"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_quoted_string_non_printable_in_qcontent">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_quoted_string_non_printable_in_qcontent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_quoted_string</span><span class="p">,</span>
            <span class="s">&#39; (a) &quot;a</span><span class="se">\x0B</span><span class="s">&quot;&#39;</span><span class="p">,</span> <span class="s">&#39; (a) &quot;a</span><span class="se">\x0B</span><span class="s">&quot;&#39;</span><span class="p">,</span> <span class="s">&#39; a</span><span class="se">\x0B</span><span class="s">&#39;</span><span class="p">,</span>
                <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">NonPrintableDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;a</span><span class="se">\x0B</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">quoted_value</span><span class="p">,</span> <span class="s">&#39; &quot;a</span><span class="se">\x0B</span><span class="s">&quot;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_quoted_string_internal_ws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_quoted_string_internal_ws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_quoted_string_internal_ws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_quoted_string</span><span class="p">,</span>
            <span class="s">&#39; (a) &quot;foo  bar &quot;&#39;</span><span class="p">,</span> <span class="s">&#39; (a) &quot;foo  bar &quot;&#39;</span><span class="p">,</span> <span class="s">&#39; foo  bar &#39;</span><span class="p">,</span>
                <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;foo  bar &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">quoted_value</span><span class="p">,</span> <span class="s">&#39; &quot;foo  bar &quot;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_quoted_string_header_ends_in_comment"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_quoted_string_header_ends_in_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_quoted_string_header_ends_in_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_quoted_string</span><span class="p">,</span>
            <span class="s">&#39; (a) &quot;bob&quot; (a&#39;</span><span class="p">,</span> <span class="s">&#39; (a) &quot;bob&quot; (a)&#39;</span><span class="p">,</span> <span class="s">&#39; bob &#39;</span><span class="p">,</span>
                <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;bob&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">quoted_value</span><span class="p">,</span> <span class="s">&#39; &quot;bob&quot; &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_quoted_string_header_ends_in_qcontent"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_quoted_string_header_ends_in_qcontent">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_quoted_string_header_ends_in_qcontent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_quoted_string</span><span class="p">,</span>
            <span class="s">&#39; (a) &quot;bob&#39;</span><span class="p">,</span> <span class="s">&#39; (a) &quot;bob&quot;&#39;</span><span class="p">,</span> <span class="s">&#39; bob&#39;</span><span class="p">,</span>
                <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;bob&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">quoted_value</span><span class="p">,</span> <span class="s">&#39; &quot;bob&quot;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_quoted_string_no_quoted_string"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_quoted_string_no_quoted_string">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_quoted_string_no_quoted_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_quoted_string</span><span class="p">(</span><span class="s">&#39; (ab) xyz&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_quoted_string_qs_ends_at_noncfws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_quoted_string_qs_ends_at_noncfws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_quoted_string_qs_ends_at_noncfws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_quoted_string</span><span class="p">,</span>
            <span class="s">&#39;</span><span class="se">\t</span><span class="s"> &quot;bob&quot; fee&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s"> &quot;bob&quot; &#39;</span><span class="p">,</span> <span class="s">&#39; bob &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;fee&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;bob&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">quoted_value</span><span class="p">,</span> <span class="s">&#39; &quot;bob&quot; &#39;</span><span class="p">)</span>

    <span class="c"># get_atom</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atom_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atom_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atom_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">atom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atom</span><span class="p">,</span>
            <span class="s">&#39;bob&#39;</span><span class="p">,</span> <span class="s">&#39;bob&#39;</span><span class="p">,</span> <span class="s">&#39;bob&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atom</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;atom&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atom_with_wsp"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atom_with_wsp">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atom_with_wsp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atom</span><span class="p">,</span>
            <span class="s">&#39;</span><span class="se">\t</span><span class="s"> bob  &#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s"> bob  &#39;</span><span class="p">,</span> <span class="s">&#39; bob &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atom_with_comments_and_wsp"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atom_with_comments_and_wsp">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atom_with_comments_and_wsp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">atom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atom</span><span class="p">,</span>
            <span class="s">&#39; (foo) bob(bar)&#39;</span><span class="p">,</span> <span class="s">&#39; (foo) bob(bar)&#39;</span><span class="p">,</span> <span class="s">&#39; bob &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atom</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atom</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atom_with_multiple_comments"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atom_with_multiple_comments">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atom_with_multiple_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">atom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atom</span><span class="p">,</span>
            <span class="s">&#39; (foo) (bar) bob(bird)&#39;</span><span class="p">,</span> <span class="s">&#39; (foo) (bar) bob(bird)&#39;</span><span class="p">,</span> <span class="s">&#39; bob &#39;</span><span class="p">,</span>
                <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atom</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;bird&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atom_non_printable_in_comment"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atom_non_printable_in_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atom_non_printable_in_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">atom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atom</span><span class="p">,</span>
            <span class="s">&#39; (</span><span class="se">\x0A</span><span class="s">) bob&#39;</span><span class="p">,</span> <span class="s">&#39; (</span><span class="se">\x0A</span><span class="s">) bob&#39;</span><span class="p">,</span> <span class="s">&#39; bob&#39;</span><span class="p">,</span>
                <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">NonPrintableDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;</span><span class="se">\x0A</span><span class="s">&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atom_non_printable_in_atext"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atom_non_printable_in_atext">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atom_non_printable_in_atext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">atom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atom</span><span class="p">,</span>
            <span class="s">&#39; (a) a</span><span class="se">\x0B</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39; (a) a</span><span class="se">\x0B</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39; a</span><span class="se">\x0B</span><span class="s">&#39;</span><span class="p">,</span>
                <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">NonPrintableDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atom_header_ends_in_comment"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atom_header_ends_in_comment">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atom_header_ends_in_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">atom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atom</span><span class="p">,</span>
            <span class="s">&#39; (a) bob (a&#39;</span><span class="p">,</span> <span class="s">&#39; (a) bob (a)&#39;</span><span class="p">,</span> <span class="s">&#39; bob &#39;</span><span class="p">,</span>
                <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atom</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atom_no_atom"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atom_no_atom">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atom_no_atom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_atom</span><span class="p">(</span><span class="s">&#39; (ab) &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atom_no_atom_before_special"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atom_no_atom_before_special">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atom_no_atom_before_special</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_atom</span><span class="p">(</span><span class="s">&#39; (ab) @&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atom_atom_ends_at_special"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atom_atom_ends_at_special">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atom_atom_ends_at_special</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">atom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atom</span><span class="p">,</span>
            <span class="s">&#39; (foo) bob(bar)  @bang&#39;</span><span class="p">,</span> <span class="s">&#39; (foo) bob(bar)  &#39;</span><span class="p">,</span> <span class="s">&#39; bob &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;@bang&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">atom</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atom_atom_ends_at_noncfws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atom_atom_ends_at_noncfws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atom_atom_ends_at_noncfws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atom</span><span class="p">,</span>
            <span class="s">&#39;bob  fred&#39;</span><span class="p">,</span> <span class="s">&#39;bob  &#39;</span><span class="p">,</span> <span class="s">&#39;bob &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;fred&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_atom_rfc2047_atom"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_atom_rfc2047_atom">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_atom_rfc2047_atom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_atom</span><span class="p">,</span>
            <span class="s">&#39;=?utf-8?q?=20bob?=&#39;</span><span class="p">,</span> <span class="s">&#39; bob&#39;</span><span class="p">,</span> <span class="s">&#39; bob&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="c"># get_dot_atom_text</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_text"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_text">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dot_atom_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom_text</span><span class="p">,</span>
            <span class="s">&#39;foo.bar.bang&#39;</span><span class="p">,</span> <span class="s">&#39;foo.bar.bang&#39;</span><span class="p">,</span> <span class="s">&#39;foo.bar.bang&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dot_atom_text</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;dot-atom-text&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dot_atom_text</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_text_lone_atom_is_valid"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_text_lone_atom_is_valid">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_text_lone_atom_is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dot_atom_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom_text</span><span class="p">,</span>
            <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_text_raises_on_leading_dot"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_text_raises_on_leading_dot">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_text_raises_on_leading_dot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom_text</span><span class="p">(</span><span class="s">&#39;.foo.bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_text_raises_on_trailing_dot"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_text_raises_on_trailing_dot">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_text_raises_on_trailing_dot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom_text</span><span class="p">(</span><span class="s">&#39;foo.bar.&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_text_raises_on_leading_non_atext"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_text_raises_on_leading_non_atext">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_text_raises_on_leading_non_atext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom_text</span><span class="p">(</span><span class="s">&#39; foo.bar&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom_text</span><span class="p">(</span><span class="s">&#39;@foo.bar&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom_text</span><span class="p">(</span><span class="s">&#39;&quot;foo.bar&quot;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_text_trailing_text_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_text_trailing_text_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_text_trailing_text_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dot_atom_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom_text</span><span class="p">,</span>
            <span class="s">&#39;foo@bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;@bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_text_trailing_ws_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_text_trailing_ws_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_text_trailing_ws_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dot_atom_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom_text</span><span class="p">,</span>
            <span class="s">&#39;foo .bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39; .bar&#39;</span><span class="p">)</span>

    <span class="c"># get_dot_atom</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dot_atom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom</span><span class="p">,</span>
            <span class="s">&#39;foo.bar.bing&#39;</span><span class="p">,</span> <span class="s">&#39;foo.bar.bing&#39;</span><span class="p">,</span> <span class="s">&#39;foo.bar.bing&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dot_atom</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;dot-atom&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dot_atom</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_with_wsp"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_with_wsp">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_with_wsp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom</span><span class="p">,</span>
            <span class="s">&#39;</span><span class="se">\t</span><span class="s">  foo.bar.bing  &#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s">  foo.bar.bing  &#39;</span><span class="p">,</span> <span class="s">&#39; foo.bar.bing &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_with_comments_and_wsp"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_with_comments_and_wsp">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_with_comments_and_wsp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom</span><span class="p">,</span>
            <span class="s">&#39; (sing)  foo.bar.bing (here) &#39;</span><span class="p">,</span> <span class="s">&#39; (sing)  foo.bar.bing (here) &#39;</span><span class="p">,</span>
                <span class="s">&#39; foo.bar.bing &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_space_ends_dot_atom"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_space_ends_dot_atom">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_space_ends_dot_atom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom</span><span class="p">,</span>
            <span class="s">&#39; (sing)  foo.bar .bing (here) &#39;</span><span class="p">,</span> <span class="s">&#39; (sing)  foo.bar &#39;</span><span class="p">,</span>
                <span class="s">&#39; foo.bar &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;.bing (here) &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_no_atom_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_no_atom_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_no_atom_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom</span><span class="p">(</span><span class="s">&#39; (foo) &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_leading_dot_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_leading_dot_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_leading_dot_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom</span><span class="p">(</span><span class="s">&#39; (foo) .bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_two_dots_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_two_dots_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_two_dots_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom</span><span class="p">(</span><span class="s">&#39;bar..bang&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_trailing_dot_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_trailing_dot_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_trailing_dot_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom</span><span class="p">(</span><span class="s">&#39; (foo) bar.bang. foo&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dot_atom_rfc2047_atom"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dot_atom_rfc2047_atom">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dot_atom_rfc2047_atom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dot_atom</span><span class="p">,</span>
            <span class="s">&#39;=?utf-8?q?=20bob?=&#39;</span><span class="p">,</span> <span class="s">&#39; bob&#39;</span><span class="p">,</span> <span class="s">&#39; bob&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="c"># get_word (if this were black box we&#39;d repeat all the qs/atom tests)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_word_atom_yields_atom"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_word_atom_yields_atom">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_word_atom_yields_atom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_word</span><span class="p">,</span>
            <span class="s">&#39; (foo) bar (bang) :ah&#39;</span><span class="p">,</span> <span class="s">&#39; (foo) bar (bang) &#39;</span><span class="p">,</span> <span class="s">&#39; bar &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;:ah&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;atom&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;cfws&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_word_qs_yields_qs"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_word_qs_yields_qs">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_word_qs_yields_qs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_word</span><span class="p">,</span>
            <span class="s">&#39;&quot;bar &quot; (bang) ah&#39;</span><span class="p">,</span> <span class="s">&#39;&quot;bar &quot; (bang) &#39;</span><span class="p">,</span> <span class="s">&#39;bar  &#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;ah&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;quoted-string&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;bare-quoted-string&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;bar &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;bar &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_word_ends_at_dot"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_word_ends_at_dot">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_word_ends_at_dot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_word</span><span class="p">,</span>
            <span class="s">&#39;foo.&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;.&#39;</span><span class="p">)</span>

    <span class="c"># get_phrase</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_phrase_simple"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_phrase_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_phrase_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">phrase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_phrase</span><span class="p">,</span>
            <span class="s">&#39;&quot;Fred A. Johnson&quot; is his name, oh.&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Fred A. Johnson&quot; is his name&#39;</span><span class="p">,</span>
            <span class="s">&#39;Fred A. Johnson is his name&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;, oh.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">phrase</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;phrase&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_phrase_complex"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_phrase_complex">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_phrase_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">phrase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_phrase</span><span class="p">,</span>
            <span class="s">&#39; (A) bird (in (my|your)) &quot;hand  &quot; is messy</span><span class="se">\t</span><span class="s">&lt;&gt;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span>
            <span class="s">&#39; (A) bird (in (my|your)) &quot;hand  &quot; is messy</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span>
            <span class="s">&#39; bird hand   is messy &#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&lt;&gt;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">phrase</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">phrase</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;in (my|your)&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_phrase_obsolete"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_phrase_obsolete">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_phrase_obsolete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">phrase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_phrase</span><span class="p">,</span>
            <span class="s">&#39;Fred A.(weird).O Johnson&#39;</span><span class="p">,</span>
            <span class="s">&#39;Fred A.(weird).O Johnson&#39;</span><span class="p">,</span>
            <span class="s">&#39;Fred A. .O Johnson&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">phrase</span><span class="p">),</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">phrase</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;weird&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_phrase_pharse_must_start_with_word"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_phrase_pharse_must_start_with_word">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_phrase_pharse_must_start_with_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">phrase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_phrase</span><span class="p">,</span>
            <span class="s">&#39;(even weirder).name&#39;</span><span class="p">,</span>
            <span class="s">&#39;(even weirder).name&#39;</span><span class="p">,</span>
            <span class="s">&#39; .name&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">phrase</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">phrase</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;even weirder&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_phrase_ending_with_obsolete"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_phrase_ending_with_obsolete">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_phrase_ending_with_obsolete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">phrase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_phrase</span><span class="p">,</span>
            <span class="s">&#39;simple phrase.(with trailing comment):boo&#39;</span><span class="p">,</span>
            <span class="s">&#39;simple phrase.(with trailing comment)&#39;</span><span class="p">,</span>
            <span class="s">&#39;simple phrase. &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
            <span class="s">&#39;:boo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">phrase</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">phrase</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;with trailing comment&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.get_phrase_cfws_only_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.get_phrase_cfws_only_raises">[docs]</a>    <span class="k">def</span> <span class="nf">get_phrase_cfws_only_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_phrase</span><span class="p">(</span><span class="s">&#39; (foo) &#39;</span><span class="p">)</span>

    <span class="c"># get_local_part</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_simple"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@python.org&#39;</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;local-part&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_with_dot"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_with_dot">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_with_dot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39;Fred.A.Johnson@python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39;Fred.A.Johnson&#39;</span><span class="p">,</span>
            <span class="s">&#39;Fred.A.Johnson&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;Fred.A.Johnson&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_with_whitespace"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_with_whitespace">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_with_whitespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39; Fred.A.Johnson  @python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39; Fred.A.Johnson  &#39;</span><span class="p">,</span>
            <span class="s">&#39; Fred.A.Johnson &#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;Fred.A.Johnson&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_with_cfws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_with_cfws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_with_cfws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39; (foo) Fred.A.Johnson (bar (bird))  @python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39; (foo) Fred.A.Johnson (bar (bird))  &#39;</span><span class="p">,</span>
            <span class="s">&#39; Fred.A.Johnson &#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;Fred.A.Johnson&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;bar (bird)&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_simple_quoted"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_simple_quoted">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_simple_quoted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39;&quot;dinsdale&quot;@python.org&#39;</span><span class="p">,</span> <span class="s">&#39;&quot;dinsdale&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;&quot;dinsdale&quot;&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;local-part&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_with_quoted_dot"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_with_quoted_dot">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_with_quoted_dot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39;&quot;Fred.A.Johnson&quot;@python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Fred.A.Johnson&quot;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Fred.A.Johnson&quot;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;Fred.A.Johnson&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_quoted_with_whitespace"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_quoted_with_whitespace">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_quoted_with_whitespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39; &quot;Fred A. Johnson&quot;  @python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39; &quot;Fred A. Johnson&quot;  &#39;</span><span class="p">,</span>
            <span class="s">&#39; &quot;Fred A. Johnson&quot; &#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;Fred A. Johnson&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_quoted_with_cfws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_quoted_with_cfws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_quoted_with_cfws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39; (foo) &quot; Fred A. Johnson &quot; (bar (bird))  @python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39; (foo) &quot; Fred A. Johnson &quot; (bar (bird))  &#39;</span><span class="p">,</span>
            <span class="s">&#39; &quot; Fred A. Johnson &quot; &#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39; Fred A. Johnson &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;bar (bird)&#39;</span><span class="p">])</span>

</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_simple_obsolete"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_simple_obsolete">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_simple_obsolete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39;Fred. A.Johnson@python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39;Fred. A.Johnson&#39;</span><span class="p">,</span>
            <span class="s">&#39;Fred. A.Johnson&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;Fred.A.Johnson&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_complex_obsolete_1"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_complex_obsolete_1">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_complex_obsolete_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39; (foo )Fred (bar).(bird) A.(sheep)Johnson.&quot;and  dogs &quot;@python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39; (foo )Fred (bar).(bird) A.(sheep)Johnson.&quot;and  dogs &quot;&#39;</span><span class="p">,</span>
            <span class="s">&#39; Fred . A. Johnson.and  dogs &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;Fred.A.Johnson.and  dogs &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_complex_obsolete_invalid"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_complex_obsolete_invalid">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_complex_obsolete_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39; (foo )Fred (bar).(bird) A.(sheep)Johnson &quot;and  dogs&quot;@python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39; (foo )Fred (bar).(bird) A.(sheep)Johnson &quot;and  dogs&quot;&#39;</span><span class="p">,</span>
            <span class="s">&#39; Fred . A. Johnson and  dogs&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;Fred.A.Johnson and  dogs&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_no_part_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_no_part_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_no_part_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">(</span><span class="s">&#39; (foo) &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_special_instead_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_special_instead_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_special_instead_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">(</span><span class="s">&#39; (foo) @python.org&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_trailing_dot"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_trailing_dot">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_trailing_dot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39; borris.@python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39; borris.&#39;</span><span class="p">,</span>
            <span class="s">&#39; borris.&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;borris.&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_trailing_dot_with_ws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_trailing_dot_with_ws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_trailing_dot_with_ws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39; borris. @python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39; borris. &#39;</span><span class="p">,</span>
            <span class="s">&#39; borris. &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;borris.&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_leading_dot"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_leading_dot">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_leading_dot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39;.borris@python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39;.borris&#39;</span><span class="p">,</span>
            <span class="s">&#39;.borris&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;.borris&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_leading_dot_after_ws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_leading_dot_after_ws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_leading_dot_after_ws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39; .borris@python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39; .borris&#39;</span><span class="p">,</span>
            <span class="s">&#39; .borris&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;.borris&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_double_dot_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_double_dot_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_double_dot_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39; borris.(foo).natasha@python.org&#39;</span><span class="p">,</span>
            <span class="s">&#39; borris.(foo).natasha&#39;</span><span class="p">,</span>
            <span class="s">&#39; borris. .natasha&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
            <span class="s">&#39;@python.org&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;borris..natasha&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_quoted_strings_in_atom_list"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_quoted_strings_in_atom_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_quoted_strings_in_atom_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39;&quot;&quot;example&quot; example&quot;@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;&quot;example&quot; example&quot;&#39;</span><span class="p">,</span>
            <span class="s">&#39;example example&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span>
            <span class="s">&#39;@example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;example example&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_valid_and_invalid_qp_in_atom_list"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_valid_and_invalid_qp_in_atom_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_valid_and_invalid_qp_in_atom_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">r&#39;&quot;</span><span class="se">\\</span><span class="s">&quot;example</span><span class="se">\\</span><span class="s">&quot; example&quot;@example.com&#39;</span><span class="p">,</span>
            <span class="s">r&#39;&quot;</span><span class="se">\\</span><span class="s">&quot;example</span><span class="se">\\</span><span class="s">&quot; example&quot;&#39;</span><span class="p">,</span>
            <span class="s">r&#39;\example</span><span class="se">\\</span><span class="s"> example&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">5</span><span class="p">,</span>
            <span class="s">&#39;@example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">r&#39;\example</span><span class="se">\\</span><span class="s"> example&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_local_part_unicode_defect"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_local_part_unicode_defect">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_local_part_unicode_defect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Currently this only happens when parsing unicode, not when parsing</span>
        <span class="c"># stuff that was originally binary.</span>
        <span class="n">local_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_local_part</span><span class="p">,</span>
            <span class="s">&#39;exámple@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;exámple&#39;</span><span class="p">,</span>
            <span class="s">&#39;exámple&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">NonASCIILocalPartDefect</span><span class="p">],</span>
            <span class="s">&#39;@example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">local_part</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;exámple&#39;</span><span class="p">)</span>

    <span class="c"># get_dtext</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dtext_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dtext_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dtext_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dtext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dtext</span><span class="p">,</span>
                                <span class="s">&#39;foobar&#39;</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">,</span> <span class="s">&#39;foobar&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dtext</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;ptext&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dtext_all_dtext"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dtext_all_dtext">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dtext_all_dtext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dtext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dtext</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfc_dtext_chars</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">rfc_dtext_chars</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">rfc_dtext_chars</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dtext_two_words_gets_first"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dtext_two_words_gets_first">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dtext_two_words_gets_first</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dtext</span><span class="p">,</span>
                        <span class="s">&#39;foo bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39; bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dtext_following_wsp_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dtext_following_wsp_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dtext_following_wsp_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dtext</span><span class="p">,</span>
                        <span class="s">&#39;foo </span><span class="se">\t\t</span><span class="s">bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39; </span><span class="se">\t\t</span><span class="s">bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dtext_non_printables"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dtext_non_printables">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dtext_non_printables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dtext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dtext</span><span class="p">,</span>
                                <span class="s">&#39;foo</span><span class="se">\x00</span><span class="s">bar]&#39;</span><span class="p">,</span> <span class="s">&#39;foo</span><span class="se">\x00</span><span class="s">bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo</span><span class="se">\x00</span><span class="s">bar&#39;</span><span class="p">,</span>
                                <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">NonPrintableDefect</span><span class="p">],</span> <span class="s">&#39;]&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dtext</span><span class="o">.</span><span class="n">defects</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">non_printables</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;</span><span class="se">\x00</span><span class="s">&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dtext_with_qp"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dtext_with_qp">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dtext_with_qp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ptext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dtext</span><span class="p">,</span>
                                 <span class="s">r&#39;foo\]\[</span><span class="se">\\</span><span class="s">bar\b\e\l\l&#39;</span><span class="p">,</span>
                                 <span class="s">r&#39;foo][\barbell&#39;</span><span class="p">,</span>
                                 <span class="s">r&#39;foo][\barbell&#39;</span><span class="p">,</span>
                                 <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">],</span>
                                 <span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dtext_up_to_close_bracket_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dtext_up_to_close_bracket_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dtext_up_to_close_bracket_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dtext</span><span class="p">,</span>
                        <span class="s">&#39;foo]&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;]&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dtext_wsp_before_close_bracket_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dtext_wsp_before_close_bracket_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dtext_wsp_before_close_bracket_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dtext</span><span class="p">,</span>
                        <span class="s">&#39;foo  ]&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;  ]&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dtext_close_bracket_mid_word"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dtext_close_bracket_mid_word">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dtext_close_bracket_mid_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dtext</span><span class="p">,</span>
                        <span class="s">&#39;foo]bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;]bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dtext_up_to_open_bracket_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dtext_up_to_open_bracket_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dtext_up_to_open_bracket_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dtext</span><span class="p">,</span>
                        <span class="s">&#39;foo[&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;[&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dtext_wsp_before_open_bracket_preserved"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dtext_wsp_before_open_bracket_preserved">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dtext_wsp_before_open_bracket_preserved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dtext</span><span class="p">,</span>
                        <span class="s">&#39;foo  [&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;  [&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_dtext_open_bracket_mid_word"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_dtext_open_bracket_mid_word">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_dtext_open_bracket_mid_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_dtext</span><span class="p">,</span>
                        <span class="s">&#39;foo[bar&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s">&#39;[bar&#39;</span><span class="p">)</span>

    <span class="c"># get_domain_literal</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_literal_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_literal_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_literal_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">domain_literal</span> <span class="o">=</span> <span class="n">domain_literal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_domain_literal</span><span class="p">,</span>
                                <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">,</span>
                                <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">,</span>
                                <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">,</span>
                                <span class="p">[],</span>
                                <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain_literal</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;domain-literal&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain_literal</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain_literal</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="s">&#39;127.0.0.1&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_literal_with_internal_ws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_literal_with_internal_ws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_literal_with_internal_ws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">domain_literal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_domain_literal</span><span class="p">,</span>
                                <span class="s">&#39;[  127.0.0.1</span><span class="se">\t</span><span class="s"> ]&#39;</span><span class="p">,</span>
                                <span class="s">&#39;[  127.0.0.1</span><span class="se">\t</span><span class="s"> ]&#39;</span><span class="p">,</span>
                                <span class="s">&#39;[ 127.0.0.1 ]&#39;</span><span class="p">,</span>
                                <span class="p">[],</span>
                                <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain_literal</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain_literal</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="s">&#39;127.0.0.1&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_literal_with_surrounding_cfws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_literal_with_surrounding_cfws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_literal_with_surrounding_cfws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">domain_literal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_domain_literal</span><span class="p">,</span>
                                <span class="s">&#39;(foo)[  127.0.0.1] (bar)&#39;</span><span class="p">,</span>
                                <span class="s">&#39;(foo)[  127.0.0.1] (bar)&#39;</span><span class="p">,</span>
                                <span class="s">&#39; [ 127.0.0.1] &#39;</span><span class="p">,</span>
                                <span class="p">[],</span>
                                <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain_literal</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain_literal</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="s">&#39;127.0.0.1&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_literal_no_start_char_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_literal_no_start_char_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_literal_no_start_char_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_domain_literal</span><span class="p">(</span><span class="s">&#39;(foo) &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_literal_no_start_char_before_special_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_literal_no_start_char_before_special_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_literal_no_start_char_before_special_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_domain_literal</span><span class="p">(</span><span class="s">&#39;(foo) @&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_literal_bad_dtext_char_before_special_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_literal_bad_dtext_char_before_special_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_literal_bad_dtext_char_before_special_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_domain_literal</span><span class="p">(</span><span class="s">&#39;(foo) [abc[@&#39;</span><span class="p">)</span>

    <span class="c"># get_domain</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_regular_domain_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_regular_domain_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_regular_domain_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_domain</span><span class="p">,</span>
                                  <span class="s">&#39;example.com&#39;</span><span class="p">,</span>
                                  <span class="s">&#39;example.com&#39;</span><span class="p">,</span>
                                  <span class="s">&#39;example.com&#39;</span><span class="p">,</span>
                                  <span class="p">[],</span>
                                  <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;domain&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_domain_literal_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_domain_literal_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_domain_literal_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_domain</span><span class="p">,</span>
                                  <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">,</span>
                                  <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">,</span>
                                  <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">,</span>
                                  <span class="p">[],</span>
                                  <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;domain&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_with_cfws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_with_cfws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_with_cfws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_domain</span><span class="p">,</span>
                                  <span class="s">&#39;(foo) example.com(bar)</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span>
                                  <span class="s">&#39;(foo) example.com(bar)</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span>
                                  <span class="s">&#39; example.com &#39;</span><span class="p">,</span>
                                  <span class="p">[],</span>
                                  <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_domain_literal_with_cfws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_domain_literal_with_cfws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_domain_literal_with_cfws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_domain</span><span class="p">,</span>
                                  <span class="s">&#39;(foo)[127.0.0.1]</span><span class="se">\t</span><span class="s">(bar)&#39;</span><span class="p">,</span>
                                  <span class="s">&#39;(foo)[127.0.0.1]</span><span class="se">\t</span><span class="s">(bar)&#39;</span><span class="p">,</span>
                                  <span class="s">&#39; [127.0.0.1] &#39;</span><span class="p">,</span>
                                  <span class="p">[],</span>
                                  <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_domain_with_cfws_ends_at_special"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_domain_with_cfws_ends_at_special">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_domain_with_cfws_ends_at_special</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_domain</span><span class="p">,</span>
                                  <span class="s">&#39;(foo)example.com</span><span class="se">\t</span><span class="s">(bar), next&#39;</span><span class="p">,</span>
                                  <span class="s">&#39;(foo)example.com</span><span class="se">\t</span><span class="s">(bar)&#39;</span><span class="p">,</span>
                                  <span class="s">&#39; example.com &#39;</span><span class="p">,</span>
                                  <span class="p">[],</span>
                                  <span class="s">&#39;, next&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_domain_literal_with_cfws_ends_at_special"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_domain_literal_with_cfws_ends_at_special">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_domain_literal_with_cfws_ends_at_special</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_domain</span><span class="p">,</span>
                                  <span class="s">&#39;(foo)[127.0.0.1]</span><span class="se">\t</span><span class="s">(bar), next&#39;</span><span class="p">,</span>
                                  <span class="s">&#39;(foo)[127.0.0.1]</span><span class="se">\t</span><span class="s">(bar)&#39;</span><span class="p">,</span>
                                  <span class="s">&#39; [127.0.0.1] &#39;</span><span class="p">,</span>
                                  <span class="p">[],</span>
                                  <span class="s">&#39;, next&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_obsolete"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_obsolete">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_obsolete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_domain</span><span class="p">,</span>
                                  <span class="s">&#39;(foo) example . (bird)com(bar)</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span>
                                  <span class="s">&#39;(foo) example . (bird)com(bar)</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span>
                                  <span class="s">&#39; example . com &#39;</span><span class="p">,</span>
                                  <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">],</span>
                                  <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_no_non_cfws_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_no_non_cfws_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_no_non_cfws_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_domain</span><span class="p">(</span><span class="s">&quot;  (foo)</span><span class="se">\t</span><span class="s">&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_domain_no_atom_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_domain_no_atom_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_domain_no_atom_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_domain</span><span class="p">(</span><span class="s">&quot;  (foo)</span><span class="se">\t</span><span class="s">, broken&quot;</span><span class="p">)</span>


    <span class="c"># get_addr_spec</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_addr_spec_normal"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_addr_spec_normal">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_addr_spec_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">addr_spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_addr_spec</span><span class="p">,</span>
                                    <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
                                    <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
                                    <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
                                    <span class="p">[],</span>
                                    <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;addr-spec&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_addr_spec_with_doamin_literal"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_addr_spec_with_doamin_literal">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_addr_spec_with_doamin_literal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">addr_spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_addr_spec</span><span class="p">,</span>
                                    <span class="s">&#39;dinsdale@[127.0.0.1]&#39;</span><span class="p">,</span>
                                    <span class="s">&#39;dinsdale@[127.0.0.1]&#39;</span><span class="p">,</span>
                                    <span class="s">&#39;dinsdale@[127.0.0.1]&#39;</span><span class="p">,</span>
                                    <span class="p">[],</span>
                                    <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@[127.0.0.1]&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_addr_spec_with_cfws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_addr_spec_with_cfws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_addr_spec_with_cfws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">addr_spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_addr_spec</span><span class="p">,</span>
                <span class="s">&#39;(foo) dinsdale(bar)@ (bird) example.com (bog)&#39;</span><span class="p">,</span>
                <span class="s">&#39;(foo) dinsdale(bar)@ (bird) example.com (bog)&#39;</span><span class="p">,</span>
                <span class="s">&#39; dinsdale@example.com &#39;</span><span class="p">,</span>
                <span class="p">[],</span>
                <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_addr_spec_with_qouoted_string_and_cfws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_addr_spec_with_qouoted_string_and_cfws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_addr_spec_with_qouoted_string_and_cfws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">addr_spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_addr_spec</span><span class="p">,</span>
                <span class="s">&#39;(foo) &quot;roy a bug&quot;(bar)@ (bird) example.com (bog)&#39;</span><span class="p">,</span>
                <span class="s">&#39;(foo) &quot;roy a bug&quot;(bar)@ (bird) example.com (bog)&#39;</span><span class="p">,</span>
                <span class="s">&#39; &quot;roy a bug&quot;@example.com &#39;</span><span class="p">,</span>
                <span class="p">[],</span>
                <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;roy a bug&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;&quot;roy a bug&quot;@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_addr_spec_ends_at_special"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_addr_spec_ends_at_special">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_addr_spec_ends_at_special</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">addr_spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_addr_spec</span><span class="p">,</span>
                <span class="s">&#39;(foo) &quot;roy a bug&quot;(bar)@ (bird) example.com (bog) , next&#39;</span><span class="p">,</span>
                <span class="s">&#39;(foo) &quot;roy a bug&quot;(bar)@ (bird) example.com (bog) &#39;</span><span class="p">,</span>
                <span class="s">&#39; &quot;roy a bug&quot;@example.com &#39;</span><span class="p">,</span>
                <span class="p">[],</span>
                <span class="s">&#39;, next&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;roy a bug&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;&quot;roy a bug&quot;@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_addr_spec_quoted_strings_in_atom_list"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_addr_spec_quoted_strings_in_atom_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_addr_spec_quoted_strings_in_atom_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">addr_spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_addr_spec</span><span class="p">,</span>
            <span class="s">&#39;&quot;&quot;example&quot; example&quot;@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;&quot;example&quot; example&quot;@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;example example@example.com&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;example example&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;&quot;example example&quot;@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_addr_spec_dot_atom"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_addr_spec_dot_atom">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_addr_spec_dot_atom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">addr_spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_addr_spec</span><span class="p">,</span>
            <span class="s">&#39;star.a.star@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;star.a.star@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;star.a.star@example.com&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;star.a.star&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addr_spec</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;star.a.star@example.com&#39;</span><span class="p">)</span>

    <span class="c"># get_obs_route</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_obs_route_simple"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_obs_route_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_obs_route_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">obs_route</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_obs_route</span><span class="p">,</span>
            <span class="s">&#39;@example.com, @two.example.com:&#39;</span><span class="p">,</span>
            <span class="s">&#39;@example.com, @two.example.com:&#39;</span><span class="p">,</span>
            <span class="s">&#39;@example.com, @two.example.com:&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">obs_route</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;obs-route&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">obs_route</span><span class="o">.</span><span class="n">domains</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;example.com&#39;</span><span class="p">,</span> <span class="s">&#39;two.example.com&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_obs_route_complex"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_obs_route_complex">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_obs_route_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">obs_route</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_obs_route</span><span class="p">,</span>
            <span class="s">&#39;(foo),, (blue)@example.com (bar),@two.(foo) example.com (bird):&#39;</span><span class="p">,</span>
            <span class="s">&#39;(foo),, (blue)@example.com (bar),@two.(foo) example.com (bird):&#39;</span><span class="p">,</span>
            <span class="s">&#39; ,, @example.com ,@two. example.com :&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">],</span>  <span class="c"># This is the obs-domain</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">obs_route</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;obs-route&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">obs_route</span><span class="o">.</span><span class="n">domains</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;example.com&#39;</span><span class="p">,</span> <span class="s">&#39;two.example.com&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_obs_route_no_route_before_end_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_obs_route_no_route_before_end_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_obs_route_no_route_before_end_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_obs_route</span><span class="p">(</span><span class="s">&#39;(foo) @example.com,&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_obs_route_no_route_before_special_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_obs_route_no_route_before_special_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_obs_route_no_route_before_special_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_obs_route</span><span class="p">(</span><span class="s">&#39;(foo) [abc],&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_obs_route_no_route_before_special_raises2"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_obs_route_no_route_before_special_raises2">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_obs_route_no_route_before_special_raises2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_obs_route</span><span class="p">(</span><span class="s">&#39;(foo) @example.com [abc],&#39;</span><span class="p">)</span>

    <span class="c"># get_angle_addr</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_angle_addr_simple"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_angle_addr_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_angle_addr_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">angle_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_angle_addr</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;angle-addr&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_angle_addr_empty"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_angle_addr_empty">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_angle_addr_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">angle_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_angle_addr</span><span class="p">,</span>
            <span class="s">&#39;&lt;&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;&gt;&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;angle-addr&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;&lt;&gt;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_angle_addr_with_cfws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_angle_addr_with_cfws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_angle_addr_with_cfws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">angle_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_angle_addr</span><span class="p">,</span>
            <span class="s">&#39; (foo) &lt;dinsdale@example.com&gt;(bar)&#39;</span><span class="p">,</span>
            <span class="s">&#39; (foo) &lt;dinsdale@example.com&gt;(bar)&#39;</span><span class="p">,</span>
            <span class="s">&#39; &lt;dinsdale@example.com&gt; &#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;angle-addr&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_angle_addr_qs_and_domain_literal"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_angle_addr_qs_and_domain_literal">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_angle_addr_qs_and_domain_literal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">angle_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_angle_addr</span><span class="p">,</span>
            <span class="s">&#39;&lt;&quot;Fred Perfect&quot;@[127.0.0.1]&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;&quot;Fred Perfect&quot;@[127.0.0.1]&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;&quot;Fred Perfect&quot;@[127.0.0.1]&gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;Fred Perfect&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;[127.0.0.1]&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;&quot;Fred Perfect&quot;@[127.0.0.1]&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_angle_addr_internal_cfws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_angle_addr_internal_cfws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_angle_addr_internal_cfws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">angle_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_angle_addr</span><span class="p">,</span>
            <span class="s">&#39;&lt;(foo) dinsdale@example.com(bar)&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;(foo) dinsdale@example.com(bar)&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt; dinsdale@example.com &gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_angle_addr_obs_route"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_angle_addr_obs_route">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_angle_addr_obs_route</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">angle_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_angle_addr</span><span class="p">,</span>
            <span class="s">&#39;(foo)&lt;@example.com, (bird) @two.example.com: dinsdale@example.com&gt; (bar) &#39;</span><span class="p">,</span>
            <span class="s">&#39;(foo)&lt;@example.com, (bird) @two.example.com: dinsdale@example.com&gt; (bar) &#39;</span><span class="p">,</span>
            <span class="s">&#39; &lt;@example.com, @two.example.com: dinsdale@example.com&gt; &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">route</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;example.com&#39;</span><span class="p">,</span> <span class="s">&#39;two.example.com&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_angle_addr_missing_closing_angle"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_angle_addr_missing_closing_angle">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_angle_addr_missing_closing_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">angle_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_angle_addr</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_angle_addr_missing_closing_angle_with_cfws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_angle_addr_missing_closing_angle_with_cfws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_angle_addr_missing_closing_angle_with_cfws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">angle_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_angle_addr</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com (foo)&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com (foo)&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com &gt;&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_angle_addr_ends_at_special"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_angle_addr_ends_at_special">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_angle_addr_ends_at_special</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">angle_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_angle_addr</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt; (foo), next&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt; (foo)&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt; &#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;, next&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">angle_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_angle_addr_no_angle_raise"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_angle_addr_no_angle_raise">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_angle_addr_no_angle_raise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_angle_addr</span><span class="p">(</span><span class="s">&#39;(foo) &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_angle_addr_no_angle_before_special_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_angle_addr_no_angle_before_special_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_angle_addr_no_angle_before_special_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_angle_addr</span><span class="p">(</span><span class="s">&#39;(foo) , next&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_angle_addr_no_angle_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_angle_addr_no_angle_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_angle_addr_no_angle_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_angle_addr</span><span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_angle_addr_special_after_angle_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_angle_addr_special_after_angle_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_angle_addr_special_after_angle_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_angle_addr</span><span class="p">(</span><span class="s">&#39;(foo) &lt;, bar&#39;</span><span class="p">)</span>

    <span class="c"># get_display_name  This is phrase but with a different value.</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_display_name_simple"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_display_name_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_display_name_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">display_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_display_name</span><span class="p">,</span>
            <span class="s">&#39;Fred A Johnson&#39;</span><span class="p">,</span>
            <span class="s">&#39;Fred A Johnson&#39;</span><span class="p">,</span>
            <span class="s">&#39;Fred A Johnson&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">display_name</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;display-name&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">display_name</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Fred A Johnson&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_display_name_complex1"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_display_name_complex1">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_display_name_complex1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">display_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_display_name</span><span class="p">,</span>
            <span class="s">&#39;&quot;Fred A. Johnson&quot; is his name, oh.&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Fred A. Johnson&quot; is his name&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Fred A. Johnson is his name&quot;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;, oh.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">display_name</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;display-name&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">display_name</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Fred A. Johnson is his name&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_display_name_complex2"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_display_name_complex2">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_display_name_complex2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">display_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_display_name</span><span class="p">,</span>
            <span class="s">&#39; (A) bird (in (my|your)) &quot;hand  &quot; is messy</span><span class="se">\t</span><span class="s">&lt;&gt;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span>
            <span class="s">&#39; (A) bird (in (my|your)) &quot;hand  &quot; is messy</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span>
            <span class="s">&#39; &quot;bird hand   is messy&quot; &#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&lt;&gt;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">display_name</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">display_name</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;in (my|your)&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">display_name</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;bird hand   is messy&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_display_name_obsolete"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_display_name_obsolete">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_display_name_obsolete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">display_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_display_name</span><span class="p">,</span>
            <span class="s">&#39;Fred A.(weird).O Johnson&#39;</span><span class="p">,</span>
            <span class="s">&#39;Fred A.(weird).O Johnson&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Fred A. .O Johnson&quot;&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">display_name</span><span class="p">),</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">display_name</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;weird&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">display_name</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Fred A. .O Johnson&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_display_name_pharse_must_start_with_word"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_display_name_pharse_must_start_with_word">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_display_name_pharse_must_start_with_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">display_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_display_name</span><span class="p">,</span>
            <span class="s">&#39;(even weirder).name&#39;</span><span class="p">,</span>
            <span class="s">&#39;(even weirder).name&#39;</span><span class="p">,</span>
            <span class="s">&#39; &quot;.name&quot;&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">display_name</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">display_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;even weirder&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">display_name</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;.name&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_display_name_ending_with_obsolete"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_display_name_ending_with_obsolete">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_display_name_ending_with_obsolete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">display_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_display_name</span><span class="p">,</span>
            <span class="s">&#39;simple phrase.(with trailing comment):boo&#39;</span><span class="p">,</span>
            <span class="s">&#39;simple phrase.(with trailing comment)&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;simple phrase.&quot; &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
            <span class="s">&#39;:boo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">display_name</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">display_name</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;with trailing comment&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">display_name</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;simple phrase.&#39;</span><span class="p">)</span>

    <span class="c"># get_name_addr</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_name_addr_angle_addr_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_name_addr_angle_addr_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_name_addr_angle_addr_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_name_addr</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;name-addr&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_name_addr_atom_name"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_name_addr_atom_name">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_name_addr_atom_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_name_addr</span><span class="p">,</span>
            <span class="s">&#39;Dinsdale &lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Dinsdale &lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Dinsdale &lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;name-addr&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_name_addr_atom_name_with_cfws"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_name_addr_atom_name_with_cfws">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_name_addr_atom_name_with_cfws</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_name_addr</span><span class="p">,</span>
            <span class="s">&#39;(foo) Dinsdale (bar) &lt;dinsdale@example.com&gt; (bird)&#39;</span><span class="p">,</span>
            <span class="s">&#39;(foo) Dinsdale (bar) &lt;dinsdale@example.com&gt; (bird)&#39;</span><span class="p">,</span>
            <span class="s">&#39; Dinsdale &lt;dinsdale@example.com&gt; &#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_name_addr_name_with_cfws_and_dots"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_name_addr_name_with_cfws_and_dots">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_name_addr_name_with_cfws_and_dots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_name_addr</span><span class="p">,</span>
            <span class="s">&#39;(foo) Roy.A.Bear (bar) &lt;dinsdale@example.com&gt; (bird)&#39;</span><span class="p">,</span>
            <span class="s">&#39;(foo) Roy.A.Bear (bar) &lt;dinsdale@example.com&gt; (bird)&#39;</span><span class="p">,</span>
            <span class="s">&#39; &quot;Roy.A.Bear&quot; &lt;dinsdale@example.com&gt; &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Roy.A.Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_name_addr_qs_name"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_name_addr_qs_name">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_name_addr_qs_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_name_addr</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy.A.Bear&quot; &lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy.A.Bear&quot; &lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy.A.Bear&quot; &lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Roy.A.Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_name_addr_with_route"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_name_addr_with_route">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_name_addr_with_route</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_name_addr</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy.A.Bear&quot; &lt;@two.example.com: dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy.A.Bear&quot; &lt;@two.example.com: dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy.A.Bear&quot; &lt;@two.example.com: dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Roy.A.Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">route</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;two.example.com&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_name_addr_ends_at_special"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_name_addr_ends_at_special">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_name_addr_ends_at_special</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name_addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_name_addr</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy.A.Bear&quot; &lt;dinsdale@example.com&gt;, next&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy.A.Bear&quot; &lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy.A.Bear&quot; &lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;, next&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Roy.A.Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">name_addr</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_name_addr_no_content_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_name_addr_no_content_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_name_addr_no_content_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_name_addr</span><span class="p">(</span><span class="s">&#39; (foo) &#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_name_addr_no_content_before_special_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_name_addr_no_content_before_special_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_name_addr_no_content_before_special_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_name_addr</span><span class="p">(</span><span class="s">&#39; (foo) ,&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_name_addr_no_angle_after_display_name_raises"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_name_addr_no_angle_after_display_name_raises">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_name_addr_no_angle_after_display_name_raises</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">get_name_addr</span><span class="p">(</span><span class="s">&#39;foo bar&#39;</span><span class="p">)</span>

    <span class="c"># get_mailbox</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_mailbox_addr_spec_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_mailbox_addr_spec_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_mailbox_addr_spec_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mailbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_mailbox</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;mailbox&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_mailbox_angle_addr_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_mailbox_angle_addr_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_mailbox_angle_addr_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mailbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_mailbox</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;mailbox&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_mailbox_name_addr"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_mailbox_name_addr">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_mailbox_name_addr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mailbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_mailbox</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;mailbox&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Roy A. Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_mailbox_ends_at_special"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_mailbox_ends_at_special">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_mailbox_ends_at_special</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mailbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_mailbox</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;, rest&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;, rest&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;mailbox&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Roy A. Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_mailbox_quoted_strings_in_atom_list"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_mailbox_quoted_strings_in_atom_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_mailbox_quoted_strings_in_atom_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mailbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_mailbox</span><span class="p">,</span>
            <span class="s">&#39;&quot;&quot;example&quot; example&quot;@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;&quot;example&quot; example&quot;@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;example example@example.com&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;example example&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;&quot;example example&quot;@example.com&#39;</span><span class="p">)</span>

    <span class="c"># get_mailbox_list</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_mailbox_list_single_addr"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_mailbox_list_single_addr">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_mailbox_list_single_addr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mailbox_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_mailbox_list</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;mailbox-list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mailbox</span> <span class="o">=</span> <span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">route</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_mailbox_list_two_simple_addr"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_mailbox_list_two_simple_addr">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_mailbox_list_two_simple_addr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mailbox_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_mailbox_list</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com, dinsdale@test.example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com, dinsdale@test.example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com, dinsdale@test.example.com&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;mailbox-list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span>
                        <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span>
                        <span class="s">&#39;dinsdale@test.example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_mailbox_list_two_name_addr"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_mailbox_list_two_name_addr">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_mailbox_list_two_name_addr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mailbox_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_mailbox_list</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;,&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test.example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;,&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test.example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;,&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test.example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span>
                        <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                        <span class="s">&#39;Roy A. Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span>
                        <span class="s">&#39;dinsdale@test.example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                        <span class="s">&#39;Fred Flintstone&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_mailbox_list_two_complex"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_mailbox_list_two_complex">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_mailbox_list_two_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mailbox_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_mailbox_list</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;(foo) &quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;(bar),&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test.(bird)example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;(foo) &quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;(bar),&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test.(bird)example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39; &quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt; ,&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test. example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span>
                        <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                        <span class="s">&#39;Roy A. Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span>
                        <span class="s">&#39;dinsdale@test.example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                        <span class="s">&#39;Fred Flintstone&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_mailbox_list_unparseable_mailbox_null"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_mailbox_list_unparseable_mailbox_null">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_mailbox_list_unparseable_mailbox_null</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mailbox_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_mailbox_list</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot;[] dinsdale@example.com,&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test.(bird)example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot;[] dinsdale@example.com,&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test.(bird)example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot;[] dinsdale@example.com,&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test. example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">,</span>   <span class="c"># the &#39;extra&#39; text after the local part</span>
             <span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">,</span>   <span class="c"># the local part with no angle-addr</span>
             <span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">,</span>  <span class="c"># period in extra text (example.com)</span>
             <span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">],</span> <span class="c"># (bird) in valid address.</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span>
                        <span class="s">&#39;invalid-mailbox&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span>
                        <span class="s">&#39;Roy A. Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span>
                        <span class="s">&#39;&quot;Roy A. Bear&quot;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                        <span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span>
                        <span class="s">&#39;dinsdale@test.example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                        <span class="s">&#39;Fred Flintstone&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_mailbox_list_junk_after_valid_address"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_mailbox_list_junk_after_valid_address">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_mailbox_list_junk_after_valid_address</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mailbox_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_mailbox_list</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;@@,&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test.example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;@@,&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test.example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;@@,&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test.example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span>
                        <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                        <span class="s">&#39;Roy A. Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span>
                        <span class="s">&#39;invalid-mailbox&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                        <span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span>
                        <span class="s">&#39;dinsdale@test.example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                        <span class="s">&#39;Fred Flintstone&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_mailbox_list_empty_list_element"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_mailbox_list_empty_list_element">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_mailbox_list_empty_list_element</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mailbox_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_mailbox_list</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;, (bird),,&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test.example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;, (bird),,&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test.example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;, ,,&#39;</span>
                <span class="s">&#39; &quot;Fred Flintstone&quot; &lt;dinsdale@test.example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">,</span>
                         <span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span>
                        <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                        <span class="s">&#39;Roy A. Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span>
                        <span class="s">&#39;dinsdale@test.example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                        <span class="s">&#39;Fred Flintstone&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_mailbox_list_only_empty_elements"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_mailbox_list_only_empty_elements">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_mailbox_list_only_empty_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mailbox_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_mailbox_list</span><span class="p">,</span>
            <span class="s">&#39;(foo),, (bar)&#39;</span><span class="p">,</span>
            <span class="s">&#39;(foo),, (bar)&#39;</span><span class="p">,</span>
            <span class="s">&#39; ,, &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mailbox_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">,</span>
                         <span class="n">mailbox_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">)</span>

    <span class="c"># get_group_list</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_group_list_cfws_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_group_list_cfws_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_group_list_cfws_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">group_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_group_list</span><span class="p">,</span>
            <span class="s">&#39;(hidden);&#39;</span><span class="p">,</span>
            <span class="s">&#39;(hidden)&#39;</span><span class="p">,</span>
            <span class="s">&#39; &#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group_list</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;group-list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">group_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_group_list_mailbox_list"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_group_list_mailbox_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_group_list_mailbox_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">group_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_group_list</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.org, &quot;Fred A. Bear&quot; &lt;dinsdale@example.org&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.org, &quot;Fred A. Bear&quot; &lt;dinsdale@example.org&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.org, &quot;Fred A. Bear&quot; &lt;dinsdale@example.org&gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group_list</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;group-list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">group_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                         <span class="s">&#39;Fred A. Bear&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_group_list_obs_group_list"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_group_list_obs_group_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_group_list_obs_group_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">group_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_group_list</span><span class="p">,</span>
            <span class="s">&#39;, (foo),,(bar)&#39;</span><span class="p">,</span>
            <span class="s">&#39;, (foo),,(bar)&#39;</span><span class="p">,</span>
            <span class="s">&#39;, ,, &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group_list</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;group-list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">group_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_group_list_comment_only_invalid"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_group_list_comment_only_invalid">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_group_list_comment_only_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">group_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_group_list</span><span class="p">,</span>
            <span class="s">&#39;(bar)&#39;</span><span class="p">,</span>
            <span class="s">&#39;(bar)&#39;</span><span class="p">,</span>
            <span class="s">&#39; &#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group_list</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;group-list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">group_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>

    <span class="c"># get_group</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_group_empty"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_group_empty">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_group_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_group</span><span class="p">,</span>
            <span class="s">&#39;Monty Python:;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python:;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python:;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;group&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Monty Python&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">group</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_group_null_addr_spec"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_group_null_addr_spec">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_group_null_addr_spec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_group</span><span class="p">,</span>
            <span class="s">&#39;foo: &lt;&gt;;&#39;</span><span class="p">,</span>
            <span class="s">&#39;foo: &lt;&gt;;&#39;</span><span class="p">,</span>
            <span class="s">&#39;foo: &lt;&gt;;&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;&lt;&gt;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_group_cfws_only"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_group_cfws_only">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_group_cfws_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_group</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: (hidden);&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: (hidden);&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: ;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;group&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Monty Python&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">group</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_group_single_mailbox"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_group_single_mailbox">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_group_single_mailbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_group</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: &quot;Fred A. Bear&quot; &lt;dinsdale@example.com&gt;;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: &quot;Fred A. Bear&quot; &lt;dinsdale@example.com&gt;;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: &quot;Fred A. Bear&quot; &lt;dinsdale@example.com&gt;;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;group&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Monty Python&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">group</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span>
                         <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_group_mixed_list"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_group_mixed_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_group_mixed_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_group</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Monty Python: &quot;Fred A. Bear&quot; &lt;dinsdale@example.com&gt;,&#39;</span>
                <span class="s">&#39;(foo) Roger &lt;ping@exampele.com&gt;, x@test.example.com;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Monty Python: &quot;Fred A. Bear&quot; &lt;dinsdale@example.com&gt;,&#39;</span>
                <span class="s">&#39;(foo) Roger &lt;ping@exampele.com&gt;, x@test.example.com;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Monty Python: &quot;Fred A. Bear&quot; &lt;dinsdale@example.com&gt;,&#39;</span>
                <span class="s">&#39; Roger &lt;ping@exampele.com&gt;, x@test.example.com;&#39;</span><span class="p">),</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;group&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Monty Python&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">group</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                         <span class="s">&#39;Fred A. Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                         <span class="s">&#39;Roger&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_group_one_invalid"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_group_one_invalid">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_group_one_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_group</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Monty Python: &quot;Fred A. Bear&quot; &lt;dinsdale@example.com&gt;,&#39;</span>
                <span class="s">&#39;(foo) Roger ping@exampele.com, x@test.example.com;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Monty Python: &quot;Fred A. Bear&quot; &lt;dinsdale@example.com&gt;,&#39;</span>
                <span class="s">&#39;(foo) Roger ping@exampele.com, x@test.example.com;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Monty Python: &quot;Fred A. Bear&quot; &lt;dinsdale@example.com&gt;,&#39;</span>
                <span class="s">&#39; Roger ping@exampele.com, x@test.example.com;&#39;</span><span class="p">),</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">,</span>   <span class="c"># non-angle addr makes local part invalid</span>
             <span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">],</span>   <span class="c"># and its not obs-local either: no dots.</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;group&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Monty Python&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                         <span class="s">&#39;Fred A. Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>

    <span class="c"># get_address</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_simple"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">address</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span>
                         <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span>
                         <span class="s">&#39;mailbox&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_complex"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_complex">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address</span><span class="p">,</span>
            <span class="s">&#39;(foo) &quot;Fred A. Bear&quot; &lt;(bird)dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;(foo) &quot;Fred A. Bear&quot; &lt;(bird)dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39; &quot;Fred A. Bear&quot; &lt; dinsdale@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">address</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                         <span class="s">&#39;Fred A. Bear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span>
                         <span class="s">&#39;mailbox&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_rfc2047_display_name"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_rfc2047_display_name">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_rfc2047_display_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address</span><span class="p">,</span>
            <span class="s">&#39;=?utf-8?q?=C3=89ric?= &lt;foo@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Éric &lt;foo@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Éric &lt;foo@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">address</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                         <span class="s">&#39;Éric&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span>
                         <span class="s">&#39;mailbox&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_empty_group"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_empty_group">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_empty_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address</span><span class="p">,</span>
            <span class="s">&#39;Monty Python:;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python:;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python:;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">address</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span>
                         <span class="s">&#39;group&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                         <span class="s">&#39;Monty Python&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_group"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_group">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: x@example.com, y@example.com;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: x@example.com, y@example.com;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: x@example.com, y@example.com;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">address</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span>
                         <span class="s">&#39;group&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                         <span class="s">&#39;Monty Python&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_quoted_local_part"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_quoted_local_part">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_quoted_local_part</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address</span><span class="p">,</span>
            <span class="s">&#39;&quot;foo bar&quot;@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;foo bar&quot;@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;foo bar&quot;@example.com&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">address</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span>
                         <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span>
                         <span class="s">&#39;foo bar&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;mailbox&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_ends_at_special"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_ends_at_special">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_ends_at_special</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com, next&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;, next&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">address</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span>
                         <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;mailbox&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_invalid_mailbox_invalid"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_invalid_mailbox_invalid">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_invalid_mailbox_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address</span><span class="p">,</span>
            <span class="s">&#39;ping example.com, next&#39;</span><span class="p">,</span>
            <span class="s">&#39;ping example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;ping example.com&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">,</span>    <span class="c"># addr-spec with no domain</span>
             <span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">,</span>    <span class="c"># invalid local-part</span>
             <span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">,</span>    <span class="c"># missing .s in local-part</span>
            <span class="p">],</span>
            <span class="s">&#39;, next&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;ping example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;invalid-mailbox&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_quoted_strings_in_atom_list"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_quoted_strings_in_atom_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_quoted_strings_in_atom_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address</span><span class="p">,</span>
            <span class="s">&#39;&quot;&quot;example&quot; example&quot;@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;&quot;&quot;example&quot; example&quot;@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;example example@example.com&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;example example&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addr_spec</span><span class="p">,</span> <span class="s">&#39;&quot;example example&quot;@example.com&#39;</span><span class="p">)</span>


    <span class="c"># get_address_list</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_list_mailboxes_simple"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_list_mailboxes_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_list_mailboxes_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address_list</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="s">&#39;dinsdale@example.com&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address-list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">address_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">],</span>
                         <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">address_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_list_mailboxes_two_simple"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_list_mailboxes_two_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_list_mailboxes_two_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address_list</span><span class="p">,</span>
            <span class="s">&#39;foo@example.com, &quot;Fred A. Bar&quot; &lt;bar@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;foo@example.com, &quot;Fred A. Bar&quot; &lt;bar@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;foo@example.com, &quot;Fred A. Bar&quot; &lt;bar@example.com&gt;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address-list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">address_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">],</span>
                         <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&quot;Fred A. Bar&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_list_mailboxes_complex"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_list_mailboxes_complex">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_list_mailboxes_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address_list</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;, &#39;</span>
                <span class="s">&#39;(ping) Foo &lt;x@example.com&gt;,&#39;</span>
                <span class="s">&#39;Nobody Is. Special &lt;y@(bird)example.(bad)com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;, &#39;</span>
                <span class="s">&#39;(ping) Foo &lt;x@example.com&gt;,&#39;</span>
                <span class="s">&#39;Nobody Is. Special &lt;y@(bird)example.(bad)com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;, &#39;</span>
                <span class="s">&#39;Foo &lt;x@example.com&gt;,&#39;</span>
                <span class="s">&#39;&quot;Nobody Is. Special&quot; &lt;y@example. com&gt;&#39;</span><span class="p">),</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">,</span> <span class="c"># period in Is.</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">],</span> <span class="c"># cfws in domain</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address-list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">address_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">],</span>
                         <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;mailbox&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                         <span class="s">&#39;Nobody Is. Special&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_list_mailboxes_invalid_addresses"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_list_mailboxes_invalid_addresses">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_list_mailboxes_invalid_addresses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address_list</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;, &#39;</span>
                <span class="s">&#39;(ping) Foo x@example.com[],&#39;</span>
                <span class="s">&#39;Nobody Is. Special &lt;(bird)example.(bad)com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;, &#39;</span>
                <span class="s">&#39;(ping) Foo x@example.com[],&#39;</span>
                <span class="s">&#39;Nobody Is. Special &lt;(bird)example.(bad)com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&quot;Roy A. Bear&quot; &lt;dinsdale@example.com&gt;, &#39;</span>
                <span class="s">&#39;Foo x@example.com[],&#39;</span>
                <span class="s">&#39;&quot;Nobody Is. Special&quot; &lt; example. com&gt;&#39;</span><span class="p">),</span>
             <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">,</span>   <span class="c"># invalid address in list</span>
              <span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">,</span>   <span class="c"># &#39;Foo x&#39; local part invalid.</span>
              <span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">,</span>   <span class="c"># Missing . in &#39;Foo x&#39; local part</span>
              <span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">,</span>  <span class="c"># period in &#39;Is.&#39; disp-name phrase</span>
              <span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">,</span>   <span class="c"># no domain part in addr-spec</span>
              <span class="n">errors</span><span class="o">.</span><span class="n">ObsoleteHeaderDefect</span><span class="p">],</span> <span class="c"># addr-spec has comment in it</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address-list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">address_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">],</span>
                         <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;mailbox&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;Foo x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                <span class="s">&quot;Nobody Is. Special&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_list_group_empty"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_list_group_empty">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_list_group_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address_list</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: ;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: ;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: ;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address-list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">address_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="s">&#39;Monty Python&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_list_group_simple"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_list_group_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_list_group_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address_list</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: dinsdale@example.com;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: dinsdale@example.com;&#39;</span><span class="p">,</span>
            <span class="s">&#39;Monty Python: dinsdale@example.com;&#39;</span><span class="p">,</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address-list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">address_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                         <span class="s">&#39;Monty Python&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span>
                         <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_get_address_list_group_and_mailboxes"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_get_address_list_group_and_mailboxes">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_address_list_group_and_mailboxes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_get_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address_list</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Monty Python: dinsdale@example.com, &quot;Fred&quot; &lt;flint@example.com&gt;;, &#39;</span>
                <span class="s">&#39;Abe &lt;x@example.com&gt;, Bee &lt;y@example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Monty Python: dinsdale@example.com, &quot;Fred&quot; &lt;flint@example.com&gt;;, &#39;</span>
                <span class="s">&#39;Abe &lt;x@example.com&gt;, Bee &lt;y@example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Monty Python: dinsdale@example.com, &quot;Fred&quot; &lt;flint@example.com&gt;;, &#39;</span>
                <span class="s">&#39;Abe &lt;x@example.com&gt;, Bee &lt;y@example.com&gt;&#39;</span><span class="p">),</span>
            <span class="p">[],</span>
            <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">token_type</span><span class="p">,</span> <span class="s">&#39;address-list&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">,</span>
                         <span class="n">address_list</span><span class="o">.</span><span class="n">all_mailboxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span> <span class="s">&#39;dinsdale&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                         <span class="s">&#39;Monty Python&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">domain</span><span class="p">,</span>
                         <span class="s">&#39;example.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span>
                         <span class="s">&#39;flint&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span>
                         <span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">local_part</span><span class="p">,</span>
                         <span class="s">&#39;y&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">addresses</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                         <span class="nb">str</span><span class="p">(</span><span class="n">address_list</span><span class="o">.</span><span class="n">mailboxes</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
</div>
<div class="viewcode-block" id="TestParser.test_invalid_content_disposition"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_invalid_content_disposition">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_content_disposition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">content_disp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_parse_x</span><span class="p">(</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_content_disposition_header</span><span class="p">,</span>
            <span class="s">&quot;;attachment&quot;</span><span class="p">,</span> <span class="s">&quot;; attachment&quot;</span><span class="p">,</span> <span class="s">&quot;;attachment&quot;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span>
        <span class="p">)</span>
</div>
<div class="viewcode-block" id="TestParser.test_invalid_content_transfer_encoding"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestParser.test_invalid_content_transfer_encoding">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_content_transfer_encoding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cte</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_parse_x</span><span class="p">(</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse_content_transfer_encoding_header</span><span class="p">,</span>
            <span class="s">&quot;;foo&quot;</span><span class="p">,</span> <span class="s">&quot;;foo&quot;</span><span class="p">,</span> <span class="s">&quot;;foo&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidHeaderDefect</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span>
        <span class="p">)</span>
</div></div>
<span class="nd">@parameterize</span>
<div class="viewcode-block" id="Test_parse_mime_version"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.Test_parse_mime_version">[docs]</a><span class="k">class</span> <span class="nc">Test_parse_mime_version</span><span class="p">(</span><span class="n">TestParserMixin</span><span class="p">,</span> <span class="n">TestEmailBase</span><span class="p">):</span>

<div class="viewcode-block" id="Test_parse_mime_version.mime_version_as_value"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.Test_parse_mime_version.mime_version_as_value">[docs]</a>    <span class="k">def</span> <span class="nf">mime_version_as_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                              <span class="n">value</span><span class="p">,</span>
                              <span class="n">tl_str</span><span class="p">,</span>
                              <span class="n">tl_value</span><span class="p">,</span>
                              <span class="n">major</span><span class="p">,</span>
                              <span class="n">minor</span><span class="p">,</span>
                              <span class="n">defects</span><span class="p">):</span>
        <span class="n">mime_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_parse_x</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_mime_version</span><span class="p">,</span>
            <span class="n">value</span><span class="p">,</span> <span class="n">tl_str</span><span class="p">,</span> <span class="n">tl_value</span><span class="p">,</span> <span class="n">defects</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mime_version</span><span class="o">.</span><span class="n">major</span><span class="p">,</span> <span class="n">major</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mime_version</span><span class="o">.</span><span class="n">minor</span><span class="p">,</span> <span class="n">minor</span><span class="p">)</span>
</div>
    <span class="n">mime_version_params</span> <span class="o">=</span> <span class="p">{</span>

        <span class="s">&#39;rfc_2045_1&#39;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s">&#39;1.0&#39;</span><span class="p">,</span>
            <span class="s">&#39;1.0&#39;</span><span class="p">,</span>
            <span class="s">&#39;1.0&#39;</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="p">[]),</span>

        <span class="s">&#39;RFC_2045_2&#39;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s">&#39;1.0 (produced by MetaSend Vx.x)&#39;</span><span class="p">,</span>
            <span class="s">&#39;1.0 (produced by MetaSend Vx.x)&#39;</span><span class="p">,</span>
            <span class="s">&#39;1.0 &#39;</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="p">[]),</span>

        <span class="s">&#39;RFC_2045_3&#39;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s">&#39;(produced by MetaSend Vx.x) 1.0&#39;</span><span class="p">,</span>
            <span class="s">&#39;(produced by MetaSend Vx.x) 1.0&#39;</span><span class="p">,</span>
            <span class="s">&#39; 1.0&#39;</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="p">[]),</span>

        <span class="s">&#39;RFC_2045_4&#39;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s">&#39;1.(produced by MetaSend Vx.x)0&#39;</span><span class="p">,</span>
            <span class="s">&#39;1.(produced by MetaSend Vx.x)0&#39;</span><span class="p">,</span>
            <span class="s">&#39;1. 0&#39;</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="p">[]),</span>

        <span class="s">&#39;empty&#39;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="bp">None</span><span class="p">,</span>
            <span class="bp">None</span><span class="p">,</span>
            <span class="p">[</span><span class="n">errors</span><span class="o">.</span><span class="n">HeaderMissingRequiredValue</span><span class="p">]),</span>

        <span class="p">}</span>


</div>
<div class="viewcode-block" id="TestFolding"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestFolding">[docs]</a><span class="k">class</span> <span class="nc">TestFolding</span><span class="p">(</span><span class="n">TestEmailBase</span><span class="p">):</span>

    <span class="n">policy</span> <span class="o">=</span> <span class="n">policy</span><span class="o">.</span><span class="n">default</span>

    <span class="k">def</span> <span class="nf">_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tl</span><span class="p">,</span> <span class="n">folded</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">policy</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">tl</span><span class="o">.</span><span class="n">fold</span><span class="p">(</span><span class="n">policy</span><span class="o">=</span><span class="n">policy</span><span class="p">),</span> <span class="n">folded</span><span class="p">,</span> <span class="n">tl</span><span class="o">.</span><span class="n">ppstr</span><span class="p">())</span>

<div class="viewcode-block" id="TestFolding.test_simple_unstructured_no_folds"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestFolding.test_simple_unstructured_no_folds">[docs]</a>    <span class="k">def</span> <span class="nf">test_simple_unstructured_no_folds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_unstructured</span><span class="p">(</span><span class="s">&quot;This is a test&quot;</span><span class="p">),</span>
                   <span class="s">&quot;This is a test</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestFolding.test_simple_unstructured_folded"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestFolding.test_simple_unstructured_folded">[docs]</a>    <span class="k">def</span> <span class="nf">test_simple_unstructured_folded</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_unstructured</span><span class="p">(</span><span class="s">&quot;This is also a test, but this &quot;</span>
                        <span class="s">&quot;time there are enough words (and even some &quot;</span>
                        <span class="s">&quot;symbols) to make it wrap; at least in theory.&quot;</span><span class="p">),</span>
                   <span class="s">&quot;This is also a test, but this time there are enough &quot;</span>
                        <span class="s">&quot;words (and even some</span><span class="se">\n</span><span class="s">&quot;</span>
                   <span class="s">&quot; symbols) to make it wrap; at least in theory.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestFolding.test_unstructured_with_unicode_no_folds"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestFolding.test_unstructured_with_unicode_no_folds">[docs]</a>    <span class="k">def</span> <span class="nf">test_unstructured_with_unicode_no_folds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_unstructured</span><span class="p">(</span><span class="s">&quot;hübsch kleiner beißt&quot;</span><span class="p">),</span>
                   <span class="s">&quot;=?utf-8?q?h=C3=BCbsch_kleiner_bei=C3=9Ft?=</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestFolding.test_one_ew_on_each_of_two_wrapped_lines"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestFolding.test_one_ew_on_each_of_two_wrapped_lines">[docs]</a>    <span class="k">def</span> <span class="nf">test_one_ew_on_each_of_two_wrapped_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_unstructured</span><span class="p">(</span><span class="s">&quot;Mein kleiner Kaktus ist sehr &quot;</span>
                                           <span class="s">&quot;hübsch.  Es hat viele Stacheln &quot;</span>
                                           <span class="s">&quot;und oft beißt mich.&quot;</span><span class="p">),</span>
                   <span class="s">&quot;Mein kleiner Kaktus ist sehr =?utf-8?q?h=C3=BCbsch=2E?=  &quot;</span>
                        <span class="s">&quot;Es hat viele Stacheln</span><span class="se">\n</span><span class="s">&quot;</span>
                   <span class="s">&quot; und oft =?utf-8?q?bei=C3=9Ft?= mich.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestFolding.test_ews_combined_before_wrap"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestFolding.test_ews_combined_before_wrap">[docs]</a>    <span class="k">def</span> <span class="nf">test_ews_combined_before_wrap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_unstructured</span><span class="p">(</span><span class="s">&quot;Mein Kaktus ist hübsch.  &quot;</span>
                                           <span class="s">&quot;Es beißt mich.  &quot;</span>
                                           <span class="s">&quot;And that&#39;s all I&#39;m sayin.&quot;</span><span class="p">),</span>
                   <span class="s">&quot;Mein Kaktus ist =?utf-8?q?h=C3=BCbsch=2E__Es_bei=C3=9Ft?= &quot;</span>
                        <span class="s">&quot;mich.  And that&#39;s</span><span class="se">\n</span><span class="s">&quot;</span>
                   <span class="s">&quot; all I&#39;m sayin.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>

    <span class="c"># XXX Need test of an encoded word so long that it needs to be wrapped</span>
</div>
<div class="viewcode-block" id="TestFolding.test_simple_address"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestFolding.test_simple_address">[docs]</a>    <span class="k">def</span> <span class="nf">test_simple_address</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address_list</span><span class="p">(</span><span class="s">&quot;abc &lt;xyz@example.com&gt;&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
                   <span class="s">&quot;abc &lt;xyz@example.com&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestFolding.test_address_list_folding_at_commas"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestFolding.test_address_list_folding_at_commas">[docs]</a>    <span class="k">def</span> <span class="nf">test_address_list_folding_at_commas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address_list</span><span class="p">(</span><span class="s">&#39;abc &lt;xyz@example.com&gt;, &#39;</span>
                                            <span class="s">&#39;&quot;Fred Blunt&quot; &lt;sharp@example.com&gt;, &#39;</span>
                                            <span class="s">&#39;&quot;J.P.Cool&quot; &lt;hot@example.com&gt;, &#39;</span>
                                            <span class="s">&#39;&quot;K&lt;&gt;y&quot; &lt;key@example.com&gt;, &#39;</span>
                                            <span class="s">&#39;Firesale &lt;cheap@example.com&gt;, &#39;</span>
                                            <span class="s">&#39;&lt;end@example.com&gt;&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="s">&#39;abc &lt;xyz@example.com&gt;, &quot;Fred Blunt&quot; &lt;sharp@example.com&gt;,</span><span class="se">\n</span><span class="s">&#39;</span>
                    <span class="s">&#39; &quot;J.P.Cool&quot; &lt;hot@example.com&gt;, &quot;K&lt;&gt;y&quot; &lt;key@example.com&gt;,</span><span class="se">\n</span><span class="s">&#39;</span>
                    <span class="s">&#39; Firesale &lt;cheap@example.com&gt;, &lt;end@example.com&gt;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestFolding.test_address_list_with_unicode_names"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestFolding.test_address_list_with_unicode_names">[docs]</a>    <span class="k">def</span> <span class="nf">test_address_list_with_unicode_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address_list</span><span class="p">(</span>
            <span class="s">&#39;Hübsch Kaktus &lt;beautiful@example.com&gt;, &#39;</span>
                <span class="s">&#39;beißt beißt &lt;biter@example.com&gt;&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
            <span class="s">&#39;=?utf-8?q?H=C3=BCbsch?= Kaktus &lt;beautiful@example.com&gt;,</span><span class="se">\n</span><span class="s">&#39;</span>
                <span class="s">&#39; =?utf-8?q?bei=C3=9Ft_bei=C3=9Ft?= &lt;biter@example.com&gt;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestFolding.test_address_list_with_unicode_names_in_quotes"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestFolding.test_address_list_with_unicode_names_in_quotes">[docs]</a>    <span class="k">def</span> <span class="nf">test_address_list_with_unicode_names_in_quotes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_address_list</span><span class="p">(</span>
            <span class="s">&#39;&quot;Hübsch Kaktus&quot; &lt;beautiful@example.com&gt;, &#39;</span>
                <span class="s">&#39;&quot;beißt&quot; beißt &lt;biter@example.com&gt;&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
            <span class="s">&#39;=?utf-8?q?H=C3=BCbsch?= Kaktus &lt;beautiful@example.com&gt;,</span><span class="se">\n</span><span class="s">&#39;</span>
                <span class="s">&#39; =?utf-8?q?bei=C3=9Ft_bei=C3=9Ft?= &lt;biter@example.com&gt;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>

    <span class="c"># XXX Need tests with comments on various sides of a unicode token,</span>
    <span class="c"># and with unicode tokens in the comments.  Spaces inside the quotes</span>
    <span class="c"># currently don&#39;t do the right thing.</span>
</div>
<div class="viewcode-block" id="TestFolding.test_initial_whitespace_splitting"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestFolding.test_initial_whitespace_splitting">[docs]</a>    <span class="k">def</span> <span class="nf">test_initial_whitespace_splitting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_unstructured</span><span class="p">(</span><span class="s">&#39;   &#39;</span> <span class="o">+</span> <span class="s">&#39;x&#39;</span><span class="o">*</span><span class="mi">77</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">Header</span><span class="p">([</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">HeaderLabel</span><span class="p">([</span><span class="n">parser</span><span class="o">.</span><span class="n">ValueTerminal</span><span class="p">(</span><span class="s">&#39;test:&#39;</span><span class="p">,</span> <span class="s">&#39;atext&#39;</span><span class="p">)]),</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">CFWSList</span><span class="p">([</span><span class="n">parser</span><span class="o">.</span><span class="n">WhiteSpaceTerminal</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;fws&#39;</span><span class="p">)]),</span> <span class="n">body</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="s">&#39;test:   </span><span class="se">\n</span><span class="s"> &#39;</span> <span class="o">+</span> <span class="s">&#39;x&#39;</span><span class="o">*</span><span class="mi">77</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestFolding.test_whitespace_splitting"><a class="viewcode-back" href="../../../test.test_email.html#test.test_email.test__header_value_parser.TestFolding.test_whitespace_splitting">[docs]</a>    <span class="k">def</span> <span class="nf">test_whitespace_splitting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">get_unstructured</span><span class="p">(</span><span class="s">&#39;xxx   &#39;</span> <span class="o">+</span> <span class="s">&#39;y&#39;</span><span class="o">*</span><span class="mi">77</span><span class="p">),</span>
                   <span class="s">&#39;xxx  </span><span class="se">\n</span><span class="s"> &#39;</span> <span class="o">+</span> <span class="s">&#39;y&#39;</span><span class="o">*</span><span class="mi">77</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</div></div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Weldon Henson.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>